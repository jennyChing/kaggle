<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8"/>
  <title>
   Keeping up with the Books
  </title>
  <meta content="width=800, initial-scale=1, maximum-scale=1" name="viewport"/>
  <link href="css/reset.css" rel="stylesheet" type="text/css"/>
  <link href="css/footbag.css" rel="stylesheet" type="text/css"/>
  <meta content="https://keepingupwiththebooks.co.uk/img/400x400.jpg" property="og:image"/>
  <meta content="Keeping up with the Books" property="og:title"/>
  <meta content="Keeping Up Challenge" property="og:site_name"/>
  <meta content="See how many kick-ups you can do and how many special moves you can pull off in a minute." property="og:description"/>
  <meta content="381736891973773" property="fb:app_id"/>
  <link href="favicon.ico" rel="shortcut icon" type="image/x-icon"/>
  <link href="favicon.ico" rel="icon" type="image/x-icon"/>
 </head>
 <body>
  <div id="checkDiv">
  </div>
  <div class="canvasholder" id="phasercanvas">
   <div class="formholder">
    <input class="input-textfield" id="comp-firstname" maxlength="100" name="name" placeholder="First name" size="26" type="text"/>
    <input class="input-textfield" id="comp-lastname" maxlength="100" name="name" placeholder="Last name" size="26" type="text"/>
    <input class="input-textfield" id="comp-email" maxlength="100" name="email" placeholder="Email" size="26" type="email"/>
   </div>
  </div>
  <div class="rotate-msg">
  </div>
  <script src="js/jquery-1.11.1.min.js" type="text/javascript">
  </script>
  <script src="//connect.facebook.net/en_US/sdk.js" type="text/javascript">
  </script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/phaser/2.1.3/phaser.min.js" type="text/javascript">
  </script>
  <script src="js/FacebookStuff.js" type="text/javascript">
  </script>
  <script src="js/Boot.js" type="text/javascript">
  </script>
  <script src="js/Preloader.js" type="text/javascript">
  </script>
  <script src="js/StartScreen.js" type="text/javascript">
  </script>
  <script src="js/InstructionsScreen.js" type="text/javascript">
  </script>
  <script src="js/Game.js" type="text/javascript">
  </script>
  <script src="js/EndScreen.js" type="text/javascript">
  </script>
  <script src="js/CompetitionScreen.js" type="text/javascript">
  </script>
  <script type="text/javascript">
   (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

        ga('create', 'UA-57077682-1', 'auto');
        ga('send', 'pageview');

        var mainTimeline = this;


        //window.addEventListener('orientationchange', onOrientationChange);
        var supportsOrientationChange = "onorientationchange" in window,orientationEvent = supportsOrientationChange ? "orientationchange" : "resize";
        window.addEventListener(orientationEvent, onOrientationChange);
        window.addEventListener("deviceorientation", onHandleOrientation, true);

        function trackThisPageview(_tag){
            //console.log(ga, "pv", _tag);
            ga('send', 'pageview', {
                'page': '/'+_tag,
                'title': _tag
            });
        }

        function trackThisEvent(_tag){
            //console.log(ga, "ev", _tag);
            ga('send', 'event', _tag);
        }

        var wo,betaValue,gammaValue;

        function onOrientationChange() {
            wo = window.orientation;
        }

        onOrientationChange();

        function onHandleOrientation(e){
            betaValue = e.beta;
            gammaValue = e.gamma;
        }



        var mob = ( navigator.userAgent.match(/(Android|webOS|BlackBerry|IEMobile|Opera Mini|iPad|iPhone|iPod)/g) ? true : false );
        var bIsInitialised = false;

        window.onload = function(e) {
            if(window.orientation == 0 || window.orientation == 90 || window.orientation == -90 || window.orientation == 180){
                mob = true;
            }


            if(mob){
                handleScreenSizeFunction();
            }else{
                $(window).resize(e, function(){
                    handleStageResize();
                });
                handleStageResize();

                initialise();
            }
        }


        function handleStageResize() {
            var bh = $("#checkDiv").height();
            var bw = $("#checkDiv").width();
            if(bh &gt; 400){
                $('.canvasholder').css({top:(bh-400)/2});
            }
            if(bw &gt; 400){
                $('.canvasholder').css({left:(bw-800)/2});
            }
        }


        function handleScreenSizeFunction(){

            var supportsOrientationChange = "onorientationchange" in window,
                orientationEvent = supportsOrientationChange ? "orientationchange" : "resize";

            window.addEventListener(orientationEvent, function() {
                doViewPortThing();


            }, false);

            doViewPortThing();
        }

        function doViewPortThing(){
            var portraitMode = window.orientation == 0;

            if(portraitMode){
                $('.canvasholder').hide();
                $('.rotate-msg').show();
            }else{
                $('.canvasholder').show();
                $('.rotate-msg').hide();
                initialise();
            }
        }


        function initialise() {
            if(!bIsInitialised){
                var game = new Phaser.Game(800, 400, Phaser.AUTO, 'phasercanvas');
                game.state.add('Boot', MG.Boot);
                game.state.add('Preloader', MG.Preloader);
                game.state.add('StartScreen', MG.StartScreen);
                game.state.add('InstructionsScreen', MG.InstructionsScreen);
                game.state.add('Game', MG.Game);
                game.state.add('EndScreen', MG.EndScreen);
                game.state.add('CompetitionScreen', MG.CompetitionScreen);
                game.state.start('Boot');
                bIsInitialised = true;

                /*game.stage.scale.pageAlignHorizontally = true;
                game.stage.scale.pageAlignVeritcally = true;
                game.stage.scale.refresh();*/
            }
        }
  </script>
 </body>
</html>