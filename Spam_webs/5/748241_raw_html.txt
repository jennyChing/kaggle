<!-- Content annotation process successful -->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html lang="en-US" xml:lang="en-US" xmlns="http://www.w3.org/1999/xhtml">
 <!-- Content annotation process successful -->
 <head>
  <title>
   Home | Gap
  </title>
  <meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
  <meta content="en-US" http-equiv="Content-Language"/>
  <meta content="text/css" http-equiv="Content-Style-Type"/>
  <meta content="IE=edge" http-equiv="X-UA-Compatible"/>
  <meta content="noodp,noydir" name="robots"/>
  <meta content="There's more at Gap.com including Petites and Tall sizes, kids slim and husky sizes, and baby bedding. You'll also find your favorite T-shirts, jeans, shirts, outerwear and accessories. Gap has everything you need for the season" name="description"/>
  <link href="/favicon.ico" rel="shortcut icon"/>
  <link href="/favicon.ico" rel="icon"/>
  <link href="/assets/common/apple-touch-icon-144x144.png" rel="apple-touch-icon" sizes="144x144"/>
  <link href="/assets/common/apple-touch-icon-114x114.png" rel="apple-touch-icon" sizes="114x114"/>
  <link href="/assets/common/apple-touch-icon-72x72.png" rel="apple-touch-icon" sizes="72x72"/>
  <link href="/assets/common/apple-touch-icon-57x57.png" rel="apple-touch-icon" sizes="57x57"/>
  <link href="/assets/common/apple-touch-icon-144x144-precomposed.png" rel="apple-touch-icon-precomposed" sizes="144x144"/>
  <link href="/assets/common/apple-touch-icon-114x114-precomposed.png" rel="apple-touch-icon-precomposed" sizes="114x114"/>
  <link href="/assets/common/apple-touch-icon-72x72-precomposed.png" rel="apple-touch-icon-precomposed" sizes="72x72"/>
  <link href="/assets/common/apple-touch-icon-57x57-precomposed.png" rel="apple-touch-icon-precomposed" sizes="57x57"/>
  <link href="/gzip_1482764957/optimizedBundles/globalOptimized.css" media="screen, print" rel="stylesheet" type="text/css"/>
  <style type="text/css">
   #universalBarTabs {
	    background: white;
	}
	#universalInlineBagContainer, #universalMarketingContainerTop {background:url(/content/0008/703/523/universalBar_bkg.png) repeat-x; }
	.universalBarBackground {background:url(/content/0008/703/523/universalBar_bkg.png) repeat-x; }
  </style>
  <style type="text/css">
   .universalButtonSprite {
	   background: url(/content/0005/771/822/universal_button_sprite.gif) no-repeat top left;
	   width: 0px;
	 }
  </style>
  <link href="/content/0005/771/822/universal_button_sprites.css" rel="stylesheet" type="text/css"/>
  <style type="text/css">
   .brandButtonsAndAssetsSprite {
	   background: url(/content/0002/444/294/brand_buttons_and_assets_sprite.gif) no-repeat top left;
	   width: 0px;
	}
  </style>
  <link href="/content/0002/444/294/brand_buttons_and_assets_sprites.css" rel="stylesheet" type="text/css"/>
  <style type="text/css">
   .brand {
	   background: url(/content/0008/703/523/universal_bar_sprites.png) no-repeat top left;
	   width: 0px;
	 }
  </style>
  <link href="/content/0008/703/523/universal_bar_sprites.css" rel="stylesheet" type="text/css"/>
  <link href="/css/common/layouts/en/nonBrowse.css" rel="stylesheet" type="text/css"/>
  <link href="/css/customerService/layouts/en/customerService.css" rel="stylesheet" type="text/css"/>
  <style type="text/css">
   #mainContent {width: 988px; border:0;}
	#mainContentContainer {padding:0px 0px 0px 0px;}
	#mainContentContainer #mainContent {width: 826px;}
	#upperFoot #upperLtFootContainer {width: 604px;}
  </style>
  <link href="/css/customerService/landing/en/landing.css" rel="stylesheet" type="text/css"/>
  <style media="screen" title="styles" type="text/css">
  </style>
  <!--[if (lt IE 9) &amp; (!IEMobile)]&gt;

        &lt;link href="/Asset_Archive/static-content/build/css/meta_common.css" rel="stylesheet"&gt;
        &lt;![endif]-->
  <!--[if (gte IE 9) | (IEMobile)]&gt;&lt;!-->
  <link href="/Asset_Archive/static-content/build/css/meta_common.css" rel="stylesheet"/>
  <!--&lt;![endif]-->
  <script>
   /*! grunt-grunticon Stylesheet Loader - v2.1.3 | https://github.com/filamentgroup/grunticon | (c) 2015 Scott Jehl, Filament Group, Inc. | MIT license. */
(function(e){function t(t,n,r,o){"use strict";function a(){for(var e,n=0;u.length&gt;n;n++)u[n].href&amp;&amp;u[n].href.indexOf(t)&gt;-1&amp;&amp;(e=!0);e?i.media=r||"all":setTimeout(a)}var i=e.document.createElement("link"),l=n||e.document.getElementsByTagName("script")[0],u=e.document.styleSheets;return i.rel="stylesheet",i.href=t,i.media="only x",i.onload=o||null,l.parentNode.insertBefore(i,l),a(),i}var n=function(r,o){"use strict";if(r&amp;&amp;3===r.length){var a=e.navigator,i=e.Image,l=!(!document.createElementNS||!document.createElementNS("http://www.w3.org/2000/svg","svg").createSVGRect||!document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#Image","1.1")||e.opera&amp;&amp;-1===a.userAgent.indexOf("Chrome")||-1!==a.userAgent.indexOf("Series40")),u=new i;u.onerror=function(){n.method="png",n.href=r[2],t(r[2])},u.onload=function(){var e=1===u.width&amp;&amp;1===u.height,a=r[e&amp;&amp;l?0:e?1:2];n.method=e&amp;&amp;l?"svg":e?"datapng":"png",n.href=a,t(a,null,null,o)},u.src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==",document.documentElement.className+=" grunticon"}};n.loadCSS=t,e.grunticon=n})(this);(function(e,t){"use strict";var n=t.document,r="grunticon:",o=function(e){if(n.attachEvent?"complete"===n.readyState:"loading"!==n.readyState)e();else{var t=!1;n.addEventListener("readystatechange",function(){t||(t=!0,e())},!1)}},a=function(e){return t.document.querySelector('link[href$="'+e+'"]')},c=function(e){var t,n,o,a,c,i,u={};if(t=e.sheet,!t)return u;n=t.cssRules?t.cssRules:t.rules;for(var l=0;n.length&gt;l;l++)o=n[l].cssText,a=r+n[l].selectorText,c=o.split(");")[0].match(/US\-ASCII\,([^"']+)/),c&amp;&amp;c[1]&amp;&amp;(i=decodeURIComponent(c[1]),u[a]=i);return u},i=function(e){var t,o,a;o="data-grunticon-embed";for(var c in e){a=c.slice(r.length);try{t=n.querySelectorAll(a+"["+o+"]")}catch(i){continue}if(t.length)for(var u=0;t.length&gt;u;u++)t[u].innerHTML=e[c],t[u].style.backgroundImage="none",t[u].removeAttribute(o)}return t},u=function(t){"svg"===e.method&amp;&amp;o(function(){i(c(a(e.href))),"function"==typeof t&amp;&amp;t()})};e.embedIcons=i,e.getCSS=a,e.getIcons=c,e.ready=o,e.svgLoadedCallback=u,e.embedSVG=u})(grunticon,this);

  // GRUNTICON FOR BRAND LOGOS
  grunticon(["/Asset_Archive/static-content/build/grunticon/logos/icons.data.svg.css", "/Asset_Archive/static-content/build/grunticon/logos/icons.data.png.css", "/Asset_Archive/static-content/build/grunticon/logos/icons.fallback.css"]);

  // GRUNTICON FOR ALL OTHER ICONS
  grunticon(["/Asset_Archive/static-content/build/grunticon/icons/icons.data.svg.css", "/Asset_Archive/static-content/build/grunticon/icons/icons.data.png.css", "/Asset_Archive/static-content/build/grunticon/icons/icons.fallback.css"], grunticon.svgLoadedCallback);
  </script>
 </head>
 <body>
  <noscript>
   <!-- GRUNTICON FOR BRAND LOGOS -->
   <link href="/Asset_Archive/static-content/build/grunticon/logos/icons.fallback.css" rel="stylesheet"/>
   <!-- GRUNTICON FOR ALL OTHER ICONS -->
   <link href="/Asset_Archive/static-content/build/grunticon/icons/icons.fallback.css" rel="stylesheet"/>
  </noscript>
  <script type="text/javascript">
   //&lt;![CDATA[
    var pasRepository = {
        attrNames : null
       };
	// ]]&gt;
  </script>
  <!-- @TemplateContentLayout(templateRegionName:"gid.common.siteWide.businessCode.pasAttributes") -->
  <!-- Begin Enabling PAS Testing -->
  <script type="text/javascript">
   //&lt;![CDATA[
    var pasRepository = {
        attrNames : "GPDIVPREF,EMAILUS,CARDSTATUS"
    };
// ]]&gt;
  </script>
  <!-- End Enabling PAS Testing -->
  <!-- Ensure that date is always formated for en_US for processing at the JavaScript tier -->
  <!-- Reset localeCode to default standard -->
  <script src="/gzip_878393942/optimizedBundles/tealeafOptimized.js" type="text/javascript">
  </script>
  <script type="text/javascript">
   //&lt;![CDATA[
	var environmentModelValues = {
    	isLoggingServiceActive: 'false',	
		isReserveInStoreActive: 'true'
    };
    
	TeaLeaf.Event.Configuration.tlqueueeventstimer = "900000" || 900000,
    TeaLeaf.Event.Configuration.tlqueueeventsmaxsz = "8192" || 8192
 // ]]&gt;
  </script>
  <script type="text/javascript">
   var resourceBundleValues = {
        strOutOfStockMessageWithSizes : "not available in",
        strOutOfStockWithoutSizes : "not available",
        strQuantityLabel : "select qty",
        strOtherVariants : "also in",
        strColorLabel : "Select",
        strSizeDim1Label : "Select",
        strSizeDim2Label : "Select",
        strBagErrorPrefix : "please select a",
        strBagErrorPrefix2 : "please select an",
        strBagErrorSuffix : "before adding to bag",
        strOnOrderMessage : "on order &#8211; est&#46; ship date&#58;",
        strOnOrderHoverMessage : "on order &#8211;",
        strOnOrderHoverMessageShipDate : "click for ship date",
        strLowInventoryMessage : "low inventory, order now for best selection",
        strProductDetailLink : "more details",
        strSizeChartLink : "size chart",
        strVariantLegalCopy : "prices may vary",
        strIsImported : "Imported.",
        strIsNotImported : "Made in USA.",
        strRegularVariant : "regular",
        strColorOutOfStockLabel : "no longer available",
        strAddToBagAltText : "Select color and size before adding to bag",
        strAddToBagAltTextActive : "Click to add item to bag",
        strAddToBagAltTextOut : "Out of stock",
        strAddToBagAltTextOutfit : "Click to add selected items to bag",
        strinlineBagScreenTextReaderMessage : "Added to bag: #{styleDescription}, color: #{color}, size: #{size}, price: #{subTotal}, quantity: #{quantity}",
        common: {
            monday: "Monday",
            tuesday: "Tuesday",
            wednesday: "Wednesday",
            thursday: "Thursday",
            friday: "Friday",
            saturday: "Saturday",
            sunday: "Sunday",
            january: "January",
            february: "February",
            march: "March",
            april: "April",
            may: "May",
            june: "June",
            july: "July",
            august: "August",
            september: "September",
            october: "October",
            november: "November",
            december: "December",
            regularVariant: "Regular"
        },
        profile: {
        	personalizedMyAccount : "'s account",
        	yourAccount : "Your account",
        	signOut : "Sign out",
        	isRecognizedUser : "Not you?",
        	changeUserMessageTemplate : "(Not #{name}?)",
        	signIn : "Sign in",
        	orderStatus : "Orders and returns",
        	orderStatusV2 : "Order Status",
        	shippingTo : "Shipping to",
        	weak : "Weak",
        	fair : "Fair",
        	good : "Good",
        	strong : "Strong",
        	sameAsUser : "Weak: Same as user",
        	sameAsHint : "Weak: Same as hint",
        	rewards : "Rewards",
        	accountSettings : "Account Settings",
        	haveAnAccount : "Have an account?"      	
        },
        inLineBag :{
            labelColor : "Color",
	        labelSize : "Size",
			labelQuantity : "Qty",
			labelPrice : "Price",
			itemInSingular : "item in",
			itemInPlural : "items in",
			lineItemJp : "???common.universal.lineItem.text.lineItemJp???",
			lineItemBag : "bag",
			yourBag : "your bag",
			addedTo : "Added to",
			inlineBagItemSingular : "item in",
			inlineBagItemPlural : "items in",
	    	inlineBagItemJp : "???common.universal.navigation.TopNavCommon.text.inlineBagItemJp???"
	    },
	    discounts :{
	    	rewardMessage : "Redeem Your &lt;div id='ribbon'&gt;&lt;div id='ribbonAmount'&gt;$#{rewardValue}&lt;/div&gt;&lt;/div&gt; in Rewards",
	    	offersAndRewardsMessage : "&lt;div id='ribbonOffersAndRewards'&gt;&lt;div id='ribbonAmountOffersAndRewards'&gt;$#{rewardValue}&lt;/div&gt;&lt;/div&gt;"
		},
        product : {
	        groupNameOverview : "overview",
	        groupNameTips : "tips",
	        groupNameFabric : "fabric &amp; care",
	        groupNameFit : "fit &amp; sizing",
	        groupNameDefault : "fit &amp; sizing",
	        productImage : "product image",
	        productColor : "color",
	        thumbnail : "thumbnail",
	        productText : "product",
	        outfitView : "Outfit View",
	        closeQuicklook : "close quicklook",
	        additionalView : "Additional View",
	        sizeChart : "Size Chart",
	        colorAndSizeSelectError : "Select color and size before adding to bag",
	        sizeTabText : "Size &amp; Color",
	        overviewTabText : "Overview",
	        imageText : "image"
         },
       	infoPopupsAltTextClose : "Close",
       	checkOut : {
       		noGiftWrapText : "No gift wrap",
       		promotionDetailsText : "Promotion Details",
       		shoppingBagCountText: "&lt;span&gt;Your Shopping Bag&lt;/span&gt;: #{count} item&lt;/span&gt;",
       		shoppingBagCountPluralText: "&lt;span&gt;Your Shopping Bag&lt;/span&gt;: #{count} items&lt;/span&gt;"
       	},
       	currency : "$",
       	localeFrenchCanada: "fr_CA",
       	localeEnglishCanada: "en_CA",
       	courrencyCode : "USD",
       	priceSuffix : ".00",
       	intlShipSiteRedirectContent : {
           	ca : {
		        siteSelectorLabel : "Shop the Canada site",           	 
		        contentMessage1 : "Free shipping on orders of $50 or more",           	 
		        contentMessage2 : "All orders, all the time",           	 
		        contentMessage3 : "No duties. No handling fees. No kidding.",           	 
		        calloutMessage : "Selecting this option redirects you to the Canadian site."
       		},
       		gb : {
		        siteSelectorLabel : "Shop the EU site",           	 
		        contentMessage1 : "Delivery Simplified: 4 ",           	 
		        contentMessage2 : "Returns are Free",           	 
		        contentMessage3 : "2 Stores, 1 Checkout",           	 
		        calloutMessage : "Selecting this option redirects you to our EU site."
       		}           				               	 
       	},
       	brand : {
       		brandUrl1 : "gap.com",
       		brandUrl2 : "bananarepublic.com",
       		brandUrl3 : "oldnavy.com",
       		brandUrl4 : "piperlime.com",
       		brandUrl10 : "athleta.com",
       		brandUrl7 : "gapcanada.ca",
       		brandUrl8 : "bananarepublic.ca",
       		brandUrl9 : "oldnavy.ca",
       		brandUrl20 : "gap.co.uk",
       		brandUrl21 : "bananarepublic.co.uk",
       		brandUrl24 : "gap.co.jp",
       		brandUrl25 : "bananarepublic.co.jp",
       		brandUrl28 : "gap.eu",
       		brandUrl29 : "bananarepublic.eu"
       	}
       	,
       	storeLocations : {
       		fistTitle : "Find In Store",
       		storesWithin : "Stores within",
       		storesWithin2 : "",	
       		milesOf : "miles of",	
       		milesOfWrapped : "miles of",	
       		locNotFound : "Check stores near you for this product.",	
       		edit : "Edit",
            continueBTN : "Continue",   
            validateUsCanMsg : "Please enter a valid ZIP code",  
            limited : "Limited",
            available : "Available",
            unavailable : "Unavailable",
            sortBy : "Sort by",
            headerStores : "Stores",
            headerHours :  "Hours",
            headerDistance : "Distance",
            headerAvailability : "Availability",
            legalLink : "???common.universal.storeLocations.list.legalLink???",
            phoneLabel : "Phone",
            weekdayHoursLabel : "Store Hours",
            specialHoursLabel : "Special Hours",
            updatedAvailability : "(updated every 20-30 minutes)"
       	},
        storeLocator : {
            mapDirectionsMsg : "Enter a Street Address, City, State or ZIP code",
            findAStore : "Find a store near",
            clearSearch : "Clear",
            findStores : "Find",
            storeDetails : "Store Detail",
            getDirections : "Get Directions",
            mapsApiLoadFailMsg : "We are sorry Google Maps did not load. Please try again.",
            noStoresFoundMsg : "Sorry, we have no stores that fit your search criteria. &lt;br/&gt; Please change your search and try again.",
            legalPleaseNote:  "PLEASE NOTE: Product location information is updated every 20-30 minutes.",
            legalText:  "In-store prices may vary and may differ from online prices.",

            onlyAvailableOnline : "This item is not currently available in stores.",
            selectASize : "Please select a size above to see store availability.",
            noStoresInList : "Sorry, we have no stores that fit your search criteria. Please edit your search above to try again.",
            unavailableInStores: "Sorry, your selection is currently unavailable in the stores. Please change your selection and try again.",
            postalCodeEditTitle: "Check store availability",
            milesOfPcode : "miles of ZIP code",   
			within: "within",
            storePricesVary: "store prices may vary",
            limitedBubble:  "Before you visit the store, please call to make sure this item is still in stock. A sales associate can put it on hold for you.",
            limitedBubbleReservable:  "To ensure availability, click the &quot;Reserve in Store&quot; button to have a sales associate look for the item and hold it for you.",
            unitOfMeasure: "miles",
            fisCheckStoreAvailability: "Click &quot;Find In Store&quot; to check store availability",
            checkStoreAvailability: "check store availability",
            select: "select"
        },
        reserveInStore: {
        	featureButtonLabel: "Reserve In Store",
            baseTitle: "Reserve In Store at",
            required: "Required",
        	needInfoHeader: "We need a little info to reserve this item",
        	emailMessage: "We'll email you as soon as we locate your item,&lt;br/&gt;usually in about an hour",
        	firstNameLabel: "First Name",
        	lastNameLabel: "Last Name",
        	emailLabel: "Email",
        	textMessage: "Should we text you, too? (optional)",
			optInMessage: "Sign up for our emails to get first dibs on new arrivals, can't-miss deals and more.",
        	specialHandling: "Is this a gift, Gap?",
        	mobileNumberLabel: "Mobile number",
        	includeAreaCode: "Include area code",
        	dataRatesMessage: "Data rates may apply",
        	reserveButtonLabel: "Reserve",
        	buttonSeperator: "or",
        	cancelButtonLabel: "Cancel",
        	legalMessage: "Used only to contact you about your request.",
        	firstNameError: "Please provide your first name",
        	lastNameError: "Please provide your last name",
        	emailError: "Type a valid email address",
        	mobileNumberError: "Type a valid mobile phone number",
        	thanksHeaderLine1MinusName: "Thanks, #{NAME}!",
        	thanksOpenHeaderLine2: "We'll look for your item now",
        	thanksClosedHeaderLine2: "We'll look for your item when the store opens",
        	risCloserOpen: "It's that easy!",
        	risCloserClosed: "We'll be in touch again soon!",
			risInfoBodyOpen1: "In about an hour, we'll send you an email to confirm that your item is ready. (We'll text you, too, if you chose that option.)",
			risInfoBodyOpen2: "Check the email for where to pick up your item in the store.",
			risInfoBodyOpen3: "We'll hold your item until closing time,",
			risInfoBodyClosed1: "The store is currently closed.  As soon as it opens, we'll look for your item.",
			risInfoBodyClosed2: "After we find it, we'll send you an email to confirm that the item is ready for you&#151; usually within an hour of opening. (We'll text you, too, if you chose that option.)",
			risInfoBodyClosed3: "",
			risOpenerOpen: "After we find it:",
			risOpenerClosed: "",
			continueButtonLabel: "Continue Shopping",
			titleRequestReceived: ": Request Received",
			storeSelected: "You've selected this store:",
			storeHours: "Store Hours",
			itemLabel: "Item",
			colorLabel: "Color",
			sizeLabel: "Size",
			priceLabel: "Price",
			storeHoursLabel: "Store Hours:",
			specialHoursLabel: "Special Hours:",
			youveSelected: "You've selected this store:",
			holdMessage: "PLEASE NOTE: You can reserve up to five items per day. After we confirm (by email or text) that the item is ready, we hold it for you until the store closes the following day.",
			tryAnotherStore: "Try another store",
			openClosedServiceFailureHeader2: "We'll look for your item",
			openClosedServiceFailureBody: "After we find it, we'll send you an email to confirm that the item is ready for you. (We'll text you, too, if you chose that option.)",
			reservationRequestFailureHeader: "Technical Difficulties",
			reservationRequestFailureBody: "We are currently experiencing technical difficulties. Please try again later or call us for assistance.",
			
			overCapacityTitleExtension: ": Request not completed",
			overCapacityHeaderLine1: "We're sorry, this store is",
			overCapacityHeaderLine2: "over its daily reservation limit.",
			overCapacityOpener: "You can try the following:",
			overCapacityInfoBody1: "Reserve this item today at &lt;a href='' id='risAnotherStore'&gt;another nearby store&lt;/a&gt;.",
			overCapacityInfoBody2: "Call the &lt;a href='/customerService/store.do?storeid=#{storeId}'&gt;#{storeName}&lt;/a&gt; store at #{phoneNumber} directly to reserve your item.",
			overCapacityInfoBody3: "Reserve this item tomorrow at &lt;a href='/customerService/store.do?storeid=#{storeId}'&gt;#{storeName}&lt;/a&gt;.",
			overCapacityCloser: "We apologize for the inconvenience."
        }
        
       	

    };
  </script>
  <script type="text/javascript">
   var isClientStateManagementActive = "true";
  </script>
  <script type="text/javascript">
   /**
	 * GIDBrandSiteConstructor is a class that is a data store for sister GID site data.
	 * Instantiated as gidBrandSiteConstruct in JsGlobalFunctions.jsp by a method in NavLogicTag.java
	 * @constructor
	 *
	 * @author Byung Kim
	 * @date 10/24/2007
	 */
	function GIDBrandSiteConstructor (
			currentBrandCode,
			cookieDomain,
			currentBrandSiteId,
			sbsViewAllState,
			sitesVisited,
			sbsPreferences,
			sslPrefix,
			isCommonDomainOn,
			renderOnCurrentBrandUrl,
			sisterSiteActionPath,
			gidBrandSites) {
			this.currentBrandCode = currentBrandCode;
			this.cookieDomain  = cookieDomain;
			this.currentBrandSiteId = currentBrandSiteId;
			this.sbsViewAllState = sbsViewAllState;
			this.sbsPreferences = sbsPreferences;
			this.sslPrefix = sslPrefix;
			this.isCommonDomainOn  = isCommonDomainOn;
			this.renderOnCurrentBrandUrl  = renderOnCurrentBrandUrl;
			this.sisterSiteActionPath = sisterSiteActionPath;
			this.hasGIDBrandSites = (gidBrandSites &amp;&amp; gidBrandSites.length &gt; 0);
			this.sisterSiteUrlParams = "?isViewAll=" + this.sbsViewAllState + this.sbsPreferences;
			this.tempBrandSites = gidBrandSites;
			this.gidBrandSites = [];
			this.visitedSites = sitesVisited;
	};
	
 	
	var gidBrandSiteConstruct = new GIDBrandSiteConstructor(1, ".gap.com", "GAP", 0, "1", "", "secure-", true,false, "/browse/sistersitelink.do", [{brandName:"gap.com",brandCode:"1",brandDisplayName:"Gap",brandAbbr:"GAP",secureUrl:"https://secure-www.gap.com",unsecureUrl:"http://www.gap.com",imageServiceUrl:""},{brandName:"oldnavy.com",brandCode:"3",brandDisplayName:"Old Navy",brandAbbr:"ON",secureUrl:"https://secure-oldnavy.gap.com",unsecureUrl:"http://oldnavy.gap.com",imageServiceUrl:""},{brandName:"bananarepublic.com",brandCode:"2",brandDisplayName:"Banana Republic",brandAbbr:"BR",secureUrl:"https://secure-bananarepublic.gap.com",unsecureUrl:"http://bananarepublic.gap.com",imageServiceUrl:""},{brandName:"Athleta.com",brandCode:"10",brandDisplayName:"Athleta",brandAbbr:"AT",secureUrl:"https://secure-athleta.gap.com",unsecureUrl:"http://athleta.gap.com",imageServiceUrl:""}]);
  </script>
  <script src="/gzip_1415405703/optimizedBundles/globalEnhancedOptimized.js" type="text/javascript">
  </script>
  <script type="text/javascript">
   // Activation of the navigationService and associated Managers
				navigationService.model.isActive = ('true' === 'true')
		                || ('true' === 'true')
		                || ('true' === 'true')
		                || ('true' === 'true');
				navigationService.paginationHelper.constants.MAX_PRODUCTS_PER_PAGE = Number('300') || 24;
  </script>
  <script src="/gid/js/common/layouts/en/iPad2.js">
  </script>
  <script type="text/javascript">
   if (navigator.userAgent.indexOf("iPad") != -1) {
			iPadInit();
			if (window.location.pathname.indexOf("/browse/") === 0) {
				window.addEventListener('touchstart', function(evt) { imageLoader.fetch(); }, false);
			}
		}
  </script>
  <script type="text/javascript">
   // &lt;![CDATA[

		Object.extend(brandConst, {

			UNIVERSAL_BUTTON_CONTENT_PATH : "/content/0005/771/822/",
			BRANDED_BUTTON_AND_ASSET_CONTENT_PATH : "/content/0002/444/294/",
			BRAND1_BADGE_CONTENT_PATH : "/content/0001/195/897/",
			BRAND2_BADGE_CONTENT_PATH : "/content/0001/195/955/",
			BRAND3_BADGE_CONTENT_PATH : "/content/0001/195/958/",
			BRAND4_BADGE_CONTENT_PATH : "/content/0008/703/911/",
			BRAND7_BADGE_CONTENT_PATH : "/content/0001/195/897/",
			BRAND8_BADGE_CONTENT_PATH : "/content/0001/195/955/",
			BRAND9_BADGE_CONTENT_PATH : "/content/0001/195/958/",
			BRAND10_BADGE_CONTENT_PATH : "/content/0008/723/283/",
			BRAND20_BADGE_CONTENT_PATH : "/content/0001/195/897/",
			BRAND21_BADGE_CONTENT_PATH : "/content/0001/195/955/",
			BRAND24_BADGE_CONTENT_PATH : "/content/0001/195/897/",
			BRAND25_BADGE_CONTENT_PATH : "/content/0001/195/955/",
			BRAND28_BADGE_CONTENT_PATH : "/content/0001/195/897/",
			BRAND29_BADGE_CONTENT_PATH : "/content/0001/195/955/",
			
			BRAND_LOCALE : "en_US",
			COUNTRY_NAME_UK : "United Kingdom",
            CATALOG_2_ACTIVE: "",
            INTERNATIONAL_SHIPPING_CURRENCY_CODE: "",
            INTERNATIONAL_SHIPPING_COUNTRY_CODE: "",
            PRODUCT_2_ACTION: "product.do",
            PRODUCTDATA_2_ACTION: "productData.do",
            DIVISION_2_ACTION: "division.do",
            SUBDIVISION_2_ACTION: "subdivision.do",
            HOME_2_ACTION: "home.do",
            DATE_IN_USE: "07/13/2015 03:28 PM",
            PREVIOUS_LOCALE : "en_US",
            
            IS_NAV2_ENABLED: 'false',
            IS_FACET_ENABLED: 'true',
            IS_OPTIMIZED_PRODUCT_PAGE_ACTIVE: 'false' ==  "true"
            
		});

		/** 
		 * Call to setBrandSites must occur AFTER the various brand BADGE_CONTENT_PATH variables are set.
		 * Prior to this call, other brand information will not be available via gidBrandSiteConstruct.  
		 **/
		if (window["gidBrandSiteConstruct"] != undefined) {
			gidBrandSiteConstruct.setBrandSites();
		}
		
	// ]]&gt;
  </script>
  <!-- reportingServiceType = h -->
  <!-- catalogServiceType = 2 -->
  <!-- catalogCacheType = 0 -->
  <!-- catalogDormantTesting = false -->
  <!-- catalogRemoteCacheActive =  -->
  <!-- catalogNavigationActive = true -->
  <!-- catalogSwatchesActive =  -->
  <!-- catalogCategoryActive = true -->
  <!-- catalogCategorySearchActive = true -->
  <!-- catalogSearchActive = true -->
  <!-- catalogMppActive = true -->
  <!-- InternationalShippingCurrencyCode =  -->
  <!-- InternationalShippingCountryCode=  -->
  <!-- InternationalForeignExchangeRate =  -->
  <!-- InternationalForeignExchangeRateQuoteId =  -->
  <!-- InternationalForeignExchangeRoundUpValue =  -->
  <!-- InternationalShippingPremiumPriceValues =  -->
  <!-- isProductCategoryFacetedSearchActive = true -->
  <!-- searchEnabled = true -->
  <!-- isFacetedCategoryActive = true -->
  <!-- isFacetedCategorySearchActive = true -->
  <!-- brandTemplateServiceActive = true -->
  <!-- categoryPageCachingActive = true -->
  <!-- isStoreLocationsActive  = true -->
  <!-- isMerchLocatorActive  = true -->
  <!-- shippingOptionsFeatureActive  = true -->
  <!-- isLoggingServiceActive  = false -->
  <!-- catalogCategoryFeaturesEnabled  =  -->
  <!-- localCacheActive  =  -->
  <!-- isLocalCacheDisabled  =  -->
  <!-- isPageContentDataActive  = true -->
  <!-- isKeywordSearchDrivenByEaskAsk  =  -->
  <!-- pageTemplateInfo: pageId: null
			isTileOverrideDefinedFromParameter: false
			isTileOverrideDefinedFromPageContent: false
			isTemplateTileNameDefined: true
			templateTileName (tile definition inserted): gid.customerService.error.info.variant.10000774
			templateTileNameFromPageContent: null
			templateTileNameSuffix: null
			overrideTemplateTileNameFromPageContent: null
			templateTileNameFromParameter: null
			pageMode: default -->
  <!-- faceted category white list =  -->
  <!-- faceted category black list =  -->
  <!-- isSolrEnabled =  -->
  <!-- isFaceted = true -->
  <!-- isCategorySearchFaceted  = true -->
  <!-- isOptimizedProductPageActive  = false -->
  <!-- surveyPopupDistribution  =  -->
  <!-- isClientStateManagementActive  = true -->
  <!-- isMobileProxyActive  =  -->
  <!-- pageBreakpoint  = default -->
  <!-- enhancedCheckoutActive  = false -->
  <script type="text/javascript">
   // &lt;![CDATA[
 	// Output gidConfig property here for s_account:
	reportingService.controller.reportingManager.reportingAccount = "gapproduction,gapgidproduction";
	reportingService.controller.reportingManager.mobileReportingAccount = "gapgapmobile,gapgidmobile";

	(function(reportSuiteJsObjectDefinition) {
		reportingService.controller.reportingManager.brandReportSuites  = reportSuiteJsObjectDefinition || {};
	})({brandSuites:{1:"gapproduction",2:"gapbananaproduction",3:"gapoldnavyproduction",4:"gappiperproduction",10:"gapathletaproduction"}, globalSuite:"gapgidproduction"});

	(function(reportSuiteJsObjectDefinition) {
		reportingService.controller.reportingManager.brandMobileReportSuites  = reportSuiteJsObjectDefinition || {};
	})({brandSuites:{1:"gapgapmobile",2:"gapbananamobile",3:"gapoldnavymobile",4:"gappipermobile",10:"gapathletamobile"}, globalSuite:"gapgidmobile"});
	
	reportingService.controller.reportingManager.currencyType = "USD";
	reportingService.controller.reportingManager.marketSpecificOmnitureUrl =  "metrics.gap.com";
	reportingService.controller.reportingManager.marketSpecificSecureOmnitureUrl =  "securemetrics.gap.com";

	browserService = new BrowserService();
	browserService.controller.managers.mobileBrowserManager.model.isMobileProxyActive =
		'' == 'true';
	browserService.controller.managers.mobileBrowserManager.model.currentBusinessUnitMobileUrl =
		"http://m.gap.com";

	browserService.controller.managers.mobileBrowserManager.model.isMobileBrowserManagerActive =
		"" === "true";
			
	
	browserService.controller.managers.mobileBrowserManager.constants.MOBILE_BROWSERS_TO_REDIRECT = ["iphone","ipod","android:mobile"];
	browserService.controller.init.main();
	

	contentService = new ContentService();

	responsiveService.model.pageBreakpoint = "default";
 	// ]]&gt;
  </script>
  <script src="/gid/js/common/layouts/en/pixelManagement/pixelManagementService.js" type="text/javascript">
  </script>
  <script type="text/javascript">
   // &lt;![CDATA[
	
		
            
	            searchCID = "";
	            with (reportingService.controller.viewManagers.commonViewManager.model) {
					commonCurrentPageName = unUnicode("gp:customerService:Home");
					commonCurrentBusinessId = (searchCID != "" ? searchCID : "");
					commonBrandPrefix = unUnicode("gp");
					commonChannelName = unUnicode("customerService");
					commonCurrentPath = "/cookieFailure";
				}
				
				omni.strCurrentPageName = reportingService.controller.viewManagers.commonViewManager.model.commonCurrentPageName;
				
            
		
		
			var channel=reportingService.controller.viewManagers.commonViewManager.model.commonChannelName;
			if (channel=="home"){
				setCookieVar("omniSessionProducts","strProductsInBag","");
			}
		

	
		
		
			
			
			
				
			
		
		objSearchBox.strDefaultText = 'Keyword / Style #';

		

		
		
		 
			
			
        
        
		RockbridgeSurvey.brandsVisited = "1";
	// ]]&gt;
  </script>
  <script type="text/javascript">
   // &lt;![CDATA[
		
		   if(location.protocol == "http:"){
			  domain = "http://www.gap.com";
			  domain = domain.replace("http://","");
			  index = domain.lastIndexOf (":");
			  if(index &gt; 0){
			  	domain = domain.substring(0,index);
			  }
			  
			  cdDomain = "http://www.gap.com";
			  cdDomain = cdDomain.replace("http://","");
			  index = cdDomain.lastIndexOf (":");
			  if(index &gt; 0){
			  	cdDomain = cdDomain.substring(0,index);
			  }
			  if(location.hostname == cdDomain){
				  deleteDomainCookies(location.hostname,'false');
			  }
			}
		
		
		if (window["personalizationService"] != undefined) {
			with (personalizationService.model) {
				globalShipping.isGlobalShippingActive = "true";
				globalShipping.shippingOptionsActive = "true";
				parentCategoryBusinessCatalogItemId = "";
			}
			personalizationService.controller.init.main();
		}
		
		
		if (window["categoryService"] != undefined) {
			if (window["categoryInfo"] != undefined) {
				categoryService.controller.init.main();
			}
		}
		
		 
		
		if (window["storeLocationsService"] != undefined) {
			storeLocationsService.model.isStoreLocationsServiceActive = "true";
		}
		
 // ]]&gt;
  </script>
  <script type="text/javascript">
   var _checkoutFlowStateMachine = checkoutFlowStateMachine();
  </script>
  <script src="/gid/js/customerService/layouts/en/customerServiceApplicationFunctions.js" type="text/javascript">
  </script>
  <script src="/gid/js/common/layouts/en/reporting/viewManagers/errorViewManager.js" type="text/javascript">
  </script>
  <script type="text/javascript">
   function fireOmni() {
        reportingService.controller.viewManagers['errorViewManager'].controller.getReportRequest(false);
    }

    Event.observe(window,'load', fireOmni);
  </script>
  <!-- @TemplateContentLayout(templateRegionName:"gid.common.siteWide.businessCode.regionTop") -->
  <!-- BEGIN - WCD Sitewide Container 1 -->
  <!-- BEGIN Content Item File: /content/0009/751/876/cn9751876.html -->
  <!-- override for the bgdImg in the responsive edfs  -->
  <style>
   .edfs.en_US {
    background: transparent;
  }
  </style>
  <!-- !!!!!!!!!!!!!!!!!!!!!!!!!  WCD_WCD JS &amp; CSS Head Legacy !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!! -->
  <style type="text/css">
   /* Product Page Final Sale title override 2/19 cleanup */
#productNameText { line-height:16px; margin-top:0 }
#productNameText #productMarketingFlag {color:#FF3300;font-size:16px; line-height:18px;padding-bottom:10px }

/*override no returns asset */
.brand1 #productMailOnlyReturn .sprite, .brand1 #productIntlMailOnlyReturn .sprite, .brand1 #productFreeReturn .sprite, .brand1 #productNonreturnable .sprite, .brand1 #productNotIntlShip .sprite {
    background: url("/Asset_Archive/GPWeb/content/0007/698/652/assets/sprites-norefunds-override.gif") no-repeat scroll left top rgba(0, 0, 0, 0);
    height: 16px;
    vertical-align: middle;
    width: 25px;
}

.brand1 #productNonreturnable .nonreturnable, .brand1 #productNotIntlShip .notintlship {
    background-position: 0 -441px;
}

/* Added 07.03.14 - Fix Return Only - Ollie */
.brand1 #productMailOnlyReturn .mailonly, .brand1 #productIntlMailOnlyReturn .intlmailonly {
	background-position: 0 -416px !important;
}

.brand1 #productMailOnlyReturn, .brand1 #productIntlMailOnlyReturn, .brand1 #productFreeReturn, .brand1 #productNonreturnable, .brand1 #productNotIntlShip {
    background-color: #C1C1C1;
    color: #FF3300;
    font-weight: bold;
}

/* BEGIN ProductPages_EDFS Copy Update */

#newTabWindow { border:1px #c1c1c1 solid; border-top:0; font-size: 11px; margin: 0; padding: 1px 10px 10px; width: 308px; color:#000;}
#newTabWindow .italCopy {font-size:9px;font-style:italic;}
#newTabWindow ul { color:#666; font-size:10px; list-style-type:disc; margin-bottom:10px; padding:0; }
#newTabWindow li { margin-left:20px; }



/* GOL LAYOUT US*/

/** product info alignment **/
a.productItemName:link, a.productItemName:visited, a.productItemName:hover, a.productItemName:active {
    text-align: center;
}
.priceDisplay, .priceDisplayStrike, .priceDisplaySale {
    text-align: center;
}
.productMarketingFlag {
	display:block;
    text-align: center;
}
.productCatItem span.mupSupMessage {
    padding: 2px 6px 2px 6px;
    text-align: center;
}

/** END product info alignment **/


/* remove outlines on image maps */
area { outline: none; }

/*+++++++++++++ VI -- CATEGORY PAGES +++++++++++++++++++*/
	.brand1 .quicklook-sprites, .brand7 .quicklook-sprites, .brand20 .quicklook-sprites {background:transparent url(/Asset_Archive/GPWeb/content/0002/444/294/brand_buttons_and_assets_sprite.gif) no-repeat scroll left top;}

	#shopBySizeContainer{background:#F0F0F0;}

	#shopBySizeTools {background:url("/Asset_Archive/GPWeb/content/0002/447/007/assets/shopbysize_hdr.gif") no-repeat scroll 13px 0 #F0F0F0; height: 14px; margin:0; padding:0px  2px 2px 102px; white-space:nowrap; width:712px;}

	#shopBySizeTools li a {color:#000; font-weight:bold; text-decoration:none; text-transform:uppercase;}

	/*shop by size: size chart layout adjustment */
	#shopBySizeTools li {padding-top:-1px; _padding-top:-1px; *padding-top:-1px;}

	/*pagination*/
	#tabTable,
	#tabTableOff .categoryPaging a:link,
	#tabTableOff .categoryPaging a:visited,
	#tabTableOff .categoryPaging a:hover,
	#tabTableOff .categoryPaging a:active { color:#000; }

/*+++++++++++++ END: VI -- CATEGORY PAGES+++++++++++++++++++*/

/*+++++++++++++ BEGIN: LEFT SIDE NAVIGATION OVERRIDE+++++++++++++++++++*/

	#sideNav  {background-color:transparent !important;color:#000000;}
	#sideNav a:hover {color:#999;}

	#sideNav ul.category{margin:3px 0px 0px 0px}
	#sideNav li.header {border-top:1px solid #000; padding:6px 0px 0px 10px; margin-right:3px;}
	#sideNav li.header.firstHeader {border-top:1px solid transparent; padding:6px 0px 3px 10px;}

	#sideNav li.category {margin:0px 0px 0px 11px;}

	#sideNav li.categorySelected{background-image:none; margin-left:0px; padding: 0 0 0 6px;}
	#sideNav a.categorySelected:link, #sideNav a.categorySelected:visited, #sideNav a.categorySelected:active, #sideNav a.categorySelected:hover {margin:0px 0px 0px 5px;}
	#sideNav a.categorySelected:link, #sideNav a.categorySelected:visited, #sideNav a.categorySelected:active, #sideNav a.categorySelected:hover {color:#999;}

	#sideNav li.subCategory {margin:0px 0px 0px 5px;}
	#sideNav a.subCategorySelected:link, #sideNav a.subCategorySelected:visited, #sideNav a.subCategorySelected:active, #sideNav a.subCategorySelected:hover {color:#999;}

	/*Sale Category and subcategory on Left Side Navigation*/
	#sideNav li.sale a.subCategorySelected:link, #sideNav li.sale a.subCategorySelected:visited, #sideNav li.sale a.subCategorySelected:active, #sideNav li.sale a.subCategorySelected:hover{color: #999;}

	#sideNav li.sale a.subCategory:hover{color: #999;}

	#sideNav li.sale{background-image: none;}
	/*END:Sale Category and subcategory on Left Side Navigation*/

	/*Reduce top margin for the first header on the left side navigation*/
		#sideNav #categoryNav11674{margin-top:-4px; *margin-top:0px; _margin-top:0px; border-top:1px solid transparent;}/*reduce top margin for the first header (Special Sizes) in Women DP and removes top border*/
		#sideNav #categoryNav77397{margin-top:-4px; *margin-top:0px; _margin-top:0px; border-top:1px solid transparent;}/*reduce top margin for the first header (Features) in Body DP and removes top border*/
		#sideNav #categoryNav77320{margin-top:0px; _margin-top:0px; *margin-top:0px; border-top:1px solid transparent;}/*reduce top margin for the first header (Features) in Maternity DP*/
		#sideNav #categoryNav37862{margin-top:0px; border-top:1px solid transparent;}/*reduce top margin for the first header (Special Sizes) in Men DP*/
		#sideNav #categoryNav6258{margin-top:0px; border-top:1px solid transparent;}/*reduce top margin for the first header (Special Sizes) in Girls DP*/
		#sideNav #categoryNav6174{margin-top:0px; border-top:1px solid transparent;}/*reduce top margin for the first header (Special Sizes) in Boys DP*/

		#sideNav #categoryNav77344{margin-top:0px; border-top:1px solid transparent;}/*reduce top margin for the first header (Collections) in Toddler Girls DP*/
		#sideNav #categoryNav77345{margin-top:0px; border-top:1px solid transparent;}/*reduce top margin for the first header (Collections) in Toddler Boys DP*/

		#sideNav #categoryNav70107{margin-top:0px; border-top:1px solid transparent;}/*reduce top margin for the first header (Special Sizes) in Infant Girls DP*/
		#sideNav #categoryNav70172{margin-top:0px; border-top:1px solid transparent;}/*reduce top margin for the first header (Special Sizes) in Infant Boys DP*/

		#sideNav #categoryNav26637{margin-top:0px; border-top:1px solid transparent;}/*reduce top margin for the first header Sale DP*/


	/* END: reduce top margin for the first header on the left side navigation*/


	/*SALE DIVISION LEFT SIDE NAV*/
		#categoryNav26637{border-top:1px solid #000; padding:0px 0px 0px 0px;}/*Sale top line*/
		li.categoryActive  #categoryNav26637 {padding:0px 0px 0px 6px;}
		#sideNav #categoryNav26637 a.sale category:link, #sideNav a.sale category:visited, #sideNav a.sale category:active, #sideNav a.sale category:hover {color:#999;}

		/*Women Category and subcategories*/
		#sideNav #categoryNav26637 a.sale:link, #sideNav a.sale:visited, #sideNav a.sale:active, #sideNav a.sale:hover{color:#c00;}
		#sideNav #categoryNav26637 a.sale:hover{color:#c00;}
		#sideNav #categoryNav26637 a.categorySelected:link, #sideNav #categoryNav26637 a.categorySelected:visited, #sideNav #categoryNav26637 a.categorySelected:active, #sideNav #categoryNav26637 a.categorySelected:hover {color:#999;}
		#sideNav #categoryNav26637 a.subCategorySelected:link, #sideNav #categoryNav26637 a.subCategorySelected:visited, #sideNav #categoryNav26637 a.subCategorySelected:active, #sideNav #categoryNav26637 a.subCategorySelected:hover {color:#999;}

		/*Body Category and subcategories*/
		#sideNav #categoryNav64826 a.sale:link, #sideNav a.sale:visited, #sideNav a.sale:active, #sideNav a.sale:hover{color:#c00;}
		#sideNav #categoryNav64826 a.sale:hover{color:#c00;}
		#sideNav #categoryNav64826 a.categorySelected:link, #sideNav #categoryNav64826 a.categorySelected:visited, #sideNav #categoryNav64826 a.categorySelected:active, #sideNav #categoryNav64826 a.categorySelected:hover {color:#999;}
		#sideNav #categoryNav64826 a.subCategorySelected:link, #sideNav #categoryNav64826 a.subCategorySelected:visited, #sideNav #categoryNav64826 a.subCategorySelected:active, #sideNav #categoryNav64826 a.subCategorySelected:hover {color:#999;}

		/*MaternityCategory and subcategories*/
		#sideNav #categoryNav26689 a.sale:link, #sideNav a.sale:visited, #sideNav a.sale:active, #sideNav a.sale:hover{color:#c00;}
		#sideNav #categoryNav26689 a.sale:hover{color:#c00;}
		#sideNav #categoryNav26689 a.categorySelected:link, #sideNav #categoryNav26689 a.categorySelected:visited, #sideNav #categoryNav26689 a.categorySelected:active, #sideNav #categoryNav26689 a.categorySelected:hover {color:#999;}
		#sideNav #categoryNav26689 a.subCategorySelected:link, #sideNav #categoryNav26689 a.subCategorySelected:visited, #sideNav #categoryNav26689 a.subCategorySelected:active, #sideNav #categoryNav26689 a.subCategorySelected:hover {color:#999;}

		/*Men Sale Category and subcategories*/
		#sideNav #categoryNav26265 a.sale:link, #sideNav a.sale:visited, #sideNav a.sale:active, #sideNav a.sale:hover{color:#c00;}
		#sideNav #categoryNav26265 a.sale:hover{color:#c00;}
		#sideNav #categoryNav26265 a.categorySelected:link, #sideNav #categoryNav26265 a.categorySelected:visited, #sideNav #categoryNav26265 a.categorySelected:active, #sideNav #categoryNav26265 a.categorySelected:hover {color:#999;}
		#sideNav #categoryNav26265 a.subCategorySelected:link, #sideNav #categoryNav26265 a.subCategorySelected:visited, #sideNav #categoryNav26265 a.subCategorySelected:active, #sideNav #categoryNav26265 a.subCategorySelected:hover {color:#999;}

		/*Boys Sale Category and subcategories*/
		#sideNav #categoryNav26418 a.sale:link, #sideNav a.sale:visited, #sideNav a.sale:active, #sideNav a.sale:hover{color:#c00;}
		#sideNav #categoryNav26418 a.sale:hover{color:#c00;}
		#sideNav #categoryNav26418 a.categorySelected:link, #sideNav #categoryNav26418 a.categorySelected:visited, #sideNav #categoryNav26418 a.categorySelected:active, #sideNav #categoryNav26418 a.categorySelected:hover {color:#999;}
		#sideNav #categoryNav26418 a.subCategorySelected:link, #sideNav #categoryNav26418 a.subCategorySelected:visited, #sideNav #categoryNav26418 a.subCategorySelected:active, #sideNav #categoryNav26418 a.subCategorySelected:hover {color:#999;}

		/*Girls Sale Category and subcategories*/
		#sideNav #categoryNav26603 a.sale:link, #sideNav a.sale:visited, #sideNav a.sale:active, #sideNav a.sale:hover{color:#c00;}
		#sideNav #categoryNav26603 a.sale:hover{color:#c00;}
		#sideNav #categoryNav26603 a.categorySelected:link, #sideNav #categoryNav26603 a.categorySelected:visited, #sideNav #categoryNav26603 a.categorySelected:active, #sideNav #categoryNav26603 a.categorySelected:hover {color:#999;}
		#sideNav #categoryNav26603 a.subCategorySelected:link, #sideNav #categoryNav26603 a.subCategorySelected:visited, #sideNav #categoryNav26603 a.subCategorySelected:active, #sideNav #categoryNav26603 a.subCategorySelected:hover {color:#999;}

		/*Toddler Boy Sale Category and subcategories*/
		#sideNav #categoryNav26208 a.sale:link, #sideNav a.sale:visited, #sideNav a.sale:active, #sideNav a.sale:hover{color:#c00;}
		#sideNav #categoryNav26208 a.sale:hover{color:#c00;}
		#sideNav #categoryNav26208 a.categorySelected:link, #sideNav #categoryNav26208 a.categorySelected:visited, #sideNav #categoryNav26208 a.categorySelected:active, #sideNav #categoryNav26208 a.categorySelected:hover {color:#999;}
		#sideNav #categoryNav26208 a.subCategorySelected:link, #sideNav #categoryNav26208 a.subCategorySelected:visited, #sideNav #categoryNav26208 a.subCategorySelected:active, #sideNav #categoryNav26208 a.subCategorySelected:hover {color:#999;}

		/*Toddler Girl Sale Category and subcategories*/
		#sideNav #categoryNav26041 a.sale:link, #sideNav a.sale:visited, #sideNav a.sale:active, #sideNav a.sale:hover{color:#c00;}
		#sideNav #categoryNav26041 a.sale:hover{color:#c00;}
		#sideNav #categoryNav26041 a.categorySelected:link, #sideNav #categoryNav26041 a.categorySelected:visited, #sideNav #categoryNav26041 a.categorySelected:active, #sideNav #categoryNav26041 a.categorySelected:hover {color:#999;}
		#sideNav #categoryNav26041 a.subCategorySelected:link, #sideNav #categoryNav26041 a.subCategorySelected:visited, #sideNav #categoryNav26041 a.subCategorySelected:active, #sideNav #categoryNav26041 a.subCategorySelected:hover {color:#999;}

		/*Baby Boy Sale Category and subcategories*/
		#sideNav #categoryNav42529 a.sale:link, #sideNav a.sale:visited, #sideNav a.sale:active, #sideNav a.sale:hover{color:#c00;}
		#sideNav #categoryNav42529 a.sale:hover{color:#c00;}
		#sideNav #categoryNav42529 a.categorySelected:link, #sideNav #categoryNav42529 a.categorySelected:visited, #sideNav #categoryNav42529 a.categorySelected:active, #sideNav #categoryNav42529 a.categorySelected:hover {color:#999;}
		#sideNav #categoryNav42529 a.subCategorySelected:link, #sideNav #categoryNav42529 a.subCategorySelected:visited, #sideNav #categoryNav42529 a.subCategorySelected:active, #sideNav #categoryNav42529 a.subCategorySelected:hover {color:#999;}

		/*Baby Girl Sale Category and subcategories*/
		#sideNav #categoryNav26032 a.sale:link, #sideNav a.sale:visited, #sideNav a.sale:active, #sideNav a.sale:hover{color:#c00;}
		#sideNav #categoryNav26032 a.sale:hover{color:#c00;}
		#sideNav #categoryNav26032 a.categorySelected:link, #sideNav #categoryNav26032 a.categorySelected:visited, #sideNav #categoryNav26032 a.categorySelected:active, #sideNav #categoryNav26032 a.categorySelected:hover {color:#999;}
		#sideNav #categoryNav26032 a.subCategorySelected:link, #sideNav #categoryNav26032 a.subCategorySelected:visited, #sideNav #categoryNav26032 a.subCategorySelected:active, #sideNav #categoryNav26032 a.subCategorySelected:hover {color:#999;}

		/* Shop By Size Text in Left Hand Nav for G, B, TG, TB css overide */
		#sideNavCategories #categoryNav98252, #sideNavCategories #categoryNav98255, #sideNavCategories #categoryNav98248, #sideNavCategories #categoryNav98250  {border-top: 1px solid #000; padding: 10px 0px 0px 10px; font-weight: bold; margin: 10px 3px 0 0; font-size: 11px;}

	/*END: SALE DIVISION LEFT SIDE NAV*/

	/*BEGIN: PIPERLIME SHOE SHOP COLORATION: M,B,G */
	#sideNav #categoryNav48371 a.category {color:#77BB00;}

	#sideNav #categoryNav48371 a.categorySelected {color:#77BB00;}

	#sideNav #categoryNav39790 a.category {color:#77BB00;}

	#sideNav #categoryNav39790 a.categorySelected {color:#77BB00;}

	#sideNav #categoryNav39791 a.category {color:#77BB00;}

	#sideNav #categoryNav39791 a.categorySelected {color:#77BB00;}
	/*END: PIPERLIME SHOE SHOP COLORATION: M,B,G */


/*+++++++++++++ END: LEFT SIDE NAVIGATION OVERRIDE+++++++++++++++++++*/

/*+++++++++++++ BEGIN: PRODUCT PAGE LAYOUT +++++++++++++++++++*/


	.brand1 .imgDiv {background-color:white; border:1px solid #fff;}/*product images keyline to white */

	#productContentLeft{margin-top:22px; _margin-top:22px; *margin-top:22px;}/*(used to be margin-top:12px -- move product page up*/
	#productContentRight{margin-top:22px; _margin-top:22px; *margin-top:22px;}/*(used to be margin-top:12px -- move product page up*/

	#productNameText, #productNameText h2, #productNameText h1 {color:#000; padding-left:0px}/*overrides product header shift and color*/

	/*font and rule for the sizing box*/
	.brand1 #swatchContent input, .brand1 #quickLookSwatches input, .brand1 #shoppingBagEditSwatches input, .brand1 #colorSwatches input, .brand1 #swatchContent button, .brand1 #quickLookSwatches button, .brand1 #shoppingBagEditSwatches button, .brand1 #colorSwatches button, .brand7 #swatchContent input, .brand7 #quickLookSwatches input, .brand7 #shoppingBagEditSwatches input, .brand7 #colorSwatches input, .brand7 #swatchContent button, .brand7 #quickLookSwatches button, .brand7 #shoppingBagEditSwatches button, .brand7 #colorSwatches button, .brand20 #swatchContent input, .brand20 #quickLookSwatches input, .brand20 #shoppingBagEditSwatches input, .brand20 #colorSwatches input, .brand20 #swatchContent button, .brand20 #quickLookSwatches button, .brand20 #shoppingBagEditSwatches button, .brand20 #colorSwatches button {border:1px solid #666; color:#333;}



	/*tabs*/
	.brand1 #variantButtons .on {color:#000; font-weight:bold;}
	.brand1 #variantButtons .off{background-color:#ccc; color:#000;}
	/*END: tabs*/

	/*reviews segment*/
	#reviewSummary #reviewSummaryData #averageOverallRating{background-color:#fff;}
	/*END: reviews segment*/

	/*add to bag segment*/
	#addToBagContent {background-color:#ccc;}
	#quantityContent label {color:#fff; font-weight:bold;}
	#selectionConfirmText {color:#fff; font-weight:bold;}
	#priceText {color:#000;}
	/* END:add to bag segment*/

	/*about this product segment*/
	#tabWindow {background-color:#fff;}
	.copyBlock {color:#000; font-weight:bold;}
	#tabWindow ul {color:#000;}
	/*about theis product segment end*/


	/*Quick Look size charts button*/
	.brand1 .sprite-sizeChart, .brand7 .sprite-sizeChart, .brand20 .sprite-sizeChart{ background-image:url("/Asset_Archive/GPWeb/content/0002/444/294/brand_buttons_and_assets_sprite.gif"); background-position: 0 -1286px; width: 63px; height: 20px; }

	/*Image Tools on Product page and Quick Look popup -- zoom and view larger*/
	.brand1 img.sprite-button_more_views, .brand7 img.sprite-button_more_views, .brand20 img.sprite-button_more_views {background:url("/Asset_Archive/GPWeb/content/0002/444/294/brand_buttons_and_assets_sprite.gif"); background-position: 0 -936px; width: 72px; height: 16px; } /*View Larger button on Quick Look popup*/

	.brand1 #imageTools #moreViewsBtn, .brand1 #moduleProductImageTools #moreViewsBtn{background-image:url("/Asset_Archive/GPWeb/content/0002/444/294/brand_buttons_and_assets_sprite.gif"); background-position: 0 -936px; width: 72px; height: 16px; margin-left:10px; }

	.brand1 #imageTools #moreViewsBtn, .brand1 #moduleProductImageTools #moreViewsBtn{background:url("/Asset_Archive/GPWeb/content/0002/444/294/brand_buttons_and_assets_sprite.gif"); background-position: 0 -936px; width: 72px; height: 16px; margin-left:10px; }

	.brand1 #imageTools .over{background:url("/Asset_Archive/GPWeb/content/0002/444/294/brand_buttons_and_assets_sprite.gif"); background-position: 0 -1697px; width: 103px; height: 11px;}
	.brand1 #imageTools .over{background-image:url("/Asset_Archive/GPWeb/content/0002/444/294/brand_buttons_and_assets_sprite.gif"); background-position: 0 -1697px; width: 103px; height: 11px;}

	.brand1 #imageTools .out{background:url("/Asset_Archive/GPWeb/content/0002/444/294/brand_buttons_and_assets_sprite.gif"); background-position: 0 -1636px; width: 115px; height: 11px;}

	.brand1 #imageTools .out{background-image:url("/Asset_Archive/GPWeb/content/0002/444/294/brand_buttons_and_assets_sprite.gif"); background-position: 0 -1636px; width: 115px; height: 11px;}


	/*Image Thumbs key line*/
	.brand1 .thumbs, .brand7 .thumbs, .brand20 .thumbs {border-color:#999;}
	.brand1 .thumbSelected, .brand7 .thumbSelected, .brand20 .thumbSelected {border-color:#999;}

	/*Write Review*/
	#noReviewsData a, #noReviewsData a:link, #noReviewsData a:visited, #noReviewsData a:hover, #noReviewsData a:active{color:#000;}

	#mainContent #crossSellBox{background-color:#fff; margin:75px 0 10px 21px; position:relative;}
	#crossSellTop{background-color:#fff;}

	/*Out Of Stock Button Placement*/
	.brand1 .sprite-button_add_to_bag_out, .brand7 .sprite-button_add_to_bag_out, .brand20 .sprite-button_add_to_bag_out {background-position: 0 -799px;float: right;height: 20px;margin-top: 5px;width: 73px;}

	/* Update Add to Bag  states, black for on state, grey for off state JP 11/26/12 */
	.brand1 input.sprite-button_add_to_bag_off, .brand7 input.sprite-button_add_to_bag_off, .brand20 input.sprite-button_add_to_bag_off {
    background: url("/Asset_Archive/GPWeb/content/0002/444/294/brand_buttons_and_assets_sprite.gif") repeat scroll 0 -732px transparent;
    height: 17px;
    width: 72px;
	}

	.brand1 input.sprite-button_add_to_bag_on, .brand1 input.sprite-button_add_to_bag_over, .brand7 input.sprite-button_add_to_bag_on, .brand7 input.sprite-button_add_to_bag_over, .brand20 input.sprite-button_add_to_bag_on, .brand20 input.sprite-button_add_to_bag_over {
    background: url("/Asset_Archive/GPWeb/content/0002/444/294/brand_buttons_and_assets_sprite.gif") repeat scroll 0 -665px transparent;
    height: 17px;
    width: 72px;
	}


/*+++++++++++++ END: PRODUCT PAGE LAYOUT +++++++++++++++++++*/

/*+++++++++++++ BEGIN: OUTFIT PAGE  LAYOUT +++++++++++++++++++*/

#outfitContent #outfitName{color:#000; font-size:13px; font-weight:bold;}

/* Update Add to Bag  states, black for on state, grey for off state JP 11/26/12 */
.brand1 #addToBagContent input.addToBagBtn, .brand1 #confirmationContentTop input.addToBagBtn, .brand1 #confirmationContentBottom input.addToBagBtn {
    background: url("/Asset_Archive/GPWeb/content/0002/444/294/brand_buttons_and_assets_sprite.gif") repeat scroll 0 -732px transparent;
    height: 17px;
    width: 72px;
}
.brand1 #addToBagContent input.off, .brand1 #confirmationContentTop input.off, .brand1 #confirmationContentBottom input.off {
    background-position: 0 -732px;
}
.brand1 #addToBagContent input.on, .brand1 #confirmationContentTop input.on, .brand1 #confirmationContentBottom input.on {
    background: url("/Asset_Archive/GPWeb/content/0002/444/294/brand_buttons_and_assets_sprite.gif") repeat scroll 0 -665px transparent;
    height: 17px;
    width: 72px;
}


/*+++++++++++++ END: OUTFIT PAGE  LAYOUT +++++++++++++++++++*/


/*+++++++++++++ BEGIN: CUSTOMER SERVICE  LAYOUT +++++++++++++++++++*/
	#mainContent .csContentPage {padding:10px 10px 10px 35px;}
	#mainContent .header1 {margin:10px 0px 10px 0px; color:#000;}

/*+++++++++++++ END: CUSTOMER SERVICE LAYOUT +++++++++++++++++++*/

/*+++++++++++++ BEGIN: RESPONSIVE CHECKOUT STYLES ++++++++++++++*/

.promoDetail {width:85%;}
dl.promoContent {overflow: hidden;color: #999;}
.promoItem &gt;  dd:nth-of-type(1){ width:34%;}
.promoItem &gt; dd:nth-of-type(2){  width:63%;}
html.breakpoint-mobile #shoppingBagDetail.collapsed dl.promoItem {display:none;}

/*+++++++++++++ END: RESPONSIVE CHECKOUT STYLES ++++++++++++++*/
  </style>
  <script type="text/javascript">
   /***BEGIN GOL LEGACY JS OVERRIDES *****/

/* BEGIN GOL Petite/Tall Lef Nav linking override to link to Petite (85032) /Tall (85035) divisions -JP 08/22/2012 */
/* Added GOL Big &amp; Tall Left Nav linking override to link to Big &amp; Tall(87388) division -JP 11/16/2012 */

// document.observe("dom:loaded",function() {

// 	//update left nav Petite and Tall links in Women's subDivision
// 	var wDirPetiteLink = $('categoryNav47018');
// 	var wDirTallLink = $('categoryNav48054');

// 	//update left nav Tall and Women links in Petite Division
// 	var petiteDirTallLink = $('categoryNav85039');
// 	var petiteDirWomLink = $('categoryNav85040');

// 	//update left nav Petite and Womens links in Tall Division
// 	var tallDirPetiteLink = $('categoryNav85044');
// 	var tallDirWomLink = $('categoryNav85046');

// 	//update left nav Big &amp; Tall link in Men's Division
// 	var bigTallLink = $('categoryNav87386');

// 	//update left nav Men's link in MBT Division
// 	var mDirLink = $('categoryNav87395');


// 		if (wDirPetiteLink) {
// 			wDirPetiteLink.firstDescendant().href="/browse/division.do?cid=85032";
// 		}
// 		if (wDirTallLink) {
// 			wDirTallLink.firstDescendant().href="/browse/division.do?cid=85035";
// 		}

// 		if (petiteDirTallLink) {
// 			petiteDirTallLink.firstDescendant().href="/browse/division.do?cid=85035";
// 		}
// 		if (petiteDirWomLink) {
// 			petiteDirWomLink.firstDescendant().href="/browse/subDivision.do?cid=5646";
// 		}

// 		if (tallDirPetiteLink) {
// 			tallDirPetiteLink.firstDescendant().href="/browse/division.do?cid=85032";
// 		}
// 		if (tallDirWomLink) {
// 			tallDirWomLink.firstDescendant().href="/browse/subDivision.do?cid=5646";
// 		}


// 		if (bigTallLink) {
// 			bigTallLink.firstDescendant().href="/browse/division.do?cid=87388";
// 		}

// 		if (mDirLink) {
// 			mDirLink.firstDescendant().href="/browse/subDivision.do?cid=5065";
// 		}

// });

/* END GOL Added Big &amp; Tall Left Nav linking override to link to Big &amp; Tall(87388) division -JP 11/16/2012 */
/* END GOL Petite/Tall Lef Nav linking override to link to Petite (85032) /Tall (85035) divisions -JP 08/22/2012 */

/* BEGIN GOL OVERRIDE to HIGHLIGHT "WOMEN" in Top Navigation for Petite and Tall Divisions - JP 08/22/2012 */
/* ADDED GOL HIGHLIGHT "MEN" in Top Navigation for Big &amp; Tall Division - JP 11/16/2012 */

document.observe("dom:loaded",function() {

	if (location.pathname == "/browse/category.do")  {

		var womensDivision = $('division5643');
		var mensDivision = $('division5063');
		var thisDivision = "";

		if(window['reportingService']){
			thisDivision = reportingService.controller.viewManagers.commonViewManager.model.commonChannelName;
			thisDivision = thisDivision.replace(/&amp;/g, '');//remove '&amp;' since they can't be used in the url
			thisDivision = thisDivision.replace(/&amp;/g, ''); //remove '&amp;' since they can't be used in the url
			thisDivision = thisDivision.replace(/^\s+|\t+|\n+| |\s+$/g, '') ; //remove space ex "Big Tall" now "BigTall"
		}

		//console.log (thisDivision);

		if ((thisDivision == "Tall") || (thisDivision == "Petite")) {
			if (womensDivision){

				thisState = womensDivision.className;
				if (thisState.indexOf('_notSelected') &gt; 0) {
 					womensDivision.className = thisState.replace('_notSelected', '_selected');
				}

			}
		}


		if (thisDivision == "BigTall") {
			if (mensDivision){

				thisState = mensDivision.className;
				if (thisState.indexOf('_notSelected') &gt; 0) {
 					mensDivision.className = thisState.replace('_notSelected', '_selected');
				}

			}
		}
	}

});

/* END HIGHLIGHT "MEN" in Top Navigation for Big &amp; Tall Division - JP 11/16/2012 */
/* END OVERRIDE to HIGHLIGHT "WOMEN" in Top Navigation for Petite and Tall Divisions - JP 08/22/2012 */

  /*Override src of Find and Reset buttons on Category VI pages*/

  function overrideButton() {
	if( $('shopBySizeSelections') ) {

	 //var controlHolder = $('shopBySizeSelections').select('li.sizeFinderFind');
	  //controlHolder = controlHolder[0];
	  var controlHolder = $('shopBySizeSelections');
	  var controlImage1 = controlHolder.select('img.button_find_sm');
	  controlImage1 = controlImage1[0];
	  controlImage1.src = "/assets/common/clear.gif";

	  //var controlHolder2 = $('shopBySizeSelections').select('li.sizeFinderReset');
	  //controlHolder2 = controlHolder2[0];
	  var controlHolder2 = $('shopBySizeSelections');
	  var controlImage2 = controlHolder2.select('img.button_reset_sm');
	  controlImage2 = controlImage2[0];
	  controlImage2.src = "/assets/common/clear.gif";
	}
  }

//  Event.observe( window, 'load', overrideButton );

    /* 05/16/11 updated to be 11.04 compatible. override size chart buttons on category page */

  		if (window["categoryService"] != undefined) {
		//Release  11.04 categoryService IS defined

		//run insertion code
			Event.observe(document, 'categoryProductGrid:ready', overrideButton );

		//end Release 11.04

		} else {

		//Release 11.03

			Event.observe( window, 'load', overrideButton );
		//end Release 11.03
		}

/* 05/16/11 updated to be 11.04 compatible. override size chart buttons on category page */

  /*Override src of Close Window button in the View Larger popup*/

  function overrideCloseWindowButton() {
	if( $('close_button') ) {
	 	$('close_button').src = "/Asset_Archive/GPWeb/content/0002/581/055/assets/button_close_window.gif";
	}
  }

  Event.observe( window, 'load', overrideCloseWindowButton );

  //CATEGORY VI - change "See our size charts" text

document.observe("dom:loaded",function() {
    var sizeChartHolder = $('shopBySizeContainer');
	if( sizeChartHolder ) {
	  var sizeChartLink = sizeChartHolder.select('a');
	  sizeChartLink = sizeChartLink[0];
	  if(sizeChartLink) {
	    sizeChartLink.update('SIZE CHARTS');
	  }
	}
});
//CATEGORY VI - change "See our size charts" text

/* begin override to fix broken Privacy Policy link fix on  Sign In Page  */

if( location.pathname == "/profile/sign_in.do" ) {
 document.observe("dom:loaded", function() {
   if($('privacyPolicyLink')) {
    $('privacyPolicyLink').getElementsByTagName("a")[0].setAttribute('href','/customerService/info.do?cid=2331');
   }
 })
}

/* end override to fix broken Privacy Policy link fix on  Sign In Page  */

/***END GOL LEGACY JS OVERRIDES *****/
  </script>
  <!-- BEGIN iPad Patches -->
  <!-- update 08/26/13 to remove from checkout pages for Responsive Checkout-->
  <script type="text/javascript">
   if (!window.responsiveService || !responsiveService.api.isInitialized()) {
	var wcdViewPortNavigator = navigator.userAgent;
	if(wcdViewPortNavigator.indexOf("iPad") != -1) {
		document.write('&lt;meta name = "viewport" content = "width = 1024"&gt;');
	}
}
  </script>
  <link href="/gid/assets/common/en/apple-touch-icon.png" rel="apple-touch-icon"/>
  <link href="/gid/assets/common/en/apple-touch-icon.png" rel="apple-touch-icon" sizes="72x72"/>
  <link href="/gid/assets/common/en/apple-touch-icon-retina.png" rel="apple-touch-icon" sizes="114x114"/>
  <link href="/gid/assets/common/en/apple-touch-icon-retina.png" rel="apple-touch-icon" sizes="144x144"/>
  <!-- END iPad Patches -->
  <!-- BEGIN Responsive Checkout Patches -->
  <script type="text/javascript">
   // verify universalBarContainer div has background on checkout
if (location.pathname.indexOf("/checkout/") != -1) {
	Event.observe(window, "load", function() {
		var checkoutEDFSContainer = jQuery('#universalBarContainer');
		if (checkoutEDFSContainer != undefined) {
			jQuery(checkoutEDFSContainer).addClass('universalBarBackground');
		}
	});
}
  </script>
  <!-- END Responsive Checkout Patches -->
  <!-- BEGIN FACEBOOK LIKE  -->
  <script type="text/javascript">
   // Facebook like button
if( (location.pathname == '/browse/product.do') ) {
	var fbProductPageLikeButton = {
		initialize: function() { },
		model: {
			searchDexPageStructure: 'http%3A%2F%2Fwww.gap.com%2Fproducts%2F'
		},
		controller: {
			init: function() {
				if( ! $('fb_like') ) {
					var model = fbProductPageLikeButton.model;

					/*var productName = productPage.objP.strVendorName.toLowerCase().replace(/ /g,'-') + '-';
					productName = productName + productPage.objP.strProductStyleName.toLowerCase().replace(/ /g,'-');
					productName = productName + '-P' + productPage.productId + '.jsp';*/

					var productName = escape('P' + productPage.productId + '.jsp?tid=gpsm000009');

					var fbLikeDiv = new Element('div', {id:'fb_like',style:'margin-top:7px'});
					//var fbLikeDivStr = '&lt;iframe src="http://www.facebook.com/plugins/like.php?href=' + model.searchDexPageStructure + productName + '&amp;amp;send=false&amp;amp;layout=button_count&amp;amp;width=330&amp;amp;show_faces=false&amp;amp;action=like&amp;amp;colorscheme=default&amp;amp;font=Arial&amp;amp;height=24" scrolling="no" frameborder="0" style="border:none; overflow:hidden; width:330px; height:24px" allowTransparency="true"&gt;&lt;/iframe&gt;';

					var fbLikeDivStr = '&lt;iframe src="http://www.facebook.com/plugins/like.php?href=' + model.searchDexPageStructure + productName + '&amp;send=false&amp;layout=button_count&amp;width=330&amp;show_faces=false&amp;action=like&amp;colorscheme=light&amp;font&amp;height=21" scrolling="no" frameborder="0" style="border:none; overflow:hidden; width:330px; height:21px" allowTransparency="true"&gt;&lt;/iframe&gt;'

					fbLikeDiv.update( fbLikeDivStr );
					$('variantButtons').insert({ before:fbLikeDiv });
				}
			}
		}
	}

	productPage.initializeVariantButtons = productPage.initializeVariantButtons.wrap( function( originalMethod ) {
		originalMethod();
		fbProductPageLikeButton.controller.init();
	});
}
  </script>
  <!-- END FACEBOOK LIKE  -->
  <!-- BEGIN Update to account email preferences link with new hosted page -->
  <script type="text/javascript">
   if (location.href.indexOf('cid=81268') &gt; -1 ) {
	Event.observe(window, "load", function() {
		if ( $('tosignupBody') ) {
			var linksToScan = $('tosignupBody').select('a');
			var linkToScan;
			if (linksToScan &amp;&amp; linksToScan.length &gt; 0 ) {
				for ( var i = 0; i &lt; linksToScan.length; i++) {
					linkToScan = linksToScan[i];
					if (linkToScan.href.indexOf('join_email_list_confirm.do') &gt; -1 ) {
						linkToScan.href = '/profile/info.do?cid=48755';
					}
				}
			}
		}
	});
}
  </script>
  <!-- END Update to account email preferences link with new hosted page -->
  <!-- Begin Variable to detect brand disrupters 3/21/13 -->
  <script type="text/javascript">
   var wcdBrandDisrupterDidFire = false;
  </script>
  <!-- End Variable to detect brand disrupters 3/21/13 -->
  <!-- begin url fix for .do breaking in the left nav -->
  <script type="text/javascript">
   var leftNavUrlPatch = {
    init: function() {
        var sideNavCategories = $('sideNavCategories');
        if(sideNavCategories) {
        	var htmlStr = sideNavCategories.innerHTML;
        	htmlStr = htmlStr.replace(/href=".do/g, 'href="/browse/category.do');
        	$('sideNavCategories').innerHTML = htmlStr;
        }
    }
};
Event.observe(window, "load", leftNavUrlPatch.init);
  </script>
  <!-- end url fix for .do breaking in the left nav -->
  <!-- BEGIN content override CNOV-91 Correct Store Locator Name - CARLSBAD PREMIUM  -->
  <script type="text/javascript">
   if( location.pathname == "/customerService/storeLocator.do" ) {
    Event.observe(document, 'filterTools:ready', function() {

        var tempIntervalId = setInterval(function(){
            var parentElement = jQuery('.detailsGroup');
            if(parentElement.length &gt; 0){
                clearInterval(tempIntervalId);
                updateDetailsGroupForCarlsbadOutlet(parentElement);
            }
        },750);

        updateDetailsGroupForCarlsbadOutlet = function(parentElement){
            parentElement.children(":contains('CARLSBAD PREMIUM')").parent().children('.storeType').each(function(i,element){jQuery(element).text('Baby Gap Outlet')})
        };

    });
}
  </script>
  <!-- END content override CNOV-91 Correct Store Locator Name - CARLSBAD PREMIUM  -->
  <script type="text/javascript">
   //////////////////////////////////////////////////
///////  Find in Store Gift Card Supression  - 03.04.13 ///////////////
/////// jim kwak  /////////////
//////////////////////////////////////////////////

if (location.pathname == "/browse/product.do") {
	Event.observe(window, "load", function() {
		if(location.href.indexOf("000173") &gt; 0){
			if ($('findInStoreTabWindow')){
				$('findInStoreTabWindow').setStyle({display: 'none'});
			}
		}
	});
}
// end Find in Store Gift Card Supression
  </script>
  <!-- Begin Gap/BR Store Locator override to pre-select Outlets -->
  <script type="text/javascript">
   // Gap/BR Store Locator override to pre-select Outlets
if( location.pathname == '/customerService/storeLocator.do' ) {

var wcdStoreLocatorUpdater = {
	preselectOutlet : function() {
		if( $('filter_outlet') ) {
			$('filter_outlet').checked = true;
		}
	},
	presetOutletCookie : function() {
		if( storeLocatorManager.controller.setBrandCookieVar ) {
			storeLocatorManager.controller.setBrandCookieVar(storeLocatorManager.constants.cookies.FILTERS, "Gap Outlet");
		}
	}
}

// Observe building of tools/filter area of map
Event.observe(document, 'filterTools:ready', function() {
	var isOutletPreselect = gidLib.getQuerystringParam('showOutlets');
	if( isOutletPreselect == 'true' ) {
		wcdStoreLocatorUpdater.preselectOutlet();
	}
});

if( storeLocatorManager &amp;&amp; storeLocatorManager.controller &amp;&amp; storeLocatorManager.controller.eventHandlers &amp;&amp; storeLocatorManager.controller.eventHandlers.personalizationDataReadyHandler ) {
	storeLocatorManager.controller.eventHandlers.personalizationDataReadyHandler = storeLocatorManager.controller.eventHandlers.personalizationDataReadyHandler.wrap( function( om ) {
		var isOutletPreselect = gidLib.getQuerystringParam('showOutlets');
		if( isOutletPreselect == 'true' ) {
			wcdStoreLocatorUpdater.presetOutletCookie();
		}
		om();
	});
}

}
  </script>
  <!-- End Gap/BR Store Locator override to pre-select Outlets -->
  <!-- Begin WCD "Pin" button insert -->
  <script type="text/javascript">
   var wcdPinItButtonInsert = {
	pinItStr: '',
	pinItDiv: '',
	pinDesc: '',
	pinMedia: '',
	pinURL: '',
	pinItDivStr: '',

	insert_pinIt_Btn : function() {
		if ($('fb_like') &amp;&amp; !$('pinItDiv')) {
			jQuery("#fb_like").css({ "margin-left" : "45px", "overflow" : " hidden", "width" : "200px", "margin-top" : "-22px"});
			wcdPinItButtonInsert.pinURL = encodeURIComponent(window.location.href);

			if ($('product_image')){
				wcdPinItButtonInsert.pinMedia = encodeURIComponent($('product_image').src);
			}
			if ($('productNameText')){
				wcdPinItButtonInsert.pinDesc = jQuery('.productName').html();
				//pinDesc = $('productNameText').textContent;
			}
			if (jQuery('.description').length &gt; 0){
				if (jQuery('.description').html() != ''){
					wcdPinItButtonInsert.pinDesc = wcdPinItButtonInsert.pinDesc + ' - ' + jQuery('.description').html();
					//pinDesc = pinDesc + ' - ' + $('quickLookProductDescription').textContent;
				}
			}
			wcdPinItButtonInsert.pinDesc = encodeURIComponent(wcdPinItButtonInsert.pinDesc);
			wcdPinItButtonInsert.pinDesc = wcdPinItButtonInsert.pinDesc.replace("'","");

			wcdPinItButtonInsert.pinItStr = 'http://pinterest.com/pin/create/button/?url=' + wcdPinItButtonInsert.pinURL + '&amp;media=' + wcdPinItButtonInsert.pinMedia + '&amp;description=' + wcdPinItButtonInsert.pinDesc;

			wcdPinItButtonInsert.pinItDiv = new Element('div', {id:'pinItDiv'});
			wcdPinItButtonInsert.pinItDivStr = '&lt;a href="javascript:void(0);" onclick="window.open(\'' + wcdPinItButtonInsert.pinItStr + '\',\'pinIt\',\'toolbar=0,status=0,width=620,height=500\');"&gt;&lt;img src="/Asset_Archive/GPWeb/content/0006/556/731/assets/builder_pinit.png" /&gt;&lt;/a&gt;';
			wcdPinItButtonInsert.pinItDiv.update( wcdPinItButtonInsert.pinItDivStr );
			$('fb_like').insert({ before:wcdPinItButtonInsert.pinItDiv });

			Event.observe(colorSwatchContent, "click", wcdPinItButtonInsert.updatePinIt);
			Event.observe(pinItDiv, "click", wcdPinItButtonInsert.pinItTracking);
		}
	},

	updatePinIt : function() {
		wcdPinItButtonInsert.pinURL = window.location.href;
		if (wcdPinItButtonInsert.pinURL.indexOf("pid=") &gt; 0){
			wcdPinItButtonInsert.pinURL = wcdPinItButtonInsert.pinURL.substring(0,wcdPinItButtonInsert.pinURL.indexOf("pid=") + 4);
			wcdPinItButtonInsert.pinURL = wcdPinItButtonInsert.pinURL + productPage.objV.arrayVariantStyleColors[productPage.selectedColor].strColorCodeId;
		}
		wcdPinItButtonInsert.pinURL = encodeURIComponent(wcdPinItButtonInsert.pinURL);
		if ($('product_image')){
			wcdPinItButtonInsert.pinMedia = encodeURIComponent($('product_image').src);
		}
		if ($('productNameText')){
			wcdPinItButtonInsert.pinDesc = jQuery('.productName').html();
		}
		if (jQuery('.description').length &gt; 0){
			if (jQuery('.description').html() != ''){
				wcdPinItButtonInsert.pinDesc = wcdPinItButtonInsert.pinDesc + ' - ' + jQuery('.description').html();
			}
		}
		wcdPinItButtonInsert.pinDesc = encodeURIComponent(wcdPinItButtonInsert.pinDesc);
		wcdPinItButtonInsert.pinDesc = wcdPinItButtonInsert.pinDesc.replace("'","");
		wcdPinItButtonInsert.pinItStr = 'http://pinterest.com/pin/create/button/?url=' + wcdPinItButtonInsert.pinURL + '&amp;media=' + wcdPinItButtonInsert.pinMedia + '&amp;description=' + wcdPinItButtonInsert.pinDesc;
		wcdPinItButtonInsert.pinItDivStr = '&lt;a href="javascript:void(0);" onclick="window.open(\'' + wcdPinItButtonInsert.pinItStr + '\',\'pinIt\',\'toolbar=0,status=0,width=620,height=500\');"&gt;&lt;img src="/Asset_Archive/GPWeb/content/0006/556/731/assets/builder_pinit.png" /&gt;&lt;/a&gt;';
		wcdPinItButtonInsert.pinItDiv.update( wcdPinItButtonInsert.pinItDivStr );
	},

	pinItTracking: function() {
		s.linkTrackVars='eVar6';
		if( brandConst.BRAND_ID == 'AT' ) { s.eVar6='ATOLPin'; }
		else if( brandConst.BRAND_ID == 'GP' ) { s.eVar6='GOLPin'; }
		else if( brandConst.BRAND_ID == 'PL' ) { s.eVar6='PLOLPin'; }
		else if( brandConst.BRAND_ID == 'BR' ) { s.eVar6='BROLPin'; }
		else if( brandConst.BRAND_ID == 'ON' ) { s.eVar6='ONOLPin'; }
		else { s.eVar6='unknownPin'; }
		s.tl(this,'o',s.eVar6);
		return true;
	}
}

if (location.pathname == "/browse/product.do") {
	Event.observe(document, 'productPage:ready', function(){
		wcdPinItButtonInsert.insert_pinIt_Btn();
	});
}

// Out-of-stock page redirect code
var closedURL = document.location.href;
// check to see if on store closed page
if( closedURL.indexOf('store-closed') &gt; -1 || closedURL.indexOf('OutOfStockNoResults') &gt; -1 ) {
    var pinRef = document.referrer;
    // check to see if referred from Pinterest
    if( pinRef.indexOf('pinterest.com') &gt; -1 ) {
        // if so, redirect to brand homepage
        var newURL = 'http://' + document.location.host;
        window.location = newURL;
    }
}
  </script>
  <!-- End WCD "Pin" button insert -->
  <script type="text/javascript">
   //Begin CNOV-101 - Adding Gift Card Devalue Copy fix
Event.observe(window,"load", function() {
	if(location.pathname == "/checkout/order.do"){
		jQuery("#billingSummaryInputGiftCardPin, #billingInputGiftCardPin").after("&lt;div id='giftCardCopyAdded' style='margin-bottom:15px;color:#736967;font-size: 87.5%;'&gt;Please note: when using multiple gift cards, gift card values will be applied in order of decreasing value.&lt;/div&gt;").delay(1);
		jQuery("#billingGiftCardBalanceCardPin").after("&lt;div id='giftCardCopyPopUpAdded' style='margin-top:10px;margin-left:15px;margin-bottom:15px;font-size: 87.5%;'&gt;Please note: when using multiple gift cards, gift card values will be applied in order of decreasing value.&lt;/div&gt;").delay(1);
	}
});
//End CNOV-101 - Adding Gift Card Devalue Copy fix
  </script>
  <script type="text/javascript">
   //var prodShipRetInfoCookieCutter = new ProdShipRetInfoCookieCutter("0622PRODSHIPRETINFO","mktUniversalPersist","0622PRODSHIPRETINFO_SEG","prodPageShipRetInfo","25-25-25-25","8","none");
var plProductSegmentName = "0622PRODSHIPRETINFO_SEGC";
if( location.pathname == "/browse/product.do" ) {

	if( plProductSegmentName == "0622PRODSHIPRETINFO_SEGC"  ) {
		var ProductPageShipReturnInserter = Class.create();
		ProductPageShipReturnInserter.prototype = {
			initialize: function() { },
			model: {

			},
			controller: {
				init: function( segment ) {
					var newTabWindowDiv = new Element('div',{id:'newTabWindow'});
					var prodType;
					var shipReturnContent;
					// General online exclusives
					if( $('productMailOnlyReturn') &amp;&amp; $('productMailOnlyReturn').style.display != 'none' ) {
						prodType = "generalExclusive";
					}
					// Select online excuses
					else if( $('productFreeReturn') &amp;&amp; $('productFreeReturn').style.display != 'none' ) {
						prodType = "selectExclusive";
					}
					// General
					else {
						prodType = "general";
					}
					switch( segment ) {
						case "0622PRODSHIPRETINFO_SEGB":
							switch( prodType ) {
								case "general":
									shipReturnContent = '&lt;div class="copyBlock"&gt;shipping *&lt;\/div&gt;&lt;ul&gt;&lt;li&gt;7-9 business days - FREE Every Day ($50 min)&lt;\/li&gt;&lt;li&gt;3-5 business days - $7.00&lt;\/li&gt;&lt;li&gt;2 business days - $17.00&lt;\/li&gt;&lt;li&gt;1 business day  - $22.00&lt;\/li&gt;&lt;\/ul&gt;&lt;div class="copyBlock"&gt;returns &amp; exchanges&lt;\/div&gt;&lt;ul&gt;&lt;li&gt;FREE returns to stores&lt;\/li&gt;&lt;li&gt;FREE exchanges&lt;\/li&gt;&lt;li&gt;Returns by mail - $6.00&lt;\/li&gt;&lt;\/ul&gt;* &lt;a href="javascript:void(0)" onclick="return productPageShipReturnInserter.controller.openPopAndSendToOmni()"&gt;Learn More&lt;\/a&gt;';
									break;

								case "generalExclusive":
									shipReturnContent = '&lt;div class="copyBlock"&gt;shipping *&lt;\/div&gt;&lt;ul&gt;&lt;li&gt;7-9 business days - FREE Every Day ($50 min)&lt;\/li&gt;&lt;li&gt;3-5 business days - $7.00&lt;\/li&gt;&lt;li&gt;2 business days - $17.00&lt;\/li&gt;&lt;li&gt;1 business day  - $22.00&lt;\/li&gt;&lt;\/ul&gt;&lt;div class="copyBlock"&gt;returns &amp; exchanges&lt;\/div&gt;&lt;ul&gt;&lt;li&gt;Returns by mail - $6.00&lt;\/li&gt;&lt;li&gt;FREE exchanges&lt;\/li&gt;&lt;\/ul&gt;* &lt;a href="javascript:void(0)" onclick="return productPageShipReturnInserter.controller.openPopAndSendToOmni()"&gt;Learn More&lt;\/a&gt;';
									break;

								case "selectExclusive":
									shipReturnContent = '&lt;div class="copyBlock"&gt;shipping *&lt;\/div&gt;&lt;ul&gt;&lt;li&gt;7-9 business days - FREE Every Day ($50 min)&lt;\/li&gt;&lt;li&gt;3-5 business days - $7.00&lt;\/li&gt;&lt;li&gt;2 business days - $17.00&lt;\/li&gt;&lt;li&gt;1 business day  - $22.00&lt;\/li&gt;&lt;\/ul&gt;&lt;div class="copyBlock"&gt;returns &amp; exchanges&lt;\/div&gt;&lt;ul&gt;&lt;li&gt;FREE returns (by mail only)&lt;\/li&gt;&lt;li&gt;FREE exchanges&lt;\/li&gt;&lt;\/ul&gt;* &lt;a href="javascript:void(0)" onclick="return productPageShipReturnInserter.controller.openPopAndSendToOmni()"&gt;Learn More&lt;\/a&gt;';
									break;
							}
							break;

						case "0622PRODSHIPRETINFO_SEGC":  //added no returns on Final Sale 2/20/14 JP
							switch( prodType ) {
								case "general":
									shipReturnContent = '&lt;div class="copyBlock"&gt;shipping &amp; returns &lt;/div&gt;&lt;ul&gt;&lt;li&gt;FREE shipping on all orders over $50&lt;br /&gt;&lt;span class="italCopy"&gt;Select  the "FREE" option in the shopping bag&lt;/span&gt;&lt;/li&gt;&lt;li&gt;$7 Flat Rate for orders under $50&lt;/li&gt;&lt;li&gt;FREE returns &amp; exchanges by mail &amp; to stores on all orders&lt;/li&gt;&lt;li&gt;No returns or exchanges on final sale items.&lt;/li&gt;&lt;/ul&gt;&lt;a href="javascript:void(0)" onclick="return productPageShipReturnInserter.controller.openPopAndSendToOmni()"&gt;Learn More&lt;/a&gt;&lt;br/&gt;&lt;br/&gt;Print out a &lt;a href="http://www.gap.com/profile/returns_address_entry.do"&gt;prepaid UPS label&lt;/a&gt; or a &lt;a href="http://www.shipmentmanager.com/Gap/default.aspx?merchantid=1392" target="_new"&gt;prepaid U.S. Postal Service SmartLabel&trade;&lt;/a&gt;.';
									break;

								case "generalExclusive":
									shipReturnContent = '&lt;div class="copyBlock"&gt;shipping &amp; returns &lt;/div&gt;&lt;ul&gt;&lt;li&gt;FREE shipping on all orders over $50&lt;br /&gt;&lt;span class="italCopy"&gt;Select  the "FREE" option in the shopping bag&lt;/span&gt;&lt;/li&gt;&lt;li&gt;$7 Flat Rate for orders under $50&lt;/li&gt;&lt;li&gt;FREE returns &amp; exchanges by mail&lt;/li&gt;&lt;li&gt;No returns or exchanges on final sale items.&lt;/li&gt;&lt;/ul&gt;&lt;a href="javascript:void(0)" onclick="return productPageShipReturnInserter.controller.openPopAndSendToOmni()"&gt;Learn More&lt;/a&gt;&lt;br/&gt;&lt;br/&gt;Print out a &lt;a href="http://www.gap.com/profile/returns_address_entry.do"&gt;prepaid UPS label&lt;/a&gt; or a &lt;a href="http://www.shipmentmanager.com/Gap/default.aspx?merchantid=1392" target="_new"&gt;prepaid U.S. Postal Service SmartLabel&trade;&lt;/a&gt;.';
									break;

								case "selectExclusive":
									shipReturnContent = '&lt;div class="copyBlock"&gt;shipping &amp; returns &lt;/div&gt;&lt;ul&gt;&lt;li&gt;FREE shipping on all orders over $50&lt;br /&gt;&lt;span class="italCopy"&gt;Select  the "FREE" option in the shopping bag&lt;/span&gt;&lt;/li&gt;&lt;li&gt;$7 Flat Rate for orders under $50&lt;/li&gt;&lt;li&gt;FREE returns &amp; exchanges by mail&lt;/li&gt;&lt;li&gt;No returns or exchanges on final sale items.&lt;/li&gt;&lt;/ul&gt;&lt;a href="javascript:void(0)" onclick="return productPageShipReturnInserter.controller.openPopAndSendToOmni()"&gt;Learn More&lt;/a&gt;&lt;br/&gt;&lt;br/&gt;Print out a &lt;a href="http://www.gap.com/profile/returns_address_entry.do"&gt;prepaid UPS label&lt;/a&gt; or a &lt;a href="http://www.shipmentmanager.com/Gap/default.aspx?merchantid=1392" target="_new"&gt;prepaid U.S. Postal Service SmartLabel&trade;&lt;/a&gt;.';
									break;
							}
							break;

						case "0622PRODSHIPRETINFO_SEGD":
							switch( prodType ) {
								case "general":
									shipReturnContent = '&lt;div class="copyBlock"&gt;shipping &amp; returns &lt;\/div&gt;&lt;ul&gt;&lt;li&gt;Everyday FREE shipping on any order over $50&lt;br /&gt;&lt;span class="italCopy"&gt;Select  the "FREE" option in the shopping bag&lt;\/span&gt;&lt;\/li&gt;&lt;li&gt;Will arrive in 7-9 business days*&lt;\/li&gt;&lt;li&gt;Faster shipping available, starting at $7 Flat Rate&lt;\/li&gt;&lt;li&gt;FREE exchanges and FREE returns to stores&lt;\/li&gt;&lt;\/ul&gt;* &lt;a href="javascript:void(0)" onclick="return productPageShipReturnInserter.controller.openPopAndSendToOmni()"&gt;Learn More&lt;\/a&gt;';
									break;

								case "generalExclusive":
									shipReturnContent = '&lt;div class="copyBlock"&gt;shipping &amp; returns &lt;\/div&gt;&lt;ul&gt;&lt;li&gt;Everyday FREE shipping on any order over $50&lt;br /&gt;&lt;span class="italCopy"&gt;Select  the "FREE" option in the shopping bag&lt;\/span&gt;&lt;\/li&gt;&lt;li&gt;Will arrive in 7-9 business days*&lt;\/li&gt;&lt;li&gt;Faster shipping available, starting at $7 Flat Rate&lt;\/li&gt;&lt;li&gt;Return by mail only&lt;\/li&gt;&lt;li&gt;FREE exchanges&lt;\/li&gt;&lt;\/ul&gt;* &lt;a href="javascript:void(0)" onclick="return productPageShipReturnInserter.controller.openPopAndSendToOmni()"&gt;Learn More&lt;\/a&gt;';
									break;

								case "selectExclusive":
									shipReturnContent = '&lt;div class="copyBlock"&gt;shipping &amp; returns &lt;\/div&gt;&lt;ul&gt;&lt;li&gt;Everyday FREE shipping on any order over $50&lt;br /&gt;&lt;span class="italCopy"&gt;Select  the "FREE" option in the shopping bag&lt;\/span&gt;&lt;\/li&gt;&lt;li&gt;Will arrive in 7-9 business days*&lt;\/li&gt;&lt;li&gt;Faster shipping available, starting at $7 Flat Rate&lt;\/li&gt;&lt;li&gt;FREE returns (by mail only)&lt;\/li&gt;&lt;li&gt;FREE exchanges&lt;\/li&gt;&lt;\/ul&gt;* &lt;a href="javascript:void(0)" onclick="return productPageShipReturnInserter.controller.openPopAndSendToOmni()"&gt;Learn More&lt;\/a&gt;';
									break;
							}
							break;

					}
					newTabWindowDiv.update( shipReturnContent );
					if( $('tabWindow') &amp;&amp; ! $('newTabWindow') ) {
						var tabWindow = $('tabWindow');
						tabWindow.insert({ after:newTabWindowDiv });
					}
				},
				sendToOmni: function( elt, eventName ) {
					s.tl( elt , 'o', eventName);
				},
				openPopAndSendToOmni: function() {
					productPageShipReturnInserter.controller.sendToOmni( 'shippingReturn', 'Product Page Shipping &amp; Return' );
					return gidLib.layeredPopup.openLayeredPopup({str:'/customerService/info.do?cid=2019',id:'shippingOptions',width:398,height:265,style:{name:'universalPopup'}});
				}
			},
			view: {

			}
		};

		var productPageShipReturnInserter =  new ProductPageShipReturnInserter();

        productPage.loadProduct = productPage.loadProduct.wrap(
                        function( originalMethod ) {
                               originalMethod();
                               var currentPID = gidLib.getQuerystringParam('pid');
                               currentPID = currentPID.substr(0,6);
                               if( currentPID != '000066' &amp;&amp; currentPID != '000079' &amp;&amp; currentPID != '000138' ) {   // Here's where you check specific product ID, change this to whatever you want to exclude
                                               productPageShipReturnInserter.controller.init( plProductSegmentName );
                               }
                        }
        );

	}
}
  </script>
  <!-- END ProductPages_EDFS Copy Update -->
  <!-- REVIEWS 2.0 CSS OVERRIDES -->
  <script type="text/javascript">
   if(location.pathname == "/browse/product.do"){


	    function CheckIE(){
		    var Browser;
		    Browser = navigator.userAgent;
		    if (Browser.indexOf("Trident") != -1 || jQuery.browser.msie){
				jQuery(".mainContentWrapper").width(632);
		    }
	    }

		reviews2Flag = {

			init: function(){
				//Add "Ratings" to the number of ratings in the top widget
				//"Rating" for 1 rating
				//"Ratings" for 0 or more than 1 rating
				//Do not fire if there is already a "Rating" string after # of reviews
				if(jQuery(".bv-rating-ratio-count:contains('Rating')").length &lt; 1){
					if(parseInt(jQuery( "[itemprop='reviewCount']" ).html()) === 1){
						jQuery( "[itemprop='reviewCount']" ).append(' Rating');
					}else{
						jQuery( "[itemprop='reviewCount']" ).append(' Ratings');
					}

					//Remove border on the top widget
					jQuery(".bv-primarySummary-rating-container").attr('style', 'border-style: none !important;')

					//Remove fit review sliders
					jQuery(".bv-content-details-container").attr('style', 'display: none !important;');

					//Remove number next to "Overall" rating sliders
					jQuery(".bv-secondary-rating-summary-rating").attr('style', 'display: none !important;');

					//Flush out review content across the review container
					jQuery(".bv-content-details-offset-on, .bv-content-details-offset-off").attr('style', 'width: 100% !important;left: 10px !important; position: relative !important;');

					//Align the author's name
					jQuery(".bv-author-location span").attr('style', 'position: relative !important; left: 5px !important;');

					//Reduce size of "Write a Review" button at the very top widget
					jQuery(".bv-prs-container .bv-submission-button").attr('style', 'font-size: 11px !important; padding: 0 0 10px !important;');

					//Remove borders on left-hand side individual reviews
					jQuery(".bv-author-userstats").attr('style', 'border-style: none !important;left: 3px !important;margin: 5px 7px !important;position: relative !important;');

					//Decrease width of left-hand side "Votes" data label
					jQuery(".bv-author-userstats-votes").attr('style', 'width: 50px !important;');
				}


				//console.log("REVIEWS 2.0 OVERRIDES ACTIVE");
			}

		}

		//Prevent doubling
		var productPageLoaded = false;

		Event.observe(document, 'productPage:ready', function() {
			//console.log("EVENT OBSERVE FIRED");
			if(productPageLoaded == false){
				productPageLoaded = true;
				CheckIE();
				reviews2Flag.init.delay(3);
			}
		});


//Swatch Change
		productPage.setColor = productPage.setColor.wrap(function(om, i) {
			om(i);
			//run your function
			reviews2Flag.init.delay(1.5);
		});

//Size Change
		productPage.setSizeDimension1 = productPage.setSizeDimension1.wrap(function(om, i) {
			om(i);
			//run your function
			reviews2Flag.init();
		});

//Size Change
		productPage.setSizeDimension2 = productPage.setSizeDimension2.wrap(function(om, i) {
			om(i);
			//run your function
			reviews2Flag.init();
		});

	}
  </script>
  <!--END REVIEWS 2.0 CSS OVERRIDES-->
  <!-- Begin Guest Checkout from 2/19 cleanup -->
  <script type="text/javascript">
   Event.observe(document, "dom:loaded", function () {
var gcoURL = document.location.hostname;
var gcoSegmentLetter = "";
if (gcoURL.indexOf("m.") &gt; -1) {
  	gcoSegmentLetter = "C"
  } else {
  	gcoSegmentLetter = "A"
  }
  clientStateManagementService.api.persist('gcoMode', 'seg', gcoSegmentLetter);
  clientStateManagementService.api.persist('gcahMode', 'seg', gcoSegmentLetter);
  if ($("registrationSaveInfoContainer")){
  	$("registrationSaveInfoContainer").update('&lt;div class="gcoContent" id="gcoTempContent"&gt;&lt;div style="width:401px;height:auto;"&gt;Creating an account offers several benefits:&lt;br&gt;&nbsp;&nbsp;&nbsp;&nbsp;-Faster checkout&lt;br&gt;&nbsp;&nbsp;&nbsp;&nbsp;-Easy access to order history&lt;br&gt;&nbsp;&nbsp;&nbsp;&nbsp;-Signs you in to all Gap, Inc. websites&lt;br&gt;&lt;/div&gt;&lt;/div&gt;');
  }
});
  </script>
  <!-- End Guest Checkout from 2/19 cleanup -->
  <script type="text/javascript">
   if( location.pathname == "/browse/product.do" ) {

	var productPageFinalSale = {

		init: function() {

			// Marketing flag
			var prodTargetCopy = 'Final Sale';
			var prodMarketingFlag = '';
			var prodMarketingFlagTxt = '';
			if( $('productPageMarketingFlagStyle') &amp;&amp; $('productPageMarketingFlagStyle').getStyle('display') == 'block' ) {
				prodMarketingFlag = $('productPageMarketingFlagStyle').select('span.productMarketingFlag');
				if( prodMarketingFlag &amp;&amp; prodMarketingFlag.length &gt; 0 ) {
					prodMarketingFlag = prodMarketingFlag[0];
					if( prodMarketingFlag.innerHTML != '' ) {

						prodMarketingFlagTxt = prodMarketingFlag.innerHTML;

						$('productPageMarketingFlagStyle').hide();

						//console.log(prodMarketingFlagTxt);
						if( prodMarketingFlagTxt != '' &amp;&amp; prodMarketingFlagTxt == prodTargetCopy) {

							var prodMarketingFlagElt = new Element('div', { id:'productMarketingFlag' });
							prodMarketingFlagElt.update( prodMarketingFlagTxt );
							$('productNameText').insert({ top:prodMarketingFlagElt });

							//update swatch flag copy
							jQuery( "#swatchContent" ).find( "#productPageMarketingFlagColor" ).css( "color", "#FF3300" );
							//jQuery( "#productPageMarketingFlagColor" ).find( "span.productMarketingFlag" ).css( "color", "#FF3300" );
						}
					}
				}
			}

			/*if( prodMarketingFlagTxt != '' &amp;&amp; prodMarketingFlagTxt == prodTargetCopy) {
				//$('productNameText').insert({ top:new Element('br') });
				var prodMarketingFlagElt = new Element('div', { id:'productMarketingFlag' });
				prodMarketingFlagElt.update( prodMarketingFlagTxt );
				$('productNameText').insert({ top:prodMarketingFlagElt });
			}*/
		}

	}



	productPage.loadProduct = productPage.loadProduct.wrap(
		function( originalMethod ) {
			originalMethod();
			productPageFinalSale.init();
		}
	);
}
  </script>
  <!-- END: Product Page Final Sale title override 2/19 cleanup -->
  <!-- ================================
override baby gift shop left nav 2015
================================= -->
  <script type="text/javascript">
   jQuery(function($) {
    $(document).ready(function() {
      //check if baby gift shop category link exists and gift sets link exists li tags
      if ($('#categoryNav1027011').length &amp;&amp; $('#categoryNav1027019')){
        //console.info('on a baby page and gift shop AND gift sets category links exist');
        //change css of gift shop link
        $('#categoryNav1027011').css({
          'font-size': '10px',
          'font-weight': 'bold',
          'color':'#000d42',
          'border-top': 'solid 1px',
          'border-bottom': 'solid 1px',
          'margin-bottom': '4px',
          'margin-top': '10px'
        });
        //change css of gift sets
        $('#categoryNav1029391').css({
          'border-bottom':'solid 1px',
          'padding-bottom':'4px'
        });
        //change a href of gift shop link
        $('#categoryNav1027011 a').attr('href','/browse/info.do?cid=1028245');
      }
    });
  });
  </script>
  <!--END: Baby Gifting -->
  <!-- END Content Item File: /content/0009/751/876/cn9751876.html -->
  <!-- END - WCD Sitewide Container 1 -->
  <!-- BEGIN - WCD Sitewide Container 2 -->
  <!-- BEGIN Content Item File: /content/0009/966/779/cn9966779.html -->
  <!-- !!!!!!!!!!!!!!!!!!!!!!!!!  WCD JS &amp; CSS Head Seasonal GOL BRAND SPECIFIC OVERRIDES!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!! -->
  <style type="text/css">
   /**** BEGIN GOL Seasonal Layout ****/
body {
    background: none repeat scroll 0 0 #FFFFFF;
    overflow-x: hidden;
}



#sideNav li.categorySelected{background-image:none; margin-left:0px; padding: 0 0 0 6px;}



/*** BEGIN Checkout Promo Details Legal Pop-up Styling override: add padding GOL request 2/12/13 ***/
body.popup #bodyContainer .shortDescMsg {padding:5px;line-height: 16px;}
body.popup #bodyContainer .promoCode {padding-left:5px;}
body.popup #bodyContainer p{padding:5px;}
body.popup, body.popup #bodyContainer {
    background: none repeat scroll 0 0 #FFFFFF !important;
}
/*** END Checkout Promo Details Legal  Pop-up Styling override: add padding GOL request 2/12/13 ***/

/**** END BACKGROUND WHITE BG ***/

/*****BEGIN CATEGORY PAGE OVERRIDES *****/

/* begin override promo pricing expression coloration */
.productCatItem span.mupSupMessage { color: #FF3300;font-weight:bold;} /*red and bold message under cat item*/
/* end override promo pricing expression coloration */

.categoryContent {
	background-color: white; /*CHANGE BACKGROUND TO WHITE */
}


/*keyline to white/reassign keyline */
#mainContent {border:none;}
#mainContentContainer {border:none;}
#mainContentContainer {border-left:none;border-right:none;}

/*remove bottom keyline from main content*/
#mainContent {border-bottom:none;background-color:#FFF}
#mainContentContainer {border-bottom:none;background-color:#FFF !important;}
/* #mainContentContainer {border-bottom:none;background-color:transparent !important;} */

#sideNav  {background-color:#FFF !important;color:#000;}
/*end reassign keyline */

/*dotted key line removed from maincontent added to sidenav added for 7.12 add contentOvveride*/
/*#mainContentContainer #mainContent {background-color:transparent !important;border:medium none; background-image:none;}*/
#mainContentContainer #mainContent {background-color:#FFF;border:medium none; background-image:none;}

/*****END CATEGORY PAGE OVERRIDES *****/

/*****BEGIN FOOTER OVERRIDES *****/
#footer {color:#666; font-size:9px;}
#footer a:link, #footer a:visited, #footer a:active{color:#000;}
/*****END FOOTER OVERRIDES *****/

/**** END GOL Seasonal Layout: SPRING 2013 Background  - 12/26/2013 ****/

/**** BEGIN CUSTOM WCD CSS STYLES ****/
.subMargin15 { margin-bottom: 15px; }


/**** END CUSTOM WCD CSS STYLES ****/

/**** BEGIN:  BANNER INSERT CODE CSS****/

* html #categoryProductGrid .brand1 productCatItem { height:357px }
*:first-child+html #categoryProductGrid .brand1 productCatItem { height:357px }
#categoryProductGrid .clear5 { display:none;height:0; }
#tabTableOff .header4 {clear:both;}
#vi_banner_ID10000384 {display: none;}
#categoryNameHeader {display: none;}

*html #newContentBanner { display:inline;}
#newContentBanner {

display: inline;
_display: inline;
float:left;
margin:8px 2px 50px 1px !important;
*margin-top:1px;
*margin-bottom:20px;
*margin-right:2px;
height:269px;
overflow:hidden;
padding:0px !important;
_padding:0px !important;
min-width:187px;


}

.subHeaderWCDMarketing{

display: inline;
_display: inline;
float:left;
margin:8px 2px 50px 1px !important;
*margin-top:1px;
*margin-bottom:20px;
*margin-right:2px;
height:269px;
overflow:hidden;
padding:0px !important;
_padding:0px !important;
min-width:187px;

}

#categoryNameHeader {
    background-color: #000033 !important;
    line-height: 18px;
    margin: 0;
    padding: 13px 0 13px 21px;
	margin-left: 3px
}

#catname, #subcatname, #subsubcatname {
color:#FFFFFF;
font-family:arial;
font-size:18px;
font-weight:bold;
}

/**** END:  BANNER INSERT CODE CSS ****/

/***** BEGIN JBOX DEFAULT STYLES *****/
#jbox {
  overflow: auto;
}

#jbox #backdrop {
  background: #000000;
  width: 100%;
  height: 100%;
  overflow: auto;
  left: 0;
  opacity: 0.75;
  filter: alpha(opacity = 75);
  z-index: 999;

  position: fixed;
  _position: absolute;
  top: 0;
  _top: expression(eval(document.body.scrollTop));
}

#jbox #box {
  background: transparent;
  left: 50%;
  z-index: 1000;
  position: fixed;
  _position: absolute;
  top: 50%;
  box-shadow: 4px 4px 25px rgba(0, 0, 0, .5);
  -moz-box-shadow: 4px 4px 25px rgba(0,0,0,.5);
  -webkit-box-shadow: 4px 4px 25px rgba(0, 0, 0, .5);

  border: 1px solid #333333;
}

#jbox #topbar {
  position: absolute;
  top: -25px;
  width: 100%;
}

#jbox #title {
  position: absolute;
  left: 0;
  font-family: Arial, Helvetica, Sans-serif;
  font-size: 14px;
  color: #ffffff;
}

#jbox #close {
  position: absolute;
  right: 0;
}

#jbox #close a {
  display: block;
  color: #ffffff;
  text-decoration: none;
  font-family: Arial, Helvetica, Sans-serif;
  font-size: 14px;
}

#jbox #close a:hover {
  text-decoration: underline;
}

#jbox #iframeContainer,
#jbox #iframeContainer #iframe {
  background: #ffffff;
  margin: 0;
  padding: 0;
  overflow: hidden;
}

#jbox #loading {
  position: absolute;
  color: #000000;
  top: 15px;
  left: 15px;
  font-family: Arial, Helvetica, sans-serif;
  font-size: 14px;
}

#jbox #loading img {
  margin-right: 10px;
}
/***** BEGIN JBOX DEFAULT STYLES *****/
  </style>
  <script type="text/javascript">
   /**********************BEGIN JS SEASONAL OVERRIDES: GOL BRAND SPECIFIC************************/

/*BEGIN Launch Free Shipping/Free Returns EDFS  Legal Pop-up with URL param 062713 */
Event.observe(window,"load", function(){
	// GB suppression
	var showEDFSLegalPop = gidLib.getQuerystringParam("freeShipLegalPop");
	
	if (showEDFSLegalPop) {
		if(showEDFSLegalPop == "true"){
			//gidLib.layeredPopup.openLayeredPopup({str:'/browse/info.do?cid=47471',id:'edfsPopup',width:490,height:500});
      jbox.boxIt({width:480,height:425,url:"/browse/info.do?cid=47471"});
		} 
	} 

});
/*END Launch Free Shipping/Free Returns EDFS  Legal Pop-up with URL param 062713 */

/* Redirect Baby Boy Division to Baby */
if (location.pathname == '/browse/subDivision.do?cid=42022') {

	var url = "/browse/subDivision.do?cid=6487";
	location = url;
	location.href (url);
} 

/*end Redirect Baby Boy Division to Baby*/


if ( (location.pathname == "/browse/product.do") || (location.pathname == "/browse/outfit.do") ) {
	document.observe("dom:loaded", function() {
        var productMainContent = $('mainContent');
		//productMainContent.setAttribute('style', 'background-color:#ffffff !important');
		productMainContent.setStyle({ backgroundColor: "#ffffff"});
		//productMainContent.style.backgroundColor="#ffffff";
	});
} else {


}

/***** BEGIN GOL BANNER INSERT CODE ON VI PAGES*******/
if( location.pathname == "/browse/category.do" ) {

	facetcategoryMarketingRejigger = {
		
		init: function() {
				// Check for marketing content for subheaders
				if( window['categoryMarketingData'] ) {
						// Loop through and identify subheaders
						if( $('tabTableOff') ) {
							var subHeaders = $('tabTableOff').select('h2.header4');
							var subHeader, subHeaderName, eltToInsertAfter, marketingDiv;
							
							//all UL elements
							var ulELements = $('tabTableOff').select('ul');
							var ulElement;
							
							if( subHeaders &amp;&amp; subHeaders.length &gt; 0 ) {
								for( var i=0; i &lt; subHeaders.length; i++ ) {
									subHeader = subHeaders[i];
									subHeaderName = subHeader.innerHTML;
									//remove spaces and characters
									subHeaderName = subHeaderName.replace(/\s/g,''); //remove all white space
									subHeaderName = subHeaderName.replace(/&amp;/g, '');//remove '&amp;' since they can't be used in the url
									subHeaderName = subHeaderName.replace(/&amp;/g, ''); //remove '&amp;' since they can't be used in the url
                  subHeaderName = subHeaderName.replace(/[^a-zA-Z]+/g,''); // remove anything not A-Z 
									subHeaderName = subHeaderName.toLowerCase();
									
									ulElement = ulELements[i];
									
															
									// Find divider1s after header4s to determine where to insert marketing - facets off
									eltToInsertAfter = subHeader.next();
									
									//facets find next UL tag after subheader to insert content before - facets on
									var locateFirstUL = ulElement;
																
									for( var j=0; j &lt; categoryMarketingData.subheaders.length; j++ ) {
										if( subHeaderName == categoryMarketingData.subheaders[j].subHeaderName ) {
										
											marketingDiv = new Element('div', { id: 'subHeaderMarketing' + i, className: 'subHeaderWCDMarketing' });
											
																			
											if( $( categoryMarketingData.subheaders[j].subHeaderMarketingContent ) ) {
													marketingDiv.update( $( categoryMarketingData.subheaders[j].subHeaderMarketingContent ).innerHTML );
													
													locateFirstUL.insert({ before:marketingDiv });				
											}
										}
									}						
								}				
							}
						}
				
				
				
				}
				// If no subheader marketing content for any, move name into first square of grid
				else {
	
					// Marketing banner
					if( $('vi_banner_ID10000384') ) {
					
						var viBannerCheck = $('vi_banner_ID10000384').innerHTML;
						viBannerCheck = viBannerCheck.replace(/\s/g,''); //remove all white space
						
						if (viBannerCheck != '') { //check to see if marketing content is assigned, added due to new wide banner container
						var htmlBannerStr = $('vi_banner_ID10000384').innerHTML;
							
							htmlBannerDiv = new Element('div', { id: 'newContentBanner' });
							htmlBannerDiv.update( htmlBannerStr );
										
							//insert marketing into first slot
							if( $('tabTableOff') ) {
												
								/*facets */
								var firstGridSquare = $('tabTableOff').select('ul');
														
								
								if( firstGridSquare &amp;&amp; firstGridSquare.length &gt; 0 ) {
									firstGridSquare = firstGridSquare[0];
									firstGridSquare.insert({ before: htmlBannerDiv });
								}
							}
						}
					}
	
					// HTML banner
					if( $('categoryNameHeader') ) {
					
						var htmlBannerContent = $('categoryNameHeader');
						htmlBannerContent.style.display = "block";

					} 
				
				} 
				
				
		} //end init
	}
	
document.observe('categoryFacetedSearchGrid:ready',facetcategoryMarketingRejigger.init);

//Event.observe( document, 'categoryProductGrid:ready', facetcategoryMarketingRejigger.init );
		
}
/* END GOL BANNER INSERT CODE ON VI PAGES */

/**
* JBOX:
* A simple popup box overlay that provides easy styling through the use of CSS. Default style is a simple borderless popup, with a CSS box-shadow.
* Main idea is to simplify the popup process. Utilization of CSS to calculate positioning, less realiance on JS.
*
* @author: Jacob Moretti
* @date: 10/05/2012
* @last-revised: 10/29/2012
*
* PROPERTIES OF JBOX -&gt;
* @property (INT) width: width of the popup
* @property (INT) height: height of the popup
* @property (STRING) url: url for iframe
* @property (STRING) title: title to display above popup
* @property (STRING) jboxID: div id of the popup container that holds everything
* @property (STRING) backdropID: id of the backdrop overlay div
* @property (STRING) titleID: id of the title div
* @property (STRING) closeID: id of the close div
* @property (STRING) boxID: id of the box div that holds #titleID, #closeID, and #iframeID
* @property (STRING) iframeContainerID: id of the div container that holds the iframe
* @property (STRING) iframeID: id of the iframe
* @property (STRING) iframeName: name of the iframe
**/

var jbox = {

  // initial properties
  width: 300,
  height: 300,
  url: "",
  title: "",
  jboxID: "jbox",
  backdropID: "backdrop",
  boxID: "box",
  topbarID: "topbar",
  titleID: "title",
  closeID: "close",
  iframeContainerID: "iframeContainer",
  iframeID: "iframe",
  iframeName: "jboxIframe",

  // hold default options for fallback
  defaultOptions:
  {
    width: 300,
    height: 300,
    url: "",
    title: "",
    jboxID: "jbox",
    backdropID: "backdrop",
    boxID: "box",
    topbarID: "topbar",
    titleID: "title",
    closeID: "close",
    iframeContainerID: "iframeContainer",
    iframeID: "iframe",
    iframeName: "jboxIframe"
  },

  // set passed in options
  setOptions : function(options)
  {
    this.width = options.width;
    this.height = options.height;
    this.url = options.url;
    this.title = (options.title == null || options.title == "") ? this.defaultOptions.title : options.title;
    this.jboxID = (options.jboxID == null || options.jboxID == "") ? this.defaultOptions.jboxID : options.jboxID;
    this.backdropID = (options.backdropID == null || options.backdropID == "") ? this.defaultOptions.backdropID : options.backdropID;
    this.boxID = (options.boxID == null || options.boxID == "") ? this.defaultOptions.boxID : options.boxID;
    this.topbarID = (options.topbarID == null || options.topbarID == "") ? this.defaultOptions.topbarID : options.topbarID;
    this.titleID = (options.titleID == null || options.titleID == "") ? this.defaultOptions.titleID : options.titleID;
    this.closeID = (options.closeID == null || options.closeID == "") ? this.defaultOptions.closeID : options.closeID;
    this.iframeContainerID = (options.iframeContainerID == null || options.iframeContainerID == "") ? this.defaultOptions.iframeContainerID : options.iframeContainerID;
    this.iframeID = (options.iframeID == null || options.iframeID == "") ? this.defaultOptions.iframeID : options.iframeID;
    this.iframeName = (options.iframeName == null || options.iframeName == "") ? this.defaultOptions.iframeName : options.iframeName;
  },

  // method for checking existence of custom data attributes
  checkDataAttributes : function()
  {
    // listen for a click on all anchors with rel=jbox
    $$("[rel='jbox']").invoke('observe', 'click', function(e) {
      // grab the element clicked
      var thisElement = e.findElement("[rel='jbox']");

      // gather each of the data jbox attributes
      var options = {};
      options.width = $(thisElement).getAttribute('data-jbox-width');
      options.height = $(thisElement).getAttribute('data-jbox-height');
      options.url = $(thisElement).getAttribute('data-jbox-url');
      options.title = $(thisElement).getAttribute('data-jbox-title');
      options.jboxID = $(thisElement).getAttribute('data-jbox-jboxID');
      options.backdropID = $(thisElement).getAttribute('data-jbox-backdropID');
      options.boxID = $(thisElement).getAttribute('data-jbox-boxID');
      options.topbarID = $(thisElement).getAttribute('data-jbox-topbarID');
      options.titleID = $(thisElement).getAttribute('data-jbox-titleID');
      options.closeID = $(thisElement).getAttribute('data-jbox-closeID');
      options.iframeContainerID = $(thisElement).getAttribute('data-jbox-iframeContainerID');
      options.iframeID = $(thisElement).getAttribute('data-jbox-iframeID');
      options.iframeName = $(thisElement).getAttribute('data-jbox-iframeName');

      // now open the box using the options we gathered above
      jbox.boxIt(options);

      e.preventDefault();
    });
  },

  // main method to create the actual overlay
  boxIt : function(options)
  {
    // set options that have been passed
    jbox.setOptions(options);

    // insert all the necessary HTML for the structure of the overlay box.
    // the div#jboxID holds everything, styled to zero opacity initially.
    // the iframe#iframeID is also styled to zero opacity
    // NOTE: In order to properly place the div#boxID in the center of the screen
    // we take the width/2, height/2, and set them as negative margins for top and left respectively.
    // Also note that the "X" for the close button is wrapped in a span tag, this is incase you
    // need to hide the "X" and use your own image - you can do so through CSS
    $(document.body).insert('&lt;div id="' + this.jboxID + '" style="display:none;"&gt;' +
        '&lt;div id="' + this.backdropID + '"&gt;&lt;/div&gt;' +

        '&lt;div id="' + this.boxID + '" style="width: ' + this.width + 'px; height: ' + this.height + 'px; margin: -' + (this.height/2) + 'px 0 0 -' + (this.width/2) + 'px;"&gt;' +

          '&lt;div id="' + this.topbarID + '"&gt;' +

            '&lt;div id="' + this.titleID + '"&gt;' + this.title + '&lt;/div&gt;' +

            '&lt;div id="' + this.closeID + '"&gt;&lt;a href="#close"&gt;&lt;span&gt;X&lt;/span&gt;&lt;/a&gt;&lt;/div&gt;' +

          '&lt;/div&gt;' +

          '&lt;div id="' + this.iframeContainerID + '" style="width:' + this.width + 'px;height:' + this.height + 'px;"&gt;&lt;iframe id="' + this.iframeID + '" scrolling name="' + this.iframeName + '" src="' + this.url + '" style="display:none;width:' + this.width + 'px;height:' + this.height + 'px;" frameborder="0"&gt;&lt;/iframe&gt;&lt;/div&gt;'+

        '&lt;/div&gt;' +

      '&lt;/div&gt;'
    );

    // now that the HTML has been inserted
    // lets open the box up
    jbox.open();
  },

  open : function()
  {
    // show jbox as its initially hidden
    $(jbox.jboxID).show();
    
    // in order to properly center the title
    // we take its width/2 and set as negative left margin
    var titleWidth = $(this.titleID).getWidth() / 2;
    $(this.titleID).setStyle({left: "50%", marginLeft: "-" + titleWidth + "px"});
    
    // add closing behaviors
    jbox.addCloseBehaviors();

    // check to see if the document in the iframe is done loading
    this.checkLoading();
  },

  close : function()
  {
  	// we blank out the src as a workaround for IE
  	$(jbox.iframeID).src = "";
    // remove the html markup
    $(jbox.jboxID).remove();
  },

  checkLoading : function()
  {
    // the iframe#iframeID is still hidden
    // we add some loading text in the div#iframeContainer
    $(this.iframeContainerID).insert('&lt;div id="loading"&gt;&lt;img src="/Asset_Archive/GPWeb/content/0009/966/779/assets/loading.gif" alt="loading" align="left" /&gt; loading...&lt;/div&gt;');

    // listen for when the iframe has completed loading its content
    Event.observe(jbox.iframeID, "load", function()
    {
      // when loading is complete
      // remove the markup completely
      jQuery('#loading').remove();
      // show iframe, as its initially hidden
      jQuery(jbox.iframeID).show();
	  jQuery(jbox.iframeID).css({ 'width': jbox.width + 'px', 'height': jbox.height + 'px' });
    });
  },

  // method for listening to clicks to close the box
  // we want to avoid inline JS so its controlled here
  addCloseBehaviors: function()
  {
    // watch for a click on the anchor inside the div#closeID
    $$('#' + this.closeID + ' a')[0].observe("click", function(e)
    {
      jbox.close();
      e.preventDefault();
    });

    // watch for a click on div#backdropID
    $(this.backdropID).observe("click", function(e)
    {
      jbox.close();
      e.preventDefault();
    });
  }

};

/* JBOX DATA ATTRIBUTE INIT */
Event.observe(window,"load",jbox.checkDataAttributes);

/***END JBOX CODE ***/


/**********************END JS SEASONAL OVERRIDES************************/
  </script>
  <script src="/Asset_Archive/GPWeb/content/0009/966/779/assets/wcdLib_101414.js" type="text/javascript">
  </script>
  <script type="text/javascript">
   /* GQ override force popup */
  if(window.location.href.indexOf("gap_US_GQacquisition_05292015_09152015") &gt; -1) {
    jQuery(document).ready(function(){
      console.info('GQPopUp');
      jbox.boxIt({width:633,height:640,url:"/browse/info.do?cid=1033748"}); 
    });
  }




/* Email Sign-up Pop-up on HP */

//var hasDIparam = gidLib.getQuerystringParam('DI');
var hasTIDparam = gidLib.getQuerystringParam('tid');
var hasMDTSparam = gidLib.getQuerystringParam('mdts');
var getTIDstring = hasTIDparam.substr(0, 4); //look for first two characters in EV string ex. GP
var emailCookieName = "GOL_hasSeenEmailpop";
var hasSeenEmailPop = gidLib.getCookieVar("mktUniversalPersist", emailCookieName);
if (location.hostname.indexOf('m.gap') &gt; -1 || location.hostname.indexOf('m.secure-www.gap.com') &gt; -1 || hasMDTSparam == "true") {
  hasSeenEmailPop = 1;
}

//if(hasDIparam == "" || hasDIparam == undefined) { //Exclude if &amp;DI param
if(hasTIDparam == "" || hasTIDparam == undefined || getTIDstring != 'gpem') { //Exclude if &amp;EV param

	// Initialize popup to use Personalization Data
	if( window['personalizationService'] ) {
		var wcdIsPersonalizationDataReady = false;
		document.observe('personalizationData:ready', function() {
			wcdIsPersonalizationDataReady = true;
		});
		Event.observe(window, 'load', function() {
			if( wcdIsPersonalizationDataReady ) {
				launchEmailPopUpHP();
			}
			else {
				document.observe('personalizationData:ready', function() {

					launchEmailPopUpHP();
				
        });	
			}
		});
	} else if(getTIDstring == 'gpem'){
		//EV present from email, set cookie to suppress through session
		gidLib.setCookieVar("mktUniversalPersist", emailCookieName, "1");	

	}

} //end isDI


function launchEmailPopUpHP() {
	
	//var emailCookieName = "092013_hasSeenEmailpop";
	//var hasSeenEmailPop = gidLib.getCookieVar("mktUniversalPersist", emailCookieName);
	//var emailCookieNameDI = "DI";
	//var customerid = gidLib.getCookie('customerId');
	//var hasEmailDI = gidLib.getCookieVar("mktUniversalPersist", emailCookieNameDI);


  if(document.cookie.indexOf("emailCookieRemindMeLater")&gt;=0 ){
    gidLib.setCookieVar("mktUniversalPersist", emailCookieName, "2");
  }


  // if(document.cookie.indexOf("emailCookieRemindMeLater")&lt;0 ){
  //   gidLib.setCookieVar("mktUniversalPersist", emailCookieName, "2");
  // }

	if( marketMessageService.requestOriginCountryCode == 'US' || marketMessageService.requestOriginCountryCode == '' ) { //only show pop-up to US and WIP
	
		//if ( location.pathname != "/buy/shopping_bag.do" &amp;&amp; location.pathname != "/checkout/order.do" &amp;&amp; location.pathname != "/checkout/orderConfirm.do" &amp;&amp; hasSeenEmailPop != "1"&amp;&amp; document.cookie.indexOf("emailCookieRemindMeLater")&lt;0) { //launch only on HP &amp; set cookie to only show once

    if ((location.pathname == "/browse/home.do" || location.pathname == "/") &amp;&amp; hasSeenEmailPop != "1" &amp;&amp; document.cookie.indexOf("emailCookieRemindMeLater")&lt;0) {//launch only on HP  
			
				//if (hasEmailDI == "" || hasEmailDI == undefined || customerid == 0) { //check for DI cookie is not present and customerId (ex. 40895368|||)
				//if (hasEmailDI == "" || hasEmailDI == undefined) { //check for DI cookie is not present and customerId (ex. 40895368|||)

						//auto-pop email
						jbox.boxIt({width:633,height:640,url:"/browse/info.do?cid=1000698"});	
						gidLib.setCookieVar("mktUniversalPersist", emailCookieName, "1");	

				//}
		
		}else {		
				//no pop-up, control
		}
	} //end marketingMessageService
}


/* End Sign-up Pop-up on HP */
  </script>
  <!-- ==========================
override baby gift shop left nav 
============================ -->
  <script type="text/javascript">
   jQuery(function($) {
    $(document).ready(function() {
      //check if baby gift shop category link exists and gift sets link exists li tags
      if ($('#categoryNav1027011').length &amp;&amp; $('#categoryNav1027019')){
        //console.info('on a baby page and gift shop AND gift sets category links exist');
        //change css of gift shop link
        $('#categoryNav1027011').css({
          'font-size': '10px',
          'font-weight': 'bold',
          'color':'#000d42',
          'border-top': 'solid 1px',
          'border-bottom': 'solid 1px',
          'margin-bottom': '4px',
          'margin-top': '10px'
        });
        //change css of gift sets
        $('#categoryNav1029391').css({
          'border-bottom':'solid 1px',
          'padding-bottom':'4px'
        });
        //change a href of gift shop link
        $('#categoryNav1027011 a').attr('href','/browse/info.do?cid=1028245');
      }
    });
  });
  </script>
  <!-- END Content Item File: /content/0009/966/779/cn9966779.html -->
  <!-- END - WCD Sitewide Container 2 -->
  <!-- BEGIN - WCD Sitewide Container 3 -->
  <!-- BEGIN Content Item File: /content/0008/792/725/cn8792725.html -->
  <!-- begin CSS Hot Fix contentOverride  -->
  <style type="text/css">
   /* Begin Hide PL Universal Button - 4/28/15 */
#universalBar .universalBarTable #universalBarTabs { width:263px !important }
#universalBar .universalBarTable #universalMarketingContainerTop { width:511px !important }
#universalBar .universalBarTable #universalInlineBagContainer{ width:213px !important }
/* End Hide PL Universal Button - 4/28/15 */

/* -- begin swim fix -- */
.specialHoursDate{
float: left !important;
width: 85px !important;
}

#quickLookMarketingFlagStyle .productMarketingFlag {
text-align: left !important;
}

#quickLookMarketingFlagColor .productMarketingFlag {
text-align: left !important;
}

/* -- end swim fix -- */

/* -- contentOverride130 begin remove associated JS override -- */
#noCookie {display:none;}
.siteErrorSpacer {display:none;}
/* -- contentOverride130 end remove associated JS override -- */

/* Begin CNOV-89 - Rewards in Checkout */
#rewardPanel .rewardsListContainer {width: 101%;}
/* End CNOV-89 - Rewards in Checkout */

/* Begin CNOV-105 - Fix facet flyout invisible in iOS7 */
#flyout_size_invisible_edge, #flyout_brand_invisible_edge {
	-webkit-transform: translate3d(0, 0, 0);
}
/* End CNOV-105 - Fix facet flyout invisible in iOS7 */


/* Begin CNOV-117 CSS overrides */
.primaryButtonA, .primaryButtonB, 
.secondaryButtonA, .secondaryButtonB, 
.tertiaryButtonA, .tertiaryButtonB, .tertiaryButtonC { font-family: Arial, Helvetica, sans-serif; }

.breakpoint-small .responsiveShoppingBag .securityAndPoliciesSM { display: block }
.breakpoint-small .responsiveShoppingBag .securityAndPoliciesLXL { display: none }
.breakpoint-medium .responsiveShoppingBag .securityAndPoliciesSM { display: block }
.breakpoint-medium .responsiveShoppingBag .securityAndPoliciesLXL { display: none }

.breakpoint-large .responsiveShoppingBag .securityAndPoliciesSM { display: none }
.breakpoint-large .responsiveShoppingBag .securityAndPoliciesLXL { display: block }
.breakpoint-xlarge .responsiveShoppingBag .securityAndPoliciesSM { display: none }
.breakpoint-xlarge .responsiveShoppingBag .securityAndPoliciesLXL { display: block }
/* End CNOV-117 CSS overrides */
  </style>
  <!-- end CSS Hot Fix contentOverride  -->
  <!-- contentOverride114 begin -->
  <script type="text/javascript">
   if (window["imageLoader"]) {
	// Undo the event binding
	if (window["categoryInfo"]) {
		if (categoryInfo.categoryPageCachingActive == "true") {
			Event.stopObserving(document, 'categoryProductGrid:ready', imageLoader.initLoader);
		}
	}
	if (!isImageLoaderObserverSet) {
		Event.stopObserving(document, "dom:loaded", imageLoader.initLoader);
	}
	// Override the init method
	ImageLoaderConstructor.prototype.init = function() {
		this.reset();
		var productGrid = this.productGrid = $('tabTable')||$('tabTableOff')||$('searchProductIteration')||$$('div[class="categoryContent"]')[0];
		if(!productGrid) return;
		// make imageLoader forward/backward compatible with SOLR/ORA category page
		// ---------------------
		this.productList = $('mainContent').select('div[class~="productCatItem"]');
		if(this.productList.length == 0) {
			this.productList = $('mainContent').select('li[class~="productCatItem"]');
		} 
		if(this.productList.length == 0) return;
		// ---------------------
		
		this.initializeImages(this.productList, this.imgs);
		
		var firstProductImg = Selector.findChildElements(this.productList[0], ['img']);
		this.shouldFlipImgArray = firstProductImg[0].id == this.imgs[this.imgs.length - 1].img.id;
		var productDim = this.productList[0].getDimensions();
		var productViewportRowCount = this.browserDim[1] / productDim.height;
		this.groupSize = Math.ceil(productViewportRowCount) * this.productPerRow;
		this.groupCount = Math.ceil(this.productList.size() / this.groupSize);
		
		var productGridDim = productGrid.getDimensions();
		var productRowCount = Math.floor(productGridDim.height / productDim.height);
		var rowSize = productRowCount / this.groupCount;
		var rowsHeight = productDim.height * rowSize;
		
		this.rowsHeightInverse = 1/rowsHeight;
		var productGridOffset = Position.cumulativeOffset(productGrid);
		this.minHeight = productGridOffset[1];
		this.maxHeight = this.minHeight + productGridDim.height - rowsHeight;
		
		this.scrollHandler = this.fetch.bind(imageLoader);
		Event.observe(window, 'scroll', this.scrollHandler);
		this.fetch();
	};
	// re-instantiate imageLoader
	window['imageLoader'] = null;
	window['imageLoader'] = new ImageLoaderConstructor();
	// re-bind events
	window['isImageLoaderObserverSet'] = false;
	if (window["categoryInfo"]) {
		if (categoryInfo.categoryPageCachingActive == "true") {
			Event.observe(document, 'categoryProductGrid:ready', imageLoader.initLoader);
			window['isImageLoaderObserverSet'] = true;
		}
	}
	if (!window['isImageLoaderObserverSet']) {
		Event.observe(document, "dom:loaded", imageLoader.initLoader);
		window['isImageLoaderObserverSet'] = true;
	}
}
  </script>
  <!-- contentOverride114 end -->
  <!-- begin contentOverride 101 -->
  <script type="text/javascript">
   if(window['productPage'] || window['quickLook']) {
	[window['productPage'], window['quickLook']].each( function(obj) { 
		if (!obj) return;
		obj.getPriceText = function(strPrice,strSalePrice) {
			return (!strSalePrice || strSalePrice == '' ? strPrice : '&lt;strike&gt;' + strPrice + '&lt;/strike&gt;&lt;span class="salePrice"&gt;' + strSalePrice + '&lt;/span&gt;');
		};
    });
}
  </script>
  <!-- end contentOverride 101 -->
  <!-- begin contentOverride23 -->
  <script type="text/javascript">
   // FEDEX TRACKING	
(function() {
    if (location.pathname == "/profile/shipment_detail.do") {
        Event.onDOMReady(function() {
            var as = $$('a[href*=http://fedex.com/Tracking?action=track&amp;language=english&amp;cntry_code=us&amp;initial=x&amp;tracknumbers]');
            as.each(function(a){
                if (a &amp;&amp; a.href) {
                    var url = a.href;
                    if (url.indexOf("tracknumbers=") == -1) {
                        url = url.replace("tracknumbers","tracknumbers=");
                        a.href = url;
                    }
                }
            });
        });
    }
})();
  </script>
  <!-- end contentOverride23 -->
  <!-- begin contentOverride Product Review  - pid 719978 talk to Cindy Jermaine or Ollie  -->
  <script type="text/javascript">
   if(location.pathname == "/browse/product.do" &amp;&amp; gidLib.getQuerystringParam("pid") == "719978"){    
	//Event.observe(window, "load", function(){
	
		var changedDefaultReviews = false;     
		productReviewService.controller.productManager.view.productReviewDetails.setCustomerReviewsDataToPage = 
			productReviewService.controller.productManager.view.productReviewDetails.setCustomerReviewsDataToPage.wrap(function(originalMethod){
				originalMethod();         
				var selectReviews = $('productReviewsSortSelect');                
				if(!changedDefaultReviews &amp;&amp; selectReviews){
					selectReviews.selectedIndex = 0;            
					selectReviews.onchange();           
					changedDefaultReviews = true;       
				}
			});
	//});
}
  </script>
  <!-- override 36 - account order status help link fix -->
  <!-- add returns link to headerLinks -->
  <script type="text/javascript">
   // &lt;![CDATA[
/* MODIFY CS RETURNS link 11.13.12 JP */
if( ( location.pathname == '/profile/order_status_detail.do' ) || ( location.pathname == '/profile/shipment_detail.do' ) || ( location.pathname == '/profile/order_history.do' ) || (location.pathname == '/profile/single_order_detail.do')) {
  var OrderStatusHelpLinkOverride = Class.create({
	initialize:function() {
	},
	model: {
		orderStatusLinkFixed:'/customerService/info.do?cid=81266',
		
		orderReturnsLinkContent:'&lt;a href="/customerService/info.do?cid=81264"&gt;Returns&lt;/a&gt;'
	},
	controller:{
		init:{
			main:function() {
				var model = orderStatusHelpLinkOverride.model;
				// Find order status link
				var orderStatusLink = $('mainContent');
				orderStatusLink = orderStatusLink.select('div.headerLinks');
				if( orderStatusLink &amp;&amp; orderStatusLink.length &gt; 0 ) {
					orderStatusLink = orderStatusLink[0];
					orderStatusLink = orderStatusLink.select('a');
					if( orderStatusLink &amp;&amp; orderStatusLink.length &gt; 1 ) {
						orderStatusLink = orderStatusLink[1];
						orderStatusLink.href = model.orderStatusLinkFixed;
					}
					if((location.pathname == '/profile/single_order_detail.do') &amp;&amp; orderStatusLink.length == 1) {
						orderStatusLink = orderStatusLink[0];
						orderStatusLink.href = model.orderStatusLinkFixed;
					}
				}	
				
				// Add order returns link
				
				var orderReturnsLink = $('mainContent');
				
				orderReturnsLink = orderReturnsLink.select('div.headerLinks');
				
				if( orderReturnsLink &amp;&amp; orderReturnsLink.length &gt; 0 ) {
					orderReturnsLink = orderReturnsLink[0];
					
					orderReturnsLink.insert({top: model.orderReturnsLinkContent});
				}
			}
		}
	}
  });
  var orderStatusHelpLinkOverride = new OrderStatusHelpLinkOverride();
  Event.observe( window, 'load', function() {
	orderStatusHelpLinkOverride.controller.init.main();
  });
}	
// ]]&gt;
  </script>
  <!-- BEGIN: content override 97 -->
  <script type="text/javascript">
   document.observe('dom:loaded',function() {
	if (location.pathname == "/customerService/storeLocator.do") {
		if ($('iFrameContent')) $('iFrameContent').setStyle({
			width : "988px",
			height : "560px"
		});
	}
});
  </script>
  <!-- END: content override 97 -->
  <!-- BEGIN: content override 100 Global Gateway -->
  <script type="text/javascript">
   if(window['resourceBundleValues'] &amp;&amp;
resourceBundleValues.intlShipSiteRedirectContent.ca.contentMessage1){
   resourceBundleValues.intlShipSiteRedirectContent.ca.contentMessage1 = 'Free shipping on orders of $50 or more';
   resourceBundleValues.intlShipSiteRedirectContent.ca.contentMessage2 = ''; 
}
  </script>
  <!-- END: content override 100 Global Gateway -->
  <!-- Begin Content Override 107 please remove css-->
  <script type="text/javascript">
   document.observe("dom:loaded", function() {
	var parentEle = $('completeRegistrationPanel');
	if (parentEle) {
		var badElements = parentEle.getElementsBySelector('img[class="universalButtonSprite universalButtonSpriteQuickLookClose"]');
		badElements.each(function(ele) {
			ele.className = ele.className + 'On';
		});
	}
});
  </script>
  <!-- End Content Override 107 please remove css-->
  <!-- contentOverride113 begin -->
  <script type="text/javascript">
   if (window['checkout'] &amp;&amp; checkout.controller &amp;&amp; checkout.controller.modules.billing ) {
	checkout.controller.modules.billing.getBillingRequest = checkout.controller.modules.billing.getBillingRequest.wrap(
		function(old) {
			var status = false;
			try { status = old(); }
			catch(e) { status = false; }
			finally { status = false; }
			return status;
		}
	);
}
if (window['checkout'] &amp;&amp; checkout.controller &amp;&amp; checkout.controller.modules.signIn ) {
	checkout.controller.modules.signIn.getSignInRequest = checkout.controller.modules.signIn.getSignInRequest.wrap(
		function(old) {
			var status = false;
			try { status = old(); }
			catch(e) { status = false; }
			finally { status = false; }
			return status;
		}
	);
}
  </script>
  <!-- contentOverride113 end -->
  <!-- begin contentOverride130 with associated CSS override -->
  <script type="text/javascript">
   if (location.pathname == "/cookieFailure.do") {
		Event.observe(window,'load',function() {
			$('noCookie').style.display = "block";
			$$('.siteErrorSpacer').invoke('setStyle',{"display":"block"});
		});
	}
  </script>
  <!-- end contentOverride130 with associated CSS override-->
  <!-- BEGIN IT Override #138 - excessive omniture call mitigation -->
  <script type="text/javascript">
   if (reportingService &amp;&amp; reportingService.controller.viewManagers.rewardBannerViewManager &amp;&amp; reportingService.controller.viewManagers.rewardBannerViewManager.controller) {
reportingService.controller.viewManagers.rewardBannerViewManager.controller.getReportRequest = function() {};
}
  </script>
  <!-- END IT Override #138 - excessive omniture call mitigation -->
  <!-- BEGIN content override CNOV-9 JS -->
  <script type="text/javascript">
   function swapSignInFormTarget() {
	var signInFormTargetLocation = location.search;
		if (signInFormTargetLocation.indexOf('.jsp') &gt; -1) {
			 var currentSignInTargetURL = $('existing_targetURL').value;
			 var currentRegisterTargetURL = $('new_targetURL').value;
			 if (currentSignInTargetURL.indexOf('www') == -1) {
				 if (currentSignInTargetURL &amp;&amp; currentSignInTargetURL.indexOf('.jsp') &gt; -1) {
					 var newSignInTargetURL = 'http://www.gap.com' + currentSignInTargetURL;
				 } else {
					 var newSignInTargetURL = '/';
				 }
				 // set target URL value
				 $('existing_targetURL').value = newSignInTargetURL;
			 }
			 if (currentRegisterTargetURL.indexOf('www') == -1) {
				 if (currentRegisterTargetURL &amp;&amp; currentRegisterTargetURL.indexOf('.jsp') &gt; -1) {
					 var newRegisterTargetURL = 'http://www.gap.com' + currentRegisterTargetURL;
				 } else {
					 var newRegisterTargetURL = '/';
				 }
				 $('new_targetURL').value = newRegisterTargetURL;
			 }
		}
}
	if (location.pathname =='/profile/sign_in.do') {
		document.observe("dom:loaded",function() {
			swapSignInFormTarget();																 
		});
}
  </script>
  <!-- END content override CNOV-9 JS -->
  <!-- BEGIN content override CNOV-17 (MalformedJSON handler -->
  <script type="text/javascript">
   //CNOV-17
if (brandConst.IS_NAV2_ENABLED === 'true' &amp;&amp; brandConst.IS_FACET_ENABLED === 'true' &amp;&amp; window['reportingService'] &amp;&amp; reportingService.controller.viewManagers.categoryFacetedSearchViewManager &amp;&amp; reportingService.controller.viewManagers.categoryFacetedSearchViewManager.controller) {

    /**
     * Tries to parse for a doubled '}}' at the end of the json.  If that succeeds, then process and report
     * "malformedJSONFixed".  Otherwise report "malformedJSON" and retry once.  If still failing, report
     * "malformedJSONTwice" and display an error to the user.
     **/
    navigationService.controller.managers.categoryFacetedSearchManager.controller.handlers.getCategoryFacetedSearchDataHandlers.malformedJSONHandler = function (response, e) {
        var categoryFacetedSearchManager = navigationService.controller.managers.categoryFacetedSearchManager;
        var model = categoryFacetedSearchManager.model;
        var viewManager = reportingService.controller.viewManagers.categoryFacetedSearchViewManager;

        var returnErrorToUser = false;

        // If doubled trailing "}}"
        if (/}}$/.test(response.transport.responseText)) {
            var newJSON = response.transport.responseText.substring(0, response.transport.responseText.length - 1);
            try {
                response.responseJSON = newJSON.evalJSON();
            } catch (e) {
                if (!model.isRetry) {

                    // Note that we're attempting a retry
                    model.isRetry = true;

                    document.fire("categoryFacetedSearchDataRequest:end");
                    model.dataRequestStatus = categoryFacetedSearchManager.constants.requestStatus.END;

                    viewManager.model.exceptionType = "malformedJSON";
                    viewManager.controller.getReportRequest();

                    categoryFacetedSearchManager.controller.getCategoryFacetedSearchData(null, model.latestFacetRequestUrl + "&amp;retry=true");

                    return;
                } else {
                    // Retry also failed
                    returnErrorToUser = true;
                    viewManager.model.exceptionType = "malformedJSONTwice";

                }
            }

            // Re-parse worked

            model.isRetry = false;

            if (!returnErrorToUser) {
                viewManager.model.exceptionType = "malformedJSONFixed";
                response.transport.response = newJSON;
            }
        } else {

            if (!model.isRetry) {

                // Note that we're attempting a retry
                model.isRetry = true;

                document.fire("categoryFacetedSearchDataRequest:end");
                model.dataRequestStatus = categoryFacetedSearchManager.constants.requestStatus.END;

                viewManager.model.exceptionType = "malformedJSON";
                viewManager.controller.getReportRequest();

                categoryFacetedSearchManager.controller.getCategoryFacetedSearchData(null, model.latestFacetRequestUrl + "&amp;retry=true");
            } else {
                returnErrorToUser = true;
                viewManager.model.exceptionType = "malformedJSONTwice";

                // clear retry
                model.isRetry = false;
            }
        }

        // Have to report error to user
        if (returnErrorToUser) {
            var view = categoryFacetedSearchManager.view;

            if (categoryFacetedSearchManager.model.isDomReady) {
                view.renderExceptionErrorMessage();
            } else {
                Event.observe(window, 'load', view.renderExceptionErrorMessage);
            }
        }

    };



    navigationService.controller.managers.categoryFacetedSearchManager.controller.handlers.getCategoryFacetedSearchDataHandlers.successHandler = navigationService.controller.managers.categoryFacetedSearchManager.controller.handlers.getCategoryFacetedSearchDataHandlers.successHandler.wrap(function (originalMethod, response) {
        // Workaround for "fixed" bad JSON
        if (response.responseJSON == undefined) {
            // Should have been previously handled as an exception
            if (response.request.responseJSON == null) {
                return;
            }

            response.responseJSON = response.request.responseJSON;
            response.responseText = response.request.responseText;
        }

	originalMethod(response);

    });
}
  </script>
  <!-- END content override CNOV-17 JS -->
  <!-- BEGIN content override CNOV-WCD-Quicklinks-Removal-Override -->
  <script type="text/javascript">
   if( window["crossLink"] ) {
  crossLink.wct = '';
}
  </script>
  <!-- END content override CNOV-WCD-Quicklinks-Removal-Override -->
  <!-- Begin CNOV-55: Fix for bad left nav links -->
  <script type="text/javascript">
   var leftNavUrlPatch = {
	init: function() {
        	var sideNavCategories = $('sideNavCategories');
                if(sideNavCategories){
                	var htmlStr = sideNavCategories.innerHTML;
                        htmlStr = htmlStr.replace(/href=".do/g, 'href="/browse/category.do');
                        $('sideNavCategories').innerHTML = htmlStr;
			if (navigationService &amp;&amp; navigationService.controller &amp;&amp; navigationService.controller.managers &amp;&amp; navigationService.controller.managers.categoryFacetedSearchManager &amp;&amp; navigationService.controller.managers.categoryFacetedSearchManager.view) {
				navigationService.controller.managers.categoryFacetedSearchManager.view.updateCurrentCategoryLink();
			}
		}
	}
};
Event.observe(window, "load", leftNavUrlPatch.init);
  </script>
  <!-- End CNOV-55: Fix for bad left nav links -->
  <!-- Begin CNOV-79 - responsive checkout release -->
  <script type="text/javascript">
   (function() {

    // config stuff
    var wcdName = 'chkoutMode50',
        wcdSuite = 'mktUniversalPersist',
        codeName = 'checkoutMode',
        codeVar = 'isEnhanced',
        wcdSegPrefix = 'SEG_',
        forceModeName = 'forceMode',
        isUSMarket = /\.com$/.test(location.host),
        segments = isUSMarket ? '50-50' : '100-0',
        eVar = '42',
        isCheckoutPage = window.location.pathname === '/checkout/order.do' &amp;&amp; window.checkout,
        domain = (window.gidBrandSiteConstruct || {}).cookieDomain || null;

    CheckoutABTest();



    function CheckoutABTest() {

        function fixCheckoutShoppingBag() {
        	if (!isCheckoutPage) return;

            jQuery(window).load(function() {
            	var shouldFix = window.responsiveService &amp;&amp; !responsiveService.api.isMobileBrowser();
            	if (!shouldFix) return;

            	jQuery('#shoppingBagDetail').css({'overflow': 'visible', 'height': 'auto', 'max-height':'none'});
            });
      
        }


        function fixIE7Crash() {
            if (!clientBrowser.isIE7) return;
            if (!window.gidLib ) return;

            gidLib.inProgressIndicator.open = function(args) {
                this.args = args;
                var requestInProgressMaskNode = this.createRequestInProgressNode();
                this.setInProgressNodeMessage();
                this.setPosition();
                
                this.hiddenDropDownNodes = gidLib.hideDropDownsUnderElement(requestInProgressMaskNode); // IE 6x layer bug - select inputs show through layers.
                Event.observe(window,"resize",gidLib.inProgressIndicator.setPosition);
                
            };
        }

        (function fixInterstitial() {
            if (!window.gidLib || (window.gidLib &amp;&amp; !gidLib.layeredPopup)) return;

            gidLib.layeredPopup.openInterstitialDisplay = function(args) {
                var color = (args.color ? args.color : "#fff");
                var opacity = (args.opacity ? args.opacity : "0.65");
                var rgbColors;

                if (clientBrowser.isIE9Up &amp;&amp; color[0] === '#') {
                    rgbColors = gidLib.hex2rgb(color);
                    color = 'rgba(' + rgbColors.red + ',' + rgbColors.green + ',' + rgbColors.blue + ',' + opacity + ')';
                } else if ((clientBrowser.isIE8 || clientBrowser.isIE7) &amp;&amp; color.indexOf('rgba') &gt;= 0){
                    color = '#ccc';
                }

                this.hasBuzz = (args.buzz != undefined ? args.buzz : true);
                var id = "layeredPopupInterstitial";
                var interstitial = $(id);
                if (!interstitial) {
                    interstitial = $(document.createElement("div"));
                    interstitial.id = id;
                    document.body.appendChild(interstitial);
                    Event.observe(interstitial,"click",this.interstitialBuzzEffect.bind(this));
                }

                var clientWidth = (document.documentElement &amp;&amp; document.documentElement.clientWidth ? document.documentElement.clientWidth : document.body.clientWidth);
                var clientHeight = (document.documentElement &amp;&amp; document.documentElement.clientHeight ? document.documentElement.clientHeight : document.body.clientHeight);
                var scrollLeft = (document.documentElement &amp;&amp; document.documentElement.scrollLeft ? document.documentElement.scrollLeft : document.body.scrollLeft);
                var scrollTop = (document.documentElement &amp;&amp; document.documentElement.scrollTop ? document.documentElement.scrollTop : document.body.scrollTop);
                var docW = clientWidth + scrollLeft;
                var docH = (clientBrowser.isIE ? document.body.offsetHeight : (document.documentElement ? document.documentElement.offsetHeight : document.body.offsetHeight));
                if (clientHeight &gt; docH) docH = clientHeight;
                interstitial.setStyle({
                    position:"absolute",
                    top:"0px",
                    left:"0px",
                    width:docW+"px",
                    height:docH+"px",
                    display:"block",
                    background:color,
                    zIndex:"98",
                    opacity:opacity,
                    filter:"alpha(opacity=" + (opacity*100) + ")"
                });
            };
        })();

        function handleSegB() {
            var codeValue = escape(codeVar + '=true');
            gidLib.setCookie(codeName, codeValue, null, '/', domain);

            fixIE7Crash();
            fixCheckoutShoppingBag();
        }

        handleSegB();
    }

})();
  </script>
  <!-- End CNOV-79 - responsive checkout release -->
  <!-- CNOV-61: A/B test for style versus style color engagement-->
  <script type="text/javascript">
   // &lt;![CDATA[

var NAV2TestCookieCutter = Class.create();
NAV2TestCookieCutter.prototype = {
	initialize:function(CookieVarName,CookieUsedName,CookieValueBase,ForcedModeBaseName,SegmentBreakdown,theEvar,plExcept) {
		this.EvarToUse = theEvar != "" ? theEvar : false;
		this.CookieVariableName = CookieVarName;
		this.CookieUsed = CookieUsedName;
		this.CookieValueBase = CookieValueBase;
		this.SegBreakdown = SegmentBreakdown.split("-");
		this.DoesTheCookieExist = gidLib.getCookieVar(this.CookieUsed, this.CookieVariableName);
		this.RetrievedCookieValue = gidLib.getCookieVar(this.CookieUsed, this.CookieVariableName);
		this.QuickSegment = '';
		this.piperlimeException = plExcept;
		this.userNeedsSync = false;
		this.ForcedModeBase = ForcedModeBaseName;
		this.ModeArrayIndex = this.SegBreakdown.length;
		this.modeArray = new Array();
		this.modeArray[0] = "a";
		this.modeArray[1] = "b";
		
		if (location.href.indexOf(this.ForcedModeBase) &gt;= 1) {
			this.forcedMode();
		}else{
			this.cookieScanner();
		}
	},

	forcedMode:function() {
		for (i = 0; i &lt; this.ModeArrayIndex; i++) {
			if (location.href.indexOf(this.ForcedModeBase + "=" + this.modeArray[i]) &gt;= 1) {
				this.UserSegment = this.CookieValueBase + this.modeArray[i].toUpperCase();
				this.QuickSegment = this.modeArray[i].toUpperCase();
			}
		}
		
		gidLib.setCookieVar(this.CookieUsed,this.CookieVariableName,this.UserSegment);
		if (this.EvarToUse) {
			this.setABTestVariable(this.UserSegment);
		}

		userNeedsSync = true;
	},

	cookieScanner:function() {
		if (this.DoesTheCookieExist) {
			if (this.EvarToUse) {
				this.setABTestVariable(this.RetrievedCookieValue);
			}

			for (i = 0; i &lt; this.ModeArrayIndex; i++) {
				if (this.RetrievedCookieValue == (this.CookieValueBase + this.modeArray[i].toUpperCase())) {
					this.QuickSegment = this.modeArray[i].toUpperCase();
					break;
				}
			}
		} else {
			this.tagManager();
		}
	},

	tagManager:function() {
		this.Segmentation = Math.floor((Math.random()*100)+1); // chooses 1 to 100
		this.FloorThreshold = 0;
		this.TopThreshold = 0;
		
		for (i = 0; i &lt; this.ModeArrayIndex; i++){
			this.TopThreshold = this.FloorThreshold + parseInt(this.SegBreakdown[i]);
			if ((this.Segmentation &gt; this.FloorThreshold) &amp;&amp; (this.Segmentation &lt;= this.TopThreshold)){
				this.UserSegment = this.CookieValueBase + this.modeArray[i].toUpperCase();
				this.QuickSegment = this.modeArray[i].toUpperCase();
				break;
			} else {
				this.FloorThreshold = this.TopThreshold;
			}
		}
		
		gidLib.setCookieVar(this.CookieUsed,this.CookieVariableName,this.UserSegment);

		if (this.EvarToUse) {
			this.setABTestVariable(this.UserSegment);
		}
	},
	
	setABTestVariable: function(setValue) {
		thisEvar = 'eVar' + this.EvarToUse;
		ABTestVariables[thisEvar] = setValue;
	}
};


var navCookieCutter = new NAV2TestCookieCutter('NAV2FACETS_1306A_v2_GROUP_TEST', 'mktUniversalPersist', 'navGroupSEG', 'navForceMode', '0-100', '0', '');

if (window.UrlBuilder !== undefined) {
	UrlBuilder.getProductSearchServiceUrl = UrlBuilder.getProductSearchServiceUrl.wrap(function(oM,pageId) {
		var result = oM(pageId);
	
		var abTestVar = ABTestVariables['eVar0'];
		if (abTestVar != undefined) {
			result += "&amp;segment=" + abTestVar;
		}
	
		return result;
	});
}

// ]]&gt;
  </script>
  <!-- End CNOV-61 -->
  <!-- Begin CNOV-87 v3 -->
  <script type="text/javascript">
   (function() {

	var orderBrandsCookie = 'strOrderBrands';
    var agentDescription = browserService.api.agentDescription().toLowerCase();
    var isSafari = false;
    if (agentDescription.indexOf('safari') != -1) {
          isSafari = true; 
    }

	function isMobileShoppingBag() {
		return (window.location.host.indexOf('m.') &gt;= 0
		                &amp;&amp; (window.location.pathname.indexOf('/buy/shopping') &gt;= 0 ||
		                	window.location.pathname.indexOf('edit_shipping_method_bag') &gt;= 0))
		                &amp;&amp; window.shoppingBag &amp;&amp;
		                !shoppingBag.controller.checkoutManager.shouldUseAbsoluteCheckoutPath();
	}

	function isCheckout() {
		return window.location.pathname.indexOf('/checkout/') &gt;= 0 &amp;&amp; window.checkout != null; 
	}

	function isOrderConfirm() {
		return window.location.pathname.indexOf('/checkout/orderConfirm.do') &gt;= 0;	
	}


	function setOrderBrands(brands) {
		if (!isSafari &amp;&amp; window.localStorage) {
			if (brands === '') {
				localStorage.removeItem(orderBrandsCookie);
			} else {
				localStorage.setItem(orderBrandsCookie, brands);
			}
			
		}
		setCookieVar("omniSession",orderBrandsCookie,brands);
	}

	function getOrderBrands() {
		if (!isSafari &amp;&amp; window.localStorage) {
			return localStorage.getItem(orderBrandsCookie) || '';
		} else {
			return getCookieVar("omniSession",orderBrandsCookie) || '';
		}
                return '';
	}

	function trackOrderBrandsOnOrder() {
		if (!window.reportingService || !(
			window.reportingService 
			&amp;&amp; reportingService.controller.viewManagers.orderViewManager
			&amp;&amp; reportingService.controller.viewManagers.orderViewManager.controller)) return;
		
		var oldSetPlaceOrderValues = reportingService.controller.viewManagers.orderViewManager.controller.helper.setPlaceOrderReportingValues;
		reportingService.controller.viewManagers.orderViewManager.controller.helper.setPlaceOrderReportingValues = function() {
			oldSetPlaceOrderValues();

			var isOrderBrandsEmpty = (getCookieVar("omniSession","strOrderBrands") || '').length === 0;

			var helper = reportingService.controller.viewManagers.orderViewManager.controller.helper;
			var productInfo = helper.getPlaceOrderReportingProductsHelper(); 
			var productBrands = productInfo.productBrands;

			setOrderBrands(productBrands);
			
			var isOrderBrandsEmptyAfterReset = (getOrderBrands() || '').length === 0;

			var cookieLimit = browserService.controller.getCookieLimits();
			var isCookieSizeTooLarge = (document.cookie.length &gt; cookieLimit.totalMaxSize) || (document.cookie.split(';').length &gt; cookieLimit.maxCount);
			s.eVar0 = 'orderPlacement: brandsEmpty=' + isOrderBrandsEmpty + ', brandsEmptyAfterReset=' + isOrderBrandsEmptyAfterReset + ', cookieTooLarge: ' + isCookieSizeTooLarge;
			s.t();
		} ;	
	}

	function trackOrderBrandsOnOrderConfirm() {
		if (!window.reportingService || !(window.reportingService
			&amp;&amp; reportingService.controller.viewManagers.orderConfirmViewManager
			&amp;&amp; reportingService.controller.viewManagers.orderConfirmViewManager.controller)) return;
		
		reportingService.controller.viewManagers.orderConfirmViewManager.controller.setReportModel = function() {
			var commonViewManager = reportingService.controller.viewManagers.commonViewManager;
			var orderConfirmViewManager = reportingService.controller.viewManagers.orderConfirmViewManager;
			var commonModel = commonViewManager.model;
			var orderConfirmModel = orderConfirmViewManager.model;
			var order = orderConfirmModel.order;
			var reportName = orderConfirmViewManager.reportName;
			var sAccount = null;
			
			order.zip = getCookieVar("omniSession","strOrderZip");
			order.state = getCookieVar("omniSession","strOrderState");
			order.countryCode = getCookieVar("omniSession","strOrderCountryCode");
			// get product bag contents:
			// updated: correct info at (orderController.js)getPlaceOrderReportingProductsHelper:function()
			order.products = orderConfirm.productsInBag;			
			order.cardTypeName = getCookieVar("omniSession","strCardTypeName");
			order.orderBrands = getOrderBrands();
			/* 
			1) omni.objOrder.strOrderId is set on the page - depends on server side datum.
			2) Check to confirm order exists with data based on order id check.
			Only if order exists should the "s" values be set.
			*/
			if (order.orderId != "") {
				orderConfirmModel.sProducts = commonModel.getSProductsFromBag(order.products, reportName);
				
				try {
					orderConfirmModel.events = orderConfirmViewManager.controller.getEventsFromsProduct(orderConfirmModel.sProducts);
				} catch (error) {
					// Default to all events if an error occurs
					orderConfirmModel.events = "purchase, event3, event4, event5, event6, event7, event16, event18, event43, event44, event45, event48";
				} 
				
				// set on orderViewManager.js
				if (commonModel.backordered) {
					orderConfirmModel.events += ", event31, event30, event29";
				}
				orderConfirmModel.viewType = reportingService.constants.viewTypes.ORDER_CONFIRM_VIEW;
			}

			// Purge all values to prevent a re-read of the data.
			setCookieVar("omniSession","strOrderZip","");
			setCookieVar("omniSession","strOrderState","");
			setCookieVar("omniSession","strOrderCountryCode","");
			setCookieVar("omniSessionProducts","strOrderProducts","");
			setCookieVar("omniSession","strOrderId","");
			setCookieVar("omniSession","strCardTypeName", "");
			setCookieVar("omniSession","hasOpenBag","");
			setCookieVar("omniSession","strOrderBrands","");

			// var suite = omni.environmentSuites[omni.objCurrentServer.suite];
			var suite = reportingService.controller.reportingManager.brandReportSuites;
			if (suite &amp;&amp; window["gidBrandSiteConstruct"]) {
				var reportingSuites = [];
				var brandSuiteIterator = function(brandSite) {
					if (brandSite &amp;&amp; order.orderBrands.include(brandSite.brandAbbr)
							&amp;&amp; suite.brandSuites[brandSite.brandCode] != undefined) {
						reportingSuites.push(suite.brandSuites[brandSite.brandCode]);
					}
				};
				gidBrandSiteConstruct.gidBrandSites.each(brandSuiteIterator);
				reportingSuites.push(suite.globalSuite);
				responsiveService.api.whenMobile(function(){
					var mobileSuite = reportingService.controller.reportingManager.brandMobileReportSuites;
					reportingSuites.push(mobileSuite.brandSuites[gidBrandSiteConstruct.currentBrandCode]);	
					reportingSuites.push(mobileSuite.globalSuite);					
				});
				sAccount = reportingSuites.join(",");
				orderConfirmModel.sAccount = sAccount;
			}     	
		};
        
        var oldOrderConfirmTransmission = reportingService.controller.viewManagers.orderConfirmViewManager.controller.setReportTransmissionVars;
        reportingService.controller.viewManagers.orderConfirmViewManager.controller.setReportTransmissionVars = function() {
			oldOrderConfirmTransmission();

			var cookieLimit = browserService.controller.getCookieLimits();
			var isBrandsEmpty = (s.eVar34 || '').length === 0;

			if (isBrandsEmpty) {
				s.eVar34 = getOrderBrands();
				isBrandsEmpty = (s.eVar34 || '').length === 0;
			}

			var isCookieTooLarge = (document.cookie.length &gt; cookieLimit.totalMaxSize) || (document.cookie.split(';').length &gt; cookieLimit.maxCount);
			s.eVar0 = reportingService.controller.viewManagers.orderConfirmViewManager.model.sAccount;
            s.prop57 = 'orderConfirm: brandsEmpty=' + isBrandsEmpty + ', cookieTooLarge: ' + isCookieTooLarge;

			setOrderBrands('');
		} ;	
	}

	function fixCookieLimit() {
		if (!window.browserService || responsiveService.controller.getViewport) return;

		browserService.controller.getCookieLimits = function() {
			var userAgent = navigator.userAgent;
			var isIE = userAgent.indexOf('MSIE') &gt;= 0;
			var isChrome = userAgent.indexOf('Chrome/') &gt;= 0;
			var isFirefox = userAgent.indexOf('Firefox/') &gt;= 0;
			var isSafari = userAgent.indexOf('Safari/') &gt;= 0;
			var self = browserService;

			var cookieFunc = null,
                cookieObj = null,
				cookieLimitApi = self.model.cookieLimits.api;
			if (isIE) {
				cookieObj = cookieLimitApi.Explorer(8);
			} else if (isChrome) {
				cookieObj = cookieLimitApi.Chrome();
			} else if (isFirefox) {
				cookieObj = cookieLimitApi.Firefox();
			} else if (isSafari) {
				cookieObj = cookieLimitApi.Safari();
			} else {
				cookieObj = cookieLimitApi.defaultLimits();
			}

			return cookieObj;	
		};

	}

	if (isMobileShoppingBag()) {
		fixCookieLimit();
		window.ABTestVariables.eVar0 = window.location.pathname;	
	} else if (isCheckout()) {
		fixCookieLimit();
		window.ABTestVariables.eVar0 = window.location.host;

		trackOrderBrandsOnOrder();
	} else if (isOrderConfirm()) {
		fixCookieLimit();
		trackOrderBrandsOnOrderConfirm();
	}
	

})();
  </script>
  <!-- End CNOV-87 -->
  <!-- Begin CNOV-93 - cookie purge test - CHANGED TO CENTRALIZED, EXTERNAL CALL -->
  <script src="/Asset_Archive/GPWeb/content/0008/792/725/assets/cnov93.js" type="text/javascript">
  </script>
  <!-- End CNOV-93 - cookie purge test -->
  <!-- Begin CNOV-107 - Reviews Jump Link patch code -->
  <script type="text/javascript">
   // add anchor back from top review stars to reviews section
Event.observe(window,"load",function() {
	if (location.href.indexOf("product.do") &gt; 0) {
		if($("reviewSummaryDataSmall") &amp;&amp; $("reviewSummaryHeaderGID") ){
			$("reviewSummaryHeaderGID").insert("&lt;a name='reviewSummaryAnchor'&gt;&lt;/a&gt;");
	
			var smallstars = $("averageOverallRatingSmall");
			$("averageOverallRatingSmall").remove();
			$("reviewSummaryDataSmall").insert("&lt;a href='#reviewSummaryAnchor'&gt;&lt;div id='averageOverallRatingSmall'&gt;" + smallstars.innerHTML + "&lt;/div&gt;&lt;/a&gt;");
		}
	}
});
// end of add anchor back from top review stars to reviews section
  </script>
  <!-- End CNOV-107 - Reviews Jump Link patch code -->
  <!-- Begin CNOV-110 -->
  <script type="text/javascript">
   jQuery(document).ready(
	function() {
		var shoppingBagAnchors = jQuery("a[href='/buy/shopping_bag.do']");
		if (gidBrandSiteConstruct &amp;&amp; shoppingBagAnchors.length &gt; 0) {
			/* Elements are present on display, so collect the hrefs. */
			var currentBrandCode = gidBrandSiteConstruct.currentBrandCode;
			var secureUrl = gidBrandSiteConstruct.gidBrandSites[currentBrandCode].secureUrl;
			var secureShoppingBagUrl =  secureUrl + "/buy/shopping_bag.do";
			jQuery.each(shoppingBagAnchors, function(i, shoppingBagAnchor) {
				shoppingBagAnchor.href = secureShoppingBagUrl;
			});
		}
	}
);
// Update to fix 'your bag' text link in shopping bag area
document.observe('personalizationData:ready', function() {
	var shoppingBagAnchors = jQuery("#universalInlineBagContainer a[href='/buy/shopping_bag.do']");
	if (gidBrandSiteConstruct &amp;&amp; shoppingBagAnchors.length &gt; 0) {
		var currentBrandCode = gidBrandSiteConstruct.currentBrandCode;
		var secureUrl = gidBrandSiteConstruct.gidBrandSites[currentBrandCode].secureUrl;
		var secureShoppingBagUrl =  secureUrl + "/buy/shopping_bag.do";
		jQuery.each(shoppingBagAnchors, function(i, shoppingBagAnchor) {
			shoppingBagAnchor.href = secureShoppingBagUrl;
		});
	}
});
  </script>
  <!-- End CNOV-110 -->
  <!-- Begin CNOV-112 -->
  <script type="text/javascript">
   if (window.location.pathname.indexOf('/buy/shopping_bag.do') != -1) {
	if (window["shoppingBagPage"]) {
		shoppingBagPage.loadProductData = function(strProductId,dataLoaderAction,strVariantId,strStyleColorId,productBrandCode) {
			if (strProductId == 0) return;
			this.productId = strProductId; this.variantId = strVariantId;
			this.dataLoaderAction = dataLoaderAction;
			var currentLocale = personalizationService.model.personalizationData.personalizationInfoV1.userContext.localeCode;
			var productDataUrl = this.getProductDataUrl(strProductId, strVariantId, strStyleColorId, currentLocale);
			if (!productBrandCode || productBrandCode == gidBrandSiteConstruct.currentBrandCode ) {

				document.fire("productPage:dataRequest");
				if (typeof this.processInlineProductData == 'function' &amp;&amp; brandConst.IS_OPTIMIZED_PRODUCT_PAGE_ACTIVE &amp;&amp; dataLoaderAction == "initial") {
					this.processInlineProductData();
				}
				else {
					new Ajax.Request(
						productDataUrl,
						{
							method: 'get',
							onComplete: this.parseProductDataAjaxResponse.bind(this),
							onException: this.productDataExceptionHandler
						}
					);
				}
			} else {
				var gidBrand = gidBrandSiteConstruct.gidBrandSites[parseInt(productBrandCode, 10)];
				if (gidBrand) {
					var args = {strProductId:strProductId};
					gidLib.loadScript({
						callerObject:this,
						src:gidBrand.secureUrl + productDataUrl,
						timeout:{
							handler:this.loadScriptTimeoutHandler.bind(this),
							args:args,
							timeDelay:20
						},
						callback:{
							handler:this.loadScriptCallbackHandler.bind(this),
							args:args,
							timeDelay:0.1
						}
					});
				}
			}
		}
	}
}
  </script>
  <!-- End CNOV-112 -->
  <!-- Begin CNOV-113 - shopping bag Learn More popup fix -->
  <script type="text/javascript">
   if( location.pathname == '/buy/shopping_bag.do' || location.pathname == '/buy/shopping_bag_delete_item.do' || location.pathname == '/buy/shopping_bag_save_item.do' || location.pathname == '/buy/shopping_bag_move_item.do' || location.pathname == '/buy/edit_shipping_method_bag.do' ) {

jQuery(document).ready(
	function() {
		// Addition from AS
		responsiveService.model.pageStrategies = {};
		// Popup link fix - change all /customerService &amp; /browse popups to /buy
		var linkToUpdate = jQuery('.shippingOptionLearnMoreLink a[onclick], #contentItemContainer10000425 a[onclick]');
		if( linkToUpdate.length &gt; 0 ) {
			linkToUpdate.each( function( index, linkElement ) {
				if( jQuery( linkElement ).attr('href').indexOf('/customerService/info.do') &gt; -1 || jQuery( linkElement ).attr('onclick').indexOf('/customerService/info.do') &gt; -1 || jQuery( linkElement ).attr('href').indexOf('/browse/info.do') &gt; -1 || jQuery( linkElement ).attr('onclick').indexOf('/browse/info.do') &gt; -1 ) {
					var linkHref = jQuery( linkElement ).attr('href');
					var linkOnClick = jQuery( linkElement ).attr('onclick');
					linkHref = linkHref.replace('/customerService/info','/buy/info').replace('/browse/info','/buy/info');
					linkOnClick = linkOnClick.replace('/customerService/info','/buy/info').replace('/browse/info','/buy/info');
					jQuery( linkElement ).attr('href', linkHref );
					jQuery( linkElement ).attr('onclick', linkOnClick );
				}
      });
		}
	}
);

}
  </script>
  <!-- End CNOV-113 - shopping bag Learn More popup fix -->
  <!-- Begin CNOV-115 - shopping bag returns link fix -->
  <script type="text/javascript">
   if( location.pathname == '/buy/shopping_bag.do' || location.pathname == '/buy/shopping_bag_delete_item.do' || location.pathname == '/buy/shopping_bag_save_item.do' || location.pathname == '/buy/shopping_bag_move_item.do' || location.pathname == '/buy/edit_shipping_method_bag.do' ) {

/* Returns page CIDs by BU
GP US - 81264, ON US - 82724, BR US - 80735, PL US - 80975, AT US - 79311
GP CA - 2326, ON CA - 3325, BR CA - 1324
GP EU - 2326, BR EU - 1324
GP JP - 81264, BR JP - 80735 */

jQuery(document).ready(
	function() {
		var wcdReturnsLinkUpdater = {
			// Returns Link CIDs by brand code
			cidsByBrandCode : { 
				'1':'81264', '3':'82724', '2':'80735', '4':'80975', '10':'79311',
				'7':'2326', '9':'3325', '8':'1324',
				'20':'2326', '21':'1324', '28':'2326', '29':'1324',
				'24':'81264', '25':'80735'
			},
			updateLink: function() {
				if( gidBrandSiteConstruct &amp;&amp; gidBrandSiteConstruct.currentBrandCode ) {
					// Determine CID to add by brand code
					var brandCode = gidBrandSiteConstruct.currentBrandCode;
					var returnLinkCid = '';
					for( var key in wcdReturnsLinkUpdater.cidsByBrandCode ) {
						if( key == brandCode ) returnLinkCid = wcdReturnsLinkUpdater.cidsByBrandCode[key];
					}

					// Update the link
					var linkToUpdate = jQuery('.shoppingInformationLinks a');
					linkToUpdate.each( function( index, element ) {
						var linkHtml = jQuery(element).html();
						if( linkHtml.toLowerCase().indexOf('return') &gt; -1 ) {
							jQuery(element).attr('href','/customerService/info.do?cid=' + returnLinkCid );
						}
          });
				}
			}			
		}
		wcdReturnsLinkUpdater.updateLink();
	}
);

}
  </script>
  <!-- End CNOV-115 - shopping bag returns link fix -->
  <!-- Begin CNOV-119 - Hide Private Policy link in signin page -->
  <script type="text/javascript">
   if ((location.pathname != '/profile/sign_in.do') || (location.pathname != '/profile/validate_sign_in.do')){
	jQuery(document).ready(function(){
		jQuery("#privacyPolicyLink").hide();
	});
};
  </script>
  <!-- End CNOV-119 - Hide Private Policy link in signin page -->
  <!-- Begin CNOV-117 - Responsive Shopping Bag US launch -->
  <script type="text/javascript">
   // Responsive shopping bag enable
if( location.hostname.substr(0,2) != 'm.' ) {

	var responsiveBagCookieCheck = gidLib.getCookieVar('mktUniversalPersist','responsiveShoppingBagMode');
	var shoppingBagRedirect = false;
	if( responsiveBagCookieCheck != 'responsiveBag_SegB' ) {
		gidLib.removeCookieVar('mktUniversalPersist', 'responsiveShoppingBagMode');
		// setCookieVar doesn't work properly
		//gidLib.setCookieVar('mktUniversalPersist','responsiveShoppingBagMode','responsiveBag_SegB');

		var expDate = (expDate != null ? expDate : gidLib.getFutureDate({ "years": 5 }));
		var domain = (window.gidBrandSiteConstruct || {}).cookieDomain || null;
		
		var cookieStr = gidLib.getCookie('mktUniversalPersist');
		if (cookieStr != '') {
			var cookieArray = cookieStr.split('&amp;');
			var newCookiStr = '';
			var cookieVar;

			cookieArray.each(function(cookieArrayPair, i) {
				cookieVar = cookieArrayPair.split('=');
				cookieVar = cookieVar[0];

				if (cookieVar != 'responsiveShoppingBagMode') {
					newCookiStr = newCookiStr + cookieArrayPair;
					if (i &lt; cookieArray.length) {
						newCookiStr = newCookiStr + '&amp;';
					}
				}
			});
			newCookiStr += 'responsiveShoppingBagMode=responsiveBag_SegB';

			// Reset cookie with new value

			/* Set cookie */
			gidLib.setCookie('mktUniversalPersist', escape(newCookiStr), expDate, '/', domain );
		}
		else {
			gidLib.setCookie('mktUniversalPersist', escape('responsiveShoppingBagMode=responsiveBag_SegB'), expDate, '/', domain );
		}
				
		if( location.pathname == '/buy/shopping_bag.do' || location.pathname == '/buy/shopping_bag_delete_item.do' || location.pathname == '/buy/shopping_bag_save_item.do' || location.pathname == '/buy/shopping_bag_move_item.do' || location.pathname == '/buy/edit_shipping_method_bag.do' ) {
			// Omni tracking of users in cart with no resp bag cookie
			//s.tl( this, 'o', "Desktop user in legacy bag, redirected");
			shoppingBagRedirect = true;
		}
	}
	if( shoppingBagRedirect == true ) {
		var alreadyRedirected = gidLib.getQuerystringParam('bagRedirect');
		if( alreadyRedirected != 'true' ) {
			window.location = '/buy/shopping_bag.do?bagRedirect=true';
		}
		else {
			//s.tl( this, 'o', "Desktop user in legacy bag, already redirected");
		}
	}

}

var responsiveBagAbTestOn = false;
if( location.pathname == '/buy/shopping_bag.do' || location.pathname == '/buy/shopping_bag_delete_item.do' || location.pathname == 'buy/shopping_bag_save_item.do' || location.pathname == '/buy/edit_shipping_method_bag.do' ) {
	// To be replaced by AB test var
	responsiveBagAbTestOn = ( gidLib.getCookieVar('mktUniversalPersist','responsiveShoppingBagMode') == 'responsiveBag_SegB' ) ? true : false;
}

// Responsive bag JS overrides
if( window["responsiveBagAbTestOn"] != null &amp;&amp; responsiveBagAbTestOn ) {

	// iPad postage stamp fix
	if( navigator.userAgent.indexOf("iPad") &gt; -1 ) {
		document.write('&lt;style type="text/css"&gt;#universalBarContainer #universalMarketingContainerTop { width:auto !important }&lt;\/style&gt;');
		if( window["fixTopForiPad"] != null ) { 
			fixTopForiPad = fixTopForiPad.wrap( function( om ) { });
		}
	}
	
	// Pixman fix
	if (!pixelManagementService.constants.DATE_IN_USE) { 
		pixelManagementService.constants.DATE_IN_USE = brandConst.DATE_IN_USE;
	}
	// Fix to ensure if pixman misses shopping bag ready, it catches from the below. Doesn't re-fire pixman pixels
	jQuery(document).ready(function () {
		setTimeout(function () {
			//document.fire('shoppingBag:ready');
			jQuery(document).trigger('shoppingBag:ready');
		}, 2000);
	});
	
	// Update promo and return links to launch in new tab
	var app = angular.module('gid.app.shoppingBag.directives');
	app.config(function($provide) {
		$provide.decorator('shoppingBagAboutYourOrderDirective', function($delegate) {
			var directive = $delegate[0];
			directive.compile = function () {
				return function (scope, element, attrs) {
					var i = 0;
					scope.$watch('$parent.shoppingBagData.shoppingBag.activeItems', function (newActiveItems) {
						if( jQuery(window).width() &lt; 569 ) {
							//console.log('ativeItems changed');
							var promoIds = [];
							angular.forEach(scope.upsellPromos, function (up) { promoIds.push(up.promoId); } );
							angular.forEach(scope.appliedPromos, function (ap) { promoIds.push(ap.promoId); } );
							jQuery('div.promos').each(function () {
								//console.log('inside  jquery');
								jQuery(this).unbind('click');
								var aEl = jQuery('.promo a', jQuery(this));
								aEl.unbind('click');
								var promoURL = scope.promoUrlPrefix + promoIds.shift();
								//console.log(promoURL);
								aEl.attr('href', promoURL);
								aEl.attr('target', '_blank');
							});
						}
					});
				};
			};
			return $delegate;
		});
	});

	// Update 7-9 day ship option text
	var shoppingBagTransformerModule = angular.module('gid.transformer.shoppingBagTransformer');
	shoppingBagTransformerModule.config(function($provide) {
		$provide.decorator('shoppingBagTransformer', function($delegate) {
			var oldTransformResponse    = $delegate.transformResponse;
			var oldTransformBagResponse = $delegate.transformBagResponse;

			var overrideShippingData = function(jsonData) {
				if (jsonData.shoppingBag &amp;&amp; jsonData.shoppingBag.shippingInfo) {
					// Change isInternationalShipping flag from a boolean to a string to fix BorderFree checkout
					var isInternationalShipping = jsonData.shoppingBag.shippingInfo.isInternationalShipping;
					jsonData.shoppingBag.shippingInfo.isInternationalShipping = 
						(isInternationalShipping === true || isInternationalShipping === 'true') ? 'true' : 'false';

					if (jsonData.shoppingBag.shippingInfo.shippingOptions) {
						var shipOptions = jsonData.shoppingBag.shippingInfo.shippingOptions;
						
						// Remove 2096 (Windy City), 3000,3001 (Surge test) from array and set to JSON data
						/*shipOptions = shipOptions.filter( function (el) {
							return el.shippingId !== "2096" &amp;&amp; el.shippingId !== "3000" &amp;&amp; el.shippingId !== "3001";
						});
						jsonData.shoppingBag.shippingInfo.shippingOptions = shipOptions;*/
						
						// Change Description for standard option
						shipOptions.each( function( elt, idx ) {
							if( elt.description == '7-9 business days' ) elt.description = '7-9 business days - FREE Every Day ($50 min)'; 
						});
					} 
				}
				return jsonData;
			};

			$delegate.transformResponse = function(data, headers) {
				var jsonData = oldTransformResponse(data, headers);
				return overrideShippingData(jsonData);
			};

			$delegate.transformBagResponse = function(data) {
				var jsonData = oldTransformBagResponse(data);
				return overrideShippingData(jsonData);
			}

			return $delegate;
		});
	});
		
	// Double-click delete override
	var shoppingBagServiceModule = angular.module('gid.services.shoppingBagService');
	shoppingBagServiceModule.config(function($provide) {
		$provide.decorator('shoppingBagService', function($delegate, $q) {
			var asyncFuncPromises = [];
			$delegate.syncCall = function (asyncFunc) {
				var len = asyncFuncPromises.length;
				var lastAsyncFuncPromise = (len &gt; 0) ? asyncFuncPromises[len - 1].promise : null;
				var asyncFuncArgs = Array.prototype.slice.call(arguments, 1);
				var asyncFuncDefer = $q.defer();
				var asyncFuncPromise = asyncFuncDefer.promise;
				var actionId = asyncFuncArgs[0];
				for (var i = asyncFuncPromises.length - 1; i &gt;= 0; --i) {
					var afp = asyncFuncPromises[i];
					if (afp.id === actionId) { return afp.promise; }
				}
				asyncFuncPromises.push({ id: actionId, promise: asyncFuncPromise });
				var callAsyncFunc = function () {
					asyncFunc.apply(this, asyncFuncArgs)
					.then(function (response) { 
						asyncFuncPromises.shift();
						asyncFuncDefer.resolve(response);
					},function (reason) { 
						asyncFuncPromises.shift();
						asyncFuncDefer.reject(reason);
					});
				};
				if (lastAsyncFuncPromise) {       	    	   
					lastAsyncFuncPromise.then(function() {
					callAsyncFunc();
				});
				}
				else {
					callAsyncFunc();
				}
				return asyncFuncPromise;
			};
			return $delegate;
		});
	});	
	
	
}

// Android fix
if( location.pathname == '/checkout/order.do' ) {
	if( window.responsiveService ){
		responsiveService.controller.handlers.androidHandler = function(){}
	}
}
  </script>
  <!-- End CNOV-117 - Responsive Shopping Bag CA launch -->
  <!-- Begin CNOV-123 IOS 8 PP Hover Events Patch -->
  <script type="text/javascript">
   ////////////////////////////////////////////////// 
/////////  IOS 8 PP Hover Events Patch v3  ///////
//////////////////////////////////////////////////

var iOS8PPPatch = function() {
	var iOS8PPPatchURL = document.location.href;
	var iOS8PPPatchDevice = navigator.userAgent;
	if (((iOS8PPPatchURL.indexOf("product.do") &gt; 0) || (iOS8PPPatchURL.indexOf("outfit.do") &gt; 0)) &amp;&amp; ((iOS8PPPatchDevice.indexOf("Version/8") &gt; 0) || (iOS8PPPatchDevice.indexOf("CriOS") &gt; 0) &amp;&amp; (iOS8PPPatchDevice.indexOf("Mobile") &gt; 0)) ) {		
//console.info("iOS 8 Patching...");		
		//// take action and remove the offending events on the first touch...
		var ColorSwatchArr = jQuery("#colorSwatchContent").children("input");
		var SizeChoiceArr1 = jQuery("#sizeDimension1Swatches").children("button");
		var SizeChoiceArr2 = jQuery("#sizeDimension2Swatches").children("button");
		var QLColorSwatchArr = jQuery("#quickLookColorSwatches").children("input");
		var QLSizeChoiceArr1 = jQuery("#quickLookSize1Swatches").children("button");
		var QLSizeChoiceArr2 = jQuery("#quickLookSize2Swatches").children("button");
		for (i = 0; i &lt; ColorSwatchArr.length; i++) {
			var myButton = document.getElementById(ColorSwatchArr[i].id);
			myButton.removeAttribute('onfocus');
			myButton.removeAttribute('onmouseover');
			myButton.removeAttribute('onmouseout');
			myButton.setAttribute("onclick","productPage.swatchOver('color'," + i + ");productPage.setColor(" + i + ");");		
		}
		
		for (j = 0; j &lt; SizeChoiceArr1.length; j++) {
			var myButton = document.getElementById(SizeChoiceArr1[j].id);
			myButton.removeAttribute('onfocus');
			myButton.removeAttribute('onmouseover');
			myButton.removeAttribute('onmouseout');		
		}
		
		for (k = 0; k &lt; SizeChoiceArr2.length; k++) {
			var myButton = document.getElementById(SizeChoiceArr2[k].id);
			myButton.removeAttribute('onfocus');
			myButton.removeAttribute('onmouseover');
			myButton.removeAttribute('onmouseout');		
		}
		for (i = 0; i &lt; QLColorSwatchArr.length; i++) {
			var myButton = document.getElementById(QLColorSwatchArr[i].id);
			myButton.removeAttribute('onfocus');
			myButton.removeAttribute('onmouseover');
			myButton.removeAttribute('onmouseout');	
			myButton.setAttribute("onclick","outfitPage.swatchOver('color'," + i + ");outfitPage.setColor(" + i + ");");		
	
		}
		
		for (j = 0; j &lt; QLSizeChoiceArr1.length; j++) {
			var myButton = document.getElementById(QLSizeChoiceArr1[j].id);
			myButton.removeAttribute('onfocus');
			myButton.removeAttribute('onmouseover');
			myButton.removeAttribute('onmouseout');		
		}
		
		for (k = 0; k &lt; QLSizeChoiceArr2.length; k++) {
			var myButton = document.getElementById(QLSizeChoiceArr2[k].id);
			myButton.removeAttribute('onfocus');
			myButton.removeAttribute('onmouseover');
			myButton.removeAttribute('onmouseout');		
		}
	}		
}

Event.observe(document,"productPage:ready",iOS8PPPatch);
Event.observe(document,"outfitPage:dataRequest", function() {
	if (document.location.href.indexOf("outfit.do") &gt; 0) {
		var outfitArray = jQuery("div.sProductImage");
		for (i = 0; i &lt; outfitArray.length; i++) {
			outfitArray[i].setAttribute("onclick","outfitPage.moduleToggle("+ i +"); iOS8PPPatch();");
		}
	}
});
if (document.location.href.indexOf("outfit.do") &gt; 0) {
	if(outfitPage){
		if (outfitPage.openOutfit) {
			outfitPage.openOutfit = outfitPage.openOutfit.wrap(function(om,n) {
				om(n);
				iOS8PPPatch();
			});
		}
	}
}
  </script>
  <!-- End CNOV-123 IOS 8 PP Hover Events Patch -->
  <script type="text/javascript">
   //stop google auto complete from running 12-16-14
/*jQuery(document).ready(function() {
	jQuery('.pac-container').css('visibility','hidden!important');	
			//the code gets activated on key up after 3 characters, 50 char max in field, never get to 100, the code never gets activated
			jQuery ('#shippingAddressFieldGroup4-shippingAddressLine1').click(function() {
				setTimeout(function() {
	 				minChars = 100;	
					//autocomplete = 1;	   
					}, 1000);
 				});
			jQuery ('#shippingAddressFieldGroup4-shippingAddressLine1').focus(function() {
 				setTimeout(function() {
	 				minChars = 100;	
					//autocomplete = 1;		   
					},1000);
				});
			jQuery ('#shippingAddressFieldGroup4-shippingAddressLine1').keyup(function() {
 			setTimeout(function() {
	 				minChars = 100;	
					//autocomplete = 1;		   
					}, 1000);
				});
		});
		*/
				//END stop google auto complete from running 12-16-14
  </script>
  <!-- Begin Gift Message Emoji Errors 1/9 - by Ollie - contact Dilip &amp; Cristina T for more info -->
  <script type="text/javascript">
   Event.observe(window,"load", function() {
	if(location.pathname == "/checkout/order.do"){ 
		jQuery("div#giftMessageSubSection &gt; div.subHeadingCol").after("&lt;span style='color:#993333;font-size: 75%;'&gt;We can not accept emojis in gift messages.  Adding them may delay delivery of your item.&lt;/span&gt;");}
	});
  </script>
  <!-- End Gift Message Emoji Errors 1/9 - by Ollie - contact Dilip &amp; Cristina T for more info -->
  <!-- Begin CNOV-129 - Adding alt tags + accessibility fixes - contact Quannon/Ollie -->
  <script type="text/javascript">
   jQuery(window).ready(function(){
	jQuery('#dragImg').attr('alt', 'Gap');
	jQuery('#zoomImg').attr('alt', 'Gap');
	jQuery('#selImageLink').attr('alt', 'Gap');
	jQuery('#crossSellImg').attr('alt', 'Gap');
	jQuery(".checkoutButtonContainer &gt; a &gt; img").attr('alt','Gap');
	
	jQuery("#productUpsellLink").attr('href','javascript:void(0)');
	jQuery("#promoLink").attr('href','javascript:void(0)');
	
	jQuery('#inlineBagItemMessage').prepend('&lt;label for="inlineBagItemMessageItem" style="display:none;"&gt;Item Message&lt;/label&gt;');
	
});
  </script>
  <!-- End CNOV-129 - Adding alt tags + accessibility fixes - contact Quannon/Ollie -->
  <!-- Begin Add One Stitch Closer Title -->
  <script type="text/javascript">
   Event.observe(document, "productPage:ready", function() {
	var productToFind = jQuery("span.productName").text()
	if ((location.pathname == '/browse/product.do') &amp;&amp; (productToFind.indexOf("International Women's Day") &gt; -1)){
		jQuery('#productNameText').prepend('&lt;span style="color:#FF3300"&gt;One Stitch Closer&lt;/span&gt;&lt;br&gt;');
	}
});
  </script>
  <!-- End Add One Stitch Closer Title -->
  <!-- BEGIN Fix for iPad, Safari checkout issue -->
  <script type="text/javascript">
   if( location.pathname == '/checkout/order.do' ) {
	var wcdIPadSafariCheckoutFixer = function() {
		// Check for iOS 8.3, iPad, and Safari (and not Chrome)
		var userAgent = navigator.userAgent;
		var iOS = parseFloat( ('' + (/CPU.*OS ([0-9_]{1,5})|(CPU like).*AppleWebKit.*Mobile/i.exec( userAgent ) || [0,''])[1]).replace('undefined', '3_2').replace('_', '.').replace('_', '') ) || false;
		//console.log('iOS detect = ' + iOS );
		if( iOS.toString().indexOf('8.3') &gt; -1 &amp;&amp; userAgent.indexOf('iPad') &gt; -1 &amp;&amp; userAgent.indexOf('Safari') &gt; -1 &amp;&amp; userAgent.indexOf('Chrome') == -1 ) {
			jQuery('#billingCardNumber').attr('onchange','').attr('onblur','');		

			jQuery('#billingCardNumber').on('change', function () { 
				if( checkout.model.data.modules.registration.guest ) {
					//$('saveCreditCardAsDefault').checked = false;
					jQuery('#saveCreditCardAsDefault').attr('checked',false)
				}
			});
		}
	}
	
	jQuery(document).ready(function(e) {
    wcdIPadSafariCheckoutFixer();
  });
}
  </script>
  <!-- END Fix for iPad, Safari checkout issue -->
  <!-- BEGIN Fix shopping bag link for sem customers - Byung -->
  <script type="text/javascript">
   if (location.href.indexOf("sem=true") != -1) {
		Event.observe(document,"updateDomWithPersonalizationData:completed", function () {
			jQuery('#universalInlineBagContainer').find('a').each(function(){
				if (this.href.indexOf('shopping_bag.do') != -1) this.href = "http://" + location.hostname + "/buy/shopping_bag.do";
			});
		});
	}
  </script>
  <!-- END Fix shopping bag link for sem customers - Byung -->
  <!-- BEGIN Fix for Checkout -->
  <script type="text/javascript">
   if( location.pathname == '/checkout/order.do' ) {
	jQuery(document).ready(function(){
		jQuery('#billingCardNumber').on('change', function () {  
			if (checkout.model.data.modules.registration.guest &amp;&amp; !checkout.model.data.modules.registration.visaGuest &amp;&amp; !checkout.model.data.modules.shipping.billingSameAsShipping) {
				ccm.billing.view.openBillingAddressEditForm();
				jQuery('#billingAddressRightColReadOnly').hide();
		    }
		});
	});
}
  </script>
  <!-- END Fix for Checkout -->
  <!-- BEGIN Checkout Enhancement fix -->
  <script type="text/javascript">
   if( location.pathname == '/checkout/order.do' ) {
	jQuery(document).ready(function(e) {
		jQuery('#billingExpirationMonth').on('focus', function(){
			if (checkout.model.enableBillingModuleEnhancements &amp;&amp; jQuery('#billingExpirationMonth').val().trim() === '') {
				jQuery('#billingExpirationMonth').val('');
			}
		});
  });
}
  </script>
  <!-- END Checkout Enhancement fix -->
  <!-- END Content Item File: /content/0008/792/725/cn8792725.html -->
  <!-- END - WCD Sitewide Container 3 -->
  <!-- BEGIN - WCD Sitewide Container 4 -->
  <!-- END - WCD Sitewide Container 4 -->
  <!-- BEGIN - WCD Sitewide Container 5 -->
  <!-- BEGIN Content Item File: /content/0009/810/483/cn9810483.html -->
  <style type="text/css">
   .vidThumb {background-size: contain;overflow: hidden;position: relative}
.vidThumbA {background-size: contain;overflow: hidden;position: relative}
#prodVidLG {display: block;position: absolute;visibility: hidden}
#prodVidLGA {display: block;position: absolute;visibility: visible}
.vidhid {visibility: hidden}
div#product_image_bg video {width: 260px}
div#vidTrigger {display:inline-block !important;}
.prodCc {color:#C00;}
  </style>
  <!--[if lt IE 9 ]&gt;
&lt;script&gt;
var is_ie_lt9 = true;
&lt;/script&gt;
&lt;![endif]-->
  <script type="text/javascript">
   /*if (jQuery.event.trigger.toString().indexOf("oldjQueryTrigger") == -1) {
	(function( $ ) {
		$.each(['personalizationData:ready','categoryFacetedSearchGrid:ready','productPage:ready','filterTools:ready'], function(index,eventName) {
			document.observe(eventName,function(){ 
				$(document).trigger(eventName);
			});
		});
	})( jQuery );
}*/

;(function ($, window) {
 
var intervals = {};
var removeListener = function(selector) {
 
	if (intervals[selector]) {
		
		window.clearInterval(intervals[selector]);
		intervals[selector] = null;
	}
};
var found = 'waitUntilExists.found';
 
/**
 * @function
 * @property {object} jQuery plugin which runs handler function once specified
 *           element is inserted into the DOM
 * @param {function|string} handler 
 *            A function to execute at the time when the element is inserted or 
 *            string "remove" to remove the listener from the given selector
 * @param {bool} shouldRunHandlerOnce 
 *            Optional: if true, handler is unbound after its first invocation
 * @example jQuery(selector).waitUntilExists(function);
 */
 
$.fn.waitUntilExists = function(handler, shouldRunHandlerOnce, isChild) {
 
	var selector = this.selector;
	var $this = $(selector);
	var $elements = $this.not(function() { return $(this).data(found); });
	
	if (handler === 'remove') {
		
		// Hijack and remove interval immediately if the code requests
		removeListener(selector);
	}
	else {
 
		// Run the handler on all found elements and mark as found
		$elements.each(handler).data(found, true);
		
		if (shouldRunHandlerOnce &amp;&amp; $this.length) {
			
			// Element was found, implying the handler already ran for all 
			// matched elements
			removeListener(selector);
		}
		else if (!isChild) {
			
			// If this is a recurring search or if the target has not yet been 
			// found, create an interval to continue searching for the target
			intervals[selector] = window.setInterval(function () {
				
				$this.waitUntilExists(handler, shouldRunHandlerOnce, true);
			}, 500);
		}
	}
	
	return $this;
};
 
}(jQuery, window));


jQuery( document ).ready(function( $ ) {

	var thisDivision = "";
    if (window['reportingService']) {
        thisDivision = reportingService.controller.viewManagers.commonViewManager.model.commonChannelName;
    }
	
	//if(thisDivision == "") { thisDivision = 'noDivisionVideo' }
	var getDivision = thisDivision //.toLowerCase();
	var onlyDivisions = ['women', '', 'femme', 'Women', 'Femme'];
	if(jQuery.inArray(getDivision, onlyDivisions) &gt; -1) {	
	if( window["categoryPage"] != null ) { 
	
	
	
	$('&lt;style type="text/css"&gt;input[thumbtype="AV9"] {display: none;}&lt;/style&gt;').appendTo($('head')[0]);
	
	}
	
	
	if( window["productPage"] != null ) { 
	 
	
	$('&lt;style type="text/css"&gt;input[thumbtype="AV9"] {display: none;}&lt;/style&gt;').appendTo($('head')[0]);
	/*console.log('step1');*/
	//check AB status first
	
	function PvidVolCntrlTest() {
/*console.log('PvidVol runs');*/
	//var VolControlSegment = gidLib.getCookieVar("mktUniversalPersist", "PVIDVOL021815");
	
	if (window['is_ie_lt9'] != undefined) {
		
		VolControlSegment = "PVIDSEGD"	
	}
	
	else {
		//run the pvid test
			$('input[thumbtype="AV9"]').waitUntilExists(function() {
			
			
			prodVidBuilder();
			
			
			
				});
		
	}
	
}		

	function prodVidBuilder() {
				
	
			function getUrlParameter(sParam)
{
	var sPageURL = window.location.search.substring(1);
	var sURLVariables = sPageURL.split('&amp;');
	for (var i = 0; i &lt; sURLVariables.length; i++)
	{
		var sParameterName = sURLVariables[i].split('=');
		if (sParameterName[0] == sParam)
		{
            return sParameterName[1];
			}
		}
}
	
	var pidVal = getUrlParameter('pid');
	//var cidVal = getUrlParameter('cid');
	//var vidVal = getUrlParameter('vid');
	//var verVal = window.location.hash.substr(1);
	//var filVal = '';
	//pVidT = 0;
	var pidL = pidVal.length
	
	//check EU/UK
	if ((window.location.href.indexOf( '.uk') &gt; -1) || (window.location.href.indexOf( '.eu') &gt; -1))  {
		if ( pidL &gt; 6 ) {
			
			pidVal = pidVal.slice(3, -3)//.concat(clrC + "0");
			//console.log(pidVal);
			prodVidMkt();
		}
		else {
			prodVidMkt();	
		}
		 
	}
	else {
		if ( pidL &gt; 6 ) {
			
			pidVal = pidVal.slice(0, -3)
			prodVidMkt();
		}
		else {
			prodVidMkt();	
		}
		
	}
		/*var pidValUs = parseInt(pidVal.substring(0,8).concat('2'));
		var pidValCa = parseInt(pidVal.substring(0,8).concat('3'));
		var pidValJp = parseInt(pidVal.substring(0,8).concat('6'));
		var pidValEu = parseInt(pidVal.substring(0,8).concat('0'));*/
		
		
/*		
		//check all variants
		//US
		jQuery.ajax({
    url:'/Asset_Archive/GPWeb/content/0009/810/483/pvideo/' + pidValUs + '_m.jpg',
    type:'HEAD',
    error: function()
    {
        //file not exists
		//console.log('not finding US');
		//CA
		jQuery.ajax({
    url:'/Asset_Archive/GPWeb/content/0009/810/483/pvideo/' + pidValCa + '_m.jpg',
    type:'HEAD',
    error: function()
    {
        //file not exists
		//console.log('not finding CA');
		//JP
		jQuery.ajax({
    url:'/Asset_Archive/GPWeb/content/0009/810/483/pvideo/' + pidValJp + '_m.jpg',
    type:'HEAD',
    error: function()
    {
        //file not exists
		//console.log('not finding JP');
		//EU
		jQuery.ajax({
    url:'/Asset_Archive/GPWeb/content/0009/810/483/pvideo/' + pidValEu + '_m.jpg',
    type:'HEAD',
    error: function()
    {
        //file not exists
		//console.log('not finding EU');
		return;
		
    },
    success: function()
    {
        //file exists
		//console.log('found EU');
		pidVal = pidValEu;
		prodVidMkt();
    }
});//END EU
    },
    success: function()
    {
        //file exists
		//console.log('found JP');
		pidVal = pidValJp;
		prodVidMkt();
    }
});//END JP
    },
    success: function()
    {
        //file exists
		//console.log('found CA');
		pidVal = pidValCa;
		prodVidMkt();
    }
});//END CA
    },
    success: function()
    {
        //file exists
		///console.log('found US nested check2');
		pidVal = pidValUs;
		prodVidMkt();
    }
});//END US
		
	*/	
		
		
		//end check all variants
	
	function prodVidMkt() {
		
		var isAv9 = $('input[thumbtype="AV9"]');
		var posterBG = ('/Asset_Archive/GPWeb/content/0009/810/483/pvideo/' + pidVal + '.jpg');
		isAv9.replaceWith('&lt;div id="vidTrigger" class="thumbs vidThumb"&gt;&lt;img id="playbuttonImg" src ="/Asset_Archive/GPWeb/content/0009/810/483/assets/vidbtn51d.png" style="position:absolute; left:0px; top:0px;"/&gt;&lt;/div&gt;');
		$('&lt;style type="text/css"&gt;input[thumbtype="AV9"] {display: none;}&lt;/style&gt;').appendTo($('head')[0]);
		$( '#vidTrigger' ).css('background-image', 'url(' + posterBG + ')');
		
		if (!($( '#prodVidLG' ).length)) {
 			$( '#product_image_bg' ).prepend( "&lt;video id='prodVidLG' poster='\/Asset_Archive\/GPWeb\/content\/0009\/810\/483\/pvideo\/" + pidVal + ".jpg' crossorigin='anonymous' loop&gt;&lt;source src='\/Asset_Archive\/GPWeb\/content\/0009\/810\/483\/pvideo\/" + pidVal + ".mp4' type='video\/mp4'&gt;&lt;source src='\/Asset_Archive\/GPWeb\/content\/0009\/810\/483\/pvideo\/" + pidVal + ".webm' type='video\/webm'&gt;Your browser does not support the video tag. &lt;/video&gt;" );	
				}
				
					/////VIDEO CONTROLS AND THUMB
	
			//***VIDEO THUMB***//
	var pvid = {
		vidState: $( '#product_image_bg video' ),
		vidBtn: $( '#playbuttonImg' ),
		vidTrig: $( '#vidTrigger' ),
		thumbState: $( "input[class*='thumb']" ),
		dragState: $('#dragLayer'),
		toolState: $( '#imageTools' ),
	
	}

		//***VIDEO ELEMENT AND CONTROLS***///	
pvid.vidTrig.mouseover(function() {
  	pvid.vidState.css( 'visibility', 'visible' );
	
	if ( !pvid.vidTrig.hasClass( "vidThumbA" ) ) {
		pvid.vidTrig.attr( 'class', 'thumbSelected vidThumb' );
	}
	
 	
	if ( pvid.vidState.get(0).paused ) {
	  pvid.vidBtn.css( 'top', '-91px' );//play b
 		 }
  	else {
	  pvid.vidBtn.css( 'top', '-274px' );//pause a
	}
  
	});

pvid.vidTrig.mouseout(function() {
	
	if ( !pvid.vidTrig.hasClass( "vidThumbA" ) ) {
	pvid.vidState.css( 'visibility', 'hidden' );
	pvid.vidTrig.attr( 'class', 'thumbs vidThumb' );
	}
  
	if ( pvid.vidState.get(0).paused ) {
	pvid.vidBtn.css( 'top', '0px' );//play b
		}
	else {
	pvid.vidBtn.css( 'top', '-182px' )//pause b182
		}
  
	});


pvid.vidTrig.click(function () {
	pvid.dragState.hide();
	pvid.toolState.css( 'visibility', 'hidden' );
	pvid.thumbState.attr( 'class', 'thumbs' );
	pvid.vidTrig.attr( 'class', 'thumbSelected vidThumbA' );
	pvid.vidState.css( 'visibility', 'visible' );
	
	if ( pvid.vidState.get(0).paused ) {
    pvid.vidState.get(0).play(); 
	pvid.vidBtn.css( 'top', '-274px' );
	//tracking here
	
	s.linkTrackVars='eVar7'; 
	s.eVar7='ProductVideo_CTA'; 
	s.tl(this,'o',s.eVar7); 

		}
    else {
	pvid.vidState.get(0).pause();
	pvid.vidBtn.css( 'top', '-91px' );
		}
	});
	
pvid.thumbState.mouseover(function () {
					
	pvid.vidState.css('visibility', 'hidden');
				
	});
	
pvid.thumbState.mouseout(function () {
		
	if ( pvid.vidTrig.hasClass( 'vidThumbA' ) ) {
	pvid.thumbState.attr( 'class', 'thumbs' );
	pvid.vidState.css( 'visibility', 'visible' );
		};
				
					
					
	});
	
pvid.thumbState.click(function () {
	
	if ( pvid.vidState.get(0).play ) {
    pvid.vidState.get(0).pause();
	pvid.vidState.get(0).currentTime = 2.75305;
	pvid.vidBtn.css( 'top', '0px' );  
   		};
			
	pvid.vidState.css( 'visibility', 'hidden' );
	pvid.vidTrig.attr( 'class', 'thumbs vidThumb' );
	pvid.toolState.css( 'visibility', 'visible' );
	pvid.dragState.show();
	
		 });	
	
	 $( '#product_image_bg video' ).bind('contextmenu', function() 
    {
        return false;
    }); 
	 //end 
	
	};
	
	
	
		
		
	}
	PvidVolCntrlTest();
	
	}
}

$(document).on('webkitfullscreenchange mozfullscreenchange fullscreenchange', function(e)
{
    $('#dragLayer').hide();
	});
});
  </script>
  <!-- END Content Item File: /content/0009/810/483/cn9810483.html -->
  <!-- END - WCD Sitewide Container 5 -->
  <!-- BEGIN - WCD Sitewide Container 6 -->
  <!-- BEGIN Content Item File: /content/0009/922/185/cn9922185.html -->
  <style type="text/css">
   /* CSS to hide PL from Intl Shipping popup itself */
#shippingOptions #bg_us_ol { display:none }
/* North America/US case */
#shippingOptions #nativeShippingContainer div, #shippingOptions #globalShippingContainer div { margin:0 0 0 67px }
/* Canada case */
#nativeAndGlobalRegion #regionSpecificGlobal #globalContainer_CA { left:84px }
/* Asia case */
#shippingOptionsBusinessUnitsContainer #globalShippingContainer { left:63px }
/* EU shippable case */
#regionSpecificGlobal #globalContainer #globalUnits { left:58px }
#regionSpecificGlobal #globalContainer #globalUnits #at_us_ol { margin:0 0 0 45px }

/* Global Gateway */
#shippingOptionsPopUp {z-index:101 !important;}/*  FIX THE OVERLAPPING OF THE SHIPPING OPTIONS WINDOW WITH THE NEW BRAND BAR */
#shippingOptionsPopUp #regionSpecificNative #currencyForEurope .currencyBritish { font-size:11px }
#shippingOptionsPopUp #regionSpecificNative #currencyForEurope .britishPoundText { font-size:11px }
#shippingOptionsPopUp #regionSpecificGlobal .currency { font-size:11px }

#gatewayBackdrop { background: #000000; width: 100%; height: 100%; overflow: auto; left: 0; opacity: 0.65; filter: alpha(opacity = 65); z-index: 97; position: fixed; _position: absolute; top: 0; _top: expression(eval(document.body.scrollTop)); }

/* CSS fix for CZ/HU selection */
#nativeShippingContainer .gap_eu_ol, #nativeShippingContainer .gap_e2_ol { float:left; width:60px; height:60px }
#nativeShippingContainer .gap_eu_ol a, #nativeShippingContainer .gap_e2_ol a { display:block; float:left; color:#828282; padding-top:48px; text-decoration:none; width:60px; background-image:url("/assets/common/shippingOptions/gap_unselected.png"); background-repeat:no-repeat; text-align:center }
#nativeShippingContainer .gap_eu_ol_Selected, #nativeShippingContainer .gap_e2_ol_Selected { background-image: url("/assets/common/shippingOptions/gap_selected.png") !important; background-repeat:no-repeat }
#nativeShippingContainer .gap_eu_ol_Selected a, #nativeShippingContainer .gap_e2_ol_Selected a { background-image:none }

#nativeShippingContainer .br_eu_ol, #nativeShippingContainer .br_e2_ol { float:left; width:80px; height:60px; margin:0 0 0 52px; }
#nativeShippingContainer .br_eu_ol a, #nativeShippingContainer .br_e2_ol a { display:block; float:left; color:#828282; padding-top:48px; text-decoration:none; width:80px; background-image:url("/assets/common/shippingOptions/br_unselected.png"); background-repeat:no-repeat; background-position:10px 0; text-align:center }
#nativeShippingContainer .br_eu_ol_Selected, #nativeShippingContainer .br_e2_ol_Selected { background-image: url("/assets/common/shippingOptions/br_selected.png") !important; background-repeat:no-repeat; background-position:10px 0 }
#nativeShippingContainer .br_eu_ol_Selected a, #nativeShippingContainer .br_e2_ol_Selected a { background-image:none }

#nativeOrGlobalRegion #nativeShippingContainer { top:59px; left:63px }
#nativeOrGlobalRegion #globalGatewayCurrency .currencyBritish { font-size:11px; color: #828282; font-family: "Helvetica Neue",Helvetica,Arial,sans-serif; height: 22px; bottom: 0; left: 12px; position: absolute; text-align: left; width: 51px; }
#nativeOrGlobalRegion #globalGatewayCurrency .britishPoundText { font-size: 11px; color: #000000; font-family: "Helvetica Neue",Helvetica,Arial,sans-serif; height: 22px; bottom: 0; left: 70px; position: absolute; text-align: left; width: 100px; }

#rollOverNative, #rollOverGlobal { display:none }
  </style>
  <script type="text/javascript">
   // WCD global intercept code 
//
// Two types of intercepts
// - WCD intercept - layout/function fully controlled by WCD
// - Global Gateway intercept - cookieing functionality, background image, save checkbox controlled by WCD, rest is Global Gateway function call
// - Note: some countries still missing from Global Gateway API: AG, BZ, HR, MV, MC, SR

var globalIntercept = {
	model: {
		wcdAssetPath:'/Asset_Archive/GPWeb/content/0009/922/185/assets/',
		showTranslatedExperienceToEU: true,
		businessUnit:'GP_US',
		brandName:'Gap',
		brandURL:'www.gap.com',
		countryCode:'',
		trackingId:'',
		autoPoppedFlag:false,
		wcdRootDomain:'',
		
		// Which countries launch which intercept - array of coutnry codes
		wcdInterceptCoutnries:['CN','HK','TW'],
		globalGatewayCountries:['AE','AR','AT','AU','BB','BD','BE','BG','BH','BN','BO','BR','CA','CH','CL','CO','CR','CY','CZ','DE','DK','DO','EC','EE','EG','ES','FI','FR','GB','GR','GT','HN','HT','HU','ID','IE','IL','IN','IT','JM','JO','KH','KR','KW','LI','LK','LT','LU','LV','MA','MO','MT','MX','NI','NL','NO','NZ','OM','PA','PE','PH','PK','PL','PT','PY','QA','RO','SA','SE','SG','SI','SK','SV','TH','TR','TT','UK','ZA','JP','BG','HR','PL','RO'],
		
		// Life of intercept cookie by region
		interceptCookieLife: {
			oneDayCookie: ['AT','BE','CZ','DE','DK','EE','ES','FI','FR','GB','HU','IE','IT','LT','LU','LV','MT','NL','PT','SE','SK','SI','BG','HR','PL','RO'],
			thirtyDayCookie: ['CN','HK','TW','JP','GLOBAL']
		},
		
		// Personalization Data check, needed for origin country
		isPersonalizationDataReady:false
	},
	controller: {
		init: function() {
			var model = globalIntercept.model;
			var controller = globalIntercept.controller;
			// Set root domain for cookieing
			if( location.hostname.indexOf('.wip.gidapps.com') &gt; -1 ) { model.wcdRootDomain = '.wip.gidapps.com'; }
			else if( location.hostname.indexOf('.app.gidapps.com') &gt; -1 ) { model.wcdRootDomain = '.app.gidapps.com'; }
			else if( location.hostname.indexOf('.gap.com') &gt; -1 ) { model.wcdRootDomain = '.gap.com'; }
			var isSetDontDisplayCookie = gidLib.getCookieVar('mktUniversalPersist','globalInterceptDontShow');
			var isSetSeenAlreadyCookie = gidLib.getCookieVar('mktInterceptPersist','globalInterceptSeenAlready');
			model.countryCode = marketMessageService.requestOriginCountryCode;
			var forceVariable = gidLib.getQuerystringParam('intercept',true);
			// Do NOT show if kwid=1 in URL (biz dev link)
			var isKwidPage = gidLib.getQuerystringParam('kwid',true);
			
			// Check for valid force parameter and override country code
			if( forceVariable != '' &amp;&amp; ( model.wcdInterceptCoutnries.include( forceVariable ) || model.globalGatewayCountries.include( forceVariable ) ) ) {
				model.countryCode = forceVariable;
			}
			
			// If gatewayPassed parameter in URL then user just came from a gateway popup so mimic cookie settings and set flag
			var gatewayPassed = gidLib.getQuerystringParam('gatewayPassed',true);
			if( gatewayPassed != '' ) {
				gidLib.setCookieVar( 'mktUniversalPersist', 'globalInterceptDontShow', 'true' );
				gidLib.setCookie( 'mktInterceptPersist', 'globalInterceptSeenAlready=true', gidLib.getFutureDate({'days':'1'}), '/', model.wcdRootDomain );
				isSetDontDisplayCookie = 'true';
				isSetSeenAlreadyCookie = 'true';
			}			
			
			// If on shopping bag/checkout pages, do not auto-launch
			var bagCheckoutDomainCheck = location.pathname;
			if( bagCheckoutDomainCheck.indexOf('/buy/') &gt; -1 || bagCheckoutDomainCheck.indexOf('/checkout/') &gt; -1 ) {
				gidLib.setCookieVar( 'mktUniversalPersist', 'globalInterceptDontShow', 'true' );
				gidLib.setCookie( 'mktInterceptPersist', 'globalInterceptSeenAlready=true', gidLib.getFutureDate({'days':'1'}), '/', model.wcdRootDomain );
				isSetDontDisplayCookie = 'true';
				isSetSeenAlreadyCookie = 'true';
			}
			
			// Check that 'don't show' cookie has not been set, 'already seen' cookie has not been set and that country code is valid, else launch!
			if( ( isSetDontDisplayCookie == '' &amp;&amp; isSetSeenAlreadyCookie == '' &amp;&amp; isKwidPage != '1' &amp;&amp; ( model.wcdInterceptCoutnries.include( model.countryCode ) || model.globalGatewayCountries.include( model.countryCode ) ) || forceVariable != '' ) ) {
				
				// Construct TID
				model.trackingId = model.businessUnit + '_INT_' + model.countryCode;
				
				if( model.showTranslatedExperienceToEU &amp;&amp; globalInterceptTranslator ) {
					globalInterceptTranslator.model.countryCode = model.countryCode;
				}
				
				// Launch WCD Intercept
				if( model.wcdInterceptCoutnries.include( model.countryCode ) ) {
					controller.launchWCDIntercept( model.countryCode, model.trackingId );
				}
			
				// Launch Global Gateway intercepr
				else if( model.globalGatewayCountries.include( model.countryCode ) ) {
					siteNavigation.showShippingOptionsOverlay( true, model.countryCode, model.trackingId, 'notHeavy', true );
				}
				
				// Set 'already seen' cookie lifespan - 1 or 30 days (Global Gateway countries are 30 days)
				var globalPopupSeenExpireTime;
				if( model.interceptCookieLife.oneDayCookie.include( model.countryCode ) ) {
					globalPopupSeenExpireTime = gidLib.getFutureDate({'days':'1'});
				}
				else if( model.interceptCookieLife.thirtyDayCookie.include( model.countryCode ) || ( model.interceptCookieLife.thirtyDayCookie.include('GLOBAL') &amp;&amp; model.globalGatewayCountries.include( model.countryCode ) ) ) {
					globalPopupSeenExpireTime = gidLib.getFutureDate({'days':'30'});
				}
				gidLib.setCookieVar( 'mktInterceptPersist', 'globalInterceptSeenAlready', 'true', globalPopupSeenExpireTime );

				// Send data to Omniture
				s.pageName = model.businessUnit.toLowerCase() + ":" + model.countryCode + ":launch_intercept";
				s.tl( this, 'o', model.businessUnit.toLowerCase() + ":" + model.countryCode + ":launch_intercept");
			}
		},
		
		// Launch WCD intercept - unique layout by applicable country code: CN, HK, TW
		launchWCDIntercept: function( countryCode, trackingId ) {
			var model = globalIntercept.model;
			var controller = globalIntercept.controller;

			// Build intercept template by country code
			switch( model.countryCode ) {
				// Japan intercept - iframed to JP email sign-up
				case 'JP':
					var interceptWidth = 690;
					var interceptHeight = 755;
					var interceptTemplate = new Template(
						'&lt;div id="jpIntercept"&gt;&lt;iframe id="jpSignUp" src="https://m.gap.co.jp/evt/pc/index.php?event=Al%9B%AF%EE%D8%9F%C2%A1%3D%D7%A5%D2%94%85%2F%C5%83%FF%B8%D9%DB%D7%B74%97%DC%E4%1D%F4%18%EB" width="100%" height="750" frameborder="0"&gt;&lt;\/iframe&gt;&lt;\/div&gt;'
					);

					break;
					
				// China, Hong Kong, Taiwan intercept - image-based intercept with 'don't show' checkbox
				case 'CN':
				case 'HK':
				case 'TW':
					var interceptWidth = 505;
					var interceptHeight = 368;
					var interceptLinkMap;
					var interceptLinkMap2;
					var interceptLinkMap3;
					var interceptLinkMapUS;
					var interceptRegion;
					var siteLink;
					switch( model.countryCode ) {
						case 'CN':
							interceptLinkMap = '302,156,387,176';
							interceptLinkMap2 = '85,242,170,264';
							interceptLinkMap3 = '32,283,157,309';
							interceptLinkMapUS = '193,284,349,309';
							interceptRegion = 'China';
							siteLink = 'http://www.gap.cn/';
							assetName = 'CN.gif';
							checkboxTop = '352';
							checkboxLeft = '39';
							break;
							
						case 'HK':
							interceptLinkMap = '302,156,388,176';
							interceptLinkMap2 = '28,242,113,264';
							interceptLinkMap3 = '36,284,230,309';
							interceptLinkMapUS = '245,284,401,309';
							interceptRegion = 'Hong Kong';
							siteLink = 'http://www.gap.hk/';
							assetName = 'HK.gif';
							checkboxTop = '352';
							checkboxLeft = '39';
							break;
							
						case 'TW':
							interceptLinkMap = '277,156,363,176';
							interceptLinkMap2 = '28,241,117,260';
							interceptLinkMap3 = '32,282,201,309';
							interceptLinkMapUS = '206,283,363,310';
							interceptRegion = 'Taiwan';
							siteLink = 'http://www.gap.tw/';
							assetName = 'TW1.gif';
							checkboxTop = '322';
							checkboxLeft = '371';
							break;
					}
					
					// Construct template and launch
					var interceptTemplate = new Template(
						'&lt;img src="#{wcdAssetPath}' + assetName + '" style="width:489px;height:365px;border:none;" usemap="#intlInterceptMap" /&gt;' +
						'&lt;map name="intlInterceptMap" id="intlInterceptMap"&gt;' + 
							'&lt;area shape="rect" coords="' + interceptLinkMap + '" href="' + siteLink + '" onclick="globalInterceptPopup.controller.twSavePrefs(\'' + siteLink + '\')" alt="Shop #{brandName} in ' + interceptRegion + '" /&gt;' + 
							'&lt;area shape="rect" coords="' + interceptLinkMap2 + '" href="' + siteLink + '" onclick="globalInterceptPopup.controller.twSavePrefs(\'' + siteLink + '\')" alt="Shop #{brandName} in ' + interceptRegion + '" /&gt;' + 
							'&lt;area shape="rect" coords="' + interceptLinkMap3 + '" href="' + siteLink + '" onclick="globalInterceptPopup.controller.twSavePrefs(\'' + siteLink + '\')" alt="Shop #{brandName} in ' + interceptRegion + '" /&gt;' + 
							'&lt;area shape="rect" coords="' + interceptLinkMapUS + '" href="javascript:void(0)" onclick="globalIntercept.controller.processWCDIntercept(\'#{brandURL}\'); gidLib.layeredPopup.closeLayeredPopup()" alt="Shop #{brandName} U.S." /&gt;' + 
						'&lt;/map&gt;' + 
						'&lt;div style="position: absolute; float: left; top: ' + checkboxTop + 'px; left: ' + checkboxLeft + 'px;"&gt;' + 
							'&lt;input id="wcdInterceptDontShow" type="checkbox" checked="checked" /&gt;' + 
						'&lt;/div&gt;'
					);
	
					break;
			}
			gidLib.layeredPopup.openLayeredPopup({ str:interceptTemplate.evaluate( globalIntercept.model ), id:'GlobalIntercept', width:interceptWidth, height:interceptHeight, title:'' });
			$('layeredPopupFrameTop').setStyle({ 'textIndent':'-9999px', 'overflow':'hidden' });
		},

		// Process WCD for applicable countries - if in CN/HK/TW and gap.com selected, continue to show WCD intercept
		processWCDIntercept: function( brandLink ) {
			if( $('wcdInterceptDontShow').checked &amp;&amp; ( brandLink.indexOf('gap.cn') == -1 || brandLink.indexOf('gap.hk') == -1 ) ) {
				gidLib.setCookieVar('mktUniversalPersist','globalInterceptDontShow','true');
			}
			else {
				gidLib.removeCookieVar('mktUniversalPersist','globalInterceptDontShow');
				gidLib.removeCookieVar('mktInterceptPersist','globalInterceptSeenAlready');
			}
		},
		
		// Add 'save prefs' checkboxes to Global Gateway intercepts
		addSavePrefsCheck: function() {
			var savePrefsStr = '&lt;p style="float:right; width:194px; padding-top:3px"&gt;&nbsp;&nbsp;&nbsp;&lt;input type="checkbox" id="savePrefsCheck" style="vertical-align:text-top" /&gt; Save preferences&lt;/p&gt;';
			if( $('shippingOptionsCancelButtons') ) {
			  $('shippingOptionsCancelButtons').update( $('shippingOptionsCancelButtons').innerHTML + savePrefsStr );
			  $('shippingOptionsCancelButtons').setStyle({ width:'255px', textAlign:'left' });
			}
			if( $('shippingOptionsCurrencySelect') ) {
				$('shippingOptionsCurrencySelect').setStyle({ fontSize:'11px' });
			}
			if( $('shippingOptionsCancelButton') ) {
				$('shippingOptionsCancelButton').onclick = function() { siteNavigation.closeShippingOptionsOverlay(); }
			}
		}
	}
};

// Wrap shipping option processor in cookie setting mechanism
/*if( location.pathname != '/checkout/order.do' &amp;&amp; shippingOptionsService &amp;&amp; shippingOptionsService.controller &amp;&amp; shippingOptionsService.controller.continuePressed ) {
	shippingOptionsService.controller.continuePressed = shippingOptionsService.controller.continuePressed.wrap( function( om ) {
		if( $('savePrefsCheck') ) {
			if( $('savePrefsCheck').checked ) {
				gidLib.setCookieVar('mktUniversalPersist','globalInterceptDontShow','true');
			}
		}
		om();
	});
}*/

// Initialize popup
if( window['siteNavigation'] ) {
	if( window['personalizationService'] ) {
		document.observe('personalizationData:ready', function() {
			globalIntercept.model.isPersonalizationDataReady = true;
		});
		Event.observe(window, 'load', function() {
			if( globalIntercept.model.isPersonalizationDataReady ) {
				globalIntercept.controller.init();
			}
			else {
				document.observe('personalizationData:ready', function() {
					globalIntercept.controller.init();
				});	
			}
		});
	}
	else {
		Event.observe( window, 'load', function() {
			globalIntercept.controller.init();
		});
	}
}
  </script>
  <!-- Global Gateway Euro/.co.uk display fix - to be removed with euro site launch -->
  <script type="text/javascript">
   if( window["shippingOptionsService"] ) {
	if( shippingOptionsService &amp;&amp; shippingOptionsService.view ) {
		if( shippingOptionsService.view.regionAndCountrySelect ) {
			shippingOptionsService.view.regionAndCountrySelect = shippingOptionsService.view.regionAndCountrySelect.wrap( function( om, nativeSize, globalSize ) {
				om( nativeSize, globalSize );
				var euCountryCodeArray = ['AT','BE','CZ','DK','EE','FI','FR','DE','HU','IE','IT','LV','LT','LU','MT','NL','PT','SK','SI','ES','SE','GB','BG','HR','PL','RO'];
				var currentCountry = shippingOptionsService.model.shippingOptionsInfo.requestedShippingCountryCode;
				if( euCountryCodeArray.include( currentCountry ) ) {
					if( $('britishPoundText') ) $('britishPoundText').update('British Pounds');
					if( $('orderProcessingPounds') ) $('orderProcessingPounds').hide();
				}
			});
		}
		
		if( shippingOptionsService.view.countrySelected ) {
			shippingOptionsService.view.countrySelected = shippingOptionsService.view.countrySelected.wrap( function( om ) {
				om();
				var euCountryCodeArray = ['AT','BE','CZ','DK','EE','FI','FR','DE','HU','IE','IT','LV','LT','LU','MT','NL','PT','SK','SI','ES','SE','GB','BG','HR','PL','RO'];
				var currentCountry = shippingOptionsService.model.shippingOptionsInfo.requestedShippingCountryCode;
				if( euCountryCodeArray.include( currentCountry ) ) {
					if( $('britishPoundText') ) $('britishPoundText').update('British Pounds');
					if( $('orderProcessingPounds') ) $('orderProcessingPounds').hide();
				}
			});
		}
		
		if( shippingOptionsService.view.displayingBusinessUnits ) {
			shippingOptionsService.view.displayingBusinessUnits = shippingOptionsService.view.displayingBusinessUnits.wrap( function( om, container, brnadsInOrder, innerContainer, businessUnitUrls, brandsDotCom, brandDivs ) {
				om( container, brnadsInOrder, innerContainer, businessUnitUrls, brandsDotCom, brandDivs );
				
				// Update Borderfree to Borderfree
				if( $('globalInstructionText') ) {
					var BorderfreeTxt = $('globalInstructionText').innerHTML;
					BorderfreeTxt = BorderfreeTxt.replace('Borderfree','Borderfree');
					$('globalInstructionText').update( BorderfreeTxt );
				}
				if( $('bottomGlobalInstruction') ) {
					var BorderfreeTxt = $('bottomGlobalInstruction').innerHTML;
					BorderfreeTxt = BorderfreeTxt.replace('Borderfree','Borderfree');
					$('bottomGlobalInstruction').update( BorderfreeTxt );
				}
				
				var euCountryCodeArray = ['AT','BE','CZ','DK','EE','FI','FR','DE','HU','IE','IT','LV','LT','LU','MT','NL','PT','SK','SI','ES','SE','GB','BG','HR','PL','RO'];
				var currentCountry = shippingOptionsService.model.shippingOptionsInfo.requestedShippingCountryCode;
				if( euCountryCodeArray.include( currentCountry ) &amp;&amp; currentCountry != 'GB' ) {
					if( $('gap_eu_ol_a') &amp;&amp; $('gap_eu_ol_a').innerHTML.indexOf('.co.uk') &gt; -1 ) $('gap_eu_ol_a').update('gap.eu');
					if( $('br_eu_ol_a') &amp;&amp; $('br_eu_ol_a').innerHTML.indexOf('.co.uk') &gt; -1 ) $('br_eu_ol_a').update('bananarepublic.gap.eu');

					if( currentCountry == 'CZ' || currentCountry == 'HU' || currentCountry == 'PL' ) { $('orderProcessingPoundsCZHU').show(); }
					
					// Show legal message
					$('orderProcessingPounds').setStyle({ display:'block', padding:'0 5px 0 0' });
				}
				else if( currentCountry == 'GB' ) {
					if( $('gap_eu_ol_a') &amp;&amp; $('gap_eu_ol_a').innerHTML.indexOf('.eu') &gt; -1 ) $('gap_eu_ol_a').update('gap.co.uk');
					if( $('br_eu_ol_a') &amp;&amp; $('br_eu_ol_a').innerHTML.indexOf('.eu') &gt; -1 ) $('br_eu_ol_a').update('bananarepublic.gap.co.uk');
					
					// Hide legal message
					$('orderProcessingPounds').setStyle({ display:'none' });
				}
				else {
					$('orderProcessingPounds').setStyle({ display:'none' });
					if( $('orderProcessingPoundsCZHU') ) {
						if( currentCountry == 'CZ' || currentCountry == 'HU' ) { $('orderProcessingPoundsCZHU').show(); }
						else { $('orderProcessingPoundsCZHU').hide(); }
					}
				}
			});
		}
		
		if( shippingOptionsService.view.constructUrlAndAddTid ) {
			shippingOptionsService.view.constructUrlAndAddTid = shippingOptionsService.view.constructUrlAndAddTid.wrap( function( om, url, brandName, domainName ) {
				om( url,brandName,domainName );
				if( shippingOptionsService.model.brandURL.indexOf('.eu') &gt; -1 &amp;&amp; shippingOptionsService.model.brandURL.indexOf('tid=') == -1 ) {
					if( shippingOptionsService.model.brandURL.indexOf('bananarepublic.gap.eu')  &gt; -1 || shippingOptionsService.model.brandURL.indexOf('brol.app.gidapps.eu') &gt; -1 || shippingOptionsService.model.brandURL.indexOf('brol.wip.gidapps.eu') &gt; -1 ) {
						shippingOptionsService.model.brandURL = shippingOptionsService.model.brandURL + '/?tid=BRINTLSHIP';
					}
					else if( shippingOptionsService.model.brandURL.indexOf('gap.eu')  &gt; -1 || shippingOptionsService.model.brandURL.indexOf('gol.app.gidapps.eu') &gt; -1 || shippingOptionsService.model.brandURL.indexOf('gol.wip.gidapps.eu') &gt; -1 ) {
						shippingOptionsService.model.brandURL = shippingOptionsService.model.brandURL + '/?tid=GOINTLSHIP';
					}
				}
				
				// Adjust domain if needed
				var countrySelected = shippingOptionsService.model.shippingOptionsInfo.requestedShippingCountryCode;
				if( countrySelected == 'GB' &amp;&amp; shippingOptionsService.model.brandURL.indexOf('.eu') &gt; -1 ) {
					shippingOptionsService.model.brandURL = shippingOptionsService.model.brandURL.replace('.eu','.co.uk');
				}
				else if( countrySelected != 'GB' &amp;&amp; shippingOptionsService.model.brandURL.indexOf('.co.uk') &gt; -1 ) {
					shippingOptionsService.model.brandURL = shippingOptionsService.model.brandURL.replace('.co.uk','.eu');					
				}
				
				// Turkey domain adjustment
				if( countrySelected == 'TR' ) {
					shippingOptionsService.model.brandURL = shippingOptionsService.model.brandURL.replace('www.gol.wip.gidapps.eu','www.gap.com.tr').replace('www.gol.app.gidapps.eu','www.gap.com.tr').replace('www.gap.eu','www.gap.com.tr').replace('www.brol.wip.gidapps.eu','bananarepublic.gap.com.tr').replace('www.brol.app.gidapps.eu','bananarepublic.gap.com.tr').replace('bananarepublic.gap.eu','bananarepublic.gap.com.tr');
				}
				
				// Add 'came through gateway from' and locale URL parameters
				if( globalIntercept.model.businessUnit != '' ) {
					//var gatewayTracker = gidBrandSiteConstruct.currentBrandSiteId + gidBrandSiteConstruct.cookieDomain.replace('.gap','').replace('.gapcanada','').replace('.wip.gidapps','').replace('.app.gidapps','');
					var gatewayTracker = globalIntercept.model.businessUnit;
					var gatewayLinkURL = shippingOptionsService.model.brandURL;
					if( gatewayLinkURL.indexOf('?') &gt; -1 ) { gatewayLinkURL = gatewayLinkURL + '&amp;'; }
					else { gatewayLinkURL = gatewayLinkURL + '?'; }
					gatewayLinkURL = gatewayLinkURL + 'gatewayPassed=' + gatewayTracker;
					
					// Pass locale variable if not English
					//if( globalInterceptTranslator &amp;&amp; globalInterceptTranslator.model &amp;&amp; globalInterceptTranslator.model.currentLanguage != 'en_GB' ) {
						gatewayLinkURL = gatewayLinkURL + '&amp;preferredLocale=' + globalInterceptTranslator.model.currentLanguage;
					//}
					
					// Pass country through to other site
					gatewayLinkURL = gatewayLinkURL + '&amp;gatewayCountry=' + countrySelected;
										
					shippingOptionsService.model.brandURL = gatewayLinkURL;
				}
			});
		}
		
		if( shippingOptionsService.controller &amp;&amp; shippingOptionsService.controller.continuePressed ) {
			shippingOptionsService.controller.continuePressed = shippingOptionsService.controller.continuePressed.wrap( function( om ) {
				var euCountryCodeArray = ['AT','BE','CZ','DK','EE','FI','FR','DE','HU','IE','IT','LV','LT','LU','MT','NL','PT','SK','SI','ES','SE','GB','BG','HR','PL','RO'];
				var countryCodeCheck = shippingOptionsService.view.shippingOptionsCountrySelect().getValue();
				if( euCountryCodeArray.include( countryCodeCheck ) ) {
					shippingOptionsService.model.brandButtonClicked = true;
				}	
				om();
			});
		}
		
		if( shippingOptionsService.view &amp;&amp; shippingOptionsService.view.updateAndShowBusinessUnitsContainer ) {
			shippingOptionsService.view.updateAndShowBusinessUnitsContainer = shippingOptionsService.view.updateAndShowBusinessUnitsContainer.wrap( function( om ) {
				om();
				
				var countryCode = shippingOptionsService.view.shippingOptionsCountrySelect().getValue();
				var translatedCopyArray = globalInterceptTranslator.model.currentTranslatedCopy;
				var currentLanguage = globalInterceptTranslator.model.currentLanguage;

				if( countryCode == 'CZ' || countryCode == 'HU' ) {

					if( $('bottomNativeInstruction') ) {
						$('bottomNativeInstruction').update( translatedCopyArray[6] );
						$('bottomNativeInstruction').setStyle({ top:'5px' });
					}
					
					if( $('shippingOptionsBottomFlag') ) {
						var imgToUpdate = $('shippingOptionsBottomFlag').select('img');
						if( imgToUpdate &amp;&amp; imgToUpdate.length &gt; 0 ) {
						   imgToUpdate[0].setAttribute('src','/assets/common/shippingOptions/' + countryCode + '.gif');
						}
					}
					
					if( $('globalGatewayCurrency') ) $('globalGatewayCurrency').hide();
					//if( $('shippingCurrencySelect') ) $('shippingCurrencySelect').hide();
					
					if( $('globalGatewayCurrency') ) {
						$('globalGatewayCurrency').update( translatedCopyArray[7] );
						$('globalGatewayCurrency').show();
						
						if( $('orderProcessingPoundsCZHU') ) {
							$('orderProcessingPoundsCZHU').update( translatedCopyArray[16] );
						}
						else {
							var orderProcessMessaage = new Element('div', { id:'orderProcessingPoundsCZHU', style:'display: block; padding: 0px 5px 0px 0px; bottom:4px; color: #933; font-family: Arial; font-weight: bold; left: 12px; position: absolute;' }).update( translatedCopyArray[16] );
							$('globalGatewayCurrency').insert({ after: orderProcessMessaage });	
						}
					}
				}
				else if( countryCode == 'BG' || countryCode == 'HR' || countryCode == 'PL' || countryCode == 'RO' ) {

					if( $('bottomNativeInstruction') ) {
						$('bottomNativeInstruction').update( translatedCopyArray[6] );
						$('bottomNativeInstruction').setStyle({ top:'5px' });
						$('bottomNativeInstruction').show();
					}
					
					// Changes US flag to country-specific flag
					if( $('shippingBottomFlagAndInstruction') ) {
						var imgToUpdate = $('shippingBottomFlagAndInstruction').select('img');
						if( imgToUpdate &amp;&amp; imgToUpdate.length &gt; 0 ) {
						   imgToUpdate[0].setAttribute('src','/assets/common/shippingOptions/' + countryCode + '.gif');
						}
						$('shippingBottomFlagAndInstruction').show();
					}
					
					// Set currency to British Pounds
					if( $('globalGatewayCurrency') ) $('globalGatewayCurrency').hide();
					//if( $('shippingCurrencySelect') ) $('shippingCurrencySelect').hide();
					
					if( $('globalGatewayCurrency') ) {
						$('globalGatewayCurrency').update( translatedCopyArray[7] );
						$('globalGatewayCurrency').show();
						
						if( $('orderProcessingPoundsCZHU') ) {
							$('orderProcessingPoundsCZHU').update( translatedCopyArray[16] );
						}
						else {
							var orderProcessMessaage = new Element('div', { id:'orderProcessingPoundsCZHU', style:'display: block; padding: 0px 5px 0px 0px; bottom:4px; color: #933; font-family: Arial; font-weight: bold; left: 12px; position: absolute;' }).update( translatedCopyArray[16] );
							$('globalGatewayCurrency').insert({ after: orderProcessMessaage });	
						}
						
						// Romania has different placement of messaging
						if( countryCode == 'RO' ) {
							jQuery('#orderProcessingPounds').show();
						}
						
					}
					
					$('shippingOptionsBusinessUnitsContainer').show();

				}
				else {
					if( $('shippingOptionsBottomFlag') ) {
						var imgToUpdate = $('shippingOptionsBottomFlag').select('img');
						if( imgToUpdate &amp;&amp; imgToUpdate.length &gt; 0 ) {
						   imgToUpdate[0].setAttribute('src','/assets/common/shippingOptions/US.gif');
						}
					}
				}
			});			
		}		
	}
}
  </script>
  <script type="text/javascript">
   if( window["shippingOptionsService"] ) {
	if( shippingOptionsService &amp;&amp; shippingOptionsService.view ) {

var globalInterceptTranslator = {
	
	model: {
		wcdAssetPath:'/Asset_Archive/GPWeb/content/0009/922/185/assets/',
		initialLaunch: false,
		currentLanguage: 'en_GB',
		currentTranslatedCopy: {},
		euCountryCodeArray: ['AT','BE','CZ','DK','EE','FI','FR','DE','HU','IE','IT','LV','LT','LU','MT','NL','PT','SK','SI','ES','SE','GB','BG','HR','PL','RO'],
		euTranslateCountryCodeArray: ['AT','BE','DE','LU','NL','ES'],
		translatedCopyByElt: {
			'en_GB' : [
				'International Shipping',
				'Where are you shipping to?',
				'Region',
				'Country',
				'Language',
				'Please choose a shipping destination above to see store options',
				'Shop these &lt;span id="nativeCountryName" class="nativeCountryName" style="color:#000000"&gt;EU sites&lt;/span&gt; directly',
				'&lt;div class="currencyBritish"&gt;Currency:&lt;/div&gt; &lt;div id="britishPoundText" class="britishPoundText"&gt;Euros&lt;/div&gt;',
				'While prices display in Euros, your order will be processed in British Pounds.',
				'Currency:',
				'Continue',
				'Cancel',
				'Save preferences',
				'Shop these &lt;span style="color:#000000"&gt;US sites&lt;/span&gt; with international shipping from Borderfree, our global e-commerce provider:',
				'Please note: all prices on gap.eu are displayed in Euros but orders will be charged in British Pounds. Final pricing is determined by the current conversion rate at the time of your order and may vary slightly from the price displayed. Your credit card company may also apply a conversion fee to your transaction.',
				'&lt;div class="currencyBritish"&gt;Currency:&lt;/div&gt; &lt;div id="britishPoundText" class="britishPoundText"&gt;British Pounds&lt;/div&gt;',
				'Please note: all prices on gap.eu are displayed in Euros but orders will be charged in British Pounds.'
			],
			'de_DE' : [
				'International Versand',
				'In welche Lnder wird geliefert?',
				'Region',
				'Land',
				'Sprache',
				'Whlen Sie oben einen Bestimmungsort aus, um die Filialoptionen anzuzeigen.',
				'Kaufen Sie auf diesen &lt;span id="nativeCountryName" class="nativeCountryName" style="color:#000000"&gt;EU-Sites&lt;/span&gt; direkt ein in',
				'&lt;div class="currencyBritish"&gt;Whrung:&lt;/div&gt; &lt;div id="britishPoundText" class="britishPoundText"&gt;Euro&lt;/div&gt;',
				'Die Preise der Artikel werden zwar in Euro angezeigt, doch Ihre Bestellung wird in britischen Pfund bearbeitet.',
				'Whrung:',
				'Fortfahren',
				'Lschen',
				'Einstellungen speichern',
				'Kaufen Sie auf diesen &lt;span style="color:#000"&gt;US-Sites&lt;/span&gt;, die internationalen Versand durch unseren globalen E-Commerce-Anbieter Borderfree anbieten.',
				'Bitte beachten Sie: Alle Preise auf gap.eu werden in Euro angezeigt, doch Bestellungen werden in britischen Pfund berechnet. Der Endpreis hngt jeweils von dem Wechselkurs zum Zeitpunkt der Bestellung ab und kann sich leicht von dem angezeigten Preis unterscheiden. Es besteht die Mglichkeit, dass Ihr Kreditkartenunternehmen zustzlich eine Umrechnungsgebhr fr die Transaktion in Rechnung stellt.',
				'&lt;div class="currencyBritish"&gt;Whrung:&lt;/div&gt; &lt;div id="britishPoundText" class="britishPoundText"&gt;British Pounds&lt;/div&gt;',
				'Bitte beachten Sie: Alle Preise auf gap.eu werden in Euro angezeigt, doch Bestellungen werden in britischen Pfund berechnet.'
			],
			'nl_NL' : [
				'Internationale verzending',
				'Waar moet uw pakket bezorgd worden?',
				'Regio',
				'Land',
				'Taal',
				'Kies hierboven een bestemming om de winkelopties te bekijken.',
				'Winkel direct op deze &lt;span id="nativeCountryName" class="nativeCountryName" style="color:#000000"&gt;EU-sites&lt;/span&gt;',
				'&lt;div class="currencyBritish"&gt;Valuta:&lt;/div&gt; &lt;div id="britishPoundText" class="britishPoundText"&gt;Euro&lt;/div&gt;',
				'Hoewel productprijzen worden weergegeven in euro\'s, zal uw bestelling worden verwerkt in Britse ponden.',
				'Valuta:',
				'Verder gaan',
				'Annuleren',
				'Voorkeuren opslaan',
				'Winkel op deze &lt;span style="color:#000000"&gt;US-sites&lt;/span&gt; en maak gebruik van internationale verzending via Borderfree, onze wereldwijde elektronische handelspartner.',
				'Opmerking: alle prijzen op gap.eu worden weergegeven in euro\'s, maar bestellingen worden verwerkt in Britse ponden. De uiteindelijke prijs wordt bepaald door de actuele wisselkoers ten tijde van uw bestelling en kan enigszins afwijken van het getoonde bedrag. Daarnaast kan het zijn dat uw creditcardmaatschappij een omzettingstaks berekent.',
				'&lt;div class="currencyBritish"&gt;Valuta:&lt;/div&gt; &lt;div id="britishPoundText" class="britishPoundText"&gt;British Pounds&lt;/div&gt;',
				'Opmerking: alle prijzen op gap.eu worden weergegeven in euro\'s, maar bestellingen worden verwerkt in Britse ponden.'
			],
			'es_ES' : [
				'Envos internacionales',
				'Dnde desea enviarlo?',
				'Provincia',
				'Pas',
				'Idioma',
				'Seleccione un destino de envo para consultar las opciones de las tiendas.',
				'Compre en este &lt;span id="nativeCountryName" class="nativeCountryName" style="color:#000000"&gt;sitio web de la UE&lt;/span&gt; directamente.',
				'&lt;div class="currencyBritish"&gt;Moneda:&lt;/div&gt; &lt;div id="britishPoundText" class="britishPoundText"&gt;Euros&lt;/div&gt;',
				'Aunque los precios se muestren en euros, su pedido se procesar en libras esterlinas.',
				'Moneda:',
				'Continuar',
				'Cancelar',
				'Guardar preferencias',
				'Compra en este &lt;span style="color:#000000"&gt;sitio web de U.S.&lt;/span&gt; con posibilidad de envo internacional con Borderfree, nuestro proveedor global de comercio electrnico.',
				'Tenga en cuenta lo siguiente: Todos los precios de gap.eu se muestran en euros, aunque los pedidos se cobrarn en libras esterlinas. El precio final viene determinado por el tipo de cambio en el momento en que realice el pedido y puede variar ligeramente del precio que se muestra. La compaa emisora de su tarjeta de crdito podra aplicar una tasa de conversin a su transaccin.',
				'&lt;div class="currencyBritish"&gt;Moneda:&lt;/div&gt; &lt;div id="britishPoundText" class="britishPoundText"&gt;British Pounds&lt;/div&gt;',
				'Tenga en cuenta lo siguiente: Todos los precios de gap.eu se muestran en euros, aunque los pedidos se cobrarn en libras esterlinas.'
			]
		}
	},
	
	// Translates main elements of Gateway popup (before country selection made)
	translateGatewayInitialElts: function() {
		var translatedCopyArray = globalInterceptTranslator.model.currentTranslatedCopy;
		var currentLanguage = globalInterceptTranslator.model.currentLanguage;
		var wcdAssetPath = globalInterceptTranslator.model.wcdAssetPath;
		
		// Update each text element
		if( $('internationalRegion') ) {
			var headerText = $('internationalRegion').select('h1');
			if( headerText &amp;&amp; headerText.length &gt; 0 ) { headerText = headerText[0]; headerText.update( translatedCopyArray[0] ); }
			
			var whereToText = $('internationalRegion').select('div.whereToShipText');
			if( whereToText &amp;&amp; whereToText.length &gt; 0 ) { whereToText = whereToText[0]; whereToText.update( translatedCopyArray[1] ); }
		}
		
		if( $('regionSpecific') ) {
			var header2Text = $('regionSpecific').select('h1');
			if( header2Text &amp;&amp; header2Text.length &gt; 0 ) { header2Text = header2Text[0]; header2Text.update( translatedCopyArray[0] ); }
			
			// Did you know text hidden in English
			if( $('favouriteText') &amp;&amp; globalInterceptTranslator.model.currentLanguage != 'en_GB' ) {
				$('favouriteText').setStyle({ visibility:'hidden' });
			}
			else {
				$('favouriteText').setStyle({ visibility:'visible' });
			}
			
			var whereTo2Text = $('regionSpecific').select('div.whereToShipText');
			if( whereTo2Text &amp;&amp; whereTo2Text.length &gt; 0 ) { whereTo2Text = whereTo2Text[0]; whereTo2Text.update( translatedCopyArray[1] ); }
		}
				
		if( $('whereToShipRegion') ) {
			var regionText = $('whereToShipRegion').select('div.regionToShip');
			if( regionText &amp;&amp; regionText.length &gt; 0 ) { regionText = regionText[0]; regionText.update( translatedCopyArray[2] ); }

			var countryText = $('whereToShipRegion').select('div.countryToShip');
			if( countryText &amp;&amp; countryText.length &gt; 0 ) { countryText = countryText[0]; countryText.update( translatedCopyArray[3] ); }
		}
		
		if( $('languageSelectText') ) $('languageSelectText').update( translatedCopyArray[4] );
		
		if( $('shippingOptionsChooseDestinationContainer') ) $('shippingOptionsChooseDestinationContainer').update( translatedCopyArray[5] );
		
		// Update buttons : -165px X nether; -258px x 77 wide espan
		if( $('shippingContinueButtonDisable') ) {
			$('shippingContinueButtonDisable').update();
			if( currentLanguage == 'de_DE' ) {
				$('shippingContinueButtonDisable').setStyle({ width:'88px', background:'url(' + wcdAssetPath + 'gatewayButtons.gif) -72px 0px no-repeat' });
			}
			else if( currentLanguage == 'nl_NL' ) {
				$('shippingContinueButtonDisable').setStyle({ width:'88px', background:'url(' + wcdAssetPath + 'gatewayButtons.gif) -165px 0px no-repeat' });
			}
			else if( currentLanguage == 'es_ES' ) {
				$('shippingContinueButtonDisable').setStyle({ width:'77px', background:'url(' + wcdAssetPath + 'gatewayButtons.gif) -258px 0px no-repeat' });
			}
			else {
				$('shippingContinueButtonDisable').setStyle({ width:'67px', background:'url(' + wcdAssetPath + 'gatewayButtons.gif) 0 0px no-repeat' });
			}
		}
		if( $('shippingOptionsContinueButton') ) {
			$('shippingOptionsContinueButton').update();
			if( currentLanguage == 'de_DE' ) {
				$('shippingContinueButtonEnable').setStyle({ width:'88px' });
				$('shippingOptionsContinueButton').setStyle({ display:'block', width:'88px', height:'20px', background:'url(' + wcdAssetPath + 'gatewayButtons.gif) -72px -20px no-repeat' });
			}
			else if( currentLanguage == 'nl_NL' ) {
				$('shippingContinueButtonEnable').setStyle({ width:'88px' });
				$('shippingOptionsContinueButton').setStyle({ display:'block', width:'88px', height:'20px', background:'url(' + wcdAssetPath + 'gatewayButtons.gif) -165px -20px no-repeat' });
			}
			else if( currentLanguage == 'es_ES' ) {
				$('shippingContinueButtonEnable').setStyle({ width:'77px' });
				$('shippingOptionsContinueButton').setStyle({ display:'block', width:'77px', height:'20px', background:'url(' + wcdAssetPath + 'gatewayButtons.gif) -258px -20px no-repeat' });
			}
			else {
				$('shippingContinueButtonEnable').setStyle({ width:'88px' });
				$('shippingOptionsContinueButton').setStyle({ display:'block', width:'67px', height:'20px', background:'url(' + wcdAssetPath + 'gatewayButtons.gif) 0 -20px no-repeat' });
			}
		}
		if( $('shippingOptionsCancelButton') ) {
			$('shippingOptionsCancelButton').update();
			if( currentLanguage == 'de_DE' ) {
				$('shippingOptionsCancelButtons').setStyle({ width:'70px', left:'125px' });
				$('shippingOptionsCancelButton').setStyle({ display:'block', width:'70px', height:'20px', background:'url(' + wcdAssetPath + 'gatewayButtons.gif) -72px -40px no-repeat' });
			}
			else if( currentLanguage == 'nl_NL' ) {
				$('shippingOptionsCancelButtons').setStyle({ width:'79px', left:'125px' });
				$('shippingOptionsCancelButton').setStyle({ display:'block', width:'79px', height:'20px', background:'url(' + wcdAssetPath + 'gatewayButtons.gif) -165px -40px no-repeat' });
			}
			else if( currentLanguage == 'es_ES' ) {
				$('shippingOptionsCancelButtons').setStyle({ width:'70px', left:'114px' });
				$('shippingOptionsCancelButton').setStyle({ display:'block', width:'70px', height:'20px', background:'url(' + wcdAssetPath + 'gatewayButtons.gif) -258px -40px no-repeat' });
			}
			else {
				$('shippingOptionsCancelButtons').setStyle({ width:'55px', left:'104px' });
				$('shippingOptionsCancelButton').setStyle({ display:'block', width:'55px', height:'20px', background:'url(' + wcdAssetPath + 'gatewayButtons.gif) 0 -40px no-repeat' });
			}
		}
	},
	
	// Translate elements created when country is selected
	translateGatewayBrandLinkElts: function() {
		var translatedCopyArray = globalInterceptTranslator.model.currentTranslatedCopy;
		var currentLanguage = globalInterceptTranslator.model.currentLanguage;
		var countryCode = shippingOptionsService.view.shippingOptionsCountrySelect().getValue();
				
		if( $('regionSpecificNative') ) {
			var shopInstructEUText = $('regionSpecificNative').select('div.nativeInstructionText');
			if( shopInstructEUText &amp;&amp; shopInstructEUText.length &gt; 0 ) { 
				shopInstructEUText = shopInstructEUText[0];
				var instructTextToReplace = translatedCopyArray[6];
				if( countryCode == 'US' ) { instructTextToReplace = instructTextToReplace.replace('EU','US') + ': &lt;a id="rollOverPopupNative" href="#" style="display: none" onmouseover="gidLib.shippingRolloverBubble.openBubble(event,{content:\'SHOP THE CANADA SITES &lt;br&gt;Selecting this option redirects you to the Canada site. However, items in your shopping bag will not automatically transfer to your Canada shopping bag.\'});" onmouseout="gidLib.shippingRolloverBubble.closeBubble();" onclick="return false;"&gt;&lt;img src="/assets/common/shippingOptions/icon_bubble.gif" id="NativeInformationIcon" height="10" width="12"&gt;&lt;/a&gt;&lt;a id="rollOverNative" href="#" style=""&gt;&lt;img src="/assets/common/shippingOptions/icon_bubble.gif" id="NativeInformationIcon" height="10" width="12"&gt;&lt;/a&gt;'; }
				
				else if( countryCode == 'CA' ) { instructTextToReplace = instructTextToReplace.replace('EU','CA') + ': &lt;a id="rollOverPopupNative" href="#" onmouseover="gidLib.shippingRolloverBubble.openBubble(event,{content:\'SHOP THE CANADA SITES &lt;br&gt;Selecting this option redirects you to the Canada site. However, items in your shopping bag will not automatically transfer to your Canada shopping bag.\'});" onmouseout="gidLib.shippingRolloverBubble.closeBubble();" onclick="return false;"&gt;&lt;img src="/assets/common/shippingOptions/icon_bubble.gif" id="NativeInformationIcon" height="10" width="12"&gt;&lt;/a&gt;&lt;a id="rollOverNative" href="#" style=""&gt;&lt;img src="/assets/common/shippingOptions/icon_bubble.gif" id="NativeInformationIcon" height="10" width="12"&gt;&lt;/a&gt;'; }
				
				else { instructTextToReplace = instructTextToReplace + ': &lt;a id="rollOverPopupNative" href="#" onmouseover="gidLib.shippingRolloverBubble.openBubble(event,{content:\'SHOP THE EU SITES &lt;br&gt;Selecting this option redirects you to the EU site. However, items in your shopping bag will not automatically transfer to your EU shopping bag.\'});" onmouseout="gidLib.shippingRolloverBubble.closeBubble();" onclick="return false;"&gt;&lt;img src="/assets/common/shippingOptions/icon_bubble.gif" id="NativeInformationIcon" height="10" width="12"&gt;&lt;/a&gt;&lt;a id="rollOverNative" href="#" style=""&gt;&lt;img src="/assets/common/shippingOptions/icon_bubble.gif" id="NativeInformationIcon" height="10" width="12"&gt;&lt;/a&gt;'; }
				
				shopInstructEUText.update( instructTextToReplace );
			}
			
			if( $('currencyForEurope') ) {
				var countrySelected = shippingOptionsService.model.shippingOptionsInfo.requestedShippingCountryCode;
				if( countrySelected == 'GB' ) { $('currencyForEurope').update( translatedCopyArray[15] ); }
				else { $('currencyForEurope').update( translatedCopyArray[7] ); }
				
				/*if( currentLanguage != 'en_GB' ) { */$('currencyForEurope').setStyle({ bottom:'32px' });/* }
				else { $('currencyForEurope').setStyle({ bottom:'23px' }); }*/
				
			}
		}
		
		if( $('regionSpecificGlobal') ) {
			var shopInstructGlobalText = $('regionSpecificGlobal').select('div.globalInstructionText');
			if( shopInstructGlobalText &amp;&amp; shopInstructGlobalText.length &gt; 0 ) { 
				shopInstructGlobalText = shopInstructGlobalText[0];
				shopInstructGlobalText.update( translatedCopyArray[13] + ': &lt;a href="#" id="rollOverPopupGlobal" onmouseover="gidLib.shippingRolloverBubble.openBubble(event,{content:\'SHOP THE US SITES&lt;br&gt;By placing an international order, you acknowledge that your transaction will be with Borderfree. Your customer service needs will be handled directly with Gap Inc. International orders are not eligible for free shipping or free returns. Your order total is guaranteed at the exchange rate set when your order is placed.\'});" onmouseout="gidLib.shippingRolloverBubble.closeBubble();" onclick="return false;"&gt;&lt;img src="/assets/common/shippingOptions/icon_bubble.gif" id="globalInformationIcon" height="10" width="12"&gt;&lt;/a&gt;&lt;a href="#" id="rollOverGlobal" style=""&gt;&lt;img src="/assets/common/shippingOptions/icon_bubble.gif" id="globalInformationIcon" height="10" width="12"&gt;&lt;/a&gt;');
			}
			
			if( $('regionCurrency') ) { $('regionCurrency').update( translatedCopyArray[9] ); }
		}
		
		if( $('bottomGlobalInstruction') ) {
			var shopInstructAllGlobalText = $('bottomGlobalInstruction').select('p');
			if( shopInstructAllGlobalText &amp;&amp; shopInstructAllGlobalText.length &gt; 0 ) { 
				shopInstructAllGlobalText = shopInstructAllGlobalText[0];
				shopInstructAllGlobalText.update( translatedCopyArray[13] + ': &lt;a onclick="return false;" onmouseout="gidLib.shippingRolloverBubble.closeBubble();" onmouseover="gidLib.shippingRolloverBubble.openBubble(event,{content:\'SHOP THE US SITES&lt;br&gt;By placing an international order, you acknowledge that your transaction will be with Borderfree. Your customer service needs will be handled directly with Gap Inc. International orders are not eligible for free shipping or free returns. Your order total is guaranteed at the exchange rate set when your order is placed.\'});" href="#"&gt;&lt;img width="12" height="10" id="InformationIcon" src="/assets/common/shippingOptions/icon_bubble.gif"&gt;&lt;/a&gt;');
			}
			
			if( $('globalGatewayCurrency') ) { 
				if( countryCode == 'CZ' || countryCode == 'HU' ) {
					$('globalGatewayCurrency').update( translatedCopyArray[15] );
					if( $('orderProcessingPoundsCZHU') ) $('orderProcessingPoundsCZHU').update( translatedCopyArray[16] );
				}
				else {
					$('globalGatewayCurrency').update( translatedCopyArray[9] );
				}
			}
		}
		
		if( $('orderProcessingPounds') ) { $('orderProcessingPounds').update( translatedCopyArray[16] ); }
		
		if( $('bottomNativeInstruction') ) {
			var bottomInstructionText = translatedCopyArray[6];
			if( countryCode == 'US' ) bottomInstructionText = bottomInstructionText.replace('EU','US');
			$('bottomNativeInstruction').update( bottomInstructionText );
		}
	},
	
	// Insert language dropdown into Global Gateway popup
	insertLanguageDropdown: function() {
		if( ! $('languageRegion') ) {
			var currentLanguage = globalInterceptTranslator.model.currentLanguage;
			var translatedCopyArray = globalInterceptTranslator.model.currentTranslatedCopy;
			var languageRegion = new Element('div', { id:'languageRegion', style:'position:absolute; float:left; width:220px; height:22px; bottom:3px; left:230px; color:#828282; font-family:"Helvetica Neue",Helvetica,Arial,sans-serif; font-size:13px; line-height:15px; text-align:left; z-index:99' });
			var languageRegionStr = 
				'&lt;div id="languageSelectText" class="languageToDisplay" style="position: absolute; bottom:0; left:0; width:63px; height:22px; color: #828282; font-family: "Helvetica Neue",Helvetica,Arial,sans-serif; font-size: 13px; line-height: 15px; padding-left: 0; text-align: left;"&gt;' + translatedCopyArray[4] + '&lt;/div&gt;' + 
				'&lt;div id="languageOptionsSelect" style="position: absolute; bottom:1px; left:63px; float: left; width: 132px; height: 22px; font-size: 11px;"&gt;' + 
					'&lt;select style="width:148px;font-size:13px;" onchange="globalInterceptTranslator.setLanguageOnSelectAndTranslate( this )"&gt;' + 
						'&lt;option&gt;Select&lt;/option&gt;';
			
			languageRegionStr = languageRegionStr + '&lt;option value="en_GB"';
			if( currentLanguage == 'en_GB' ) languageRegionStr = languageRegionStr + ' selected';
			languageRegionStr = languageRegionStr + '&gt;English&lt;/option&gt;';
			
			languageRegionStr = languageRegionStr + '&lt;option value="de_DE"';
			if( currentLanguage == 'de_DE' ) languageRegionStr = languageRegionStr + ' selected';
			languageRegionStr = languageRegionStr + '&gt;Deutsch&lt;/option&gt;';
			
			languageRegionStr = languageRegionStr + '&lt;option value="es_ES"';
			if( currentLanguage == 'es_ES' ) languageRegionStr = languageRegionStr + ' selected';
			languageRegionStr = languageRegionStr + '&gt;Espaol&lt;/option&gt;';
			
			languageRegionStr = languageRegionStr + '&lt;option value="nl_NL"';
			if( currentLanguage == 'nl_NL' ) languageRegionStr = languageRegionStr + ' selected';
			languageRegionStr = languageRegionStr + '&gt;Nederlands&lt;/option&gt;';
			
			languageRegionStr = languageRegionStr + '&lt;/select&gt;&lt;/div&gt;';
			
			languageRegion.update( languageRegionStr );
			
			$('shippingOptionsTopRegion').insert( languageRegion );
		}
	},
	
	// Set language and translate on language dropdown toggle
	setLanguageOnSelectAndTranslate: function( languageVal ) {
		var languageValue = languageVal.options[languageVal.selectedIndex].value;
		
		// If not a change in language OR not a supported language, do nothing
		if( languageValue != globalInterceptTranslator.model.currentLanguage &amp;&amp; ( languageValue == 'de_DE' || languageValue == 'es_ES' || languageValue == 'nl_NL' || languageValue == 'en_GB' ) ) {
			globalInterceptTranslator.setLangauge( languageValue );
			
			globalInterceptTranslator.translateGatewayInitialElts();
			
			if( shippingOptionsService.model.shippingOptionsInfo &amp;&amp; shippingOptionsService.model.shippingOptionsInfo.requestedShippingCountryCode ) { 
				globalInterceptTranslator.translateGatewayBrandLinkElts();
			}
			
			// Pass locale variable if not English
			var gatewayLinkURL = shippingOptionsService.model.brandURL;
			if( gatewayLinkURL.indexOf('preferredLocale') == -1 ) {
				gatewayLinkURL = gatewayLinkURL + '&amp;preferredLocale=' + globalInterceptTranslator.model.currentLanguage;
			}
			else {
				gatewayLinkURL = gatewayLinkURL.substr( 0, gatewayLinkURL.indexOf('preferredLocale=') + 16 ) + globalInterceptTranslator.model.currentLanguage;
			}
			
			var countrySelected = shippingOptionsService.model.shippingOptionsInfo.requestedShippingCountryCode;
			gatewayLinkURL = gatewayLinkURL + '&amp;gatewayCountry=' + countrySelected;

			shippingOptionsService.model.brandURL = gatewayLinkURL;
		}
	},
	
	// Language setter function, language value passed in and this sets the current language and translated copy array variables
	setLangauge: function( languageValue ) {
		if( languageValue == 'de_DE' || languageValue == 'es_ES' || languageValue == 'nl_NL' || languageValue == 'en_GB' ) {
			globalInterceptTranslator.model.currentLanguage = languageValue;
			if( languageValue == 'de_DE' ) { globalInterceptTranslator.model.currentTranslatedCopy = globalInterceptTranslator.model.translatedCopyByElt.de_DE; }
			else if( languageValue == 'nl_NL' ) { globalInterceptTranslator.model.currentTranslatedCopy = globalInterceptTranslator.model.translatedCopyByElt.nl_NL; }
			else if( languageValue == 'es_ES' ) { globalInterceptTranslator.model.currentTranslatedCopy = globalInterceptTranslator.model.translatedCopyByElt.es_ES; }
			else { globalInterceptTranslator.model.currentTranslatedCopy = globalInterceptTranslator.model.translatedCopyByElt.en_GB; }
		}
		else {
			globalInterceptTranslator.model.currentLanguage = 'en_GB';
			globalInterceptTranslator.model.currentTranslatedCopy = globalInterceptTranslator.model.translatedCopyByElt.en_GB;
		}
	},
	
	// Called upon auto-launch of Gateway, sets language based on country of origin, translates popup
	setLangueageAndTranslateLaunch: function() {
		if( window["globalIntercept"] ) {
			// Find current country code, either selected OR as intercepted by globalIntercept
			var currentCountry = globalIntercept.model.countryCode;
			if( currentCountry == 'DE' || currentCountry == 'AT' || currentCountry == 'LU' ) { globalInterceptTranslator.setLangauge('de_DE'); }
			else if( currentCountry == 'NL' || currentCountry == 'BE' ) { globalInterceptTranslator.setLangauge('nl_NL'); }
			else if( currentCountry == 'ES' ) { globalInterceptTranslator.setLangauge('es_ES'); }
			else { globalInterceptTranslator.setLangauge('en_GB'); }
		}
	}
}

// Translate elements created subsequent to a country selection
if( globalIntercept &amp;&amp; globalIntercept.model &amp;&amp; globalIntercept.model.showTranslatedExperienceToEU &amp;&amp; shippingOptionsService.view.displayingBusinessUnits ) {
	shippingOptionsService.view.displayingBusinessUnits = shippingOptionsService.view.displayingBusinessUnits.wrap( function( om, container, brnadsInOrder, innerContainer, businessUnitUrls, brandsDotCom, brandDivs ) {
		om( container, brnadsInOrder, innerContainer, businessUnitUrls, brandsDotCom, brandDivs );
		globalInterceptTranslator.translateGatewayBrandLinkElts();
	});
}

// Add language dropdown when Europe region selected, remove/translate to English when non-Europe region selected
if( globalIntercept &amp;&amp; globalIntercept.model &amp;&amp; globalIntercept.model.showTranslatedExperienceToEU &amp;&amp; shippingOptionsService.view.showCountriesForRegionAndEnableSelection ) {
	shippingOptionsService.view.showCountriesForRegionAndEnableSelection = shippingOptionsService.view.showCountriesForRegionAndEnableSelection.wrap( function( om, region ) {
		om( region );
		
		var translatedCountriesArr = [''];
		if( globalIntercept.model.autoPoppedFlag &amp;&amp; region != 'Europe' &amp;&amp; globalInterceptTranslator.model.currentLanguage != 'en_GB' ) {
			
		}
		else {
			if( region == 'Europe' ) {
				globalInterceptTranslator.insertLanguageDropdown();
				globalInterceptTranslator.translateGatewayInitialElts();
				globalInterceptTranslator.translateGatewayBrandLinkElts();
			}
			else {
				// Remove language dropdown
				if( $('languageRegion') ) $('languageRegion').remove();
					
				// Set translator to English
				globalInterceptTranslator.setLangauge('en_GB');
				globalInterceptTranslator.translateGatewayInitialElts();
				globalInterceptTranslator.translateGatewayBrandLinkElts();
			}
		}
			// If auto-launched and not wrong site user, first-time visitor is assumed, set language by country code
			if( globalIntercept.model.autoPoppedFlag &amp;&amp; gidLib.getCookieVar('mktInterceptPersist','globalInterceptEUUKSiteCheck') == '' ) {
				var currentCountry = globalIntercept.model.countryCode;
				if( currentCountry == 'DE' || currentCountry == 'AT' || currentCountry == 'LU' ) { globalInterceptTranslator.setLangauge('de_DE'); }
				else if( currentCountry == 'NL' || currentCountry == 'BE' ) { globalInterceptTranslator.setLangauge('nl_NL'); }
				else if( currentCountry == 'ES' ) { globalInterceptTranslator.setLangauge('es_ES'); }
				else { globalInterceptTranslator.setLangauge('en_GB'); }
			}
			// Else check preferredLocale
			/*else if( preferredLocale != '' &amp;&amp; ( preferredLocale == 'de_DE' || preferredLocale == 'nl_NL' || preferredLocale == 'es_ES' ) ) {
				globalInterceptTranslator.setLangauge( preferredLocale );
			}*/
			// Else set to English
			else {
				globalInterceptTranslator.setLangauge('en_GB');
			}
	});
}

// Override showShippingOptionsOverlay function to call translate-at-launch function and add checkbox
if( globalIntercept &amp;&amp; globalIntercept.model &amp;&amp; globalIntercept.model.showTranslatedExperienceToEU &amp;&amp; siteNavigation.showShippingOptionsOverlay ) {
	siteNavigation.showShippingOptionsOverlay = function( shouldSelectCurrentSettings, interceptCountryCode, interceptTID, heavyOrNo, autoPopped ) {
		shippingOptionsService.model.shouldSelectCurrentSettings = shouldSelectCurrentSettings;
		function getLeftMargin() {
			return ((document.body.clientWidth ? document.body.clientWidth : window.innerWidth) / 2) - (width / 2);
		}
		var url = "";
		if (typeof interceptCountryCode == 'undefined' &amp;&amp; typeof interceptTID == 'undefined')
			url = '/profile/shippingOptions.do';
		else
			url = '/profile/shippingOptions.do'+'?interceptCountyCode='+interceptCountryCode+'&amp;interceptTID='+interceptTID;
		var width = 665;
		var top = 55;
	    var height = 459;

		new Ajax.Request(url, {
			onComplete: function(response) {
				var currentPopUp = $('shippingOptionsPopUp');
				if (currentPopUp) currentPopUp.remove();

				// we were facing some serious ie 6 css loading issues. this is the only place
				// to load the css in a way that works every time without adding the css
				// itself to all pages
				$$('head')[0].appendChild(new Element('link', {
					type : 'text/css',
					rel  : 'stylesheet',
					href : '/gid/css/profile/shippingOptions/en/shippingOptions.css',
					media: 'screen'
				}));
				
				var responseString = response.responseText;
				responseString = responseString.replace('Borderfree','Borderfree');

				var style = 'top:' + top + 'px;left:' + getLeftMargin() + 'px;width:' + width + 'px;height: ' + height + 'px';
				var div = new Element('div', {'id': 'shippingOptionsPopUp', 'style': style})
							.update( responseString );

				document.body.appendChild(div);

				window.onresize = function () {
					div.style.left = getLeftMargin() + 'px';
				};
				
				if( autoPopped == true ) {
					globalIntercept.model.autoPoppedFlag = true;
				}
				
				// WCD translation call
				globalInterceptTranslator.setLangueageAndTranslateLaunch();

			}
		});

		// WCD add checkbox code
		/*var interceptChecker = null;
		if( ! $('shippingOptionsCancelButtons') ) {
			interceptChecker = setTimeout( 'globalIntercept.controller.addSavePrefsCheck()', 2000 );
		}
		else {
			globalIntercept.controller.addSavePrefsCheck();
			clearInterval( interceptChecker );
		}*/

		return false;
	};
}

// Add visual cue to use flag to re-engage gateway
if( shippingOptionsService.controller &amp;&amp; shippingOptionsService.controller.closePressed ) {
	shippingOptionsService.controller.closePressed = shippingOptionsService.controller.closePressed.wrap( function( om ) {

		var closingDivInitialWidth = $('shippingOptionsPopUp').getStyle('width');
		var closingDivInitialHeight = $('shippingOptionsPopUp').getStyle('height');
		var closingDivInitialTop = $('shippingOptionsPopUp').getStyle('top');
		var closingDivInitialLeft = $('shippingOptionsPopUp').getStyle('left');
		var closingDiv = new Element('div', { id:'gatewayClosingDiv', style:'position:absolute; float:left; width:' + closingDivInitialWidth + '; height:' + closingDivInitialHeight + '; top:' + closingDivInitialTop + '; left:' + closingDivInitialLeft + '; border:2px #b4b0af solid; z-index:97' });
		document.body.insert( closingDiv );

		om();
		globalIntercept.model.autoPoppedFlag = false;
		
		var closingDivFinalWidth = $('shippingToCountryFlag').getStyle('width');
		var closingDivFinalHeight = $('shippingToCountryFlag').getStyle('height');
		var closingDivFinalPos = $('shippingToCountryFlag').cumulativeOffset();
		var closingDivFinalTop = closingDivFinalPos[1];
		var closingDivFinalLeft = closingDivFinalPos[0];
		
		new Effect.Morph('gatewayClosingDiv', { style: 'width:' + closingDivFinalWidth + '; height:' + closingDivFinalHeight + '; top:' + closingDivFinalTop + 'px; left:' + closingDivFinalLeft + 'px; border:1px #b4b0af solid',  duration: 1.0,
			afterFinish: function() {
				$('gatewayClosingDiv').remove();
			}
		});
		
	});
}

	}
}
  </script>
  <!-- END Content Item File: /content/0009/922/185/cn9922185.html -->
  <!-- END - WCD Sitewide Container 6 -->
  <!-- BEGIN - WCD Sitewide Container 7 -->
  <!-- BEGIN Content Item File: /content/0009/917/927/cn9917927.html -->
  <style type="text/css">
   /* Segment A */
.checkoutBtnTest_A {
  background-color: #f34d00;
}
.checkoutBtnTest_A:hover, .checkoutBtnTest_A:active {
  background-color: #e3242e;
}
.checkoutBtnTest_A.disabled {
  background-color: #929292;
}

/* Segment B */
.checkoutBtnTest_B {
  background-color: #0073C8;
}
.checkoutBtnTest_B:hover, .checkoutBtnTest_B:active {
  background-color: #138BE3;
}
.checkoutBtnTest_B.disabled {
  background-color: #929292;
}

/* Segment C */
.checkoutBtnTest_C {
  background-color: #07C257;
}
.checkoutBtnTest_C:hover, .checkoutBtnTest_C:active {
  background-color: #6EDA63;
}
.checkoutBtnTest_C.disabled {
  background-color: #929292;
}
  </style>
  <!-- ===== 7/7/15 Checkout Button A/B Test ===== -->
  <script type="text/javascript">
   var divPref;

personalizationService.api.onPersonalization(function(event) {

  var idOfAbTestWeCareAbout = "16";
  var abTest = event[idOfAbTestWeCareAbout];

  if (abTest) {
    var override = {};

    var segment = abTest.Segment;

    //console.log("You are on Segment " + segment);

    abSegment = abTest;

    // override omniture tracking?
    var shouldBroadcastDifferentAbTestUsageToOmniture = false;
    var shouldBroadcastDifferentPersonalizationUsageToOmniture = false;


    jQuery(document).ready(function() {

      if (segment == "A") {
        jQuery(".shoppingBagCheckout button").removeClass("checkoutBtnTest_B");
        jQuery(".shoppingBagCheckout button").removeClass("checkoutBtnTest_C");
      }

      if (segment == "B") {
        jQuery(".shoppingBagCheckout button").removeClass("checkoutBtnTest_C");
        jQuery(".shoppingBagCheckout button").addClass("checkoutBtnTest_B");
      }

      if (segment == "C") {
        jQuery(".shoppingBagCheckout button").removeClass("checkoutBtnTest_B");
        jQuery(".shoppingBagCheckout button").addClass("checkoutBtnTest_C");
      }

      if (jQuery(".shoppingBagCheckout button").hasClass("disabled")) {
        jQuery(".shoppingBagCheckout button").css("background-color", "#929292");
      }

    });

    personalizationService.api.personalizationDone([abTest, override]);

  }
});
  </script>
  <!-- END Content Item File: /content/0009/917/927/cn9917927.html -->
  <!-- END - WCD Sitewide Container 7 -->
  <!-- BEGIN - WCD Sitewide Container 8 -->
  <!-- BEGIN Content Item File: /content/0006/526/066/cn6526066.html -->
  <!-- BEGIN: contentOverride116 -- GOL Department Facet Suppression-->
  <script type="text/javascript">
   /*

We will be preselecting the baby department facet, and hiding the department facet for the below categories: 
 
Toddler Girl Sleepwear = 76918, baby girl facet pre-selected
Toddler Boy Sleepwear = 76759, baby boy facet pre-selected
Infant Girl Sleep = 76748, baby girl facet pre-selected
Infant Boy Sleep = 76754, baby boy facet pre-selected


*/

if (location.pathname == "/browse/category.do" || location.pathname == "/browse/categorySearch.do") {
	if (navigationService &amp;&amp; navigationService.model.isActive) {

		var defaultDeptFacetnator = {

			displayDeptFacet : false,
			deptFacetId : null,
			
			// Women categories, hidden dept facet
			womenCategoriesHideFacet : $A([
				null,
			'']),
			// Men categories, hidden dept facet
			menCategoriesHideFacet : $A([
				null,
			'']),
			
			// Girls categories, hidden dept facet
			girlsCategoriesHideFacet : $A([
				null,
			'']),
			
			// Boys categories, hidden dept facet
			boysCategoriesHideFacet : $A([
				null,
			'']),

			// Toddler/Infant Girl categories, hidden dept facet
			tgirlCategoriesHideFacet : $A([
				'76918', // Toddler Sleepwear
				'76748', // Infant Sleepwear
				'81111',
				'70949',
				'63863',
				'83393',
				'17846',
				'70108',
				'84668',
				'84479',
				'82562',
				'82560',
				'80374',
				'80378',
				'80384',
				'14249',
				'8772',
				'7190',
				'73590',
				'7189',
				'7191',
				'7206',
				'80900',
				'76748',
				'84335',
				'86607',
				'81587',
				'50711',
				'70949',
				'63863',
				'83393',
				'17846',
				'76918',
				'55768',
				'65263',
				'65208',
				'81577',
				'35361',
				'6465',
				'84667',
				'84665',
				'84666',
				'87444',
				'8781',
				'7190',
				'83390',
				'88867',
				'89316',
				'89326',
				'84674',
				'88938',
				'6392',
				'76759',
				'17850',
				'85718',
				'77431',
				'6428',
				'91808',
				'71986',
				'14249',
				'7189',
				'6445',
				'35855',
				'6437',
				'7190',
				'7191',
				'6428',
				'95546',
				'35362',
				'7206',
				'76748',
				'94049',
				'96776',
				'96772',
				'35854',
				'97212',
				'97210',
				'71986',
				'98440',
				'94859',
				'98248',
				'98098',
				'99342',
				'99664',
				'99654',
				'1000239',
				'98120',
				'97707',
				'1002327',
				'1002328',
				'1002329',
				'1002333',
				'1001383',
				'1001458',
				'1001377',
				'1001379',
				'1002448',
				'1003222',
				'1004642',
				'1004813',
				'1005611',
				'1005931',
				'1005882',
				'1007167',
				'1007021',
				'1007813',
				'1008305',
				'1008292',
				'1008476',
				'1008895',
				'1009361',
				'6427',
				'95548',
				'35855',
				'1009219',
				'1009613',
				'1009995',
				'12378',
				'1010286',
				'1010288',
				'1010289',
				'8770',
				'1010401',
				'1009995',
				'1011550',
				'1012349',
				'1011291',
				'1012528',
				'1013119',
				'6437',
				'1013351',
				'1012927',
				'1013655',
				'1013706',
				'1014074',
				'1014075',
				'1013451',
				'1014067',
				'1014078',
				'1008573',
				'1015833',
				'1016096',
				'1016098',
				'1016106',
				'1016107',
				'1016108',
				'1016109',
				'1016110',
				'1016111',
				'1016169',
				'1016138',
				'1005882',
				'1012762',
				'1016235',
				'6444',
				'1016086',
				'1016789',
				'1016792',
				'1014604',
				'1017039',
				'1017041',
				'1017043',
				'1017044',
				'1017045',
				'1017311',
				'1017312',
				'1012349',
				'1012352',
				'1017633',
				'1018764',
				'1018766',
				'1019023',
				'1019061',
				'1019412',
				'6526066',
				'1019954',
				'1019983',
				'1020002',
				'1020007',
				'1020008',
				'1020287',
				'1020347',
				'1020356',
				'1020361',
				'1020567',
				'1020568',
				'1020190',
				'1020990',
				'1021001',
				'1021002',
				'1021051',
				'1021053',
				'1021367',
				'1021369',
				'1021370',
				'1021373',
				'1021375',
				'1021476',
				'1021477', 
				'1021492',
				'1021493',
				'1021323',
				'1022245',
				'1022246',
				'1022247',
				'1022248',
				'1022249',
				'1025035',
				'1025036',
				'1025037',
				'1025038',
				'1025039',
				'1025247',
				'1025248',
				'1025249',
				'1025250',
				'1025251',
				'1025252',
				'1025253',
				'1025254',
				'1025265',
				'1025632',
				'1025633',
				'1026347',
				'1026348',
				'1026349',
				'1026350',
				'1026351',
				'1026352',
				'1027169',
				'1027170',
				'1027171',
				'1027172',
				'1027173',
				'1027174',
				'1027175',
				'1027176',
				'1027216',
				'1027217',
				'1027218',
				'1028580',
				'1028581',
				'1028582',
				'1028583',
				'1028584',
				'1029107',
				'1029826',
				'1029827',
				'1029828',
				'1029829',
				'1029830',
				'1029831',
				'1029832',
				'1031545',
				'1031658',
				'1031659',
				'1031660',
				'1031661',
				'1031662',
				'1032065',
				'1030087',
				'1032232',
				'1032668',
				'1032669',
				'1032670',
				'1032671',
				'1032672',
				'1032673',
				'1032795',
				'1033864',
				'1033898',
				'1033899',
				'1033900',
				'1033901',
				'1033902',
				'1034157',
				'1034574',
				'1034575',
				'1034576',
				'1034577',
				'1025264',
				'1035354',
				'1035356',
				'1035357',
				'1035358',
				'1035359',
				'1035360',

			'']),
			// Toddler/Infant Boy categories, hidden dept facet
			tboyCategoriesHideFacet : $A([
				'76759', // Toddler Sleapwear
				'76754', // Infant Sleepwear
				'65281',
				'65283',
				'85104',
				'81112',
				'85064',
				'70127',
				'63897',
				'77431',
				'17850',
				'70173',
				'84824',
				'84491',
				'82572',
				'82569',
				'80386',
				'80390',
				'80396',
				'42558',
				'8788',
				'7142',
				'74004',
				'7139',
				'78580',
				'7143',
				'7185',
				'80899',
				'76754',
				'84336',
				'86610',
				'81589',
				'55773',
				'65261',
				'70127',
				'63897',
				'77431',
				'17850',
				'76759',
				'50728',
				'65236',
				'84823',
				'8777',
				'83376',
				'85214',
				'85213',
				'35792',
				'6395',
				'6392',
				'88871',
				'89335',
				'89348',
				'84830',
				'89903',
				'88920',
				'89697',
				'36691',
				'17851',
				'91809',
				'71988',
				'95575',
				'95598',
				'95496',
				'95679',
				'95682',
				'95684',
				'95689',
				'95692',
				'95693',
				'95697',				
				'93306',
				'93305',
				'93304',
				'95184',
				'91491',
				'95445',
				'91808',
				'82562',
				'84674',
				'89902',
				'95423',
				'96777',
				'96773',			
				'96457',
				'93308',
				'6365',
				'97213',
				'97211',
				'93309',
				'97795',
				'97792',
				'97798',
				'97801',
				'97804',
				'91809',
				'71988',
				'98441',
				'94883',
				'98250',
				'98095',
				'78037',
				'99339',
				'99648',
				'99656',
				'99670',
				'98567',
				'98570',
				'98573',
				'99838',
				'97714',
				'1000238',
				'1000638',
				'1000641',
				'1000645',
				'1000649',
				'1000653',
				'1000656',
				'1000658',
				'1000661',
				'98121',
				'1001212',
				'1001576',
				'1001579',
				'1002230',
				'1002430',
				'1002256',
				'1002440',
				'1002445',
				'1002337',
				'1002338',
				'1002339',
				'1002345',
				'1001384',
				'1001460',
				'1001385',
				'1001459',
				'1002449',
				'1003472',
				'1003341',
				'1003223',
				'1004898',
				'1004822',
				'1005561',
				'1005649',
				'1005946',
				'1005933',
				'1005763',
				'1005903',
				'1005883',
				'1005903',
				'1007093',
				'1007162',
				'1007164',
				'1007026',
				'1007812',
				'1007814',
				'1007812',
				'1007814',
				'1008323',
				'1008262',
				'1007815',
				'1008477',
				'1008893',
				'1008894',
				'1009184',
				'1009496',
				'1009362',
				'1009218',
				'95690',
				'1009612',
				'1009614',
				'1009993',
				'1009994',
				'1009996',
				'1010126',
				'1010127',
				'1010128',
				'6359',
				'1010287',
				'1010290',
				'1010419',
				'8787',
				'9175',
				'1011148',
				'1011147',
				'1011273',
				'1011151',
				'1011194',
				'1002438',
				'1002260',
				'35855',
				'1009219',
				'1011504',
				'1012102',
				'1012105',
				'1012439',
				'1011292',
				'1012992',
				'1013109',
				'1013110',
				'1012527',
				'1011292',
				'1013121',
				'1013120',
				'1013353',
				'1012931',
				'1013654',
				'1013707',
				'1013793',
				'1013794',
				'1014056',
				'1014076',
				'1014077',
				'1013452',
				'1014069',
				'1014096',
				'1014097',
				'1014098',
				'1014037',
				'1014027',
				'1014026',
				'1014040',
				'1014068',
				'1014086',
				'1014251',
				'1014066',
				'1014079',
				'1014080',
				'1014094',
				'1014081',
				'1014274',
				'1012352',
				'1015466',
				'1015386',
				'1015834',
				'49693',
				'1016026',
				'1016237',
				'12384',
				'1016006',
				'1016312',
				'1015386',
				'1016085',
				'1016315',
				'1016088',
				'1016446',
				'1016566',
				'1016313',
				'1016335',
				'1017007',
				'1017025',
				'1017038',
				'1017488',
				'1017907',
				'1018540',
				'1018628',
				'1018547',
				'1018629',
				'1014073',
				'1018879',
				'1019066',
				'1019413',
				'1019419',
				'1019655',
				'1019709',
				'1019866',
				'1019995',
				'1020003',
				'1020006',
				'1019721',
				'1020316',
				'1020352',
				'1020366',
				'1020901',
				'1020902',
				'1020904',
				'1021623',
				'1021624',
				'1021722',
				'1022116',
               '1022117',                                                                    
				'1022119',
				'1022120',
				'1022274',
				'1020982',
				'1022686',
				'1022687', 
				'1023127',
				'1023130',
				'1023131',
				'1023132',
				'1023133', 
				'1024741',
				'1024744',
				'1024745',
				'1024746',
				'1024747', 
				'1020366',
				'1025302',
				'1025303',
				'1025304',
				'1025305',
				'1025306',
				'1025307',
				'1025308',
				'1025309',
				'1025312',
				'1026009',
				'1026007',
				'1026006',
				'1026747', 
				'1027200',
				'1027205',
				'1027204',
				'1027201',
				'1027203',
				'1027202',
				'1027206',
				'1027219',
				'1027220',
				'1027221',
				'1027015',
				'1027017',
				'1027018',
				'1027019',
				'1027020',
				'1027022',
				'1027023',
				'1027024',
				'1027584',
				'1027586',
				'1027587',
        		'1027710',
				'1027711',
				'1027025',
				'1028535',
				'1028585',
				'1028586',
				'1028587',
				'1028588',
				'1028589',  
				'1028936',
				'1028938', 
				'1029391', 
				'1029411',
				'1030084',
				'1030085',
				'1030086',
				'1030087',
				'1030088', 
				'1031178',
				'1031179', 
				'1031476',
				'1031479',
				'1031480',
				'1031481',
				'1031482',
				'1031740',
				'1031741',
				'1031742',
				'1031743',  
				'1032228',
				'1032354', 
				'1032355', 
				'1032356', 
				'1032357',
				'1034167',
				'1034168',
				'1034169',
				'1034263',
				'1034264',
				'1002140',
				'1035680',
				'1035993',
				'1035994',
				'1035995',
				'1035996',                                                                                                                                                                                                                                              
			'']),


				processCategoryLists : function() {
				var findIterator = function(i){
					return (i == gidLib.getQuerystringParam('cid') ? true : false);
				};
				
				var deptChannelName = reportingService.controller.viewManagers.commonViewManager.model.commonChannelName;
				
				//Begin for only Gap Girls &amp; Boys
				var subdeptChannelNameString = reportingService.controller.viewManagers.commonViewManager.model.commonCurrentPageName;
				var deptChannel_Girls = subdeptChannelNameString.indexOf("Girls") &gt; -1;
				var deptChannel_Boys = subdeptChannelNameString.indexOf("Boys") &gt; -1;
				//End for only Gap Girls &amp; Boys

				if(window.location.search.indexOf('cid=1029308') != 1){
					if (this.womenCategoriesHideFacet.find(findIterator) || deptChannelName == 'Women') {
						this.deptFacetId = "136";
					}
				}
				if(window.location.search.indexOf('cid=1029311') != 1){
					if (this.menCategoriesHideFacet.find(findIterator) || deptChannelName == 'Men') {
						this.deptFacetId = "75";
					}
				}

				if (this.girlsCategoriesHideFacet.find(findIterator) || deptChannel_Girls == true) {
					this.deptFacetId = "48";
				}


				if (this.boysCategoriesHideFacet.find(findIterator) || deptChannel_Boys == true) {
					this.deptFacetId = "16";
				}
				
				
				if (this.tgirlCategoriesHideFacet.find(findIterator)) {
					this.deptFacetId = "165";
				}


				if (this.tboyCategoriesHideFacet.find(findIterator)) {
					this.deptFacetId = "166";
				}


			},
			
			modifyDomElements : function() {
				// if the department facet does not exist in the UI, do nothing
				if ($('facet_department')) {
					if (this.displayDeptFacet == false) $('facet_department').hide();
				
					// override reset all button
					var defaultedDeptFacetElement = null;
					var categoryFacetedSearchManager = navigationService.controller.managers.categoryFacetedSearchManager;
					if ($('facet_option_'+this.deptFacetId)) defaultedDeptFacetElement = $('facet_option_'+this.deptFacetId).childElements()[0];
					if (defaultedDeptFacetElement) {
						$('facet_reset_all').onclick  = function(event) {
							categoryFacetedSearchManager.util.resetAllSelectedOptions(event);
							categoryFacetedSearchManager.controller.facetManagers.categoryDepartmentFacetManager.view.facetOptionClicked(defaultedDeptFacetElement,window);
							categoryFacetedSearchManager.controller.filterByFacets();return false;
						};
					}
				}
			},
			
			init: function() {

				this.processCategoryLists();

				// Only proceed if a dept facet preselection has been found in the lists
				if (this.deptFacetId) {
					// Pre Select the appropriate Department Facet
					if (location.hash.length == 0) {
						jQuery('html').hide();
						location.replace(location.toString() + "#department=" + this.deptFacetId);
					}
					
					// Perform a redirect with the departmentRedirect parameter if not already redirected
					if (!/departmentRedirect/.test(location)) {
						var currentCID = /cid=\d+/.exec(location);
						jQuery('html').hide();
						location.replace(location.toString().replace(/cid=\d+/,currentCID + "&amp;departmentRedirect=true"));
					}
					
					// Bind dom modification method to the category product grid event
					Event.observe(document,'categoryProductGrid:ready',defaultDeptFacetnator.modifyDomElements.bind(defaultDeptFacetnator));
				}
			}
		};

		defaultDeptFacetnator.init();
	}
}
  </script>
  <!-- END: contentOverride116 -- GOL Department Facet Suppression -->
  <!-- END Content Item File: /content/0006/526/066/cn6526066.html -->
  <!-- END - WCD Sitewide Container 8 -->
  <!-- BEGIN - WCD Sitewide Container 9 -->
  <!-- BEGIN Content Item File: /content/0009/711/310/cn9711310.html -->
  <script type="text/javascript">
   /**
* Find In Store &amp; Reserve In Store Code
* GOL - Full Fleet with Virgin Hotel Code
* 100% on 6/29/2015
* Fix Quicklook bug
*/

var bgRiSTitle = '';
var RISanchor = '';
var risStringArr = '';
var seeMiles = '';
var checkVirginHotel = (gidLib.getQuerystringParam("virginhotel") == "true") || (gidLib.getCookieVar("globalSession","virginCookie") == "true");
sawRIS = false

//Begin Virgin Popup Hacks - Product page only
if(checkVirginHotel){

	gidLib.setCookieVar('globalSession', 'virginCookie', 'true');
	gidLib.setCookieVar('globalSession', 'searchRadius', '1');
	gidLib.setCookieVar('globalSession', 'pcode', '60601');

	var bgRiSTitle = "gapvh_product.jpg"
	var risProductBGColor = "#cd0303"

	if (location.href.indexOf("product.do") &gt; 0){

		//Change elements on Product Page
		Event.observe(document, "productPage:ready", function() {
			//jQuery("#getImageRIS").attr('src','/Asset_Archive/GPWeb/content/0009/711/310/assets/virgin.png');
		
			//Change elements in RiS Popup
			//RiS Popup - Page 1
			merchLocationsManager.view.storeLocationsListOverlay.open = merchLocationsManager.view.storeLocationsListOverlay.open.wrap(function(om,parentContainer, triggeredBy, productImgUrl){
				 om(parentContainer, triggeredBy, productImgUrl);			
				 jQuery("#locationEdit").text("");
			});
			//RiS Popup - Page 2
			reserveInStoreManager.view.open = reserveInStoreManager.view.open.wrap(function(om,parentContainer, triggeredBy, productImgUrl){
				 om(parentContainer, triggeredBy, productImgUrl);
				 var risStoreIDLookup = jQuery("#risStoreInfoName a").attr('href');

				 var risStoreID = risStoreIDLookup.substr( risStoreIDLookup.indexOf('storeid=')+8);
				 //Add your store ids here
				 var risStoreIDArray = ["1454","569"]		 
				 if ( jQuery.inArray( risStoreID, risStoreIDArray ) &gt; -1 ) {
				 	 jQuery("#risHeader").html("&lt;img src='/Asset_Archive/GPWeb/content/0009/711/310/assets/gapvh_logo.jpg'&gt;");
					 jQuery("#risInfo").html("Virgin Hotel Concierge will deliver your items to your room, usually in three hours or less.");
					 jQuery("#risEmail").val("chicagoconcierge@virginhotels.com");
					 jQuery('#risEmail').attr('disabled', 'disabled');
					 jQuery('#risEmail').css('background-color', '#F5F5F5');
					 jQuery("[for=risEmail]").css("color","#b9b9b9");
					 //jQuery("#risMobileNumber").prop('disabled', false);
					 //jQuery("#risSendText").prop('checked', true);
					 //jQuery("#risMobileNumberField").removeClass("noSMS");
					 //jQuery("#risTextOption").hide();
					 jQuery("#risMobileNumberField").hide();
					 jQuery("#risOptInOption").hide();
					 //jQuery("#risLegalMessage").hide();
					 jQuery("#risDataRatesMessage").hide();
					 jQuery("#risBottom").html(" The charge will appear on customer\'s Virgin Hotels invoice upon checkout.  Virgin Hotels is not responsible for returns.  Customer is solely responsible for all returns using the gift receipt provided.  Customer will receive a merchandise certificate via mail for the amount paid when items are returned and not cash or credit. Customers purchasing through Virgin Hotels are not eligible to earn Gap Rewards or GapCash.");


				 }		 
			});
			//RiS Popup - Page 3 Thank You Page
			reserveInStoreManager.view.showThankYouMessage = reserveInStoreManager.view.showThankYouMessage.wrap(function(om,parentContainer, triggeredBy, productImgUrl){
				 om(parentContainer, triggeredBy, productImgUrl);
				 jQuery('#risThanksOpener').hide();			
				 jQuery('#risInfoBody1').html("Once we locate it, we\'ll email your Virgin Hotel Concierge. They\'ll contact you to confirm your order, and deliver it directly to your room.*&lt;br/&gt;&lt;br/&gt; &lt;span style=\'font-size:8px\'&gt;*Virgin Hotels is not responsible for returns/exchanges.  Customer is solely responsible for all returns/exchanges and will receive merchandising credit when items are returned.&lt;/span&gt;");
				 jQuery('#risInfoBody2').hide();
				 jQuery('#risInfoBody3').hide();
			});
				
		});
	}
}else{
	var bgRiSTitle = "RIS_gol_title_sm_1119.png"
	var risProductBGColor = "#d6efff"
}


// Begin GOL RisDiscoverability - Reserve In Store Cosmetic Code
var RisDiscoverability = function () {
	if(sawRIS == false){
		sawRIS = true
		// let's set the default properties for GOL - *Change image paths for hover states below*
		var props = { 
			"fillColor" 			: risProductBGColor,
			"linkColor" 			: "#336699",
			"width" 			: "330px",
			"height" 			: "64px",
			"baseURL" 			: "/Asset_Archive/GPWeb/content/0009/711/310/assets/",
			"getItFile" 			: bgRiSTitle,
			"RISBtnFile" 			: "btn_gol_find_down2.png",
			"RISBtnFileHover" 		: "btn_gol_find_on.png",
			"addToBagBtnFileOff" 		: "btn_add_gol_off.png",
			"addToBagBtnFileOn"		: "btn_add_gol_on.png"
		};
		
		
		// let's start modifying the DOM
		if ($("findInStoreButtonBox")) {
			$("findInStoreButtonBox").style.background = props.fillColor;
			$("findInStoreButtonBox").style.border = "0px";
			$("findInStoreButtonBox").style.height = "64px";
			var startString = jQuery("#findInStorePostalMsg").html();
			var risStringArr2 = new Array();
			if($("findInStorePostalMsg").select("a.postalEdit")[0]){
				RISanchor = $("findInStorePostalMsg").select("a.postalEdit")[0];
				seeMiles = jQuery("a.postalEdit");
				risStringArr = startString.split("&lt;a");
				risStringArr2 = risStringArr[0].split("within");
				risStringArr2[0] = "within "; 			
				// replace the innerHTML of the anchor with the 2nd string
				seeMiles.html(risStringArr2[1]);
				//fix edit bug
				jQuery("#locationEdit a").text("Edit");
			} else {
				risStringArr2[0] = startString;
			}
			$("findInStorePostalMsg").select("a.postalEdit").each(function(RISanchor){ RISanchor.setAttribute('onclick','merchLocationsManager.view.postalCodeOverlay.open();');});
			var getImage = new Element("img", {"id" : "getImageRIS", "src" : props.baseURL + props.getItFile});
			var getImageDiv = new Element("div", {"id" : "getImageDivForRIS", "style" : "padding: 0px; height: 46px; width: 166px;position:relative;top: 5px;left: 5px;"});
			var textDiv = new Element("div", {"id" : "textForRIS", "style" : "height: 0px; width: 195px;position:relative;top: -17px;left: 194px;"});
			getImageDiv.update(getImage);




			$("findInStorePostalMsg").update(getImageDiv);
			textDiv.insert(risStringArr2[0]);
			textDiv.insert(RISanchor);

			$("findInStorePostalMsg").insert(textDiv);
			$("findInStoreButton").style.backgroundImage = "url(" + props.baseURL + props.RISBtnFile+ ")";
			$("findInStoreButton").style.width = "106px";
			$("findInStoreButton").style.height = "26px";
			$("findInStoreButton").style.position = "relative";
			$("findInStoreButton").style.top = "7px";
			$("findInStoreButton").style.left = "39px";
			$("findInStoreButton").style.margin = "0px";
			
			//Add To Bag Button *change image paths*
			var bagButton = $("addToBagBtn");
			bagButton.style.height = "26px";
			bagButton.style.width = "90px";
			bagButton.style.margin = "10px 5px 5px 9px";
			bagButton.style.background = "url('/Asset_Archive/GPWeb/content/0009/711/310/assets/btn_add_gol_on.png')";
			$("selectionContent").style.width = "135px";

			//Check to  see if you have Virgin Hotel Cookie to hide Miles
			if(gidLib.getCookieVar("globalSession","virginCookie") == "true"){
				jQuery("#textForRIS").hide();
				jQuery("#findInStoreButton").css('top','22px');
			}
			
			//Add this to force the miles to show in IE or any other browser
			if ((jQuery("a.postalEdit").length &gt; 0) &amp;&amp; (jQuery("#textForRIS").text() != 'This item is not currently available in stores.') ){
				if ( (jQuery.browser.msie  &amp;&amp; parseInt(jQuery.browser.version, 10) === 8) || (jQuery.browser.msie  &amp;&amp; parseInt(jQuery.browser.version, 10) === 7)) {
					var ie8string = risStringArr2[1]
					ie8split = ie8string.split("&lt;A");
					seeMiles.html(ie8split[0]);
					//fix edit bug
					jQuery("#locationEdit a").text("Edit");
				} else {
					seeMiles.html(risStringArr2[1]);
					//fix edit bug
					jQuery("#locationEdit a").text("Edit");
				}
			}
			
			//Arrange Copy - Check stores near you
			if (jQuery("#textForRIS").html() == 'Check stores near you for this product.'){
				jQuery("#textForRIS").show();
				jQuery("#textForRIS").html('Check stores near you&lt;br /&gt;for this product');
				$("textForRIS").style.left = "119px";
				$("textForRIS").style.top = "-19px";
				$("textForRIS").style.textAlign = "right";
			}
			
			//Arrange Copy - This item is not currently
			var noStore = jQuery("#textForRIS").text();
			if (noStore.indexOf('This item is not currently available') != -1){
				jQuery("#textForRIS").show();
				jQuery("#textForRIS").html('This item is not currently&lt;br /&gt;available in stores.');
				$("textForRIS").style.left = "119px";
				$("textForRIS").style.top = "-30px";
				$("textForRIS").style.textAlign = "right";
				jQuery("a.postalEdit").hide();
				jQuery("#findInStoreButton").hide();
			}
			else {
				// Turn Find In Store Button again
				jQuery("#findInStoreButton").show();
			}

			//Begin hover state - *change image paths*
			jQuery("#findInStoreButton").hover(function() {
			  $("findInStoreButton").style.backgroundImage = "url('/Asset_Archive/GPWeb/content/0009/711/310/assets/btn_gol_find_on.png')";
			}, function() {
			  $("findInStoreButton").style.backgroundImage = "url('/Asset_Archive/GPWeb/content/0009/711/310/assets/btn_gol_find_down2.png')";
			});
			//End hover state - *change image paths*

		}
		return false;
	}
}
// End GOL RisDiscoverability - Reserve In Store Cosmetic Code

// Begin Run RIS Code
if(location.pathname == '/browse/product.do') {
	//Begin Show RIS Store Location List
	document.observe('findInStore:storeListRendered', function() {
		$("storeLocationsList").select("div.reserveInStore").invoke("setStyle", { display: 'block' });
		//jQuery.each(['#reserveInStore_8179', '#reserveInStore_8173', '#reserveInStore_8176', '#reserveInStore_7697', '#reserveInStore_8072', '#reserveInStore_8073', '#reserveInStore_8071', '#reserveInStore_7679', '#reserveInStore_3035', '#reserveInStore_8568', '#reserveInStore_8035', '#reserveInStore_3182', '#reserveInStore_8194', '#reserveInStore_8128', '#reserveInStore_8125', '#reserveInStore_8028', '#reserveInStore_8274', '#reserveInStore_8595', '#reserveInStore_8733', '#reserveInStore_8290'],function(index,value){jQuery(value).show();});			
	});
	//End Show RIS Store Location List
	
	// Begin This will fire the RiS Assets
	//RisDiscoverability();
	
	productPage.setColor = productPage.setColor.wrap(function(om, i) {
		om(i);
		sawRIS = false;
		RisDiscoverability();
	});
	
	productPage.setSizeDimension1 = productPage.setSizeDimension1.wrap(function(om, i) {
		om(i);
		sawRIS = false;
		RisDiscoverability();
	});
	
	productPage.setSizeDimension2 = productPage.setSizeDimension2.wrap(function(om, i) {
		om(i);
		sawRIS = false;
		RisDiscoverability();
	});
	

	Event.observe(document, "productPage:ready", function() {
		RisDiscoverability();
	});




	//Event.observe(document, "dom:loaded", function() {
		//RisDiscoverability();
		//console.info('domload');
	//});
	
	merchLocationsManager.controller.handleUserInput = merchLocationsManager.controller.handleUserInput.wrap(function(om,radius, postalCode, passFunc, failFunc) {
		om(radius, postalCode, passFunc, failFunc);
		sawRIS = false;
		RisDiscoverability();
	});
	
	//fix variant bug
	productPage.loadVariantProduct = productPage.loadVariantProduct.wrap(function(om,strProductId,strVariantId) {
		om(strProductId,strVariantId);
		sawRIS = false;
		jQuery('#variantButtons li.varianttab.off').click(RisDiscoverability);
	});

	// End This will fire the RiS Assets
	


}
	// Begin GOL HP Evergreen Hide/Show
	if($('fis_content') &amp;&amp; $('ris_content')){
		$('fis_content').hide();
		$('ris_content').show();
	}
	// End GOL HP Evergreen Hide/Show
	
	// Begin GOL Store Locator Banner Hide/Show
	if($('fis_content_storeLocator') &amp;&amp; $('ris_content_storeLocator')){
		$('fis_content_storeLocator').hide();
		$('ris_content_storeLocator').show();
	}
	// End GOL Store Locator Banner Hide/Show

// End Run RIS Code
  </script>
  <!-- END Content Item File: /content/0009/711/310/cn9711310.html -->
  <!-- END - WCD Sitewide Container 9 -->
  <!-- BEGIN - WCD Sitewide Container 10 -->
  <!-- BEGIN Content Item File: /content/0008/902/918/cn8902918.html -->
  <script src="/Asset_Archive/GPWeb/content/0008/902/918/assets/wishlistHelper.js" type="text/javascript">
  </script>
  <!-- END Content Item File: /content/0008/902/918/cn8902918.html -->
  <!-- END - WCD Sitewide Container 10 -->
  <!-- BEGIN - WCD Sitewide Container 11 -->
  <!-- BEGIN Content Item File: /content/0009/825/478/cn9825478.html -->
  <!-- CIID:9825478 GP -->
  <script type="text/javascript">
   //Check if IOS 7 or below &amp; Setcookie
var userAgent = navigator.userAgent;
var iOS = parseFloat( ('' + (/CPU.*OS ([0-9_]{1,5})|(CPU like).*AppleWebKit.*Mobile/i.exec( userAgent ) || [0,''])[1]).replace('undefined', '3_2').replace('_', '.').replace('_', '') ) || false;
var noDCookie = gidLib.getCookieVar("mktUniversalPersist", "GAC_AB05052015_004") != "GAC_AB05052015_004_SegD";

if( iOS !== false &amp;&amp; iOS &lt; 8 &amp;&amp; noDCookie) {
	//Set D Cookie
	gidLib.setCookieVar("mktUniversalPersist","GAC_AB05052015_004","GAC_AB05052015_004_SegD");
}

var UniversalCookieCutterGAC_AB050515 = Class.create();
UniversalCookieCutterGAC_AB050515.prototype = {
	initialize:function(CookieVarName,CookieUsedName,CookieValueBase,ForcedModeBaseName,SegmentBreakdown,theEvar,plExcept) {
		this.EvarToUse = theEvar != "" ? theEvar : false;
		this.CookieVariableName = CookieVarName;
		this.CookieUsed = CookieUsedName;
		this.CookieValueBase = CookieValueBase;
		this.SegBreakdown = SegmentBreakdown.split("-");
		this.DoesTheCookieExist = gidLib.getCookieVar(this.CookieUsed, this.CookieVariableName);
		this.RetrievedCookieValue = gidLib.getCookieVar(this.CookieUsed, this.CookieVariableName);
		this.QuickSegment = '';
		this.piperlimeException = plExcept;
		this.userNeedsSync = false;
		this.ForcedModeBase = ForcedModeBaseName;
		this.ModeArrayIndex = this.SegBreakdown.length;
		this.modeArray = new Array();
		this.modeArray[0] = "a";
		this.modeArray[1] = "b";
		this.modeArray[2] = "c";
		this.modeArray[3] = "d";
		this.modeArray[4] = "e";
		this.modeArray[5] = "f";
		this.modeArray[6] = "g";
		
		if (location.href.indexOf(this.ForcedModeBase) &gt;= 1) {
			this.forcedMode();
		}else{
			this.cookieScanner();
		}
	},
	forcedMode:function() {
		for (i = 0; i &lt; this.ModeArrayIndex; i++) {
			if (location.href.indexOf(this.ForcedModeBase + "=" + this.modeArray[i]) &gt;= 1) {
				this.UserSegment = this.CookieValueBase + this.modeArray[i].toUpperCase();
				this.QuickSegment = this.modeArray[i].toUpperCase();
			}
		}
		
		gidLib.setCookieVar(this.CookieUsed,this.CookieVariableName,this.UserSegment);
		if (this.EvarToUse) {
			this.setABTestVariable(this.UserSegment);
		}
		userNeedsSync = true;
	},
	cookieScanner:function() {		
		if (this.DoesTheCookieExist) {
			if (this.EvarToUse) {
				this.setABTestVariable(this.RetrievedCookieValue);
			}
			for (i = 0; i &lt; this.ModeArrayIndex; i++) {
				if (this.RetrievedCookieValue == (this.CookieValueBase + this.modeArray[i].toUpperCase())) {
					this.QuickSegment = this.modeArray[i].toUpperCase();
					break;
				}
			}
		} else {
			this.tagManager();
		}
	},
	tagManager:function() {
		this.Segmentation = Math.floor((Math.random()*100)+1); // chooses 1 to 100
		this.FloorThreshold = 0;
		this.TopThreshold = 0;
		
		for (i = 0; i &lt; this.ModeArrayIndex; i++){
			this.TopThreshold = this.FloorThreshold + parseInt(this.SegBreakdown[i]);
			if ((this.Segmentation &gt; this.FloorThreshold) &amp;&amp; (this.Segmentation &lt;= this.TopThreshold)){
				this.UserSegment = this.CookieValueBase + this.modeArray[i].toUpperCase();
				this.QuickSegment = this.modeArray[i].toUpperCase();
				break;
			} else {
				this.FloorThreshold = this.TopThreshold;
			}
		}
		
		gidLib.setCookieVar(this.CookieUsed,this.CookieVariableName,this.UserSegment);
		if (this.EvarToUse) {
			this.setABTestVariable(this.UserSegment);
		}
	},
	
	setABTestVariable: function(setValue) {
		thisEvar = 'eVar' + this.EvarToUse;
		ABTestVariables[thisEvar] = setValue;
	}
};


if( ( jQuery.browser.msie &amp;&amp; parseFloat( jQuery.browser.version ) &lt; 10 ) || ( jQuery.browser.mozilla &amp;&amp; parseFloat( jQuery.browser.version ) &gt;= 19 &amp;&amp; parseFloat( jQuery.browser.version ) &lt; 20 ) ){
	var promoCookieCutter = new UniversalCookieCutterGAC_AB050515("GAC_AB05052015_004","mktUniversalPersist","GAC_AB05052015_004_Seg","GACmode","100-0-0-0","0","none");
}
else {
	//var promoCookieCutter = new UniversalCookieCutterGAC_AB050515("GAC_AB05052015_004","mktUniversalPersist","GAC_AB05052015_004_Seg","GACmode","34-33-33-0","41","none");
	var promoCookieCutter = new UniversalCookieCutterGAC_AB050515("GAC_AB05052015_004","mktUniversalPersist","GAC_AB05052015_004_Seg","GACmode","100-0-0-0","0","none");
}

		function VolControlsignInExpandCollapseViewEnabled() {
			
			/*if( gidLib.getCookieVar("mktUniversalPersist","enableBillingModuleEnhancements") != 'enableBillingModuleEnhancements_SegA' ) {
				gidLib.removeCookieVar("mktUniversalPersist","enableBillingModuleEnhancements");
			}

			if( gidLib.getCookieVar("mktUniversalPersist","enablePromoExpandCollapse") != 'enablePromoExpandCollapse_SegA' ) {
				gidLib.removeCookieVar("mktUniversalPersist","enablePromoExpandCollapse");
			}*/
			
		
				var VolControlSegment = gidLib.getCookieVar("mktUniversalPersist", "GAC_AB05052015_004");

				//SEGA ?GACmode=a  CONTROL SEGMENT
				if( VolControlSegment == "GAC_AB05052015_004_SegA" ) {
				gidLib.setCookieVar("mktUniversalPersist","enableBillingModuleEnhancements","enableBillingModuleEnhancements_SegA");
				gidLib.setCookieVar("mktUniversalPersist","enablePromoExpandCollapse","enablePromoExpandCollapse_SegA");
				}

				//SEGB ?GACmode=b
				if( VolControlSegment == "GAC_AB05052015_004_SegB" ) {  
				gidLib.setCookieVar("mktUniversalPersist","enableBillingModuleEnhancements","enableBillingModuleEnhancements_SegB");
				gidLib.setCookieVar("mktUniversalPersist","enablePromoExpandCollapse","enablePromoExpandCollapse_SegB");
				}
				
				//SEGC ?GACmode=c
				if( VolControlSegment == "GAC_AB05052015_004_SegC" ) {  
				gidLib.setCookieVar("mktUniversalPersist","enableBillingModuleEnhancements","enableBillingModuleEnhancements_SegB");
				gidLib.setCookieVar("mktUniversalPersist","enablePromoExpandCollapse","enablePromoExpandCollapse_SegB");
				//ccm.billing.promotions.view.expandCollapsePromotionsModule();
				jQuery("#expandSubHeadingColGiftCard").delay(500).queue(function(){ 
				 // jQuery(this).trigger("click"); 
				  ccm.billing.promotions.view.expandCollapsePromotionsModule();
				  jQuery(this).dequeue(); 
				});
				
				}
				
				//SEGD ?GACmode=d  
				if( VolControlSegment == "GAC_AB05052015_004_SegD" ) {  
					gidLib.setCookieVar("mktUniversalPersist","enableBillingModuleEnhancements","enableBillingModuleEnhancements_SegD");
					gidLib.setCookieVar("mktUniversalPersist","enablePromoExpandCollapse","enablePromoExpandCollapse_SegD");
				}
	}
	
	jQuery(window).load(function() {
// jQuery(document).ready(function() {
	        VolControlsignInExpandCollapseViewEnabled();

	});


//End Google Autocomplete (GAC) AB-Test 10-07 -2014
  </script>
  <!-- END Content Item File: /content/0009/825/478/cn9825478.html -->
  <!-- END - WCD Sitewide Container 11 -->
  <!-- BEGIN - WCD Sitewide Container 12 -->
  <!-- BEGIN Content Item File: /content/0009/413/584/cn9413584.html -->
  <!-- GOL HP Division PaS test -->
  <!-- PAS A/B Test Code -->
  <script type="text/javascript">
   // var PASNameToSearchFor2 = "";
// var PaSValueForContent2 = "null";
// var PaSValuePassedToEvar = "null"; 

// var WCDPasSegmentWidget = function() {
// // var privateStaticMethod = function() {};
// // var privateStaticVariable = "foo";

// 	this.PasEvarValue = "Error: PAS quit before finishing";
// 	this.defaultPasValue = "A";
// 	// this.PasDataEvar = "eVar36"
// 	this.PasValueProperty = "";
//     var constructor = function WCDPasWidget()
//     {
//     	//this.PasValueProperty = "";
//         var ExecutePaSABTest = function() {	
        	
//         	if(typeof personalizationService.model.personalizationData.personalizationInfoV1.personalizationAttributes != "undefined"){
// 				var PasDataSet = personalizationService.model.personalizationData.personalizationInfoV1.personalizationAttributes;
// //console.info("dataset: ");
// //console.info(PasDataSet)
// 				;
// 				var csIndex = -1;
// 				var emIndex = -1;
// 				var unIndex = -1;
// 				var csString = "Cust";
// 				var emString = "Email";
// 				var unString = "Unknown";
// 				this.PASNameToSearchFor = "GOLHP2";
// 				this.PasEvarValue = "Nothing_Happened_Start";
// 				var PASIdValues = {"cs":false,"di":false,"un":false};

// 				// begin test ************************************************
// //console.info("length: " + PasDataSet.length);
// 					// iterate through the PaS Data if more than one id...
// 					for (i = 0; i &lt; PasDataSet.length; i++) {
// 						if (PasDataSet[i].idType == "di") {
// //console.info("em recognized (multiple IDs, segA)");
// 							PASIdValues.em = true;
// 							emIndex = i;
// 						} else if (PasDataSet[i].idType == "cs") {
// //console.info("cs recognized (multiple IDs, segA)");
// 							PASIdValues.cs = true;
// 							csIndex = i;
// 						} else if (PasDataSet[i].idType == "un")  {
// //console.info("un recognized (multiple IDs, segA)");
// 							PASIdValues.un = true;
// 							unIndex = i;
// 						} 
// 					} // end "for" loop	
// 						if ((PasEvarValue == "Nothing_Happened_Start") &amp;&amp; (PASIdValues.em)) {
// //console.info("em main if recognized (multiple IDs, segA)");
// 							if(PasDataSet[emIndex].attributes){
// 								if (!(PasDataSet[emIndex].attributes instanceof Array)){
// 									if(PasDataSet[emIndex].attributes.name == PASNameToSearchFor){
// 										PASDetermineAttribute(emString,PasDataSet[emIndex].attributes.value);
// 									}
// 								} else {
// 									for (i = 0; i &lt; PasDataSet[emIndex].attributes.length; i++) {
// //console.info("name " + i + ": " + PasDataSet[emIndex].attributes[i].name + "value " + i + ": " + PasDataSet[emIndex].attributes[i].value);
// 										if(PasDataSet[emIndex].attributes[i].name == PASNameToSearchFor) {
// //console.info("value = " + PasDataSet[emIndex].attributes[i].value);
// 											PASDetermineAttribute(emString,PasDataSet[emIndex].attributes[i].value);
// 										}
// 									}
// 								}
// 							}
// 						}
// 						if ((PasEvarValue == "Nothing_Happened_Start") &amp;&amp; (PASIdValues.cs)) {
// //console.info("cs main if recognized (multiple IDs, segA)");
// 							if(PasDataSet[csIndex].attributes){
// 								if (!(PasDataSet[csIndex].attributes instanceof Array)){
// 									if(PasDataSet[csIndex].attributes.name == PASNameToSearchFor){
// 										PASDetermineAttribute(csString,PasDataSet[csIndex].attributes.value);
// 									}
// 								} else {
// //console.info("# of attributes: " + PasDataSet[csIndex].attributes.length);
// 									for (i = 0; i &lt; PasDataSet[csIndex].attributes.length; i++) {
// //console.info("name " + i + ": " + PasDataSet[csIndex].attributes[i].name + "value " + i + ": " + PasDataSet[csIndex].attributes[i].value);
// 										if(PasDataSet[csIndex].attributes[i].name == PASNameToSearchFor) {
// //console.info("value = " + PasDataSet[csIndex].attributes[i].value);
// 											PASDetermineAttribute(csString,PasDataSet[csIndex].attributes[i].value);
// 										}
// 									}
// 								}
// 							}
// 						} 

// 						if ((PasEvarValue == "Nothing_Happened_Start") &amp;&amp; (PASIdValues.un)) {
// //console.info("un main if recognized (multiple IDs, segA)");
// //console.info("un index = " + unIndex);
// 							if(PasDataSet[unIndex].attributes){
// //console.info("attributes length: " + PasDataSet[unIndex].attributes.length);
// 								if (!(PasDataSet[unIndex].attributes instanceof Array)){
// //console.info("Did check instance of array");
// 									if(PasDataSet[unIndex].attributes.name == PASNameToSearchFor){
// //console.info("the name: "+ PasDataSet[unIndex].attributes.name);
// //console.info("one attribute: " + PasDataSet[unIndex].attributes.value);
// 										PASDetermineAttribute(unString,PasDataSet[unIndex].attributes.value);
// 									}
// 								} else {
// //console.info("multiple attributes");
// 									for (i = 0; i &lt; PasDataSet[unIndex].attributes.length; i++) {
// //console.info("how many attributes there are: " + PasDataSet[unIndex].attributes.length + " attributes");
// //console.info("name " + i + ": " + PasDataSet[unIndex].attributes[i].name + "value " + i + ": " + PasDataSet[unIndex].attributes[i].value);
// 										if(PasDataSet[unIndex].attributes[i].name == PASNameToSearchFor) {
// //console.info("Attribute Name: " + PasDataSet[unIndex].attributes[i].name + " value: " + PasDataSet[unIndex].attributes[i].value);
// 											PASDetermineAttribute(unString,PasDataSet[unIndex].attributes[i].value);
// 										}
// 									}
// 								}
// 							}
// 						} else { /// must be only 1 ID in the JSON
				
// 							if ((PasEvarValue == "Nothing_Happened_Start") &amp;&amp; (PasDataSet.idType == "di")) {
// //console.info("em recognized (one ID, segA)");
// 								if(PasDataSet.attributes){
// 									if(!(PasDataSet.attributes instanceof Array)){
// 										if(PasDataSet.attributes.name == PASNameToSearchFor){
// 											PASDetermineAttribute(emString,PasDataSet.attributes.value);
// 										}
// 									} else {
// 										for (i = 0; i &lt; PasDataSet.attributes.length; i++) {
// 											if(PasDataSet.attributes[i].name == PASNameToSearchFor) {
// 												PASDetermineAttribute(emString,PasDataSet.attributes[i].value);
// 											}
// 										}
// 									}
// 								}
// 							}
// 							if ((PasEvarValue == "Nothing_Happened_Start") &amp;&amp; (PasDataSet.idType == "cs")) {
// //console.info("cs recognized (one ID, segA)");
// 								if(PasDataSet.attributes){
// 									if((!(PasDataSet.attributes instanceof Array))){
// 										if (PasDataSet.attributes.name == PASNameToSearchFor){
// 											PASDetermineAttribute(csString,PasDataSet.attributes.value);
// 										}
// 									} else {
// 										for (i = 0; i &lt; PasDataSet.attributes.length; i++) {
// 											if(PasDataSet.attributes[i].name == PASNameToSearchFor) {
// 												PASDetermineAttribute(csString,PasDataSet.attributes[i].value);
// 											}
// 										}
// 									}
// 								}
// 							}

// 							if ((PasEvarValue == "Nothing_Happened_Start") &amp;&amp; (PasDataSet.idType == "un")) {
// //console.info("un recognized (one ID, segA)");
// 								if(PasDataSet.attributes){
// //console.info("un recognized (one ID, segA) has attributes");
// 									if(!(PasDataSet.attributes instanceof Array)){
// //console.info("un recognized (one ID, segA) not an array");
// 										if(PasDataSet.attributes.name == PASNameToSearchFor){
// //console.info("un recognized (one ID, segA) not an array has PAS value" + PasDataSet.attributes.value);
// 											PASDetermineAttribute(unString,PasDataSet.attributes.value);
// 										}
// 									} else {
// //console.info("un recognized (one ID, segA) is an array");
// 										for (i = 0; i &lt; PasDataSet.attributes.length; i++) {
// 											if(PasDataSet.attributes[i].name == PASNameToSearchFor) {
// //console.info("un recognized (one ID, segA) is an array has PAS value = " + PasDataSet.attributes[i].value);
// 												PASDetermineAttribute(unString,PasDataSet.attributes[i].value);
// 											}
// 										}
// 									}	
// 								}
// 							}	
// 						} // end last else
// 						if (this.PasEvarValue == "Nothing_Happened_Start") {
// 								this.PasEvarValue = "NULL";
// 								PASDetermineAttribute("NULL","NULL");
// 						}			
// //console.info("final evar value: " + this.PasEvarValue);
	
// //console.info("PAS function sending evar!");
// 				PaSValuePassedToEvar = this.PasEvarValue;
		
// 			} else {
// 				this.PasEvarValue = "NULL";
// 				PaSValuePassedToEvar = this.PasEvarValue;
// 				PASDetermineAttribute("NULL","NULL");
// 			}
// 		}
		

// 		var PASDetermineAttribute = function (idtype,value) {
// //console.info("--PASDetermineAttribute() called--");
// //console.info("id: " + idtype + " value: " + value);
// 		var testvalue = value.split(":");
// 				switch (testvalue[0]) {
// 					case "CONTROL":
// 						this.PasEvarValue = value;
// 						this.PasValueProperty = "A";
// 						break;
// 					case "TEST1":
// 						this.PasEvarValue = value;
// 						this.PasValueProperty = "B";
// 						break;
// 					case "TEST2":
// 						this.PasEvarValue = value;
// 						this.PasValueProperty = "C";
// 						break;					
// 					default:
// 						this.PasEvarValue = "NULL";
// 						this.PasValueProperty = this.defaultPasValue;
// 						break;						
// 				}
// 				PaSValuePassedToEvar = this.PasEvarValue;
// 				PaSValueForContent2 = this.PasValueProperty
// //console.info( "PaS value property: " +  this.PasValueProperty);     
//         }
        
//     ExecutePaSABTest();
      
//     }; // end constructor

//     constructor.publicStaticMethod = function() {};

//     return constructor;
// }();


var PASNameToSearchFor = "";
var PaSValueForContent = "null"
var WCDPasNavWidget = function() {
    
// var privateStaticMethod = function() {};
// var privateStaticVariable = "foo";

	this.PasEvarValue = "Error: PAS quit before finishing";
	this.defaultPasValue = "A";
	// this.PasDataEvar = "eVar36"
	this.PasValueProperty = "";
    var constructor = function WCDPasWidget()
    {
    	//this.PasValueProperty = "";
        var ExecutePaSABTest = function() {	
        	
        	if(typeof personalizationService.model.personalizationData.personalizationInfoV1.personalizationAttributes != "undefined"){
				var PasDataSet = personalizationService.model.personalizationData.personalizationInfoV1.personalizationAttributes;
//console.info("dataset: ");
//console.info(PasDataSet)
				;
				var csIndex = -1;
				var emIndex = -1;
				var unIndex = -1;
				var csString = "Cust";
				var emString = "Email";
				var unString = "Unknown";
				this.PASNameToSearchFor = "GPDIVPREF";
				this.PasEvarValue = "Nothing_Happened_Start";
				var PASIdValues = {"cs":false,"di":false,"un":false};

				// begin test ************************************************
//console.info("length: " + PasDataSet.length);
					// iterate through the PaS Data if more than one id...
					for (i = 0; i &lt; PasDataSet.length; i++) {
						if (PasDataSet[i].idType == "di") {
//console.info("em recognized (multiple IDs, segA)");
							PASIdValues.em = true;
							emIndex = i;
						} else if (PasDataSet[i].idType == "cs") {
//console.info("cs recognized (multiple IDs, segA)");
							PASIdValues.cs = true;
							csIndex = i;
						} else if (PasDataSet[i].idType == "un")  {
//console.info("un recognized (multiple IDs, segA)");
							PASIdValues.un = true;
							unIndex = i;
						} 
					} // end "for" loop	
						if ((PasEvarValue == "Nothing_Happened_Start") &amp;&amp; (PASIdValues.em)) {
//console.info("em main if recognized (multiple IDs, segA)");
							if(PasDataSet[emIndex].attributes){
								if (!(PasDataSet[emIndex].attributes instanceof Array)){
									if(PasDataSet[emIndex].attributes.name == PASNameToSearchFor){
										PASDetermineAttribute(emString,PasDataSet[emIndex].attributes.value);
									}
								} else {
									for (i = 0; i &lt; PasDataSet[emIndex].attributes.length; i++) {
//console.info("name " + i + ": " + PasDataSet[emIndex].attributes[i].name + "value " + i + ": " + PasDataSet[emIndex].attributes[i].value);
										if(PasDataSet[emIndex].attributes[i].name == PASNameToSearchFor) {
//console.info("value = " + PasDataSet[emIndex].attributes[i].value);
											PASDetermineAttribute(emString,PasDataSet[emIndex].attributes[i].value);
										}
									}
								}
							}
						}
						if ((PasEvarValue == "Nothing_Happened_Start") &amp;&amp; (PASIdValues.cs)) {
//console.info("cs main if recognized (multiple IDs, segA)");
							if(PasDataSet[csIndex].attributes){
								if (!(PasDataSet[csIndex].attributes instanceof Array)){
									if(PasDataSet[csIndex].attributes.name == PASNameToSearchFor){
										PASDetermineAttribute(csString,PasDataSet[csIndex].attributes.value);
									}
								} else {
//console.info("# of attributes: " + PasDataSet[csIndex].attributes.length);
									for (i = 0; i &lt; PasDataSet[csIndex].attributes.length; i++) {
//console.info("name " + i + ": " + PasDataSet[csIndex].attributes[i].name + "value " + i + ": " + PasDataSet[csIndex].attributes[i].value);
										if(PasDataSet[csIndex].attributes[i].name == PASNameToSearchFor) {
//console.info("value = " + PasDataSet[csIndex].attributes[i].value);
											PASDetermineAttribute(csString,PasDataSet[csIndex].attributes[i].value);
										}
									}
								}
							}
						} 

						if ((PasEvarValue == "Nothing_Happened_Start") &amp;&amp; (PASIdValues.un)) {
//console.info("un main if recognized (multiple IDs, segA)");
//console.info("un index = " + unIndex);
							if(PasDataSet[unIndex].attributes){
//console.info("attributes length: " + PasDataSet[unIndex].attributes.length);
								if (!(PasDataSet[unIndex].attributes instanceof Array)){
//console.info("Did check instance of array");
									if(PasDataSet[unIndex].attributes.name == PASNameToSearchFor){
//console.info("the name: "+ PasDataSet[unIndex].attributes.name);
//console.info("one attribute: " + PasDataSet[unIndex].attributes.value);
										PASDetermineAttribute(unString,PasDataSet[unIndex].attributes.value);
									}
								} else {
//console.info("multiple attributes");
									for (i = 0; i &lt; PasDataSet[unIndex].attributes.length; i++) {
//console.info("how many attributes there are: " + PasDataSet[unIndex].attributes.length + " attributes");
//console.info("name " + i + ": " + PasDataSet[unIndex].attributes[i].name + "value " + i + ": " + PasDataSet[unIndex].attributes[i].value);
										if(PasDataSet[unIndex].attributes[i].name == PASNameToSearchFor) {
//console.info("Attribute Name: " + PasDataSet[unIndex].attributes[i].name + " value: " + PasDataSet[unIndex].attributes[i].value);
											PASDetermineAttribute(unString,PasDataSet[unIndex].attributes[i].value);
										}
									}
								}
							}
						} else { /// must be only 1 ID in the JSON
				
							if ((PasEvarValue == "Nothing_Happened_Start") &amp;&amp; (PasDataSet.idType == "di")) {
//console.info("em recognized (one ID, segA)");
								if(PasDataSet.attributes){
									if(!(PasDataSet.attributes instanceof Array)){
										if(PasDataSet.attributes.name == PASNameToSearchFor){
											PASDetermineAttribute(emString,PasDataSet.attributes.value);
										}
									} else {
										for (i = 0; i &lt; PasDataSet.attributes.length; i++) {
											if(PasDataSet.attributes[i].name == PASNameToSearchFor) {
												PASDetermineAttribute(emString,PasDataSet.attributes[i].value);
											}
										}
									}
								}
							}
							if ((PasEvarValue == "Nothing_Happened_Start") &amp;&amp; (PasDataSet.idType == "cs")) {
//console.info("cs recognized (one ID, segA)");
								if(PasDataSet.attributes){
									if((!(PasDataSet.attributes instanceof Array))){
										if (PasDataSet.attributes.name == PASNameToSearchFor){
											PASDetermineAttribute(csString,PasDataSet.attributes.value);
										}
									} else {
										for (i = 0; i &lt; PasDataSet.attributes.length; i++) {
											if(PasDataSet.attributes[i].name == PASNameToSearchFor) {
												PASDetermineAttribute(csString,PasDataSet.attributes[i].value);
											}
										}
									}
								}
							}

							if ((PasEvarValue == "Nothing_Happened_Start") &amp;&amp; (PasDataSet.idType == "un")) {
//console.info("un recognized (one ID, segA)");
								if(PasDataSet.attributes){
//console.info("un recognized (one ID, segA) has attributes");
									if(!(PasDataSet.attributes instanceof Array)){
//console.info("un recognized (one ID, segA) not an array");
										if(PasDataSet.attributes.name == PASNameToSearchFor){
//console.info("un recognized (one ID, segA) not an array has PAS value" + PasDataSet.attributes.value);
											PASDetermineAttribute(unString,PasDataSet.attributes.value);
										}
									} else {
//console.info("un recognized (one ID, segA) is an array");
										for (i = 0; i &lt; PasDataSet.attributes.length; i++) {
											if(PasDataSet.attributes[i].name == PASNameToSearchFor) {
//console.info("un recognized (one ID, segA) is an array has PAS value = " + PasDataSet.attributes[i].value);
												PASDetermineAttribute(unString,PasDataSet.attributes[i].value);
											}
										}
									}	
								}
							}	
						} // end last else
						if (this.PasEvarValue == "Nothing_Happened_Start") {
								this.PasEvarValue = "NULL";
								PASDetermineAttribute("NULL","NULL");
						}			
//console.info("final evar value: " + this.PasEvarValue);
	
//console.info("PAS function sending evar!");
				// PaSValuePassedToEvar += this.PasEvarValue;
		
			} else {
				this.PasEvarValue = "NULL";
				// PaSValuePassedToEvar += this.PasEvarValue;
				PASDetermineAttribute("NULL","NULL");
			}
		}
		

		var PASDetermineAttribute = function (idtype,value) {
//console.info("--PASDetermineAttribute() called--");
//console.info("id: " + idtype + " value: " + value);
		var testvalue = value.split("|");
				switch (testvalue[0]) {
					case "WOMEN":
						this.PasEvarValue = value;
						this.PasValueProperty = "A";
						break;
					case "MEN":
						this.PasEvarValue = value;
						this.PasValueProperty = "B";
						break;
					case "BABY":
						this.PasEvarValue = value;
						this.PasValueProperty = "C";
						break;
					case "TODDLERGIRL":
						this.PasEvarValue = value;
						this.PasValueProperty = "D";
						break;
					case "TODDLERBOY":
						this.PasEvarValue = value;
						this.PasValueProperty = "E";
						break;
					case "GIRL":
						this.PasEvarValue = value;
						this.PasValueProperty = "F";
						break;
					case "BOY":
						this.PasEvarValue = value;
						this.PasValueProperty = "G";
						break;
					case "MATERNITY":
						this.PasEvarValue = value;
						this.PasValueProperty = "H";
						break;					
					default:
						this.PasEvarValue = "NULL";
						this.PasValueProperty = this.defaultPasValue;
						break;						
				}
				// PaSValuePassedToEvar = PaSValuePassedToEvar + "_" + this.PasEvarValue;
				// ABTestVariables[this.PasDataEvar] = PaSValuePassedToEvar;
				PaSValueForContent = this.PasValueProperty
//console.info( "PaS value property: " +  this.PasValueProperty);     
        }
        
    ExecutePaSABTest();
      
    }; // end constructor

    constructor.publicStaticMethod = function() {};

    return constructor;
}();

/*
NAV GUIDE (PaSValueForContent2):
"A" : WOMEN|MEN|BABY|TODDLERGIRL|TODDLERBOY|GIRL|BOY|MATERNITY
"B" : MEN|BABY|TODDLERGIRL|TODDLERBOY|GIRL|BOY|MATERNITY|WOMEN
"C" : BABY|TODDLERGIRL|TODDLERBOY|GIRL|BOY|MATERNITY|WOMEN|MEN
"D" : TODDLERGIRL|TODDLERBOY|GIRL|BOY|MATERNITY|WOMEN|MEN|BABY
"E" : TODDLERBOY|GIRL|BOY|MATERNITY|WOMEN|MEN|BABY|TODDLERGIRL
"F" : GIRL|BOY|MATERNITY|WOMEN|MEN|BABY|TODDLERGIRL|TODDLERBOY
"G" : BOY|MATERNITY|WOMEN|MEN|BABY|TODDLERGIRL|TODDLERBOY|GIRL
"H" : MATERNITY|WOMEN|MEN|BABY|TODDLERGIRL|TODDLERBOY|GIRL|BOY
*/

/// run on all pages...
// var GOLSEGS;
var GOLNAVS;
	reportingService.controller.reportingManager.transmitRequest = reportingService.controller.reportingManager.transmitRequest.wrap(function(om) {
//console.info("before PAS");
		var evt = jQuery.Event( "PaSAttribute:ready" );
		// GOLSEGS = new WCDPasSegmentWidget();
		GOLNAVS = new WCDPasNavWidget();
		s.prop31 = PASNameToSearchFor;
//console.info("set ABVars");	
		reportingService.controller.reportingManager.setABTestingOverrideVariables();
//console.info("after PAS");
		om();
//console.info("after transmitRequest");
		jQuery(window).trigger( evt );
	});
//	jQuery(window).on("PaSAttribute:ready", function() { //console.info("PaS EVENT FIRED ******************** -&gt;"); //console.info("Use: " + PaSValueForContent); });
  </script>
  <!-- END Content Item File: /content/0009/413/584/cn9413584.html -->
  <!-- END - WCD Sitewide Container 12 -->
  <!-- BEGIN - WCD Sitewide Container 13 -->
  <!-- BEGIN Content Item File: /content/0009/718/607/cn9718607.html -->
  <!-- onesite universal bar ab test -->
  <style>
   .hidden-for-segment {
	display: none;
}

/* hack for firefox drop-shadow issue */
@-moz-document url-prefix() {

  @media (min-width:768px) {
    .catnav {
      filter: none;
      border: solid 1px;
      border-top: 0;
      border-color: #ccc;
    }

    .cssfilters .catnav--division + .catnav--list, .cssfilters .catnav--sub-division + .catnav--list {
      border-width: 1px 1px 1px medium;
      border-style: solid solid solid none;
      border-color: #ccc #ccc #ccc -moz-use-text-color;
      -moz-border-top-colors: none;
      -moz-border-right-colors: none;
      -moz-border-bottom-colors: none;
      -moz-border-left-colors: none;
    }
  }

}
&lt;/style&gt;

&lt;script type="text/javascript"&gt;
	var respNavSegDivId = "";
	ABTestVariables.eVar64 = "segNone";
	(function setABSegCookie() {
		if (gidLib.getCookie("ABSeg") == 0) {
			var expdate = new Date(gidLib.getFutureDate({years:2}));
			var val = "BSeg";
			var cookieParams = gidLib.setCookieParamsHelper("unknownShopperId");
			gidLib.setCookie("ABSeg", val, expdate, cookieParams.path, cookieParams.domain, cookieParams.isSecure);
		}
	})();	

	(function($) {
	var respNavABSegCookieVal, respNavForceModeVal, respNavSegCookieVal,
		respNavABCookieCutter, respNavViewMethods = {}, segmentHandler, segMethod,
		wcdCookieName = 'mktUniversalPersist', wcdCookieVar = 'respNavSeg6', distribution = '0-68-8-8-8-8';

		function getRespNavURLParamName(name) {
			var match = RegExp('[?&amp;]' + name + '=([^&amp;]*)').exec(window.location.search);
			return match &amp;&amp; decodeURIComponent(match[1].replace(/\+/g, ' '));
		}

		function isShoppingBag() {
			return window.location.pathname.indexOf('/shopping_bag.do') &gt;= 0;
		}

		function isCheckout() {
			var url = window.location.pathname;
			return url.indexOf('/order.do') &gt;= 0 || url.indexOf('/orderConfirm.do') &gt;= 0;
		}

		function isValueCenter() {
			return window.location.pathname.indexOf('/customer_value.do') &gt;= 0;
		}

		function isNotMobileProxySite() {
			return location.hostname.indexOf("m.") &lt; 0;
		}

		// ab seg function
		function setABSegOverrideCookie(val,exp) {
			setRespCookie("ABSegOverride", val, exp);
		}

		function setRespCookie(name, val, exp) {
			var expdate = (exp ? exp : "");
			if (val) {
				var cookieParams = gidLib.setCookieParamsHelper(name);
				gidLib.setCookie(name, val, expdate, cookieParams.path, cookieParams.domain, cookieParams.isSecure);
			}
		}

		// sets respNav cookie val
		function unsetRespNavABCookieVal(name, key) {
			var cookieValue = cookieService.controller.getCookie(name),
				newCookieValue = escape((cookieValue || '').replace(
					new RegExp(key + '=\\w*&amp;*', 'g'), '')),
				configuration = cookieService.controller.getCookieConfiguration(name, null);

			if (!!configuration) {
				cookieService.controller.setCookie(name, newCookieValue, configuration.expirationDate,
					configuration.path, configuration.domain, configuration.isSecure);
			}
		}
		// sets respNav cookie val
		function setRespNavABCookieVal(name, key, value) {
			var cookieValue = cookieService.controller.getCookie(name),
				newCookieVar = key + cookieService.constants.VARIABLE_ATTRIBUTION + value,
				cookieWithoutVar = (cookieValue || '').replace(
					new RegExp(key + '=\\w*&amp;*', 'g'), ''),
				doesVarExist = cookieValue === cookieWithoutVar,
				newCookieValue = escape(newCookieVar +
					cookieService.constants.VARIABLE_SEPARATOR +
					cookieWithoutVar),
				configuration = cookieService.controller.getCookieConfiguration(name, null);

			if (!!configuration) {
				cookieService.controller.setCookie(name, newCookieValue, configuration.expirationDate,
					configuration.path, configuration.domain, configuration.isSecure);
			}

		}

		// hides the division link in the category flyout
		function respNavHideDivisionLinkInCategoryFlyout() {
			$('a[class~=catnav--standard-parent-link]').parent().hide().parent().attr("style","padding-top:13px;");
		}
		function showNewBrandBar() {
			if (isNotMobileProxySite()) {
				$('.brand-bar-with-contents').removeClass('hidden-for-segment')
				  .removeAttr("aria-hidden");
				$('#topNav').addClass('hidden-for-segment')
				  .attr("aria-hidden", "true");
			}
		}

		function showOldDivisions() {
			$('.brand-bar-with-contents').addClass('hidden-for-segment')
				  .attr("aria-hidden", 'true');
			$('#topNav').css("display", "block")
				.removeClass('visually-hidden')
				.removeClass('hidden-for-segment')
				.removeAttr("aria-hidden");
		}

		function hideGOLOldNav() {
			$("#topNavMain").css("display", "none"); /* HIDES THE 'MENU' ITEM THAT TRIGGERS THE OLD NAV ON NON HP PAGES */
			$('#globalLogo').css("display", "none"); /* hides the logo for c,d, &amp; e seg*/
			/* fixes sidenav height for factory */
			if (omni.strCurrentPageName.indexOf("Factory") &gt; 0) {
				jQuery("#sideNav").css('top','230px');
			} else {
				$('#sideNav').css('top','0px');/* aligns the sidenav to the top */
			}
			$("#mainNavGOL").css("display", "none"); 
		}

		function segBBPChangeHandler() {
      	var shouldShowNewBrandBar = gap.Mediaqueries.isCurrentBreakpointLTE('medium') &amp;&amp;
        (isShoppingBag() || isCheckout() || isValueCenter());
        if (shouldShowNewBrandBar) {
        	showNewBrandBar();
				} else {
        	showOldDivisions();
      	}
    }

		function report58($parent, e) {
			$parent.on('click', gap.EventTrackingIntegrator.trackReportingChildElEvent(e,  $parent.data("siteCatKey")));
      $parent.trigger("click");
		}

		function divisionTouchHandler() {
    	var $mainList, mc, press, tap,
    			cid = 0,
					$catNav = $('.catnav'),
					$mainList = $catNav.find('&gt; ul');
					$divisions = $mainList.find('&gt; li');
					$mainNavItems = $('.catnav &gt; ul &gt; li &gt; a');
    			hasChildrenClass = 'catnav--item_has-children';

    	$divisions.addClass('catnav--override');

			if (!$catNav.length) {
				return;
			}

			if (Modernizr.touch) {
				mc = new Hammer.Manager($catNav[0]);
				press = new Hammer.Press({ time: 250 });
				tap = new Hammer.Tap();
				mc.add([tap, press]);

					mc.on('press pressup tap', function(e) {
					var $target = $(e.target),
							$parent= $target.parent(),
							shouldBind = $parent.parent().is($mainList) &amp;&amp;
									$(e.target).hasClass(hasChildrenClass);
					if (!shouldBind) {
						return;
					}
					if (cid === +$parent.attr('data-cid')) {
						report58($parent, e);
						window.location = $target.attr('href');
						return;
					}
					gap.CategoryNav.flyoutClickHandler(e);
					cid = +($parent.attr('data-cid') || 0);
				});
			} else {
				$mainNavItems.on('click.flyoutItem', function(e) {
					report58($(e.target).parent(), e);
				});
			}
    }

var OnesiteRespNavCookieCutter = Class.create();
OnesiteRespNavCookieCutter.prototype = {
			initialize:function(CookieVarName,CookieUsedName,CookieValueBase,ForcedModeBaseName,SegmentBreakdown,theEvar,plExcept) {
				this.EvarToUse = theEvar != "" ? theEvar : false;
				this.CookieVariableName = CookieVarName;
				this.CookieUsed = CookieUsedName;
				this.CookieValueBase = CookieValueBase;
				this.SegBreakdown = SegmentBreakdown.split("-");
				this.DoesTheCookieExist = gidLib.getCookieVar(this.CookieUsed, this.CookieVariableName);
				this.RetrievedCookieValue = gidLib.getCookieVar(this.CookieUsed, this.CookieVariableName);
				this.QuickSegment = '';
				this.piperlimeException = plExcept;
				this.userNeedsSync = false;
				this.ForcedModeBase = ForcedModeBaseName;
				this.ModeArrayIndex = this.SegBreakdown.length;
				this.modeArray = new Array();
				this.modeArray[0] = "a";
				this.modeArray[1] = "b";
				this.modeArray[2] = "c";
				this.modeArray[3] = "d";
				this.modeArray[4] = "e";
				this.modeArray[5] = "f";

				if (location.href.indexOf(this.ForcedModeBase) &gt;= 1) {
					this.forcedMode();
				}else{
					this.cookieScanner();
				}
			},

			forcedMode:function() {
				for (i = 0; i &lt; this.ModeArrayIndex; i++) {
					if (location.href.indexOf(this.ForcedModeBase + "=" + this.modeArray[i]) &gt;= 1) {
						this.UserSegment = this.CookieValueBase + this.modeArray[i].toUpperCase();
						this.QuickSegment = this.modeArray[i].toUpperCase();
					}
				}

				setRespNavABCookieVal(this.CookieUsed,this.CookieVariableName,this.UserSegment);
				if (this.EvarToUse) {
					this.setABTestVariable(this.UserSegment);
				}

				userNeedsSync = true;
			},

			cookieScanner:function() {
				if (this.DoesTheCookieExist) {
					if (this.EvarToUse) {
						this.setABTestVariable(this.RetrievedCookieValue);
					}

					for (i = 0; i &lt; this.ModeArrayIndex; i++) {
						if (this.RetrievedCookieValue == (this.CookieValueBase + this.modeArray[i].toUpperCase())) {
							this.QuickSegment = this.modeArray[i].toUpperCase();
							break;
						}
					}
				} else {
					this.tagManager();
				}
			},

			tagManager:function() {
				this.Segmentation = Math.floor((Math.random()*100)+1); // chooses 1 to 100
				this.FloorThreshold = 0;
				this.TopThreshold = 0;

				/***** WARNING: this code has been modified to skip the first segment *******/
				for (i = 1; i &lt; this.ModeArrayIndex; i++){
					this.TopThreshold = this.FloorThreshold + parseInt(this.SegBreakdown[i]);
					if ((this.Segmentation &gt; this.FloorThreshold) &amp;&amp; (this.Segmentation &lt;= this.TopThreshold)){
						this.UserSegment = this.CookieValueBase + this.modeArray[i].toUpperCase();
						this.QuickSegment = this.modeArray[i].toUpperCase();
						break;
					} else {
						this.FloorThreshold = this.TopThreshold;
					}
				}

				setRespNavABCookieVal(this.CookieUsed,this.CookieVariableName,this.UserSegment);

				if (this.EvarToUse) {
					this.setABTestVariable(this.UserSegment);
				}
			},

			setABTestVariable: function(setValue) {
				thisEvar = 'eVar' + this.EvarToUse;
				ABTestVariables[thisEvar] = setValue;
			}
		};

		respNavForceModeVal = getRespNavURLParamName('respNavForceMode'); // forced mode val
		respNavABSegCookieVal= gidLib.getCookie('ABSeg'); // Server-side ABSeg cookie val
		unsetRespNavABCookieVal(wcdCookieName, 'respNavSeg5');
		unsetRespNavABCookieVal(wcdCookieName, 'respNavSeg4');
		unsetRespNavABCookieVal(wcdCookieName, 'respNavSeg1');
		unsetRespNavABCookieVal(wcdCookieName, 'respNavSeg3');
		unsetRespNavABCookieVal(wcdCookieName, 'respNavSeg2');

		// if ECOM is setting me as ASeg, make sure I'm cookied to be segA
		if (respNavABSegCookieVal === 'ASeg' || !respNavABSegCookieVal) {
			//setRespNavABCookieVal(wcdCookieName, wcdCookieVar,'segA');
			setRespCookie('ABSeg', 'BSeg');
			setABSegOverrideCookie('BSeg');
			setRespNavABCookieVal(wcdCookieName, wcdCookieVar, '');
			respNavABSegCookieVal= gidLib.getCookie('ABSeg');
		// if there is a mismatch between ABSeg &amp; the WCD cookie, reset the segmentation cookie
		} else if (gidLib.getCookieVar(wcdCookieName, wcdCookieVar) === 'segA') {
			setRespNavABCookieVal(wcdCookieName, wcdCookieVar, '');
			respNavABSegCookieVal= gidLib.getCookie('ABSeg');
		}

		// check for forcemode
		if(location.href.indexOf('respNavForceMode') != -1){
			if (respNavForceModeVal == 'a') {
				setABSegOverrideCookie('ASeg');
				setRespNavABCookieVal(wcdCookieName, wcdCookieVar,'segA');
			}
			if (respNavForceModeVal == 'b') {
				setABSegOverrideCookie('BSeg'); /* must be BSeg */
				setRespNavABCookieVal(wcdCookieName, wcdCookieVar,'segB');
			}
			if (respNavForceModeVal == 'c') {
				setABSegOverrideCookie('BSeg'); /* must be BSeg */
				setRespNavABCookieVal(wcdCookieName, wcdCookieVar,'segC');
			}
			if (respNavForceModeVal == 'd') {
				setABSegOverrideCookie('BSeg'); /* must be BSeg */
				setRespNavABCookieVal(wcdCookieName, wcdCookieVar,'segD');
			}
			if (respNavForceModeVal == 'e') {
				setABSegOverrideCookie('BSeg'); /* must be BSeg */
				setRespNavABCookieVal(wcdCookieName, wcdCookieVar,'segE');
			}
			if (respNavForceModeVal == 'f') {
		        setABSegOverrideCookie('BSeg'); /* must be BSeg */
        		setRespNavABCookieVal(wcdCookieName, wcdCookieVar,'segF');
      		}
		}


		// now do stuff visually
		respNavViewMethods["segA"] = function() {
			setRespNavABCookieVal(wcdCookieName, wcdCookieVar, 'segA');
			if ((omni.strCurrentPageName != null &amp;&amp; omni.strCurrentPageName.indexOf("Factory") &gt; 0) || (window.location.href.indexOf("cid=48620") &gt; 0)) {
				jQuery("#gfol-banner").prependTo(jQuery('#bodyContainer'));
			}
		}; // do nothing
		respNavViewMethods["segB"] = function() {
			var $topNav = $('#topNav'), $mainContent = $('#mainContent');
			$topNav.find('script').remove();
			$mainContent.before($topNav);
			$( "#mainContentContainer" ).before($topNav);
			ps.subscribe('bp-change', segBBPChangeHandler);

			if (gap.Mediaqueries.currentBP) {
				segBBPChangeHandler();
			}

			// if factory, fix mainContent margin
			if ((omni.strCurrentPageName != null &amp;&amp; omni.strCurrentPageName.indexOf("Factory") &gt; 0) || (window.location.href.indexOf("cid=48620") &gt; 0)) {
				jQuery('#mainContent').css({"margin-top":"30px"});
				jQuery("#gfol-banner").prependTo(jQuery('#bodyContainer'));
			}
			// if checkout, remove topNav
			if (location.pathname == '/checkout/order.do') {
				jQuery('#topNav').css({"display":"none"});
				jQuery('.brand-bar-with-contents.hidden-for-segment').css({'display':'block'});
			}

		};
		respNavViewMethods["segC"] = function() {
			// Responsive Universal Bar + Responsive Brand Bar (no division link, vertical space removed from menu) + Homepage with Visual Nav
			respNavHideDivisionLinkInCategoryFlyout();
			showNewBrandBar();
			hideGOLOldNav();
			// if factory, add promo banner, fix mainContent margin &amp; hide links
			if ((omni.strCurrentPageName != null &amp;&amp; omni.strCurrentPageName.indexOf("Factory") &gt; 0) || (window.location.href.indexOf("cid=48620") &gt; 0)) {
				jQuery('#searchdexbannerGapUS').hide();
				jQuery('.brand-bar--top-links').hide();
				jQuery("#gfol-banner").prependTo(jQuery('#bodyContainer'));
			}
		};
		respNavViewMethods["segD"] = function() {
			// Responsive Universal Bar + Responsive Brand Bar (with division link) + Homepage with Visual Nav
			// no modifications needed.  This is the default experience.
			showNewBrandBar();
			hideGOLOldNav();
			// if factory, add promo banner, fix mainContent margin &amp; hide links
			if ((omni.strCurrentPageName != null &amp;&amp; omni.strCurrentPageName.indexOf("Factory") &gt; 0) || (window.location.href.indexOf("cid=48620") &gt; 0)) {
				jQuery('#searchdexbannerGapUS').hide();
				jQuery('.brand-bar--top-links').hide();
				jQuery("#gfol-banner").prependTo(jQuery('#bodyContainer'));
			}
		};
		respNavViewMethods["segE"] = function() {
			// Responsive Universal Bar + Responsive Brand Bar (no division link, vertical space removed from menu;
			// click of division in menu takes user to division page/for touch devices, initial tap of division reveals child
			// categories, additional tap takes user to division page like the division link) + Homepage with Visual Nav
			showNewBrandBar();
			hideGOLOldNav();
			// if factory, add promo banner, fix mainContent margin &amp; hide links
			if ((omni.strCurrentPageName != null &amp;&amp; omni.strCurrentPageName.indexOf("Factory") &gt; 0) || (window.location.href.indexOf("cid=48620") &gt; 0)) {
				jQuery('#searchdexbannerGapUS').hide();
				jQuery('.brand-bar--top-links').hide();
				jQuery("#gfol-banner").prependTo(jQuery('#bodyContainer'));
			}
			respNavHideDivisionLinkInCategoryFlyout();

			ps.subscribe('bp-change', function(size) {
				if (gap.Mediaqueries.isCurrentBreakpointGTE('medium')) {
					divisionTouchHandler();
				}
      });

			if (gap.Mediaqueries.currentBP) {
				if (gap.Mediaqueries.isCurrentBreakpointGTE('medium')) {
					divisionTouchHandler();
				}
			}

		};

		respNavViewMethods["segF"] = respNavViewMethods["segD"];

		if (respNavABSegCookieVal === 'ASeg') {
      ABTestVariables['eVar64'] = "segA";
    } else if (respNavABSegCookieVal === 'BSeg') {
      respNavABCookieCutter = new OnesiteRespNavCookieCutter(wcdCookieVar, wcdCookieName, 'seg', 'respNavForceMode', distribution, '64', '');
      ABTestVariables['eVar64'] = (ABTestVariables.eVar64 === gidLib.getCookieVar(wcdCookieName, wcdCookieVar)) ? ABTestVariables.eVar64 : "segNone";
    }
    respNavSegCookieVal = ABTestVariables.eVar64// respNav Seg from cookie cutter
    respNavSegDivId = 'respNavSegDivId' +
			respNavSegCookieVal.replace('segF', 'segD').replace('segNone', 'segB').replace('seg', '');

    segmentHandler = respNavViewMethods[respNavSegCookieVal] || respNavViewMethods.segB;

		
		function addListener(obj, eventName, listener) {
			if( obj.addEventListener ) {
				obj.addEventListener( eventName, listener, false );
			} else {
				obj.attachEvent("on" + eventName, listener);
			}
		}

		addListener(document, "DOMContentLoaded", function(event) {
			try {
				segmentHandler();
			} catch(e) { }
		});

	})(jQuery);

&lt;/script&gt;
&lt;!-- End onesite responsive nav AB Test --&gt;

&lt;!-- END Content Item File: /content/0009/718/607/cn9718607.html --&gt;

&lt;!-- END - WCD Sitewide Container 13 --&gt;

&lt;!-- BEGIN - WCD Sitewide Container 14 --&gt;
&lt;!-- BEGIN Content Item File: /content/0009/889/018/cn9889018.html --&gt;


&lt;!-- Begin BRFS AB test --&gt;
&lt;script type="text/javascript"&gt;

var UniversalCookieCutterTestGFOL = Class.create();
UniversalCookieCutterTestGFOL.prototype = {

	initialize:function(CookieVarName,CookieUsedName,CookieValueBase,ForcedModeBaseName,SegmentBreakdown,theEvar,plExcept,noCookieSeg) {

		//Keeping it neat by having two discreet variables that check for and gather cookie information
		this.EvarToUse = theEvar != "" ? theEvar : false;
		this.CookieVariableName = CookieVarName;
		this.CookieUsed = CookieUsedName;
		this.CookieValueBase = CookieValueBase;
		this.SegBreakdown = SegmentBreakdown.split("-");
		this.DoesTheCookieExist = gidLib.getCookieVar(this.CookieUsed, this.CookieVariableName);
		this.RetrievedCookieValue = gidLib.getCookieVar(this.CookieUsed, this.CookieVariableName);
		this.QuickSegment = '';
		this.piperlimeException = plExcept;
		this.noCookieSeg = noCookieSeg;
		this.userNeedsSync = false;
		this.ForcedModeBase = ForcedModeBaseName;
		this.ModeArrayIndex = this.SegBreakdown.length; //segment breakdown determines how many segments too!
		this.modeArray = new Array();
		this.modeArray[0] = "a";
		this.modeArray[1] = "b";
		this.modeArray[2] = "c";
		this.modeArray[3] = "d";
		this.modeArray[4] = "e";
		this.modeArray[5] = "f";
		this.modeArray[6] = "g";
		this.modeArray[7] = "h";
		this.modeArray[8] = "i";
		this.modeArray[9] = "j";
		this.modeArray[10] = "k";
		this.modeArray[11] = "l";
		
		if (/sem=true/.test(location.href)) {
			this.noCookieMode();
		} else if (location.href.indexOf(this.ForcedModeBase) &gt;= 1) {
			this.forcedMode();
		} else {
			this.cookieScanner();
		}
	},

	noCookieMode:function() {
		if (this.noCookieSeg) {
			this.setABTestVariable(this.noCookieSeg);
		}
	},

	forcedMode:function() {
		for (i = 0; i &lt; this.ModeArrayIndex; i++) {
			if (location.href.indexOf(this.ForcedModeBase + "=" + this.modeArray[i]) &gt;= 1) {
				//alert('you are in segment ' + this.modeArray[i].toUpperCase() + ' / ' + this.SegBreakdown[i] + '% of the population');
				this.QuickSegment = this.modeArray[i].toUpperCase();
				this.UserSegment = this.CookieValueBase + this.QuickSegment;
			}
		}
		
		gidLib.setCookieVar(this.CookieUsed,this.CookieVariableName,this.UserSegment);
		if (this.EvarToUse) {
			this.setABTestVariable(this.UserSegment);
		}

		userNeedsSync = true;
	},

	cookieScanner:function() {
		//If the cookie isn't available, bake one!
		if (this.DoesTheCookieExist) {
			if (this.EvarToUse) {
				this.setABTestVariable(this.RetrievedCookieValue);
			}
			for (i = 0; i &lt; this.ModeArrayIndex; i++) {
				if (this.RetrievedCookieValue == (this.CookieValueBase + this.modeArray[i].toUpperCase())) {
					this.QuickSegment = this.modeArray[i].toUpperCase();
					break;
				}
			}
		} else {
			this.tagManager();
		}
	},

	tagManager:function() {
		//Breaking out the segmentation into specified percentages
		this.Segmentation = Math.floor((Math.random()*100)+1); // chooses 1 to 100
		//alert("Seg: " + this.Segmentation);	
		this.FloorThreshold = 0;
		this.TopThreshold = 0;
		
		for (i = 0; i &lt; this.ModeArrayIndex; i++){
			this.TopThreshold = this.FloorThreshold + parseInt(this.SegBreakdown[i]);

			if ((this.Segmentation &gt; this.FloorThreshold) &amp;&amp; (this.Segmentation &lt;= this.TopThreshold)){
				// put me in this segment
				this.UserSegment = this.CookieValueBase + this.modeArray[i].toUpperCase();
				this.QuickSegment = this.modeArray[i].toUpperCase();
				break;
			} else {
				// add top to floor and try next segment
				this.FloorThreshold = this.TopThreshold;
			}
		}
		
		gidLib.setCookieVar(this.CookieUsed,this.CookieVariableName,this.UserSegment);

		if (this.EvarToUse) {
			this.setABTestVariable(this.UserSegment);
		}
	},
	
	setABTestVariable: function(setValue) {
		thisEvar = 'eVar' + this.EvarToUse;
		ABTestVariables[thisEvar] = setValue;
	}
};

// Code will instantiate putting everyone in segment H.  Mobile check will put users into E; zip code check will put people into seg A if in Chicago,
//  seg J if not (seg A and J will represent people who have had the zip check made)

// for GFOL: evar 60

//Seg A = test 2 ECOM 2 states. SPLIT 50/50
//Seg B = test 2 Marketing 2 states. SPLIT 50/50
//Seg C = test 1 ECOM 11 test states
//Seg D = control Marketing 11 control states
//Seg E = no test. Marketing. 26 non test states. 
//Seg F = mobile. no test. 
//Seg G = we don't know your location. SHOW Marketing. 
// Seg H = technical issues
// Seg I = default segment for all users
// Seg J = test 5 states 5/21 added

var testGFOLCookieCutter = new UniversalCookieCutterTestGFOL("testGFOL0625","mktUniversalPersist","testGFOL0625_Seg","factorymode","100-0-0-0-0-0-0-0-0-0","60","","testGFOL0625_SegI");

// ZIP code checking - run everywhere BUT shopping bag, checkout, secure pages
if( location.protocol == 'http:' &amp;&amp; location.pathname != '/buy/shopping_bag.do' &amp;&amp; location.pathname != '/buy/shopping_bag_delete_item.do' &amp;&amp; location.pathname != '/buy/shopping_bag_save_item.do' &amp;&amp; location.pathname != '/buy/shopping_bag_move_item.do' &amp;&amp; location.pathname != '/buy/edit_shipping_method_bag.do' &amp;&amp; location.pathname != '/checkout/order.do' &amp;&amp; location.pathname != '/checkout/orderConfirm.do' ) { 
	
	var testGFOLTestSegmenter = {
		testGFOLChecksRun: false,
		init: function() {
			// Wrap to ensure Omniture code happens AFTER checks, if the checks haven't already occurred
			reportingService.controller.reportingManager.transmitRequest = reportingService.controller.reportingManager.transmitRequest.wrap( function(om) {
				////console.info('trasmit firing');
				
				// If the checks haven't run, delay the Omniture fire until checks are done
				var testGFOLSegmentCheck = gidLib.getCookieVar("mktUniversalPersist","testGFOL0625");
				if( testGFOLSegmentCheck == 'testGFOL0625_SegI' ) {
					Event.observe( document,'wcdTestGFOLCheck:ready', function() {
						////console.info('firing wrapped Omni call');
						reportingService.controller.reportingManager.setABTestingOverrideVariables();
						om();
					});
				}
				// Else, the checks have run already, fire the normal Omni transmit
				else {
					////console.info('firing normal Omni call');
					om();
				}
			});
			
			// Ensure  checks only run once on a given page and only if user in seg L (unsegmented)
			var testGFOLSegment = gidLib.getCookieVar("mktUniversalPersist","testGFOL0625");
			if( testGFOLSegment == 'testGFOL0625_SegI' ) {

				// Delay Omniture data post until personalization is ready; fire wcdTestGFOLCheck:ready following
				if( window['personalizationService'] ) {
					Event.observe(document,"personalizationData:ready", function() {
						////console.info('personalization ready');
										
						// Mobile check - push users on mobile devices into segment I
						var userAgentCheck = navigator.userAgent.toLowerCase();
						if( location.hostname.indexOf('m.') &gt; -1 || responsiveService.api.isMobileBrowser() || /webos|iphone|ipod|blackberry|iemobile|opera mini/i.test( userAgentCheck ) || ( userAgentCheck.indexOf('android') &gt; -1 &amp;&amp; userAgentCheck.indexOf('mobile') &gt; -1 ) ) {
							testGFOLTestSegmenter.forceIntoSeg('F');
	
							testGFOLTestSegmenter.testGFOLChecksRun = true;
							document.fire('wcdTestGFOLCheck:ready');
						}
						// If user not a mobile user, check zip code
						else {
							testGFOLTestSegmenter.stateCheck();
						}
					});
				}
				// personalizationService not available = problem; seg K
				else {
					testGFOLTestSegmenter.forceIntoSeg('H');

					testGFOLTestSegmenter.testGFOLChecksRun = true;
					document.fire('wcdTestGFOLCheck:ready');
				}
			}
			// Else, checks have already run so fire event
			else {
				testGFOLTestSegmenter.testGFOLChecksRun = true;
				document.fire('wcdTestGFOLCheck:ready');
			}

		},
		
		// Forces user into an AB test segment
		forceIntoSeg: function( segToForce ) {
			testGFOLCookieCutter.QuickSegment = segToForce.toUpperCase();
			testGFOLCookieCutter.UserSegment = testGFOLCookieCutter.CookieValueBase + testGFOLCookieCutter.QuickSegment;
			gidLib.setCookieVar( testGFOLCookieCutter.CookieUsed, testGFOLCookieCutter.CookieVariableName, testGFOLCookieCutter.UserSegment );
			testGFOLCookieCutter.setABTestVariable( testGFOLCookieCutter.UserSegment );
		},
		
		// Checks whether zip code data is available and, if so whether a user is in the Chicago area
		stateCheck: function() {
			// Check whether marketingMessageInfo data is available; if not problem; put in seg K
			if( personalizationService.model.personalizationData &amp;&amp; personalizationService.model.personalizationData.personalizationInfoV1 &amp;&amp; personalizationService.model.personalizationData.personalizationInfoV1.marketingMessageInfo ) {
			
				// Personaliztion data/marketMessageInfo available, check whether geo-location is.
				// If not, we are not on page with this data [and should NOT force segment change]
				if( personalizationService.model.personalizationData.personalizationInfoV1.marketingMessageInfo.geoLocation ) {

					// Check whether user is outside Chicago area and, if so, force into seg I
					var geoString = personalizationService.model.personalizationData.personalizationInfoV1.marketingMessageInfo.geoLocation;
					
					var forceIntoState = gidLib.getQuerystringParam('GFOLState');
					
					if( forceIntoState ) { geoString +=',region_code='+forceIntoState; }
					//console.info(geoString);
					/*
					var forceIntoCA = gidLib.getQuerystringParam('inCA',true);
					if( forceIntoCA == 'true' ) { geoString +=',region_code=CA'; }
					*/
					// Check whether geo-location includes zip code
					//testGFOLTestSegmenter.testGeoStringValue = geoString;
					
					if( ( geoString.indexOf('region_code=') &gt; -1 ) ) {
						var stateCompleteCode = geoString.substr( geoString.indexOf('region_code=')+12,2 );

						//testing cookie
						gidLib.setCookieVar('mktGlobalSession','myState',stateCompleteCode);

						// test 2 -- 2 states split 50%: ecom, 50% marketing // SEG A and B
						var stateArray1 = ["MD","MN"];
						// 11 states for test 1 - ecom // SEG C
						var stateArray2 = ["CA","CO","FL","IN","KS","LA","MS","NJ","NY","SC","WI"];
						// states for test 1 control - marketing // SEG D
						var stateArray3 = ["AL","CT","DE","GA","HI","IA","ME","MI","MO","NC","NH","NV","OH","OK","OR","TN","UT","VA","VT","WA"];
						// no brfs states - marketing // SEG E
						var stateArray4 = ["AK","AR","DC","ID","KY","MT","ND","NE","NM","RI","SD","WV","WY"];
						// 5 states for test 1 - ecom // SEG J
						var stateArray5 = ["AZ","IL","MA","PA","TX"];
						
						// If STATE code is in array1, you are in 50/50 state; put in seg A or B
						if ( jQuery.inArray( stateCompleteCode, stateArray1 ) &gt; -1 ) {
							
							// Force into random seg from A-B
							// Breaking out the segmentation into specified percentages
							var inTestSegmentation = Math.floor((Math.random()*100)+1); // chooses 1 to 100
							var inTestFloorThreshold = 0;
							var inTestTopThreshold = 0;
							var inTestModeArray = ['a','b'];
							var inTestSegBreakdownArray = ['50','50'];
							var newSegment = '';
							
							for (i = 0; i &lt; inTestModeArray.length; i++){
								inTestTopThreshold = inTestFloorThreshold + parseInt(inTestSegBreakdownArray[i]);
					
								if ((inTestSegmentation &gt; inTestFloorThreshold) &amp;&amp; (inTestSegmentation &lt;= inTestTopThreshold)){
									// put me in this segment
									newSegment = inTestModeArray[i].toUpperCase();
									break;
								} else {
									// add top to floor and try next segment
									inTestFloorThreshold = inTestTopThreshold;
								}
							}						
							testGFOLTestSegmenter.forceIntoSeg( newSegment );
						}
						
						else if ( jQuery.inArray( stateCompleteCode, stateArray2 ) &gt; -1 ) {
							testGFOLTestSegmenter.forceIntoSeg('C');
						}	
						
						else if ( jQuery.inArray( stateCompleteCode, stateArray3 ) &gt; -1 ) {
							testGFOLTestSegmenter.forceIntoSeg('D');
						}
						else if ( jQuery.inArray( stateCompleteCode, stateArray4 ) &gt; -1 ) {
							testGFOLTestSegmenter.forceIntoSeg('E');
						}
						else if ( jQuery.inArray( stateCompleteCode, stateArray5 ) &gt; -1 ) {
							testGFOLTestSegmenter.forceIntoSeg('J');
						}
						// Otherwise you are not IN THE USA, put in seg G
						else {
							testGFOLTestSegmenter.forceIntoSeg('G');
						}
					}
					// Geo-location data available but zip code is not there, force into G	
					else {
						testGFOLTestSegmenter.forceIntoSeg('G');
					}
				}
				// personalizationService is available and has data, just not geo-location data; on page without this data, do nothing
			}
			// personalizationInfoV1.marketingMessageInfo object not available = problem, put into seg H
			else {
				testGFOLTestSegmenter.forceIntoSeg('H');
			}

			testGFOLTestSegmenter.testGFOLChecksRun = true;
			document.fire('wcdTestGFOLCheck:ready');
		}
	}
	testGFOLTestSegmenter.init();
}

		
// Marketing content show/hide
var testGFOLView = {
	testGFOLChecksRun: false,
	showGFOLView: function(modeToShow) {
		//console.info(modeToShow);
		//if ((omni.strCurrentPageName.indexOf("GFOL") &gt; 0) || (window.location.href.indexOf("cid=48620") &gt; 0) || (window.location.href.indexOf("cid=1016171") &gt; 0)){
		if ((omni.strCurrentPageName.indexOf("Factory") &gt; 0) || (window.location.href.indexOf("cid=48620") &gt; 0)){
		
			//hide promo
			jQuery('#promoBannerContainer').hide();
	
			//hide gap footer
			jQuery('#footer').hide();
			jQuery('#gfol-footer').hide();
			
			//MARKETING
			if (modeToShow=='Marketing'){
				//console.info("Marketing content");

				if (window.location.href.indexOf("cid=48620") &gt; 0){
						// show MARKETING HP
						jQuery('#gfol-marketing').show();
						jQuery('#footer').hide();
				}
				else {
					jQuery('#footer').show();
				}
				
			}

			//ECOM
			
			else if (modeToShow=='ECOM'){
				//console.info("ECOM content");

				//show ECOM HP
				jQuery('#gfol-marketing').hide();
				jQuery('#gfol-ecom').show();
				jQuery('#gfol-ecom2').show();
				
				//topnav
				jQuery('#topNavGFOLContainer').show();

				//hide top header
				jQuery('#infoBar').hide();


				//footer link update
				jQuery('#gfol-footer').show();
					
				
			}
				
		}
		else {
			/*DEFAULT SITE CONTENT  */

			if (modeToShow=='ECOM'){

				//site navigation: add gfol link to site navigation
				if (jQuery('.gpnavigation')){
					jQuery('#gfol-link').show();
				}

			}

			// show MARKETING HP
			if (window.location.href.indexOf("cid=48620") &gt; 0){
				// show MARKETING HP
				jQuery('#gfol-marketing').show();
				jQuery('#footer').hide();
			}
			
			//hide gfol footer
			jQuery('#gfol-footer').hide();

			// show MARKETING HP
			//jQuery('#gfol-marketing').show();
		}
	}
}	



var testGFOLShowHideMarketing = function() {
	var testGFOLSegment = gidLib.getCookieVar("mktUniversalPersist","testGFOL0625");
	//console.info(testGFOLSegment);
	if (omni.strCurrentPageName != null){
		if( testGFOLSegment == 'testGFOL0625_SegA' ) {
			testGFOLView.showGFOLView('ECOM');
			//console.info(testGFOLSegment);
		}
		else if( testGFOLSegment == 'testGFOL0625_SegB' ) {
			//testGFOLView.showGFOLView('Marketing');
			//console.info(testGFOLSegment);
			testGFOLView.showGFOLView('ECOM');
		}
		else if( testGFOLSegment == 'testGFOL0625_SegC' ) { 
			testGFOLView.showGFOLView('ECOM');
			//console.info(testGFOLSegment);
		}
		else if( testGFOLSegment == 'testGFOL0625_SegD' ) { 
			//testGFOLView.showGFOLView('Marketing');
			//console.info(testGFOLSegment);
			testGFOLView.showGFOLView('ECOM');
		}
		else if( testGFOLSegment == 'testGFOL0625_SegE' ) { 
			//testGFOLView.showGFOLView('Marketing');	
			//console.info(testGFOLSegment);
			testGFOLView.showGFOLView('ECOM');
		}
		else if( testGFOLSegment == 'testGFOL0625_SegF' ) { 
			//testGFOLView.showGFOLView('Marketing');
			//console.info(testGFOLSegment);
			testGFOLView.showGFOLView('ECOM');
		}
		else if( testGFOLSegment == 'testGFOL0625_SegG' ) { 
			//testGFOLView.showGFOLView('Marketing');
			//console.info(testGFOLSegment);
			testGFOLView.showGFOLView('ECOM');
		}
		else if( testGFOLSegment == 'testGFOL0625_SegH' ) { 
			//testGFOLView.showGFOLView('Marketing');
			//console.info(testGFOLSegment);
			testGFOLView.showGFOLView('ECOM');
		}
		else if( testGFOLSegment == 'testGFOL0625_SegJ' ) { 
			testGFOLView.showGFOLView('ECOM');
			//console.info(testGFOLSegment);
		}
		else { 
			//testGFOLView.showGFOLView('Marketing');
			//console.info(testGFOLSegment);
			testGFOLView.showGFOLView('ECOM');
		}
		
	}
	else {

		//hide gfol footer
		jQuery('#gfol-footer').hide();

		// show MARKETING HP
		jQuery('#gfol-marketing').show();
	}


	

}



var testGFOLMarketingPersonalizationReady = false;

if( window['siteNavigation'] ) {
	if( window['personalizationService'] ) {
		document.observe('personalizationData:ready', function() {
			testGFOLMarketingPersonalizationReady = true;
		});
		jQuery( document ).ready( function(e) {
			if( testGFOLMarketingPersonalizationReady ) {
				testGFOLShowHideMarketing();
			}
			else {
				document.observe('personalizationData:ready', function() {
				testGFOLShowHideMarketing();
				});	
			}
		});
	}
	else {
		jQuery( document ).ready( function(e) {
			testGFOLShowHideMarketing();
		});
	}
}

&lt;/script&gt;
&lt;!-- END BRFS AB TEST --&gt;

&lt;!-- END Content Item File: /content/0009/889/018/cn9889018.html --&gt;

&lt;!-- END - WCD Sitewide Container 14 --&gt;

&lt;!-- BEGIN - WCD Sitewide Container 15 --&gt;
&lt;!-- BEGIN Content Item File: /content/0009/903/717/cn9903717.html --&gt;


&lt;!-- WCD Gross vs Net ship option test --&gt;
&lt;style type="text/css"&gt;
#wcdCheckoutPopup { box-sizing:border-box; max-height:none; position:relative; z-index:100; width:100%; height:0 }
#wcdCheckoutPopup .popPositioner { left:5%; bottom:-.5em; position:absolute; width:100% }
#wcdCheckoutPopup .popup { width:90%; background-color:#666; color:#fff; padding:0; overflow:auto; position:relative }
#wcdCheckoutPopup .popup .closeHitArea { position: absolute; z-index: 50; top: 0; right: 0; cursor: pointer; border: none; width: 2.5em; height: 2.5em; }
#wcdCheckoutPopup .popup .closeHitArea .xLightGrayIcon { z-index: 100; position: absolute; top: .65em; right: .65em; cursor: pointer; border: none; font-size: 100%; padding: 0; width: 12px; height: 12px; background: url(/gid/assets/common/en/Gap-IconsSprite-eComm.svg) -175px 0 no-repeat; }
#wcdCheckoutPopup .popup .content { margin: .65em; max-height: 90%; width: 85%; display: block; float: left; font-size: 85%; }
#wcdCheckoutPopup .downArrow { width: 0; height: 0; border-left: 20px solid transparent; border-right: 20px solid transparent; border-top: 20px solid #656565; display: block; margin-left: auto; margin-right: auto; }

#billingSummary #wcdCheckoutPopup .popPositioner { bottom:-3.5em }
  </style>
  <script type="text/javascript">
   var wcdABTest_grossVsNet = {
  init: function() {
    // Set segmentation
    var UniversalCookieCutterGrossVsNet_062615 = Class.create();
    UniversalCookieCutterGrossVsNet_062615.prototype = {
      initialize:function(CookieVarName,CookieUsedName,CookieValueBase,ForcedModeBaseName,SegmentBreakdown,theEvar,plExcept) {
        this.EvarToUse = theEvar != "" ? theEvar : false;
        this.CookieVariableName = CookieVarName;
        this.CookieUsed = CookieUsedName;
        this.CookieValueBase = CookieValueBase;
        this.SegBreakdown = SegmentBreakdown.split("-");
        this.DoesTheCookieExist = gidLib.getCookieVar(this.CookieUsed, this.CookieVariableName);
        this.RetrievedCookieValue = gidLib.getCookieVar(this.CookieUsed, this.CookieVariableName);
        this.QuickSegment = '';
        this.piperlimeException = plExcept;
        this.userNeedsSync = false;
        this.ForcedModeBase = ForcedModeBaseName;
        this.ModeArrayIndex = this.SegBreakdown.length;
        this.modeArray = new Array();
        this.modeArray = ['a','b','c','d','e','f','g'];

        if (location.href.indexOf(this.ForcedModeBase) &gt;= 1) {
          this.forcedMode();
        }else{
          this.cookieScanner();
        }
      },
      forcedMode:function() {
        for (i = 0; i &lt; this.ModeArrayIndex; i++) {
          if (location.href.indexOf(this.ForcedModeBase + "=" + this.modeArray[i]) &gt;= 1) {
            this.UserSegment = this.CookieValueBase + this.modeArray[i].toUpperCase();
            this.QuickSegment = this.modeArray[i].toUpperCase();
          }
        }
        gidLib.setCookieVar(this.CookieUsed,this.CookieVariableName,this.UserSegment);

        if (this.EvarToUse) {
          this.setABTestVariable(this.UserSegment);
        }
        userNeedsSync = true;
      },
      cookieScanner:function() {
        if (this.DoesTheCookieExist) {
          if (this.EvarToUse) {
            this.setABTestVariable(this.RetrievedCookieValue);
          }
          for (i = 0; i &lt; this.ModeArrayIndex; i++) {
            if (this.RetrievedCookieValue == (this.CookieValueBase + this.modeArray[i].toUpperCase())) {
              this.QuickSegment = this.modeArray[i].toUpperCase();
              break;
            }
          }
        } else {
          this.tagManager();
        }
      },
      tagManager:function() {
        this.Segmentation = Math.floor((Math.random()*100)+1); // chooses 1 to 100
        this.FloorThreshold = 0;
        this.TopThreshold = 0;

        for (i = 0; i &lt; this.ModeArrayIndex; i++){
          this.TopThreshold = this.FloorThreshold + parseInt(this.SegBreakdown[i]);
          if ((this.Segmentation &gt; this.FloorThreshold) &amp;&amp; (this.Segmentation &lt;= this.TopThreshold)){
            this.UserSegment = this.CookieValueBase + this.modeArray[i].toUpperCase();
            this.QuickSegment = this.modeArray[i].toUpperCase();
            break;
          } else {
            this.FloorThreshold = this.TopThreshold;
          }
        }

        gidLib.setCookieVar(this.CookieUsed,this.CookieVariableName,this.UserSegment);
        if (this.EvarToUse) {
          this.setABTestVariable(this.UserSegment);
        }
      },

      setABTestVariable: function(setValue) {
        thisEvar = 'eVar' + this.EvarToUse;
        ABTestVariables[thisEvar] = setValue;
      }
    };

    // Exclude IE9- users and FF19 users
    /*if( ( jQuery.browser.msie &amp;&amp; parseFloat( jQuery.browser.version ) &lt; 10 ) || ( jQuery.browser.mozilla &amp;&amp; parseFloat( jQuery.browser.version ) &gt;= 19 &amp;&amp; parseFloat( jQuery.browser.version ) &lt; 20 ) ){
      var grossVsNetCookieCutter = new UniversalCookieCutterGrossVsNet_062615("GrossVsNetAB3_062615","mktUniversalPersist","GrossVsNetAB3_062615_Seg","grossvsnet","100-0","0","none");
    }
    else {*/
      ////////// EVAR 24 to be added when test ramps-up on 7/1
      var grossVsNetCookieCutter = new UniversalCookieCutterGrossVsNet_062615('GrossVsNetAB3_062615','mktUniversalPersist','GrossVsNetAB3_062615_Seg','grossvsnet','100-0','24','none');
    //}

    // Gross vs Net test
    // Seg A - Control - Applies EDFS promo on gross
    // Seg B - Test - Applies EDFS promo on net

    var expDate = (expDate != null ? expDate : gidLib.getFutureDate({ "years": 5 }));
    var domain = (window.gidBrandSiteConstruct || {}).cookieDomain || null;
    var netVsGross = 'edfsgross';

    // Check first for seg B, then drop others into control bucket
    if( gidLib.getCookieVar('mktUniversalPersist','GrossVsNetAB3_062615') == 'GrossVsNetAB3_062615_SegB' ) {
      netVsGross = 'edfsnet';
    }
    gidLib.setCookieVar('mktUniversalPersist', 'grossvsnet', netVsGross );

  }
}
wcdABTest_grossVsNet.init();

if( location.pathname == '/buy/shopping_bag.do' ) {

var wcdABTest_grossVsNetBagManipulator = {
  constants: {
    popupTemplate: '' +
      '&lt;div id="wcdBagPopup" flyout-popup="" class="popupContainer flyout ng-scope"&gt;' +
        '&lt;div class="popPositioner"&gt;' +
          '&lt;div class="popup"&gt;' +
            '&lt;div class="closeHitArea" onclick="wcdABTest_grossVsNetBagManipulator.hidePopup()"&gt;' +
              '&lt;button type="button" class="xLightGrayIcon"&gt;&lt;/button&gt;' +
            '&lt;/div&gt;' +
            '&lt;span class="content ng-scope ng-binding"&gt;#{message}&lt;/span&gt;' +
          '&lt;/div&gt;' +
          '&lt;span class="downArrow"&gt;&lt;/span&gt;' +
          '&lt;div&gt;&lt;/div&gt;' +
        '&lt;/div&gt;' +
      '&lt;/div&gt;'
  },

  model: {
    shipOption7to9: '2100',
    shipOptionCurrent: '',
    testSegmentCurrent: 'a',
    timesDecoratorRuns: 0,
    timesLoopRuns: 0,

    pageLoadRun: false,
    showEdfsPopup: false,
    alreadyShown: false
  },

  init: function() {
    // Determine segment
    if( gidLib.getCookieVar('mktUniversalPersist','GrossVsNetAB3_062615') == 'GrossVsNetAB3_062615_SegB' ) {
      wcdABTest_grossVsNetBagManipulator.model.testSegmentCurrent = 'b';
    }

    // Set debug mode
    if( location.search.indexOf('grossvsnetDebug=true') &gt; -1 ) {
      wcdABTest_grossVsNetCheckoutManipulator.model.debugMode = true;
    }

    // Activate popup when switch to EDFS option
    jQuery(document).on('grossVsNet_bagTest:checked', function() {
      var model = wcdABTest_grossVsNetBagManipulator.model;
      if( model.debugMode ) console.log('bagTest called ' + model.showEdfsPopup.toString() );
      if( model.showEdfsPopup ) {
        model.showEdfsPopup = false;
        if (model.alreadyShown == false) {
          wcdABTest_grossVsNetBagManipulator.showPopup();
          model.alreadyShown = true;
        } else {
          jQuery('#wcdBagPopup').fadeOut();
        }
      }
    });

    // Loop thru ship options; this decorator will run on load, whenever new option selected or shopping bag item updated/removed
    var shoppingBagTransformerModule = angular.module('gid.transformer.shoppingBagTransformer');
    shoppingBagTransformerModule.config(function($provide) {
      $provide.decorator('shoppingBagTransformer', function($delegate) {
        var model = wcdABTest_grossVsNetBagManipulator.model;

        model.timesDecoratorRuns++;
        if( model.debugMode ) console.log('decorator running ' + model.timesDecoratorRuns );

        var oldTransformResponse    = $delegate.transformResponse;
        var oldTransformBagResponse = $delegate.transformBagResponse;

        var overrideShippingData = function(jsonData) {
          if (jsonData.shoppingBag &amp;&amp; jsonData.shoppingBag.shippingInfo &amp;&amp; jsonData.shoppingBag.shippingInfo.shippingOptions) {

            // Loop through shipping options
            var shipOptions = jsonData.shoppingBag.shippingInfo.shippingOptions;
            shipOptions.each( function( elt, idx ) {
              var model = wcdABTest_grossVsNetBagManipulator.model;

              // Set selected option to model
              if( elt.selected &amp;&amp; ( elt.selected == true || elt.selected == "true" ) ) {

                // Report # of times this runs
                model.timesLoopRuns++;
                if( model.debugMode ) console.log('loop run ' + model.timesLoopRuns );

                if( model.pageLoadRun ) {
                  if( model.debugMode ) console.log('page load happened');
                  if( elt.shippingId == model.shipOption7to9 ) {
                    if( model.debugMode ) console.log('ship options changed, post-load, to 7-9');
                    model.showEdfsPopup = true;
                  }
                }
                model.shipOptionCurrent = elt.shippingId;
              }
            });
            jsonData.shoppingBag.shippingInfo.shippingOptions = shipOptions;

            jQuery(document).trigger('grossVsNet_bagTest:checked');
          }

          if( ! model.pageLoadRun ) {
            model.pageLoadRun = true;
          }

          return jsonData;
        };

        $delegate.transformResponse = function(data, headers) {
          var jsonData = oldTransformResponse(data, headers);
          return overrideShippingData(jsonData);
        };

        $delegate.transformBagResponse = function(data) {
          var jsonData = oldTransformBagResponse(data);
          return overrideShippingData(jsonData);
        }

        return $delegate;
      });
    });
  },
  messagePopup: function( messageStr ) {
    var constants = wcdABTest_grossVsNetBagManipulator.constants;
    var messagePopup = '';
    if( messageStr != '' ) {
      messagePopup = constants.popupTemplate.replace('#{message}', messageStr );
    }
    return messagePopup;
  },
  showPopup: function() {
    var model = wcdABTest_grossVsNetBagManipulator.model;

    if( model.testSegmentCurrent == 'b' ) {

      if( model.debugMode ) console.log('showPopup = ' + jQuery('div[pop-id="pop' + model.shipOption7to9 + '"]').length.toString() );

      var optionToPrependTo = jQuery('div[pop-id="pop' + model.shipOption7to9 + '"]');
      if( optionToPrependTo.length &gt; 0 ) {
        var popupTimeout = setTimeout( function() {
          var model = wcdABTest_grossVsNetBagManipulator.model;

          if( model.debugMode ) console.log('delay showing of popup');

          var messageStr = 'You have selected 7-9 day free EDFS shipping. You are in segment A, USE promo codes freely, you will not lose your EDFS!! Lorum ipsum more text, etc. Lorum ipsum more text, etc. Lorum ipsum more text, etc. Lorum ipsum more text, etc.';
          if( model.testSegmentCurrent == 'b' ) {
            messageStr = 'Congratulations! Youve qualified for free shipping.&lt;br/&gt;Please note: free shipping is based on your merchandise total after promotions and rewards have been applied. If your merchandise total drops below $50, your shipping method will automatically be changed to our faster $7 standard shipping (3-5 business days).'
          }

          var messagePop = wcdABTest_grossVsNetBagManipulator.messagePopup( messageStr );
          jQuery('div[pop-id="pop' + model.shipOption7to9 + '"]').before( messagePop );

          if( model.debugMode ) console.log('popup should now be showing');

          var popupClick = function() {
            jQuery('body').off('click', 'div.shippingListGroupItem', popupClick );
            jQuery('#wcdBagPopup').remove();
          }

          // Apply close behavior to clicks on other options
          jQuery('body').on('click', 'div.shippingListGroupItem', popupClick );

        }, 800 );
      }
    }
  },
  hidePopup: function() {
    jQuery('#wcdBagPopup').remove();
  }
}
wcdABTest_grossVsNetBagManipulator.init();

}
else if( location.pathname == '/checkout/order.do' ) {

var wcdABTest_grossVsNetCheckoutManipulator = {
  constants: {
    popupTemplate: '' +
      '&lt;div id="wcdCheckoutPopup" flyout-popup="" class="popupContainer flyout ng-scope"&gt;' +
        '&lt;div class="popPositioner"&gt;' +
          '&lt;div class="popup"&gt;' +
            '&lt;div class="closeHitArea" onclick="wcdABTest_grossVsNetCheckoutManipulator.hidePopup()"&gt;' +
              '&lt;button type="button" class="xLightGrayIcon"&gt;&lt;/button&gt;' +
            '&lt;/div&gt;' +
            '&lt;span class="content ng-scope ng-binding"&gt;#{message}&lt;/span&gt;' +
          '&lt;/div&gt;' +
          '&lt;span class="downArrow"&gt;&lt;/span&gt;' +
          '&lt;div&gt;&lt;/div&gt;' +
        '&lt;/div&gt;' +
      '&lt;/div&gt;'
  },

  model: {
    shipOption7to9: '2100',
    shipOption3to5: '2101',
    shipOptionCurrent: '',
    testSegmentCurrent: 'a',
    promoJustApplied: false,
    debugMode: false
  },

  init: function() {
    // Determine segment
    if( gidLib.getCookieVar('mktUniversalPersist','GrossVsNetAB3_062615') == 'GrossVsNetAB3_062615_SegB' ) {
      wcdABTest_grossVsNetCheckoutManipulator.testSegmentCurrent = 'b';
    }

    // Set debug mode
    if( location.search.indexOf('grossvsnetDebug=true') &gt; -1 ) {
      wcdABTest_grossVsNetCheckoutManipulator.model.debugMode = true;
    }

    // Activate popup when you switch options
    if( ccm &amp;&amp; ccm.shipping &amp;&amp; ccm.shipping.view &amp;&amp; ccm.shipping.view.setDataToPage ) {
      ccm.shipping.view.setDataToPage = ccm.shipping.view.setDataToPage.wrap( function( om ) {
        om();

        var model = wcdABTest_grossVsNetCheckoutManipulator.model;

        if( model.debugMode ) console.log('ccm.shipping.view.setDataToPage called');

        jQuery('#shippingShippingOptionsRo .radioDiv input').off('click', shipOptionClick );

        // If promo was just applied (no need to worry about remove), check whether we need to show popup
        if( model.promoJustApplied ) {
          model.promoJustApplied = false;
          wcdABTest_grossVsNetCheckoutManipulator.promoShipOptionUpdate();
        }

        // Find currently selected option and save it
        if( window["checkout"] != null &amp;&amp; checkout.model &amp;&amp; checkout.model.data &amp;&amp; checkout.model.data.modules &amp;&amp; checkout.model.data.modules.shipping &amp;&amp; checkout.model.data.modules.shipping.selectedShippingOptionDTLId &amp;&amp; checkout.model.data.modules.shipping.selectedShippingOptionDTLId != '' ) {
          model.shipOptionCurrent = checkout.model.data.modules.shipping.selectedShippingOptionDTLId;
          if( model.debugMode ) console.log('current option set - ' + model.shipOptionCurrent );
        }

        // Apply click behavior to ship options
        var shipOptionClick = function(e) {
          var optionClicked = jQuery( e.currentTarget ).attr('id');
          optionClicked = optionClicked.replace('shippingOptions','');
          model.shipOptionCurrent = optionClicked;
          if( model.debugMode ) console.log('checkout ship option click = ' + optionClicked );
        }
        jQuery('#shippingShippingOptionsRo .radioDiv input').on('click', shipOptionClick );

      });
    }

    // Activate popup when you apply a promotion and the option changes from EDFS to 3-5
    checkout.controller.modules.billing.promotions.setPromotionCodeApplyResponse = checkout.controller.modules.billing.promotions.setPromotionCodeApplyResponse.wrap( function( om, responseVo ) {
      var model = wcdABTest_grossVsNetCheckoutManipulator.model;
      if( model.debugMode ) console.log('checkout.controller.modules.billing.promotions.setPromotionCodeApplyResponse called');

      wcdABTest_grossVsNetCheckoutManipulator.model.promoJustApplied = true;

      om( responseVo );
    });
  },
  promoShipOptionUpdate: function() {
    if( window["checkout"] != null &amp;&amp; checkout.model &amp;&amp; checkout.model.data &amp;&amp; checkout.model.data.modules &amp;&amp; checkout.model.data.modules.shipping &amp;&amp; checkout.model.data.modules.shipping.selectedShippingOptionDTLId &amp;&amp; checkout.model.data.modules.shipping.selectedShippingOptionDTLId != '' ) {
      var model = wcdABTest_grossVsNetCheckoutManipulator.model;
      var postPromoShipOption = checkout.model.data.modules.shipping.selectedShippingOptionDTLId;
      var popupMessageStr = '';

      if( model.debugMode ) console.log('promoShipOptionUpdate called');
      if( model.debugMode ) console.log('current = ' + model.shipOptionCurrent + '; new = ' + postPromoShipOption );

      // If option WAS 7-9 and is now 3-5 (+ $7), display popup
      if( model.shipOptionCurrent == model.shipOption7to9 &amp;&amp; postPromoShipOption == model.shipOption3to5 ) {
        popupMessageStr = 'Your discount has been applied!&lt;br/&gt;Please note: your merchandise total is below $50 and your shipping method has been changed to our faster $7 standard shipping (3-5 business days).';
      }
      // Else do nothing since option hasn't changed in a way we care about
      if( popupMessageStr != '' ) {
        wcdABTest_grossVsNetCheckoutManipulator.showPopup( popupMessageStr );
      }
    }
  },
  messagePopup: function( messageStr ) {
    var constants = wcdABTest_grossVsNetCheckoutManipulator.constants;
    var messagePopup = '';
    if( messageStr != '' ) {
      messagePopup = constants.popupTemplate.replace('#{message}', messageStr );
    }
    return messagePopup;
  },
  showPopup: function( messageStr ) {
    var model = wcdABTest_grossVsNetCheckoutManipulator.model;

    if( model.debugMode ) console.log('showPopup called');

    var promoBoxToPrependTo = jQuery('#promotionsContainer:visible');
    if( promoBoxToPrependTo.length == 0 ) {
      promoBoxToPrependTo = jQuery('#billingModulePromotionsSummary:visible');
    }

    if( promoBoxToPrependTo.length &gt; 0 ) {
      var popupTimeout = setTimeout( function() {
        var model = wcdABTest_grossVsNetCheckoutManipulator.model;
        if( model.debugMode ) console.log('delay showing of popup');

        var messagePop = wcdABTest_grossVsNetCheckoutManipulator.messagePopup( messageStr );
        promoBoxToPrependTo.prepend( messagePop );
        promoBoxToPrependTo.css('position','relative');

        if( model.debugMode ) console.log('popup should now be showing');

        if (jQuery("#rewardsInput").length &gt; 0) {
          jQuery("#wcdCheckoutPopup .popPositioner").css("bottom", "-6.5em");
        }

        var popupClick = function() {
          jQuery('body').off('click', popupClick );
          jQuery('#wcdCheckoutPopup').remove();
        }

        // Apply close behavior to clicks on other options
        jQuery('body').on('click', popupClick );

      }, 800 );
    }
  },
  hidePopup: function() {
    jQuery('#wcdCheckoutPopup').remove();
  }
}
wcdABTest_grossVsNetCheckoutManipulator.init();

}
  </script>
  <!-- END Content Item File: /content/0009/903/717/cn9903717.html -->
  <!-- END - WCD Sitewide Container 15 -->
  <script type="text/javascript">
   // &lt;![CDATA[
		
		
		if (window["responsiveService"]) {
			(function() { 
			    var isMobileProxyActive = browserService.controller.managers.mobileBrowserManager.model.isMobileProxyActive;
			    responsiveService.controller.init.main({active:(isMobileProxyActive !== undefined &amp;&amp; !isMobileProxyActive)});
			})();
		}
		if (window["navigationService"]) {
			navigationService.controller.init.main();
		}
	// ]]&gt;
  </script>
  <h3 class="cssHide">
   Skip Navigation:
  </h3>
  <p id="skipNav">
   Skip to:
   <a class="skipNav" href="#skipNavTopNav">
    Top Navigation
   </a>
   ,
   <a class="skipNav" href="#skipNavInlineBag">
    Shopping Bag
   </a>
   ,
   <a class="skipNav" href="#skipNavMainContent">
    Main Content
   </a>
   ,
   <a class="skipNav" href="#skipNavFooter">
    Footer Navigation
   </a>
   .
  </p>
  <a name="skipNavTopNav">
  </a>
  <div id="universalBar">
   <table class="universalBarTable" summary="Links to the other Gap Inc. Brands, promotional information, items in bag, my account, order status, shopping bag">
    <thead>
     <tr>
      <td>
      </td>
     </tr>
    </thead>
    <tbody>
     <tr>
      <td class="universalBarLeft" style="background:url(/content/0008/703/523/universalBar_bkg.png) repeat-x;">
      </td>
      <td class="universalBarCenter" id="universalBarCenter">
       <div class="clearfix universalBarContainer" id="universalBarContainer">
        <span class="cssHide2">
         Visit the other Gap Inc. Brands:
        </span>
        <ul class="universalBarTabs4 clearfix" id="universalBarTabs">
         <li class="brand1">
          <a class="brand current" href="http://www.gap.com" onclick="return gidBrandSiteConstruct.openBrand(1);" target="_top">
           <img alt="Gap" src="/assets/common/clear.gif"/>
          </a>
         </li>
         <li class="brand3">
          <a class="brand" href="http://www.oldnavy.com" onclick="return gidBrandSiteConstruct.openBrand(3);" target="_top">
           <img alt="Old Navy" src="/assets/common/clear.gif"/>
          </a>
         </li>
         <li class="brand2">
          <a class="brand" href="http://www.bananarepublic.com" onclick="return gidBrandSiteConstruct.openBrand(2);" target="_top">
           <img alt="Banana Republic" src="/assets/common/clear.gif"/>
          </a>
         </li>
         <li class="brand10">
          <a class="brand" href="http://www.athleta.com" onclick="return gidBrandSiteConstruct.openBrand(10);" target="_top">
           <img alt="Athleta" src="/assets/common/clear.gif"/>
          </a>
         </li>
        </ul>
        <div class="" id="universalMarketingContainerTop">
         <!-- @TemplateContentLayout(templateRegionName:"gid.common.siteWide.universalBar.10000522.region1") -->
         <!-- BEGIN Content Item File: /content/0009/712/387/cn9712387.html -->
         <div class="9712387" id="contentItemContainer10000425">
          <div id="GOL_edfs">
           <a class="needsclick toggle-universal-modal" data-action-sheet="small" data-modal-size="standard" data-title="" data-url="/Asset_Archive/GPWeb/content/0009/712/387/assets/edfsLegal.html" href="#edfs">
            <img alt="Free shipping on all orders over $50. Free returns on all orders." id="GOL_edfs_img" src="/Asset_Archive/GPWeb/content/0009/712/387/assets/gap-edfs-us.png" style="width:100%; height:auto;"/>
           </a>
          </div>
         </div>
         <!-- END Content Item File: /content/0009/712/387/cn9712387.html -->
         <!--  new onesite template sub-regions -->
        </div>
        <div class="universalBarBackground" id="universalInlineBagContainer">
         <div id="signInContent">
          <h3 class="cssHide">
           Sign In Navigation:
          </h3>
          <ul>
           <li id="signInYourAccount">
           </li>
           <li id="signInSignIn">
           </li>
          </ul>
          <ul>
           <li id="topNavLanguageToggle">
            <div id="signInOrderStatus">
            </div>
           </li>
           <li id="shippingTo">
           </li>
          </ul>
         </div>
         <div id="inlineBagPlaceHolder">
          <a name="skipNavInlineBag">
          </a>
          <h3 class="cssHide">
           Shopping Bag:
          </h3>
          <div class="screenreader" id="inlineBagItemMessage">
           <input id="inlineBagItemMessageItem" name="inlineBagItemMessageItem"/>
          </div>
          <div class="clearfix" id="inlineBagHeader">
           <div class="checkoutButtonContainer">
            <a href="/buy/shopping_bag.do">
             <img alt="" class="universalButtonSprite universalSpriteTopnavInlinebagLogo" height="15" src="/assets/common/clear.gif" width="15"/>
            </a>
           </div>
           <div class="inlineBagTopLayerContainer">
            <div class="inlineBagSummary" id="inlineBagTopPriceLayer">
            </div>
            <div id="checkoutButtonContainer2">
             <a href="/buy/shopping_bag.do">
              <img alt="checkout" class="universalButtonSprite universalButtonSpriteCheckoutOn" id="inlineBagCheckOut1" src="/assets/common/clear.gif"/>
             </a>
            </div>
           </div>
          </div>
          <div id="inlineBagHeaderOpen" style="display:none;">
           <div class="checkoutButtonContainer">
            <a href="/buy/shopping_bag.do">
             <img alt="" class="universalButtonSprite universalSpriteTopnavInlinebagLogo" height="15" src="/assets/common/clear.gif" width="15"/>
            </a>
           </div>
           <div class="inlineBagTopLayerContainerOpen">
            <div class="inlineBagSummary" id="inlineBagTopPriceLayerOpen">
            </div>
           </div>
           <div id="closeButtonContainer">
            <img alt="close" class="universalButtonSprite universalSpriteInlineBagCloseOn" src="/assets/common/clear.gif"/>
           </div>
          </div>
          <div id="inlineBagClip">
           <div id="inlineBagContent" style="display:none;">
            <div id="inlineBagItems">
             <div id="gidInlineBag">
              <ul id="lineItems">
              </ul>
              <div class="clearfix" id="inlineBagSummary">
               <div class="itemCount" id="inlineBagSummaryItemCount">
               </div>
               <div class="subTotal" id="inlineBagSummarySubTotal">
                Subtotal:
                <span class="price" id="inlineBagSummarySubPriceLabel">
                </span>
               </div>
              </div>
             </div>
             <div id="universalInlineBagBottom">
              <div id="link1">
               <a href="/buy/shopping_bag.do">
                View your bag
               </a>
              </div>
              <div id="link2">
               <a href="/buy/shopping_bag.do">
                <img alt="checkout" class="button_check_out universalButtonSprite universalButtonSpriteCheckoutOn" id="inlineBagCheckOut2" src="/assets/common/clear.gif"/>
               </a>
              </div>
             </div>
            </div>
           </div>
           <div id="inlineCustomerAttributesPlaceholder">
           </div>
          </div>
          <div id="inlineBagMarketingClip">
           <div id="inlineBagMarketingContent" style="display:none;">
            <div id="gidInlineBagMarketingContainer">
            </div>
            <div id="gidInlineBagPromo">
             <div class="clearfix" id="inlineBagPromo" style="padding: 5px;">
              <span id="gidProductUpsellMessage" style="display:none;">
               <p class="promoMsg" id="productUpsellMsg">
               </p>
               <a class="promoLink" href="#" id="productUpsellLink">
               </a>
              </span>
              <span id="mupUpsellMessage" style="display:none;">
               <p class="promoMsg mupUpSellMsg" id="mupUpSellMsg">
               </p>
               <p class="promoMsg mupUpSellLink" id="mupUpSellLink">
               </p>
              </span>
              <span id="gwpPwpSelectionMessage" style="display:none;">
               <img id="selImageLink" src="/assets/common/clear.gif" style="display:none;"/>
               <p class="promoMsg">
                You've earned
                <span id="gwpPwpMsg">
                </span>
                <br/>
                <a href="" id="promoLink">
                </a>
                <br/>
                <span class="selLink" id="promoSelLink" style="display:none;">
                </span>
                <span class="promoTxt" id="staticPromoTxt" style="display:none;">
                 This item has been added to your bag.
                </span>
               </p>
              </span>
             </div>
             <div class="clearfix" id="inlineBagCrossSell" onclick="">
              <img id="crossSellImg" src="/assets/common/clear.gif"/>
              <p class="promoMsg">
               Complete the Look!
               <br/>
               <span id="crossSellOutfitMsg">
               </span>
              </p>
              <p class="promoMsg">
               Shop this outfit &gt;&gt;
              </p>
             </div>
            </div>
           </div>
          </div>
         </div>
        </div>
       </div>
      </td>
      <td class="universalBarRight" style="background:url(/content/0008/703/523/universalBar_bkg.png) repeat-x;">
      </td>
     </tr>
    </tbody>
   </table>
  </div>
  <div class="page-content nav-shiftee" id="bodyContainer">
   <noscript>
    <div class="siteErrorSpacer">
    </div>
   </noscript>
   <div class="siteErrorSpacer">
   </div>
   <div class="clearfix" id="topNav">
    <div class="topNavTopRow clearfix" id="universalTopNav">
     <div id="topNavCommon_region1">
      <!-- @TemplateContentLayout(templateRegionName:"gid.common.siteWide.divisionNavigation.10000509.region1") -->
      <script type="text/javascript">
       // Apply responsive bag body classname
if( window["responsiveBagAbTestOn"] != null &amp;&amp; responsiveBagAbTestOn ) {
    // Add responsiveBag classname to body
    document.body.className += ' responsiveShoppingBag';
}
      </script>
      <script type="text/javascript">
       /* Redirect Toddler Boy (6345) Division to Toddler (6413) */
if (location.pathname == '/browse/subDivision.do') {

    if (gidLib.getQuerystringParam("cid") == 6345) {
        var url = "/browse/subDivision.do?cid=6413";
        location = url;
    }
} 

/*end Redirect Toddler Boy (6345)subDivision to Toddler (6413)*/

/* Redirect Body DP (6345) subDivision to W Body New Arrivals */
if (location.pathname == '/browse/subDivision.do') {

    if (gidLib.getQuerystringParam("cid") == 12021) { 
        var url = "/browse/category.do?cid=1016012";
        location = url;
    }
} 

/*end Redirect Body DP (6345) subDivision to W Body New Arrivals*/

/* Redirect TB old category New Arrivals (63897) category to TB New Arrivals */
if (location.pathname == '/browse/category.do') {

    if (gidLib.getQuerystringParam("cid") == 63897) { 
        var url = "/browse/category.do?cid=1016138";
        location = url;
    }
} 

/*end Redirect TB old category New Arrivals (63897) category to TB New Arrivals */
      </script>
      <style type="text/css">
       /*--  new top NAV 2014 --*/

/* LAYOUT MODIFICATIONS */

#topNav { margin-top: 0px; }
#mainContentContainer { position: relative; }
#mainContentContainer #mainContent { float: right; }

/*full width mainContent */
div#bodyContainer div#mainContent { position: relative; }
#sideNav { position: relative; float: left; left: 162px; top:172px; display: block; opacity:0; width: 152px;margin-bottom: 172px; }
#logoWrapper { width: 50%; position: relative; float: left; }
.disableContent { display:none; margin:0; }

/*  NEW NAVIGATION STYLES  */
#globalLogo { position: absolute; width: 152px; height:152px;display:none; float: left; left: 0px; top:0px; }
#mainNavGOL { position: absolute; height: 300px; width: 152px;z-index:1;float: left; left: 0px; top:172px; display:none; }
#nav-menu-icon { height:26px; width:152px; display:block; }
#menu-icon { opacity:0; position:relative; }

.gpnavigation { height: 35px; list-style: none; outline: none; font-size: 1em; line-height: 1.8; margin: 0; padding: 0; font-family:  Helvetica, Arial, sans-serif; }
.gpnavigation a { display: block; margin: 0; padding: 0; outline: 0; text-decoration: none; color: #000d42; font-size: 18px; *font-size: 17px; text-align: center; letter-spacing: 0em; }
.gpnavigation a:hover, .gpnavigation a[class*="_selected"] { color: #005496; }
.gpnavigation a[class*="_selected"] { cursor: default; }

#promoBannerContainer { position: relative; }
#infoBar{ width: 990px; margin-bottom: 4px; margin-top: 4px; }
#infoBarContentWrapper { margin-bottom: 10px; margin-top: 10px; width: 420px; position: relative; float: right; }
#topNavSearchWrapper { width: 200px; }
#topSearch { width:100%; overflow:hidden; }

/* NAVIGATION GFOL STYLES */
#gfol-globalLogo { position: absolute; width: 152px; height:241px;display:none; float: left; left: 0px; top:0px;}
.gpnavigation-gfol { display:none; height: 35px; list-style: none; outline: none; font-size: 1em; line-height: 1.8; margin: 0; padding: 0; font-family:  Helvetica, Arial, sans-serif; }
.gpnavigation-gfol a { display: block; margin: 0; padding: 0; outline: 0; text-decoration: none; color: #000d42; font-size: 18px; *font-size: 17px; /*font-weight: 600;*/ text-align: center; letter-spacing: 0em; }
.gpnavigation-gfol a:hover, .gpnavigation-gfol a[class*="_selected"] { color: #000e42; }
.gpnavigation-gfol a[class*="_selected"] { cursor: default; }

#topNavGFOLContainer {display: none;}
#gfol-link {display: none;}


/* FACETS STYLES */
.facets-container { color: #020D41; }
#sideNavFacetsHeader { width: 152px; background-color: #EEE; color: #020d41; padding-bottom: 10px; }
div.facet { border-bottom: none; }
div.facet .facetName { color: #020D41; }
#facet_color { display: none; }
#facet_price { display: none; }
div.facet_style ul li.style-option { width:152px; color: #333; font-size: 11px; }
div.facet .sprite-button { background-image: url("/Asset_Archive/GPWeb/content/0009/889/016/assets/facet_sprite_gol.png"); }
div.facet #size_facet_button { background-position: 0 -30px; height: 24px; width: 120px; }
#facet_header_item_count { font-size:11px; }
div.facet div.flyout-panel { padding: 0 0 10px 5px; }

/* SIDE NAV CATEGORY STYLES */
#sideNavCategories { text-align:left; }
#sideNav ul.category { margin:0; }
#sideNav li.category { margin: 3px 0 0; }
#sideNav li.header { border:none; margin: 0px; padding: 0px; color: #000D42; font-size: 10px; font-weight: bold; margin-top: 10px; padding: 0; }
#sideNav li.categorySelected { padding:0px; margin:0px; }
#sideNav a.categorySelected:link, #sideNav a.categorySelected:visited, #sideNav a.categorySelected:active, #sideNav a.categorySelected:hover { margin: 0px; }
#sideNav li.header.firstHeader { padding: 0px; border:none; }


/*Category HTML banner */
#categoryNameHeader {background-color: #194783 !important;}

/* General Styles */
.floatLeft { float: left; }
.floatRight { float: right; }
.posRel { position: relative; }
.posAbs { position: absolute; }
.overHide { overflow: hidden; }

/*Search box styles */
#newInputBox_topSearchText { color: #666666; font-family: "Lucida Grande",Verdana,Arial,Sans-serif; font-size: 9px; margin: 0; padding: 0;}

/* Begin New Search */
#divwrapper_topSearchText { background-color:#ffffff !important; border: 1px solid #bbbbbb; background: url(/Asset_Archive/GPWeb/content/0009/889/016/assets/magnifier_bitmap.png) no-repeat; background-repeat:no-repeat; background-size: 11px 11px; background-position: 7px 5px; width:195px; height:20px; }
#newInputBox_topSearchText { width:160px; outline: none; border: 0px; font-family: Arial,Helvetica,Sans-serif; font-size: 11px; margin-top:3px; margin-left:22px; margin-right:4px; margin-right:1px\8; float:left; background-color:#ffffff; }
#closeSearchButton_topSearchText { margin-top:5px; margin-top:1px\8; display:none; position: absolute; left: 180px; }
/* End New Search */

.header-quick-links { float:left; top: 5px; font-family: "Helvetica Neue", Helvetica, Arial, sans-serif; position:relative; font-size: 8.5px; *font-size: 8px; /* ie7 */ }
.header-quick-links &gt; li { display: inline-block; float: left; color: #000; }
.header-quick-links &gt; li &gt; a { font-family: "Helvetica Neue", Helvetica, Arial, sans-serif; display: block; color: #000; }
.header-quick-links &gt; .slash-divider { margin: 0 5px; }

.fixed { position: fixed !important; }

/* iPads (landscape)  */
@media only screen 
and (min-device-width : 768px) 
and (max-device-width : 1024px) 
and (orientation : landscape) {
    /* Styles */
    .gpnavigation { display:none; }
}

/* iPads (portrait  */
@media only screen 
and (min-device-width : 768px) 
and (max-device-width : 1024px) 
and (orientation : portrait) {
    /* Styles */
    .gpnavigation { display:none; }
}

/* Desktops and laptops */
@media only screen 
and (max-width : 1250px) {
    /* Styles */
    .gpnavigation { display:none; }
}

@media only screen 
and (min-width : 1224px) {
    /* Styles */

}


/* Responsive bag CSS */
/* Media query breakpoints */
/*@smallMinWidth:       320px;  
@smallMaxWidth:     568px;
 
@mediumMinWidth:    (@smallMaxWidth + 1);
@mediumMaxWidth:    767px;
 
@largeMinWidth:     (@mediumMaxWidth + 1);
@largeMaxWidth:     1023px;
 
@xlargeMinWidth:    (@largeMaxWidth + 1);
@xlargeMaxWidth:    1280px;*/

/* WCD fixes of IT bugs */
/* Preview Bar fix */
.responsiveShoppingBag #previewBar input[type="radio"] { width:auto; height:auto }

/* Brand Button fix */
html.breakpoint-small .responsiveShoppingBag #universalBarTabs .universalBarBrandIcon-4, html.breakpoint-medium .responsiveShoppingBag #universalBarTabs .universalBarBrandIcon-4 { background: transparent url(/Asset_Archive/GPWeb/content/0009/889/016/assets/logo_spriteNew.png) no-repeat; }
html.breakpoint-small .responsiveShoppingBag .universalBarBrandMenu .universalBarBrandMenuIcon_4, html.breakpoint-medium .responsiveShoppingBag .universalBarBrandMenu .universalBarBrandMenuIcon_4 { background: transparent url(/Asset_Archive/GPWeb/content/0009/889/016/assets/logo_spriteNew.png) no-repeat; background-position: -109px -129px }
html.breakpoint-large .responsiveShoppingBag #universalBarTabs .universalBarBrandTab a div, html.breakpoint-xlarge .responsiveShoppingBag #universalBarTabs .universalBarBrandTab a div { background-image:url(/Asset_Archive/GPWeb/content/0009/889/016/assets/universal_bar_spritesNew.png) }

/* Shopping bag PL icon fix */
.svg .responsiveShoppingBag .smallBrandIcon-BG { background: transparent url(/Asset_Archive/GPWeb/content/0009/889/016/assets/badgeSmall.gif) no-repeat; }

/* ON Brand Button height/background color fix */
.responsiveShoppingBag #universalBarContainer #universalBarTabs { height:auto !important; }

/* Universal Bar marketing float fix */
.responsiveShoppingBag #universalMarketingContainerTop { float:left; overflow:visible }

/* Universal Bar BG image fix */
html.breakpoint-small .responsiveShoppingBag #universalBar .gidUniversalBar, html.breakpoint-medium .responsiveShoppingBag #universalBar .gidUniversalBar { background-image:url(/Asset_Archive/GPWeb/content/0009/889/016/assets/slice_full_universalBar.png); background-repeat:repeat-x; background-size:100% 100%; }
html.breakpoint-small .responsiveShoppingBag #universalBarTabs .selected div, html.breakpoint-medium .responsiveShoppingBag #universalBarTabs .selected div { height:77px }
html.breakpoint-large .responsiveShoppingBag #universalBar .gidUniversalBar, html.breakpoint-xlarge .responsiveShoppingBag #universalBar .gidUniversalBar { background:url(/Asset_Archive/GPWeb/content/0009/889/016/assets/universalBar_bkg.png) repeat-x }

/* Fix for inline bag container height */
.responsiveShoppingBag #universalInlineBagContainer { height:51px }
.responsiveShoppingBag #inlineBagPlaceHolder { height:21px }

/* Universal bar icon/shadow width fix */
html.breakpoint-large .responsiveShoppingBag .universalBarBrandTab, html.breakpoint-xlarge .responsiveShoppingBag .universalBarBrandTab { background:#fff }
html.breakpoint-large .responsiveShoppingBag .universalBarBrandTab div, html.breakpoint-xlarge .responsiveShoppingBag .universalBarBrandTab div { width:64px }

/* Gap logo selected in L/XL breakpoints */
html.breakpoint-large .responsiveShoppingBag .universalBarBrandTab .universalBarBrandIcon-1, html.breakpoint-xlarge .responsiveShoppingBag .universalBarBrandTab .universalBarBrandIcon-1 { width:69px; background-position:0px 0px }

/* Windy City EDFS postage stamp */
.responsiveShoppingBag #EDFS_container_seg_1 { width: 450px; height: 45px; margin-top: 3px; display:none }
.responsiveShoppingBag #EDFS_container_seg_2 { width: 450px; height: 45px; margin-top: 3px; display:none }
.responsiveShoppingBag #EDFS_container_seg_3 { width: 450px; height: 45px; margin-top: 3px; display:none }
.responsiveShoppingBag #EDFS_container_seg_4 { width: 450px; height: 45px; margin-top: 3px; display:none }
.responsiveShoppingBag #EDFS_container_seg_5 { width: 450px; height: 45px; margin-top: 3px; display:none }

.responsiveShoppingBag div#bodyContainer div#mainContent { position:static }
.responsiveShoppingBag #promoWrapper, .responsiveShoppingBag #promoDisruptor, .responsiveShoppingBag #promoDisruptor div, .responsiveShoppingBag #promoDisruptor p, .responsiveShoppingBag #promoBanner, .responsiveShoppingBag #promoBanner div, .responsiveShoppingBag #promoBanner p { box-sizing:content-box }

/* Small Breakpoint - all hidden */
    html.breakpoint-small .responsiveShoppingBag #topNav #universalTopNav { }
    html.breakpoint-small .responsiveShoppingBag #EDFS_container_seg_1 { width:126px; height:41px; margin:12px 0 0 12px; }
    html.breakpoint-small .responsiveShoppingBag #EDFS_container_seg_1 a { display:block; width:126px; height:41px; background-image:url(/Asset_Archive/BRWeb/content/0008/049/655/assets/1025_EDFS.png); background-size:100% 100%; }
    html.breakpoint-small .responsiveShoppingBag #EDFS_container_seg_1 a img { display:none }
    
    html.breakpoint-small .responsiveShoppingBag div#bodyContainer div#mainContent { margin-top:20px }
    @media all and (max-width: 450px) and (min-width: 320px) {
        html.breakpoint-small .responsiveShoppingBag #EDFS_container_seg_1 { width:100px; height:33px; margin:12px 0 0 8px; }
        html.breakpoint-small .responsiveShoppingBag #EDFS_container_seg_1 a { width:100px; height:33px }
    }

/* Medium Breakpoint */
    html.breakpoint-medium .responsiveShoppingBag #EDFS_container_seg_1 { width:126px; height:41px; margin:12px 0 0 12px; }
    html.breakpoint-medium .responsiveShoppingBag #EDFS_container_seg_1 a { display:block; width:126px; height:41px; background-image:url(/Asset_Archive/BRWeb/content/0008/049/655/assets/1025_EDFS.png); background-size:100% 100%; }
    html.breakpoint-medium .responsiveShoppingBag #EDFS_container_seg_1 a img { display:none }

    html.breakpoint-medium .responsiveShoppingBag #topNav #universalTopNav { display:block }
    html.breakpoint-medium .responsiveShoppingBag #topNav #infoBarContentWrapper { display:none }

/* Large Breakpoint */
    html.breakpoint-large .responsiveShoppingBag #topNav #universalTopNav { display:block }
    html.breakpoint-large .responsiveShoppingBag #topNav #infoBar { width:100%; box-sizing:content-box }
    html.breakpoint-large .responsiveShoppingBag #topNav #logoWrapper { width:auto }
    html.breakpoint-large .responsiveShoppingBag #topNav #infoBar .header-quick-links { padding:0 }
    html.breakpoint-large .responsiveShoppingBag #topNav #infoBar #topNavSearchWrapper { margin-top:8px }

    /* EDFS asset fix for mid-large- (768-1020) viewports */
    @media all and (max-width: 1020px) and (min-width: 768px) {
        html.breakpoint-large .responsiveShoppingBag #universalMarketingContainerTop { width:134px; height:58px }
        
        html.breakpoint-large .responsiveShoppingBag #EDFS_container_seg_1 { width:126px; height:41px; margin:6px 0 0 6px; }
        html.breakpoint-large .responsiveShoppingBag #EDFS_container_seg_1 a { display:block; width:126px; height:41px; background-image:url(/Asset_Archive/GPWeb/content/0009/889/016/assets/1025_EDFS.png); background-size:100% 100%; }
        html.breakpoint-large .responsiveShoppingBag #EDFS_container_seg_1 a img { display:none }

        html.breakpoint-large .responsiveShoppingBag #EDFS_container_seg_2 { display:none !important }
        html.breakpoint-large .responsiveShoppingBag #EDFS_container_seg_3 { display:none !important }
        html.breakpoint-large .responsiveShoppingBag #EDFS_container_seg_4 { display:none !important }
        html.breakpoint-large .responsiveShoppingBag #EDFS_container_seg_5 { display:none !important }
    }

/* X-Large Breakpoint */
    html.breakpoint-xlarge .responsiveShoppingBag #topNav #universalTopNav { display:block }
    html.breakpoint-xlarge .responsiveShoppingBag #topNav #infoBar { width:100%; box-sizing:content-box }
    html.breakpoint-xlarge .responsiveShoppingBag #topNav #infoBar .header-quick-links { padding:0 }
    html.breakpoint-xlarge .responsiveShoppingBag #topNav #infoBar #topNavSearchWrapper { margin-top:8px }
      </style>
      <div id="promoBannerContainer">
       <!-- BEGIN Content Item File: /content/0009/955/888/cn9955888.html -->
       <div class="9955888" id="contentItemContainer10000395">
        <section id="searchdexbannerGapUS">
         <!--  052915 v2-->
         <style type="text/css">
          #topNav, #promoWrapper, #promoDisruptor, #promoDisruptor div, #promoDisruptor p, #promoBanner, #promoBanner div, #promoBanner p { box-sizing:content-box }

#promoWrapper {
  width: 100%;
  margin: 0px auto 0;
  position:relative;
  margin-top: 0;
 /* display:none;*/
}

/*global banner stylings */ 
#promoBanner {
  z-index:1;
  margin: 0px auto 0;
  width:100%;
  height: 50px; /* height: background color for global banner */
  background-color:#000d42;
}

#backgroundbannerPromo {
  width:100%;
  height:50px;
  position: absolute;
  z-index: -1;
  background-color: #000d42; /*#000d42*/
  background-image: url('/Asset_Archive/GPWeb/content/0009/955/888/assets/071315_AMPM_FlashSale_BG_AM-ALL_pattern.gif'); /*if background image */ 
  background-repeat:repeat-x;
  
}

.promo-content {
      margin: 0 auto;
      width: 990px;
      /*background-color: #000d42;*/
      height:63px;
}

.promo-content p {
  text-align:center; /* left for VV GapCash */
 /* padding-bottom: 10px;*/
  padding-top: 20px;
  color: #000;
  overflow:hidden;
  height: 23px;
  margin: 0;
  text-transform: uppercase;
 
}


/*disruptor stylings */
#promoDisruptor {
  height:200px; /*update this to match image height */
  width:100%;
  display:none;
  z-index:1;
  margin:auto;
  margin-top:0px;
}

#backgroundDisrPromo {
  height:187px; /*update this to for background color height */
  background-color: #000d42; /* background color #000d42 */
  background-image: url('/Asset_Archive/GPWeb/content/0009/955/888/assets/071315_AMPM_FlashSale_DISR_AM-ALL_pattern.gif'); /*if background image */ 
  background-repeat:repeat-x;
  position: absolute;
  width: 100%;
  z-index: -1;

}

.disruptor_content {
    margin: 0 auto;
    width: 990px;
   /*background-color: #000d42;*/  /* background color */
   /*background-image: url(/Asset_Archive/GPWeb/content/0009/955/888/assets/background_pattern.png);*/
   /*background-repeat:repeat-x; */
   height: 200px; /*height = disruptor + toggle assets*/
}


.promoDefault, .promoA, .promoB, .promoC,.promoD, .promoDGM {
  display:none;
}

 p.promoDefault {
  /*promoDefault override */
  /*font-size: 14px;
  line-height: 16px;
  padding-bottom: 7px;
  padding-top: 13px;*/
}

.promoB {
  /*font size override */
  /*font-size:14px;*/

}



html.breakpoint-xlarge .responsiveShoppingBag #topNav { margin-top:0px;}
html.breakpoint-xlarge .responsiveShoppingBag #promoWrapper { margin-top:-5px;}
html.breakpoint-xlarge .responsiveShoppingBag #promoBanner {height:auto;background-color:#f4f4f4;}
html.breakpoint-xlarge .responsiveShoppingBag .promo-content {height:auto;width:50%;/*background-color: none;*/} 
html.breakpoint-xlarge .responsiveShoppingBag .promo-content p {height:100%;width:80%; margin:0 auto;}
html.breakpoint-xlarge .responsiveShoppingBag #toggle-down img {width:100%;} 

html.breakpoint-large .responsiveShoppingBag #topNav { margin-top:0px;}
html.breakpoint-large .responsiveShoppingBag #promoWrapper { margin-top:-5px;}
html.breakpoint-large .responsiveShoppingBag #promoBanner {height:auto;}
html.breakpoint-large .responsiveShoppingBag .promo-content {height:auto;width:100%;} 
html.breakpoint-large .responsiveShoppingBag .promo-content p {height:100%;width:80%; margin:0 auto;}
html.breakpoint-large .responsiveShoppingBag #toggle-down img {width:100%;} 

html.breakpoint-medium .responsiveShoppingBag #topNav { margin-top:0px;}
html.breakpoint-medium .responsiveShoppingBag #promoWrapper { margin-top:-5px;}
html.breakpoint-medium .responsiveShoppingBag #promoBanner {height:56px;font-size: 12px;}
html.breakpoint-medium .responsiveShoppingBag .promo-content {width:100%;background-color: none;} 
html.breakpoint-medium .responsiveShoppingBag .promo-content p {padding-top:10px;height:100%;width:100%;}
html.breakpoint-medium .responsiveShoppingBag #topNavBannerContainer { display:none; }

html.breakpoint-small .responsiveShoppingBag #topNavBannerContainer { display:none; }
html.breakpoint-small .responsiveShoppingBag #universalTopNavLayout { display:none; }


/*override for Gap Cash VV */
/*.promo-content p {  text-align:left; }*/

.offersOnlyBannerClass {position: absolute;z-index: 60; }
    
.offersAndRewardsBannerClass {position: absolute;z-index: 60;  }
    
.rewardsOnlyBannerClass {position: absolute;z-index: 60; }
         </style>
         <div id="promoWrapper">
          <div id="promoDisruptor">
           <div id="backgroundDisrPromo">
           </div>
           <div class="disruptor_content" style="">
            <div class="promoDefault" style="height: 187px; overflow: hidden;">
             <img alt="details and exclusions" id="hp-promo" src="/Asset_Archive/GPWeb/content/0009/955/888/assets/071315_AMPM_FlashSale_DISR_AM-US.gif" usemap="#disruptorMapA"/>
             <map name="disruptorMapA">
              <area alt="details and exclusions" class="PPC_popup" coords="34,5,988,186" href="javascript:void(0);" shape="rect">
              </area>
              <area alt="close the distruptor" class="toggle-up" coords="-7,8,31,44" href="javascript:void(0);" shape="rect">
              </area>
              <!-- &lt;area shape="rect" coords="568,163,662,179" href="http://view.email.gap.com/?j=febb1375776d037b&amp;m=fe9b13707564037c70&amp;ls=fef51c7775670c&amp;l=ff66107575&amp;s=fef8107377620c&amp;jb=ffce15&amp;ju=fe6610717762037d7511&amp;r=0" target="_blank" alt="print here" /&gt; -->
             </map>
            </div>
            <div class="promoB" style="height: 180px; overflow: hidden;">
             <img id="hp-promo" src="/Asset_Archive/GPWeb/content/0009/955/888/assets/071315_AMPM_FlashSale_DISR_PM-US.gif" usemap="#disruptorMapB"/>
             <map name="disruptorMapB">
              <area alt="details and exclusions" class="PPC_popup" coords="34,5,988,186" href="javascript:void(0);" shape="rect">
              </area>
              <area alt="close the distruptor" class="toggle-up" coords="-7,8,31,44" href="javascript:void(0);" shape="rect">
              </area>
             </map>
            </div>
            <!-- &lt;div id="toggle-up"&gt;&lt;img src="/Asset_Archive/GPWeb/content/0009/955/888/assets/041515_toggle_up.png" alt="close"&gt;&lt;/div&gt; -->
           </div>
          </div>
          <div id="promoBanner">
           <div class="promoDefault" id="backgroundbannerPromo" style="height:60px; overflow:hidden;">
           </div>
           <div class="GBpromoB" id="backgroundbannerPromo">
           </div>
           <div class="promo-content">
            <img alt="Global banner" class="promoDefault" id="hp-promo" src="/Asset_Archive/GPWeb/content/0009/955/888/assets/071315_AMPM_FlashSale_BG_AM-US.gif" usemap="#GBMap"/>
            <map name="GBMap">
             <area alt="details and exclusions" class="PPC_popup" coords="22,-8,981,47" href="javascript:void(0);" shape="rect">
             </area>
             <area alt="open the distruptor" class="down-button" coords="-3,5,22,45" href="javascript:void(0);" shape="rect">
             </area>
            </map>
            <img alt="Global banner" class="promoB" id="hp-promo" src="/Asset_Archive/GPWeb/content/0009/955/888/assets/071315_AMPM_FlashSale_BG_PM-US.gif" usemap="#GBMapB"/>
            <map name="GBMapB">
             <area alt="details and exclusions" class="PPC_popup" coords="22,-8,981,47" href="javascript:void(0);" shape="rect">
             </area>
             <area alt="open the distruptor" class="down-button" coords="-3,5,22,45" href="javascript:void(0);" shape="rect">
             </area>
            </map>
           </div>
          </div>
         </div>
         <script>
          // console.info('enlarge background');
function adjustGBWidth(elementsArray) {
  // get the width of the browser window viewport
  var viewport = document.viewport.getDimensions();
  var width = viewport.width;
  var elementsArrayLength = elementsArray.length;


  if (width &gt;=1000) {

    // loop through the different elements
    // and set their width to the viewport width
    // then we offset the left position
    for(var i=0; i &lt; elementsArrayLength; i++) {
      jQuery('#'+elementsArray[i]).css({
        "width": width + "px",
        "position":"relative",
        "margin-left": - (((width - 988)/2) - 1) + "px",
        "overflow": "hidden"
      });
    }
  }
}

//span the full width of the window
var elementsToAdjustBannerWidthArray = ["promoBanner","promoDisruptor"];

Event.observe(window, 'resize', function() {
  if( window["responsiveBagAbTestOn"] != null &amp;&amp; ! responsiveBagAbTestOn ) {
    adjustGBWidth(elementsToAdjustBannerWidthArray);
  }
});

jQuery(document).ready(function($) {
  if( window["responsiveBagAbTestOn"] != null &amp;&amp; ! responsiveBagAbTestOn ) {
    adjustGBWidth(elementsToAdjustBannerWidthArray);
  }
});
         </script>
         <script type="text/javascript">
          //Utility
if(typeof Object.create !== 'function'){
  Object.create = function(obj) {
    function F() {} ;
    F.prototype = obj;
    return new F();
  }
}

(function($, window, document, undefined ){
  var GlobalBannerDisruptor = {
    init: function(options, elem) {
      var self = this;
      self.elem = elem;
      self.$elem = $(elem); //jquery version of element

      self.options = $.extend( {}, $.fn.promo.options, options);// whatever user passes in will overwrite defaults
      
      //AB mode version
      //console.log("ABmode is " + self.options.modeVersionID);
      self.$modeVersionObj= $('.'+ self.options.modeVersionID);
      self.$modeVersionObj.show();
  
       //setup banner and disruptor obj
       self.$disruptorObj = $('#'+ self.options.disruptorID);
       self.$bannerObj = $('#'+ self.options.bannerID);
      
      var hasSeenDisruptor = document.cookie.indexOf("GBCookie"); //gets cookie
      //var hasSeenDisruptor = 0; 

      if(hasSeenDisruptor != "1") {
        self.autoDisrupt();
      }

      self.disruptOn();  

      if (self.options.disableToggle) {
        //hide toggle
        //toggle down imag display none, .promo-content background-color none
        $('.down-button').hide();
        $('.promo-content').css({ "background" : "none"});

      }

      //pop-up
      self.PPCpopUpOpen();  

    },

    autoDisrupt: function() {
      var self = this;

      var timerID = setTimeout(function() {
          self.disrupt();
      }, 1500);
    
      var timerID = setTimeout(function() {
          self.close();
      }, self.options.autoHideTime);

      var domain = (window.gidBrandSiteConstruct || {}).cookieDomain || null;
      var myCookieExpireTime = gidLib.getFutureDate({'hours':'2'});
      //set cookie
      gidLib.setCookie( "GBCookie", "gbCookie2hours", myCookieExpireTime, '/', domain );
      wcdBrandDisrupterDidFire = true;

    }, 

    autoHide: function() {

    },

    disrupt: function() {

      var self = this;
      //self.$disruptorObj = $('#'+ self.options.disruptorID);
      //self.$bannerObj = $('#'+ self.options.bannerID);

       var disableDisrupt = self.options.disableDisruptor;

       if (disableDisrupt == false) {
          self.$disruptorObj.slideDown('fast');
          self.$bannerObj.slideUp('fast');
        }

    },

    disruptOn: function() {
      var self = this;
      self.$elem.on({
        click: function(){
          self.disrupt();
        }
        // , mouseleave: function() {
        //       self.close();
        //   }
        });
    },

    close: function(){
      var self = this;
      self.$disruptorObj.slideUp('fast');
      self.$bannerObj.slideDown('fast');
    },

    PPCpopUpSettings: function() {
            var self = this;
           
            jbox.boxIt({
                width: self.options.ppcIDwidth,
                height: self.options.ppcIDheight,
                url: self.options.ppcIDURL
            });
    },
    
    PPCpopUpOpen: function() {
            var self = this;
            self.options.openPopUpID.on('click', function(){
                self.PPCpopUpSettings();
            });
    }
  };

  $.fn.promo = function(options) {
    return this.each(function(){
      var globalBannerDisruptor = Object.create(GlobalBannerDisruptor);
      globalBannerDisruptor.init(options, this);

    });
  };


  $.fn.promo.options = {
    containerID: 'promoContainer',
    bannerID: 'promoBanner',
    disruptorID : 'promoDisruptor',
    cookieName: 'gb_disruptor',
    disruptType: 'click',   //'hover' or 'click'
    modeVersionID: 'promoDefault', //AB version: promoA, promoB, etc
    openPopUpID: $('.PPC_popup'), //jQuery obj to activate jbox
    ppcIDURL: '/buy/promo_legal_details.do?promoId=XXXXX',  //jbox URL
    ppcIDwidth: 500, //jbox width
    ppcIDheight: 500, //jbox height
    disableDisruptor: false,
    disableToggle: false,
    autoHideTime: 7000
  };

})(jQuery, window, document);
         </script>
         <script type="text/javascript">
          /*set up Global Banner */

jQuery(function($) {

//tap/click to close disruptor
$('.toggle-up').click(function(WCD_tapToCloseDisruptor) {
  WCD_tapToCloseDisruptor.stopPropagation();
  $('#promoDisruptor').slideUp('fast');
  $('#promoBanner').slideDown('fast');
});



  // DEFAULT if in responsive shopping bag, disable disruptor DEFAULT
/*
  if( window["responsiveBagAbTestOn"] != null &amp;&amp; responsiveBagAbTestOn ) {
      //disable disruptor in shopping bag
      jQuery('#promoWrapper').promo({
          //options here
          disableDisruptor: true,
          modeVersionID: 'promoDefault', //AB version: promoA, promoB, etc
          ppcIDURL: '/buy/promo_legal_details.do?promoId=128701'  //jbox URL
      });

      
        //toggle down imag display none
        $('#down-button').hide();

  } else {
        //not in shopping bag
        jQuery('#promoWrapper').promo({
          //options here
          disableDisruptor: false,
          modeVersionID: 'promoDefault', //AB version: promoA, promoB, etc
          ppcIDURL: '/buy/promo_legal_details.do?promoId=128701'  //jbox URL
         });

        //toggle down imag display none
       // $('#down-button').hide();
  }
*/
});
         </script>
         <script type="text/javascript">
          //*********Timed Marketing FUNCTIONS
 var showTimedContent = {
   init: function() {

     myTimeURL = window.location.href;
     var currentDate = new Date(personalizationService.model.personalizationData.personalizationInfoV1.userContext.viewDate);
     var myStringURL = window.location.href;
     var myVarsURL = myStringURL.toQueryParams();
     if (myVarsURL.myUnixTimeStamp &gt; 0){
       myTimeEpoch = myVarsURL.myUnixTimeStamp;
     }
     if ( getQuerystringParam('myTime') != "" ){   // myTime var from URL. format: http://www.gol.wip.gidapps.com/browse/info.do?cid=92594&amp;mytime=04/23/2013 8:00 (in military time)
       var myTime = getQuerystringParam('myTime');
       myTimeEpoch = Date.parse( myTime );
     }else{
       myTimeEpoch = Date.parse( currentDate );
     }
      
     var timeTimestamp = myTimeEpoch;

     if (timeTimestamp &lt;= 1436814000000){  // Show AM PPC: 12am ET - Noon PST (3PM EST) 
      

        if( window["responsiveBagAbTestOn"] != null &amp;&amp; responsiveBagAbTestOn ) {
            jQuery('#promoWrapper').promo({
              //options here
              ppcIDURL: '/buy/promo_legal_details.do?promoId=135405',  //jbox URL
              disableDisruptor: true,
              modeVersionID: 'promoDefault' //AB version: promoA, promoB, etc
            });

         } else {
            jQuery('#promoWrapper').promo({
              //options here
              ppcIDURL: '/buy/promo_legal_details.do?promoId=135405',  //jbox URL
              disableDisruptor: false,
              modeVersionID: 'promoDefault' //AB version: promoA, promoB, etc
            });
        
         }
     }
    
     else {   // Show PM PPC - after 12:01 PM PST
      

        if( window["responsiveBagAbTestOn"] != null &amp;&amp; responsiveBagAbTestOn ) { 

          jQuery('#promoWrapper').promo({
            //options here
            ppcIDURL: '/buy/promo_legal_details.do?promoId=135407',  //jbox URL
            disableDisruptor: true, //disable disruptor
            modeVersionID: 'promoB' //AB version: promoA, promoB, etc
          });
        } else {

          jQuery('#promoWrapper').promo({
            //options here
            ppcIDURL: '/buy/promo_legal_details.do?promoId=135407',  //jbox URL
            disableDisruptor: false, //disable disruptor
            modeVersionID: 'promoB' //AB version: promoA, promoB, etc
          });
        }

     }

   }
  }

document.observe('personalizationData:ready', function() {
   if( personalizationService.model.personalizationData.personalizationInfoV1.userContext.viewDate ) {
     showTimedContent.init();
  }
}); 


//***********END TIME CONTENT
         </script>
         <script type="text/javascript">
          //ONESITE Responsive Nav fix
  
jQuery(document).ready(function() {
/* OMIT WHEN SEGMENT GOES TO 'C'
	if (respNavSegDivId == 'respNavSegDivIdA') {
		jQuery('#promoWrapper').css('margin-top','-20px');
		if( window["responsiveBagAbTestOn"] != null &amp;&amp; responsiveBagAbTestOn ) {
			//disable disruptor in shopping bag
			jQuery('#promoWrapper').css({'margin-top':'0px','text-align':'center'});

			} else {
			//not in shopping bag
			jQuery('#promoWrapper').css({'margin-top':'-20px','text-align':'center'});

			}
	}*/
	if ((respNavSegDivId == 'respNavSegDivIdC') || (respNavSegDivId == 'respNavSegDivIdD') || (respNavSegDivId == 'respNavSegDivIdE')) {
		jQuery('#promoBanner').css({'margin':'auto','width':"100%"});
		jQuery('#promoDisruptor').css({'margin':'auto','width':"100%"});
	}
	//ONESITE Responsive nav fix js:
	// If in the Responsive Nav SegB, remove the first ticker content so the second one functions correctly.
	if (respNavSegDivId == "respNavSegDivIdB") {
		jQuery('#responsiveUniversalBar').find('#contentItemContainer10000395').remove();

  		// Otherwise in Seg C, D, E remove the second one.
	} else if (respNavSegDivId != "respNavSegDivIdA") {
		jQuery('#topNav').find('#contentItemContainer10000395').remove();
	}

	// FIX SLIGHT OVERLAP OF PROMOWRAPPER ON UNI BAR
	if(location.pathname == "/buy/shopping_bag.do"){ 
			jQuery('#promoWrapper').css('margin-top','0px');
	}
});
         </script>
        </section>
       </div>
       <!-- END Content Item File: /content/0009/955/888/cn9955888.html -->
      </div>
      <div class="clearfix" id="infoBar">
       <div id="logoWrapper">
        <a href="/">
         <img alt="Gap" id="miniLogo" src="/Asset_Archive/GPWeb/content/0009/889/016/assets/logo_sm_full.gif"/>
        </a>
        <a href="javascript:void(0);">
         <img alt="menu icon" id="menuIcon" src="/Asset_Archive/GPWeb/content/0009/889/016/assets/fullwidth_menu_off.gif"/>
        </a>
       </div>
       <div id="infoBarContentWrapper">
        <ul class="header-quick-links">
         <li>
          <a href="/customerService/storeLocator.do?mlink=39813,713870,StoreLocator&amp;clink=713870">
           FIND A STORE
          </a>
         </li>
         <li class="slash-divider">
          /
         </li>
         <li>
          <a href="/browse/info.do?cid=46079&amp;mlink=39813,713870,CreditCard&amp;clink=713870">
           CREDIT CARD
          </a>
         </li>
         <li class="slash-divider">
          /
         </li>
         <li>
          <a href="/customerService/info.do?cid=2116&amp;mlink=39813,713870,GiftCard&amp;clink=713870">
           GIFTCARD
          </a>
         </li>
        </ul>
        <div class="floatRight" id="topNavSearchWrapper">
         <!-- begin New Search -->
         <div id="topSearch">
          <div class="posRel" id="divwrapper_topSearchText">
           <form action="/browse/search.do" id="topSearchForm" method="get" name="topSearchForm" onsubmit="javascript:return objSearchBox.checkInput(this);">
            <label for="newInputBox_topSearchText" style="display:none;">
             search
            </label>
            <input id="newInputBox_topSearchText" maxlength="" name="searchText" onclick="detectSearch();" onkeyup="objSearchBox.checkSearchText(this);closeSearchButtonShow_topSearchText();detectNoText();" type="text" value=""/>
           </form>
           <div id="closeSearchButton_topSearchText">
            <a href="javascript:void(0);" onclick="closeSearchButtonHideReset_topSearchText();">
             <img alt="Close Button" id="closeSearchButton" src="/Asset_Archive/GPWeb/content/0009/889/016/assets/close_bitmap.png"/>
            </a>
           </div>
          </div>
         </div>
         <!-- topSearch-->
         <!-- end New Search -->
        </div>
        <!--end topNavSearchWrapper-->
       </div>
       <!-- end infoBarContentWrapper-->
      </div>
      <!--end info bar -->
      <div id="topNavMobileContainer">
      </div>
      <div id="globalLogo">
       <a href="/">
        <img alt="gap" id="" src="/Asset_Archive/GPWeb/content/0009/889/016/assets/logo_152.gif"/>
       </a>
      </div>
      <div id="gfol-globalLogo">
       <a href="/browse/info.do?cid=48620&amp;mlink=39813,713870,GFOL_MainNav_HP&amp;clink=713870">
        <img alt="gap" id="" src="/Asset_Archive/GPWeb/content/0009/889/016/assets/hp_gfol_logo.gif"/>
       </a>
      </div>
      <div id="mainNavGOL">
       <div id="nav-menu-icon">
        <div id="menu-icon">
         <a href="javascript:void(0);">
          <img alt="menu" id="menu-icon-image" src="/Asset_Archive/GPWeb/content/0009/889/016/assets/leftnav_menu.gif" style="display:block;height:26px;width:152px;"/>
         </a>
        </div>
       </div>
       <ul class="gpnavigation">
        <li>
         <a class="division5643_notSelected" href="/browse/subDivision.do?cid=5646&amp;mlink=5058,9713870,visnav&amp;clink=9713870" id="division5643" onclick="return contentItemLink(this,'','');">
          Women
         </a>
        </li>
        <li>
         <a class="division83062_notSelected" href="/browse/subDivision.do?cid=83062&amp;mlink=5058,9713870,visnav&amp;clink=9713870" id="division83062">
          GapFit
         </a>
        </li>
        <li>
         <a class="division5997_notSelected" href="/browse/division.do?cid=5997&amp;mlink=5058,9713870,visnav&amp;clink=9713870" id="division5997">
          Maternity
         </a>
        </li>
        <li>
         <a class="division5063_notSelected" href="/browse/subDivision.do?cid=5065&amp;mlink=5058,9713870,visnav&amp;clink=9713870" id="division5063">
          Men
         </a>
        </li>
        <li>
         <a class="division6256_notSelected" href="/browse/subDivision.do?cid=6256&amp;mlink=5058,9713870,visnav&amp;clink=9713870" id="division6256">
          Girls
         </a>
        </li>
        <li>
         <a class="division6172_notSelected" href="/browse/subDivision.do?cid=6172&amp;mlink=5058,9713870,visnav&amp;clink=9713870" id="division6172">
          Boys
         </a>
        </li>
        <li>
         <a class="division6413_notSelected" href="/browse/subDivision.do?cid=6413&amp;mlink=5058,9713870,visnav&amp;clink=9713870" id="division6413">
          Toddler
         </a>
        </li>
        <li>
         <a class="division6487_notSelected" href="/browse/subDivision.do?cid=6487&amp;mlink=5058,9713870,visnav&amp;clink=9713870" id="division6487">
          Baby
         </a>
        </li>
        <li id="gfol-link" style="line-height: 2.8">
         <a class="gfol_division" href="/browse/info.do?cid=48620&amp;mlink=39813,713870,MainNav_GFOLHP,visnav&amp;clink=713870" id="division48620">
          Gap Factory
         </a>
        </li>
       </ul>
       <ul class="gpnavigation-gfol">
        <li>
         <a class="division1014714_notSelected" href="/browse/division.do?cid=1014714&amp;mlink=39813,9713870,GFOL_MainNav_W,visnav&amp;clink=9713870" id="division1014714">
          Women
         </a>
        </li>
        <li>
         <a class="division1014823_notSelected" href="/browse/division.do?cid=1014823&amp;mlink=39813,9713870,GFOL_MainNav_M,visnav&amp;clink=9713870" id="division1014823">
          Men
         </a>
        </li>
        <li>
         <a class="division1015086_notSelected" href="/browse/division.do?cid=1015086&amp;mlink=39813,9713870,GFOL_MainNav_Kids,visnav&amp;clink=9713870" id="division1015086">
          Kids
         </a>
        </li>
        <li>
         <a class="division1015088_notSelected" href="/browse/division.do?cid=1015088&amp;mlink=39813,9713870,GFOL_MainNav_TD,visnav&amp;clink=9713870" id="division1015088">
          Toddler
         </a>
        </li>
        <li>
         <a class="division1015088_notSelected" href="/browse/division.do?cid=1015088&amp;mlink=39813,9713870,GFOL_MainNav_Baby,visnav&amp;clink=9713870" id="division1015088">
          Baby
         </a>
         <!--li&gt;&lt;a id="division101671" class="deals_division" href="/browse/info.do?cid=1016171&amp;mlink=39813,9713870,GFOL_MainNav_Deals&amp;clink=9713870"&gt;Deals&lt;/a-->
        </li>
        <li style="line-height: 2.8">
         <a class="gap_division" href="/browse/home.do?cid=5058&amp;mlink=39813,9713870,GFOL_MainNav_GOLHP,visnav&amp;clink=9713870" id="division5058">
          Gap.com
         </a>
        </li>
       </ul>
      </div>
      <div class="clearfix" id="topNavBottomBannerContainer">
       <!--Container 2 -->
       <!--Container 3 -->
       <!--Container 4 -->
       <!--Container 5 -->
      </div>
      <div class="clearfix" id="topNavGFOLContainer">
       <!--Container 6 -->
       <!-- BEGIN Content Item File: /content/0009/938/585/cn9938585.html -->
       <div class="9938585" id="contentItemContainer10000390">
        <style>
         /*Menu show up on hover*/
.HPBanner1Dropdown .caret {
    margin-left: 4px;
    margin-top: 4px;
    } 

.HPBanner1Dropdown .hp-btnImage {
    display: inline-block;
/*    background: #e95c55;*/
    background: #fff;
    padding: 6px 5px 5px 10px;
    margin: 0;
    border: 2px solid #000d42;
    color: #000d42;
    font-weight: 500;
    font-size: 12px;
    line-height: 12px;
    letter-spacing: 1px;
    cursor: pointer;
    text-transform: uppercase;
    font-family: "Helvetica Neue", Helvetica, Arial, sans-serif;
    /*width:164px;*/
    text-align: left;
/*    position: relative;*/
    z-index:12;
}

/*.HPBanner1Dropdown .hp-btnImage .dropdownPromoWidth{
  font-size: 14px !important;
}*/
.HPBanner1Dropdown .list{
    border-bottom:2px solid #000d42;
    /*This is for drop down menu slide up*/
    /*border-top:1px solid #000d42;*/
    border-left:2px solid #000d42;
    border-right:2px solid #000d42;
}
.HPBanner1Dropdown ul{
    padding:0;
    /*width:164px;*/
    margin:0;
    transition-property: all;
    transition-duration: 0.5s;
    height:0px;
    position:absolute;
    top:27px;
    /*bottom:2px;*/
    z-index:9;
    overflow:hidden;
}
.HPBanner1Dropdown ul li a{
    text-decoration: none;
    color: #000d42;
}

.HPBanner1Dropdown ul li a:hover, .HPBanner1Dropdown ul li a:active{
    color:#ffffff;
    background: rgb(0,15,50);
}

.HPBanner1Dropdown .list a{
    display: block;
   /* background: #e95c55;*/
    background: #fff;
    padding: 5px 5px 4px 9px;
    margin: 0;
    border: none;
 /*   color: #000d42;*/
    font-weight: 500;
    font-size: 12px;
    line-height: 14px;
    letter-spacing: 1px;
    cursor: pointer;
    text-transform: uppercase;
    font-family: "Helvetica Neue", Helvetica, Arial, sans-serif;
}
.HPBanner1Dropdown{
    position:absolute;
    /*top: 433px;*/
    z-index: 10;
    /*right:131px;*/
    /*left: 50px;*/
    -webkit-user-select: none;
    -webkit-touch-callout: none;  
}
.HPBanner1Dropdown:hover ul, .HPBanner1Dropdown .hover_effect ul, .HPBanner1Dropdown:active ul{
    display:block;
    height:340px;
}

.HPBanner1Dropdown .gfol-caret {
    border-color: transparent transparent transparent #000d42;
    border-left: 4px solid #000d42;
    border-right: 4px solid transparent;
    border-style: solid;
    border-width: 4px 4px 4px 4px;
    content: "";
    display: inline-block;
    height: 0;
    width: 0;
    margin-left: 2px;
    margin-bottom: 1px;
}
.dropdownPromoWidth{
    width: 116px;
}
.dropdownPromoPosition{
/*  left: 966px;*/
/*  top: 329px;*/
/*  right: 157px;
  top: 242px;*/
  top: -55px;
  right: -844px;
  position: relative;
}
.HPBanner1Dropdown .dropdownPromoPosition{
	position: relative;
}
.hp-btnImage .dropdownPromoWidth{
	position: absolute;
}
        </style>
        <div id="gfol-banner" style="height:70px">
         <a data-jbox-height="450" data-jbox-url="/buy/promo_legal_details.do?promoId=134241" data-jbox-width="500" href="javascript:void(0);" rel="jbox">
          <img alt="15% off clearance" id="my_image" src="/Asset_Archive/GPWeb/content/0009/938/585/assets/071215_GB_CLEARANCE_15_UPDATED.gif"/>
         </a>
         <div class="HPBanner1Dropdown dropdownPromoPosition">
          <button class="hp-btnImage dropdownPromoWidth" style="font-size: 12px;" type="submit">
           SHOP NOW
           <span class="gfol-caret">
           </span>
          </button>
          <ul class="dropdownPromoWidth">
           <li class="list">
            <a href="/browse/category.do?cid=1023990&amp;mlink=48620,9938585,GFOL_GTB_W&amp;clink=9938585">
             Women
            </a>
           </li>
           <li class="list">
            <a href="/browse/category.do?cid=1024106&amp;mlink=48620,9938585,GFOL_GTB_M&amp;clink=9938585">
             Men
            </a>
           </li>
           <li class="list">
            <a href="/browse/category.do?cid=1025180&amp;mlink=48620,9938585,GFOL_GTB_G&amp;clink=9938585">
             Girls
            </a>
           </li>
           <li class="list">
            <a href="/browse/category.do?cid=1025193&amp;mlink=48620,9938585,GFOL_GTB_B&amp;clink=9938585">
             Boys
            </a>
           </li>
           <li class="list">
            <a href="/browse/category.do?cid=1025228&amp;mlink=48620,9938585,GFOL_GTB_BabyG&amp;clink=9938585">
             Baby Girl
            </a>
           </li>
           <li class="list">
            <a href="/browse/category.do?cid=1025227&amp;mlink=48620,9938585,GFOL_GTB_BabyB&amp;clink=9938585">
             Baby Boy
            </a>
           </li>
           <li class="list">
            <a href="/browse/category.do?cid=1033050&amp;mlink=48620,9938585,GFOL_GTB_Newborn&amp;clink=9938585">
             Newborn
            </a>
           </li>
          </ul>
         </div>
        </div>
        <script type="text/javascript">
         jQuery(function($) {

    if(window.location.href.indexOf("/browse/info.do?cid=48620") &gt; -1){
    	$('.dropdownPromoPosition').css('top','-55px').css('right','-844px');
    };

    // if (gidLib.getQuerystringParam("cid") != 48620){
    //     $('#dp-wrapper').css('margin-top','-30px');
    // };

    var imgsrc = $('#my_image').attr('src');
    $('#my_image').attr('src', '');
    $('#my_image').attr('src', imgsrc);

});
        </script>
       </div>
       <!-- END Content Item File: /content/0009/938/585/cn9938585.html -->
       <!--Container 7 -->
      </div>
      <script type="text/javascript">
       window["mainNavGOLInit"] = false;

jQuery(function($) {
    var h = $('#sideNav').height();
    var hmain = $('#mainContent').height();

    //console.log(h);
    //console.log(hmain);

    var logoh = 182; //logo 152px + 20px margin + 10px additional padding

    //APPEND LOGO AND NAVIGATION TO SIDE NAV PAGES
	if (location.pathname == "/browse/category.do" || location.pathname == "/browse/categorySearch.do" || location.pathname == "/browse/subDivision.do"  || location.pathname == "/browse/division.do" || location.pathname == "/browse/search.do" || location.pathname == "/browse/outfit.do" || location.pathname == "/browse/product.do"){

		//attach logo and nav to left nav content

		var navContainer = $('div#mainContentContainer');

		if (navContainer != undefined) {
			$(navContainer).append( $( "#mainNavGOL" ) );
			$( "#mainNavGOL" ).show();
		}

        // detect if GFOL content display correct navigation content 
		if (omni.strCurrentPageName.indexOf("Factory") &gt; 0) {

           // console.info(omni.strCurrentPageName);
            $('.gpnavigation').hide();
            $('.gpnavigation-gfol').show();

            $('#mainNavGOL').css('top', 241 +'px');
            $('#sideNav').css('top', 241 +'px');
            $('#sideNav').css('margin-bottom', 241 +'px');

			//gfol logo
			if (navContainer != undefined) {
				$(navContainer).append( $( "#gfol-globalLogo" ) );
				$( "#gfol-globalLogo" ).show();
			}

			//set min-height of maincontainer
			if (h != undefined) {
				 $('#mainContent').css('minHeight',h + 241 +'px');
				 $('#sideNav').css('minHeight',h + 'px');
			}

		} else {
			/*SHOW GAP SITE NAVIGATION */
			//site logo
			if (navContainer != undefined) {
				$(navContainer).append( $( "#globalLogo" ) );
				$( "#globalLogo" ).show();
			}

			//set min-height of maincontainer
			if (h != undefined) {

				 $('#mainContent').css('minHeight',h + logoh +'px');
				 $('#sideNav').css('minHeight',h + logoh + 160 +'px');
			}
        } // end detect if GFOL

		document.observe('categoryFacetedSearchGrid:ready',function(){ 
			//set min-height of left nav if longer than main content
			if (hmain != undefined &amp;&amp; h != undefined) {

				var sidenavHeight = h + logoh;
				var maincontentHeight = hmain;

				// console.log(sidenavHeight);
				// console.log(maincontentHeight);
				if (omni.strCurrentPageName.indexOf("Factory") &gt; 0) {
                	var sidenavHeight = h + 241;
                	if  (sidenavHeight &gt; maincontentHeight) {
                    	$('#sideNav').css('minHeight',sidenavHeight + 241 + 'px'); //adding space for lnc promo and logo
                	}
               // console.info('GFOL ');

				} else { 
                	if  (sidenavHeight &gt; maincontentHeight) {
                    	$('#sideNav').css('minHeight',sidenavHeight + 160 + 172 +'px'); //adding space for lnc promo and logo
                	}
            	} // end omni
        	} // end hmain

		}); // end categoryFacetedSearchGrid
 
        //on page load animate navigation
        var sideNavContainer = $('#sideNav');
		if (sideNavContainer) {
			$('#mainNavGOL').animate({
				left: "-162px",
				}, 700, function() {
			// Animation complete.
			});

			$('#sideNav').animate({
				left: "0px",
				opacity: 100,
			  }, 700, function() {
				// Animation complete.  
			});
        } // end if sideNavContainer

        //hide mini logo/hamburger lockup
       $(logoWrapper).addClass('disableContent');
       
       $("#infoBar").css({ "margin" : "0px"});
       $("#infoBarContentWrapper").css({ "margin-top" : "0px"});


    } else {
        //attach nav on full width pages, exclude hp
		jQuery(window).ready(function() {
			if (window["mainNavGOLInit"] == false) {
				var infoBarMargin = '0';
				if((window["responsiveBagAbTestOn"] != null &amp;&amp; responsiveBagAbTestOn) || window["respNavSegDivId"] == "respNavSegDivIdB") {
					infoBarMargin = '30';
				}

				if ($(logoWrapper).hasClass('disableContent') != 1) {

					var navContainer = jQuery('div#mainContent');
					if (navContainer != undefined) {
						jQuery(navContainer).append( jQuery( '#mainNavGOL' ) );
						jQuery( '#mainNavGOL' ).css({ "left" : "-162px", "top":"0px","display":"block","opacity":"0"});
						//jQuery( '#infoBar' ).css({ "margin-top" : "12px"});
						jQuery( '#infoBar' ).css({ "margin-top" : infoBarMargin + "px"});
						jQuery( '#nav-menu-icon ' ).css({ "display" : "none"});
					} // if navContainer
					
				} // end if logoWrapper
													
				window["mainNavGOLInit"] = true;
			} // end if window["mainNavGOLInit"]                
        })// end jquery
    } // end if
}); 

jQuery(function($) {
	//move main nav into side nav space
	$('#topNavMain').on('click', function(){

		// detect if GFOL content display correct navigation content 
		if (omni.strCurrentPageName.indexOf("Factory") &gt; 0){
  
			//console.info(omni.strCurrentPageName);
			//$('.gpnavigation').hide();
			$('.gpnavigation-gfol').show();
			
			
		} else {

			$('.gpnavigation').show();

		}
	
		$('#mainNavGOL').animate({
			left: "0px",
		}, 700, function() {
			  // Animation complete.
			  $( '#menu-icon' ).css({ "opacity":"100"});
			});

		$('#sideNav').animate({
			left: "162px",
			opacity: 0,
		  }, 700, function() {
			// Animation complete.  
		  });
	
	});

	//move main nav left of side nav space
	$('#menu-icon').on('click', function(){

		$( '#menu-icon' ).css({ "opacity":"0"});

		$('#mainNavGOL').animate({
			left: "-162px",
		}, 700, function() {
			  // Animation complete.
			});

		$('#sideNav').animate({
			left: "0px",
			opacity: 100,
		  }, 700, function() {
			// Animation complete.  
		  });

	});

	//full width nav show/hide 
	$('#menuIcon').on('click', function(){
		if ($('#menuIcon').hasClass('activate-menu') != 1) {
			$('#menuIcon').attr('src','/Asset_Archive/GPWeb/content/0009/889/016/assets/fullwidth_menu_on.gif');
			$('.gpnavigation').show();    
			$('#mainNavGOL').animate({
				left: "0px",
				opacity:.9
			}, 700, function() {
				  // Animation complete.
				  $('#menuIcon').addClass('activate-menu');
				});

		   $("#mainNavGOL").css({ "background-color" : "#FFF", "display" : "block", "border":"solid 1px #000"});

		} else {

			$('#menuIcon').attr('src','/Asset_Archive/GPWeb/content/0009/889/016/assets/fullwidth_menu_off.gif');
			$('#mainNavGOL').animate({
				left: "-162px",
				}, 700, function() {
				  // Animation complete.
				  $('#menuIcon').removeClass('activate-menu');
			});
		   $("#mainNavGOL").fadeOut('fast');
		}
	});
	//jQuery end
});
      </script>
      <script type="text/javascript">
       jQuery(function($) {
	/* GFOL SITE ELEMENT OVERRIDES */
	//if ((omni.strCurrentPageName.indexOf("GFOL") &gt; 0) || (window.location.href.indexOf("cid=48620") &gt; 0) || (window.location.href.indexOf("cid=1016171") &gt; 0)){
	if (location.pathname == "/browse/category.do" || location.pathname == "/browse/categorySearch.do" || location.pathname == "/browse/subDivision.do"  || location.pathname == "/browse/division.do" || location.pathname == "/browse/search.do" || location.pathname == "/browse/outfit.do" || location.pathname == "/browse/product.do"){

        if (omni.strCurrentPageName.indexOf("Factory") &gt; 0){
            Event.observe(window, "load", function() {
                //change HTML category header CSS background color
                if( $('#categoryNameHeader') ) {
                    $("#categoryNameHeader").css("cssText", "background-color: #000e42 !important;display:block;") //GFOL category HTML banner  
                }          

                //GFOL Menu CTA 
                $("#menu-icon-image").attr("src", "/Asset_Archive/GPWeb/content/0009/889/016/assets/GFS_DP_MENU_S2.gif");  
                
                //hide promo
                jQuery('#promoBannerContainer').hide();

                //topnav
                jQuery('#topNavGFOLContainer').show();

                //hide top header
                jQuery('#infoBar').hide();

                //footer link update
                jQuery('#footer').hide();
                jQuery('#gfol-footer').show();

            });
       } // factory
    }
	/* END GFOL SITE ELEMENT OVERRIDES */

	/* GFOL PRODUCT PAGE OVERRIDES: HIDE REVIEWS, SOCIAL ICONS, RIS */
    if (location.pathname == "/browse/product.do") {    

		if (omni.strCurrentPageName.indexOf("Factory") &gt; 0) {
			Event.observe(document, 'productPage:ready', function(){
				// detect if GFOL content display correct navigation content 
				//var productReviewContainer = jQuery('#BVRRContainer');
				//var productReviewStars = $('#BVRRSummaryContainer');
				//var productReviewsContainer = $('#BVRRSummaryContainer');
				var productRIScontainer = $('#findInStoreTabWindow');
				var productSocialPin = $('#pinItDiv');
				var productSocialFBLike = $('#fb_like');
					
				//if (productReviewContainer) {
					//console.info('reviews container hidden');
					//setTimeout(function(){ productReviewContainer.hide(); }, 1000);						
				//}
				//if (productReviewStars) {
					//console.info('reviews stars hidden');
					//productReviewStars.hide();
				//}
				//if (productReviewsContainer) {
					//console.info('reviews container hidden');
					//productReviewsContainer.hide();
				//}
					if (productRIScontainer) {
						//console.info('ris container hidden');
						productRIScontainer.hide();
					}
					// if (productSocialPin) {
					// 	//console.info('pinterest hidden');
					// 	productSocialPin.hide();
					// }
					// if (productSocialFBLike) {
					// 	//console.info('facebook like hidden');
					// 	productSocialFBLike.hide();
					// }
			});
		}            
	}  
	/* END GFOL PRODUCT PAGE OVERRIDES */
//jQuery end
});
      </script>
      <script type="text/javascript">
       /*SEARCH */
 var searchPage = false;
                            
function closeSearchButtonShow_topSearchText(){
    $('closeSearchButton_topSearchText').style.display = "block";
}
                            
function closeSearchButtonHideReset_topSearchText(){
    $('topSearchForm').reset();
    $('closeSearchButton_topSearchText').style.display = "none";
    $('newInputBox_topSearchText').value = 'Search';
}

function detectNoText(){
    if( $('newInputBox_topSearchText').value == ''){        
        $('newInputBox_topSearchText').value = '';
        $('closeSearchButton_topSearchText').style.display = "none";
    }
}
                            
function detectSearch(){
    if( $('newInputBox_topSearchText').value == 'Search' || searchPage == true){
        $('topSearchForm').reset();
    }
}

var svgSwitch = function(){
    if(window.SVGAngle || document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure", "1.1")){
        $('divwrapper_topSearchText').style.background = "url(/Asset_Archive/GPWeb/content/0009/889/016/assets/magnifier_vector.svg) no-repeat";
        $('divwrapper_topSearchText').style.backgroundSize = "11px 11px";
        $('divwrapper_topSearchText').style.backgroundPosition = "7px 5px";
                                    
        $('closeSearchButton').src = '/Asset_Archive/GPWeb/content/0009/889/016/assets/close_vector1.svg';
                                    
    }
    if(clientBrowser.isFirefox3 == true){
        $('divwrapper_topSearchText').style.background = "url(/Asset_Archive/GPWeb/content/0009/889/016/assets/magnifier_bitmap.png) no-repeat";
        $('divwrapper_topSearchText').style.backgroundSize = "11px 11px";
        $('divwrapper_topSearchText').style.backgroundPosition = "7px 5px";
        $('closeSearchButton').src = '/Asset_Archive/GPWeb/content/0009/889/016/assets/close_bitmap.png';
    }else{
	}
                            
    var searchText = document.URL.toQueryParams().searchText;
                                
    if (searchText !== undefined) {
        searchPage = true;
        var searchTextResult = document.URL.toQueryParams().searchText.split('+').join(' ');
        $('newInputBox_topSearchText').value=searchTextResult;
    }else{
        $('newInputBox_topSearchText').value = 'Search';
    }
}
                            
document.observe("dom:loaded",svgSwitch);

// Responsive bag JS overrides
if( window["responsiveBagAbTestOn"] != null &amp;&amp; responsiveBagAbTestOn ) {
    
    // Update EDFS popups - wipe inline CSS and jbox popups
    jQuery('#EDFS_container_seg_1, #EDFS_container_seg_2, #EDFS_container_seg_3, #EDFS_container_seg_4, #EDFS_container_seg_5, #edfsContainer').attr('style','');
    
    jQuery(document).ready( function() {
        var edfsPostageStamp = jQuery('#EDFS_container_seg_1 a');
        var edfsPopupStr = '/buy/info.do?cid=47471';
        var edfsPopupWidth = '472';
        var edfsPopupHeight = '450';
        if( jQuery(window).width() &lt; 569 ) {
            //edfsPopupStr = '/Asset_Archive/GPWeb/content/0008/638/040/assets/edfs_popup.html';
            edfsPopupWidth = '300';
            edfsPopupHeight = '350';
        }
        
        if( edfsPostageStamp.length &gt; 0 ) {
            edfsPostageStamp.attr({ 'onclick':'', 'rel':'jbox', 'data-jbox-url':edfsPopupStr, 'data-jbox-width':edfsPopupWidth, 'data-jbox-height':edfsPopupHeight });
        }       
        jbox.checkDataAttributes();
    });
}
      </script>
      <!--  ONESITE BSeg Templates -->
     </div>
    </div>
   </div>
   <a name="skipNavMainContent">
   </a>
   <div id="mainContent">
    <h3 class="cssHide">
     Main Content:
    </h3>
    <div id="landingVariant10000774">
     <div id="landingMainContainer10000774">
     </div>
    </div>
   </div>
   <a name="skipNavFooter">
   </a>
   <div id="footer">
    <div id="footer_BrandContainer">
     <div id="footer_brand_region1">
      <!-- @TemplateContentLayout(templateRegionName:"gid.common.siteWide.brand.footers.region1") -->
      <link href="/Asset_Archive/GPWeb/content/0009/208/347/footerRegionCSS.css" rel="stylesheet" type="text/css"/>
      <!--style type="text/css"&gt;
#footer { position:relative; background-color:#ad132a; }
#footer_brand_region2 { background-color:#ad132a; }
#footer { color: #FFF; }
#footer a:link, #footer a:visited, #footer a:active { color: #fff; }
#copyRightFooter { color:#fff; width: 990px; margin-top: 10px; text-align: center; margin-bottom: 10px;}
#copyRightFooter p { color:#fff; padding: 5px; color:#fff }
.text2 { color:#fff }
#footer-background-wrapper { background-color:#ad132a; height:100%; z-index:-1;position:absolute;}

/* iPads (landscape) ----------- */
@media only screen 
and (min-device-width : 768px) 
and (max-device-width : 1024px) 
and (orientation : landscape) {
	/* Styles */
	/* #footer-background-wrapper { margin-left: -10px; width: 1010px; } */
}

/* iPads (portrait) ----------- */
@media only screen 
and (min-device-width : 768px) 
and (max-device-width : 1024px) 
and (orientation : portrait) {
	/* Styles */
	/* #footer-background-wrapper { margin-left: -10px; width: 1010px; } */
}

/* Desktops and laptops ----------- */
@media only screen 
and (max-width : 1250px) {
    /* Styles */
}

@media only screen 
and (min-width : 1224px) {
    /* Styles */
    /*Expand footer background color */
    /* #footer-background-wrapper { position:absolute; margin-left:-1000px; margin-right:0; width:5000px; z-index:-1; height: 100%; background-color:#000d42; } */
}

/* Responsive CSS */
#footer_BrandContainer #brandFooter_mobile { display:none; padding-left:10px; color:#000 }
#footer_BrandContainer #brandFooter_mobile a { color:#000; font-size:14px }

/* Small Breakpoint */
	html.breakpoint-small .responsiveShoppingBag #bodyContainer #footer { background:#fff }
	html.breakpoint-small .responsiveShoppingBag #bodyContainer .gidFooterNav { display:block }
	html.breakpoint-small .responsiveShoppingBag #footer_brand_region1 { display:none }
	html.breakpoint-small .responsiveShoppingBag #footer-background-wrapper { display:none }
	html.breakpoint-small .responsiveShoppingBag #brandFooter_mobile { display:block }

/* Medium Breakpoint */
	html.breakpoint-medium .responsiveShoppingBag #bodyContainer #footer { background:#fff }
	html.breakpoint-medium .responsiveShoppingBag #bodyContainer .gidFooterNav { display:block }
	html.breakpoint-medium .responsiveShoppingBag #footer_brand_region1 { display:none }
	html.breakpoint-medium .responsiveShoppingBag #footer-background-wrapper { display:none }
	html.breakpoint-medium .responsiveShoppingBag #brandFooter_mobile { display:block }
	
/* Large Breakpoint */
	html.breakpoint-large .responsiveShoppingBag #bodyContainer #footer { margin:0 auto; padding:0; box-sizing:content-box; }
	html.breakpoint-large .responsiveShoppingBag .marketing-brand-footer-wrapper { float:none; width:980px; height:200px; margin:10px auto }
	html.breakpoint-large .responsiveShoppingBag #textFooterLinks1_10000515 { width:100%; clear:both }
	html.breakpoint-large .responsiveShoppingBag .footer-container-wrapper { height:275px }
	html.breakpoint-large .responsiveShoppingBag #copyRightFooter { width:100% }
	
	@media all and (max-width: 1015px) and (min-width: 768px) {
		html.breakpoint-large .responsiveShoppingBag .marketing-brand-footer-wrapper { display:none }
		html.breakpoint-large .responsiveShoppingBag .footer-container-wrapper { border-top:none }
	}

/* X-Large Breakpoint */
	html.breakpoint-xlarge .responsiveShoppingBag #bodyContainer #footer { /*width:99%;*/ margin:0 auto; padding:0; box-sizing:content-box }
	
	html.breakpoint-xlarge .responsiveShoppingBag .marketing-brand-footer-wrapper { float:none; width:980px; height:200px; margin:10px auto }
	html.breakpoint-xlarge .responsiveShoppingBag #textFooterLinks1_10000515 { width:100%; clear:both }
	html.breakpoint-xlarge .responsiveShoppingBag .footer-container-wrapper { height:275px }
	html.breakpoint-xlarge .responsiveShoppingBag #copyRightFooter { width:100% }

&lt;/style-->
      <div id="footer-background-wrapper">
      </div>
      <div id="brandFooter_Region1">
       <div class="clearfix" id="brandftr1_10000512">
       </div>
       <div class="clearfix" id="brandftr2_10000514">
        <!-- BEGIN Content Item File: /content/0009/409/544/cn9409544.html -->
        <div class="9409544" id="contentItemContainer10000514">
         <div class="clearfix" id="freeShipBanner" style="width:990px;height:41px;display:block;margin-top:20px;">
          <!--&lt;a href="#edfs" onclick="return gidLib.layeredPopup.openLayeredPopup({str:'/browse/info.do?cid=47471',id:'edfsPopup',width:490,height:450});"&gt;-->
          <a class="needsclick toggle-universal-modal" data-action-sheet="small" data-modal-size="standard" data-title="" data-url="/Asset_Archive/GPWeb/content/0009/712/387/assets/edfsLegal.html" href="#edfs">
           <img alt="Free shipping on all orders over $50." src="/Asset_Archive/GPWeb/content/0009/409/544/assets/102914_FSFR_HP_FTR_US_EC.gif"/>
          </a>
         </div>
        </div>
        <!-- END Content Item File: /content/0009/409/544/cn9409544.html -->
       </div>
       <div class="clearfix" id="brandftr3_10000513">
       </div>
       <div class="clearfix" id="textFooterLinks1_10000515">
        <!-- BEGIN Content Item File: /content/0009/815/677/cn9815677.html -->
        <div class="9815677" id="contentItemContainer10000515">
         <link href="/Asset_Archive/GPWeb/content/0009/815/677/assets/emailFooterCSS.css" rel="stylesheet" type="text/css"/>
         <!--style type="text/css"&gt;

.footer-container-wrapper {
	width:100%;
	height:245px;
	margin-top:10px;
	font-size:10px;
	line-height:14px;
	font-family: Helvetica,Arial,Sans-serif;
	letter-spacing:1px;
	border-top: 1px solid #fff;
	padding-top: 20px;
	padding-bottom: 20px;
	border-bottom: 1px solid #FFF;
}


.footer-container {
	padding-top:0px;
	width:100%;
	margin:5px;
	border-top:1px solid #fff;
	border-bottom:1px solid #fff;
	height:254px;
}

.footerCol{
	float:left;
	border-right:1px solid #fff;
	text-align:center;

}

.footerCol-last{
	float:left;
	text-align:center;

}

.footer-header {
	font-size:24px;
	font-weight: 100;
	margin-top: 20px;
}

#footer-social {
	height:100%;
	width:22%;
	float:left;

}

#footer-icons {
	margin-top:20px;
}

#footer-email {
	height:100%;
	width:56%;

}
#footer-cs {
	height:100%;
	width:21%;
	float: left;
}

#footer-cs ul.cslinks {

	list-style: none outside none;
	line-height: 16px;
	margin-top: 20px;
}

#footer-cs li {

	float: none;
}

li.footer-cs-header {

	padding-top:10px;
	font-weight: bold;
}



.hp-email-signup-container &gt; .marketing-copy {
    color: #000;
    display: inline-block;
    float: left;
    margin-right: 30px;
    text-align: center;
    width: 300px;
}
.hp-email-signup-container &gt; .marketing-copy &gt; .jumbotext {
    font-size: 32px;
    font-weight: 200;
    line-height: 32px;
}
.hp-email-signup-container &gt; .marketing-copy &gt; .subtext {
    font-size: 14px;
    line-height: 20px;
    margin-top: 5px;
}
.hp-email-signup-form-container {
    display: inline-block;
    margin-top: 25px;
}
.hp-email-signup-input-container {
    overflow: hidden;
    width: 315px;
    margin: 0 auto;

}
.hp-email-signup-input-container &gt; input {
    border: 1px solid #666666;
    color: #666666;
    display: inline-block;
    font-size: 12px;
    height: 19px;
    margin-bottom: 10px;
    padding: 3px 8px;
    width: 300px;
}
.hp-email-signup-input-container &gt; input.last {
    margin-right: 0;
}
.hp-email-signup-input-container &gt; .validationWarning {
    color: #ff0000;
    font-weight: bold;
}
.hp-email-signup-submit-button-container {
    clear: both;
    display: block;
    margin-top: 10px;
    width: 100%;
}
.hp-email-signup-submit-button-container &gt; .offer-text {
    color: #FFF;
    font-size: 10px;
    margin-right: 10px;
    margin-top: 15px;
    text-align: center;
}

.hp-email-signup-submit-button-container &gt; button {
    margin: 0 auto;
}

.email-caret {
    border-color: transparent transparent transparent #fff;
    border-left: 7px solid #fff;
    border-right: 4px solid transparent;
    border-style: solid;
    border-width: 4px 4px 4px 7px;
    content: "";
    display: inline-block;
    height: 0;
    vertical-align: top;
    width: 0;
}
.footer-email-signup-btn &gt; .email-caret {
    margin-left: 3px;
    margin-top: 3px;
}
.email-btn-container {
    text-align: center;
}
.email-btn {
    background: none repeat scroll 0 0 #fff;
    border: medium none;
    color: #000d42;
    cursor: pointer;
    display: inline-block;
    font-family: "Helvetica Neue",Helvetica,Arial,sans-serif;
    font-size: 12px;
    font-weight: 500;
    letter-spacing: 1px;
    line-height: 12px;
    margin: 0;
    padding: 5px 5px 5px 9px;
    text-transform: uppercase;
}
a.email-btn, a.email-btn:link, a.email-btn:visited, a.email-btn:active {
    color: #000d42 !important;
    position: relative;
    text-decoration: none !important;
    z-index: 50;
}
.email-caret {
    border-color: transparent transparent transparent #000d42;
    border-left: 7px solid #000d42;
    border-right: 4px solid transparent;
    border-style: solid;
    border-width: 4px 4px 4px 7px;
    content: "";
    display: inline-block;
    height: 0;
    vertical-align: top;
    width: 0;
}
.email-btn &gt; .email-caret {
    margin-left: 4px;
    margin-top: 2px;
}

&lt;/style-->
         <div class="footer-container-wrapper clearfix">
          <div class="footerCol" id="footer-social">
           <a href="/customerService/info.do?cid=2116" onclick="return wcdLib.contentItemLinkWithFacet(this,'','Footer_1_GC');">
            <img alt="Gift Cards" border="0" class="leftCol" id="footer-icons" src="/Asset_Archive/GPWeb/content/0009/815/677/assets/020515_ALL_HP_US_footer_giftcards.png"/>
           </a>
           <a href="/browse/info.do?cid=96483" onclick="return wcdLib.contentItemLinkWithFacet(this,'','Footer_2_RIS');">
            <img alt="Reserve in Store" border="0" class="leftCol" id="footer-icons" src="/Asset_Archive/GPWeb/content/0009/815/677/assets/020515_ALL_HP_US_footer_RIS.png"/>
           </a>
           <a href="/browse/info.do?cid=1023051" onclick="return wcdLib.contentItemLinkWithFacet(this,'','Footer_3_WishList');">
            <img alt="Wishlist" border="0" class="leftCol" id="footer-icons" src="/Asset_Archive/GPWeb/content/0009/815/677/assets/020515_ALL_HP_US_footer_wishlist.png"/>
           </a>
           <a alt="click for more details" data-jbox-height="450" data-jbox-url="/browse/info.do?cid=47471" data-jbox-width="500" href="javascript:void(0);" rel="jbox">
            <img alt="Free Returns" border="0" class="leftCol" id="footer-icons" src="/Asset_Archive/GPWeb/content/0009/815/677/assets/020515_ALL_HP_US_footer_fsfr.png"/>
           </a>
          </div>
          <!-- EMAIL REGISTRATION -->
          <div class="footerCol footerEmailMargin" id="footer-email">
           <p class="footer-header">
            sign up for email &amp;
            <strong>
             get 25% off*
            </strong>
           </p>
           <div class="hp-email-signup-form-container">
            <form action="https://secure-www.gap.com/profile/updateEmailPreferences.do" id="joinEmail_gap" method="post" name="joinEmail_gap" onsubmit="return validateFormGapFooter(this)">
             <input name="brand_country_code" type="HIDDEN" value="GPUS"/>
             <input name="lang_pref" type="HIDDEN" value="US_EN"/>
             <input id="target_url" name="targetURL" type="HIDDEN" value="/profile/info.do?cid=53959&amp;mlink=5058,8095009,HP_Email_Signup&amp;clink=8095009"/>
             <input id="src_genGapFooter" name="src_gnrc_cd" type="HIDDEN" value="WEBSITE EMAIL SIGNUP"/>
             <input id="src_specGapFooter" name="src_spfc_cd" type="HIDDEN" value="GP=Site_Footer;BR=NA;ON=NA;PL=NA;AT=NA;BRFS=NA;GPO=NA"/>
             <div style="overflow: hidden;">
              <div class="hp-email-signup-input-container">
               <label for="email" style="display:none;">
                Email Signup
               </label>
               <input autocomplete="off" id="email" maxlength="100" name="email" onblur="clearDefaultGapFooter(this);" onfocus="setDefaultGapFooter(this);" size="39" type="text" value="Email, please"/>
               <label for="confirm_email" style="display:none;">
                Confirm Email
               </label>
               <input autocomplete="off" class="last" id="confirm_email" maxlength="100" name="confirm_email" onblur="clearDefaultGapFooter(this);" onfocus="setDefaultGapFooter(this);" size="39" type="text" value="Confirm your email"/>
              </div>
              <div class="hp-email-signup-submit-button-container">
               <button class="email-btn" title="Sign Up Now">
                SIGN UP NOW
                <span class="email-caret">
                </span>
                <span style="display:none;">
                 Sign Up Now
                </span>
               </button>
               <div class="offer-text">
                *Offer valid for first-time registrants only &amp; applies to regular price items only.
                <a href="/customerService/info.do?cid=2331" onclick="return contentItemLink(this,'','emailreg');" style="text-decoration: underline;">
                 Privacy Policy
                </a>
               </div>
              </div>
             </div>
            </form>
           </div>
          </div>
          <!--END EMAIL REGISTRATION -->
          <div class="footerCol-last" id="footer-cs">
           <p class="footer-header">
            connect
           </p>
           <img alt="Social Media" border="0" id="footer-icons" src="/Asset_Archive/GPWeb/content/0009/815/677/assets/073114_HP_connecticons_footer.gif" usemap="#socialicons_map"/>
           <map id="socialicons_map" name="socialicons_map">
            <area alt="facebook" coords="0,3,28,26" href="https://www.facebook.com/pages/Gap/14856729724" shape="rect" target="_blank">
            </area>
            <area alt="twitter" coords="44,2,76,27" href="http://www.twitter.com/gap" shape="rect" target="_blank">
            </area>
            <area alt="pinterest" coords="97,1,132,29" href="http://www.pinterest.com/Gap" shape="rect" target="_blank">
            </area>
            <area alt="instagram" coords="0,39,28,67" href="http://instagram.com/gap" shape="rect" target="_blank">
            </area>
            <area alt="mobile" coords="43,39,79,67" href="http://www.gap.com/browse/info.do?cid=51767" shape="rect" target="_blank">
            </area>
            <area alt="tumblr" coords="93,38,140,68" href="http://gap.tumblr.com/" shape="rect" target="_blank">
            </area>
           </map>
           <p class="footer-header">
            need help?
           </p>
           <ul class="cslinks">
            <li class="footer-cs-header">
             <a href="/customerService/info.do?cid=2136" onclick="return contentItemLink(this,'','CS_Footer_CustomerService');">
              Customer Service
             </a>
            </li>
            <li>
             <a href="/customerService/info.do?cid=81264" onclick="return contentItemLink(this,'','CS_Footer_Returns');">
              Returns
             </a>
            </li>
            <li>
             1.800.GAPSTYLE (1.800.427.7895)
            </li>
            <li>
             <a href="/customerService/storeLocator.do" onclick="return contentItemLink(this,'','CS_Footer_StoreLocator');">
              Store Locator
             </a>
            </li>
            <li>
             <a href="/browse/info.do?cid=46079" onclick="return contentItemLink(this,'','CS_Footer_GapCard');">
              <img alt="Gap Card" border="0" id="gapcard-images" src="/Asset_Archive/GPWeb/content/0009/815/677/assets/060315_ValuePropCardUpdate_HP_US2.png"/>
             </a>
            </li>
            <li class="footer-cs-header">
             <a href="/browse/info.do?cid=46079" onclick="return contentItemLink(this,'','CS_Footer_GapCard');">
              GapCard
             </a>
            </li>
            <li>
             <a href="https://eapply.gap.com/?cmpid=FTR_APL" target="_blank">
              Apply now and save today
             </a>
            </li>
            <li>
             <a href="https://www3.onlinecreditcenter6.com/consumergen2/login.do?subActionId=1000&amp;clientId=gap&amp;langId=en&amp;accountType=plcc&amp;cmpid=FTR_MNG_ACT" target="_blank">
              Activate card
             </a>
            </li>
            <li>
             <a href="/customerService/info.do?cid=44651" onclick="return contentItemLink(this,'','CS_Footer_ReviewYourCardBenefits');">
              Review your card benefits
             </a>
            </li>
            <li>
             <a href="https://www3.onlinecreditcenter6.com/consumergen2/login.do?subActionId=1000&amp;clientId=gap&amp;langId=en&amp;accountType=plcc&amp;cmpid=FTR_MNG_ACT" target="_blank">
              Pay my bill
             </a>
            </li>
            <!-- &lt;li&gt;&lt;a href="http://www.gap.com/products/index.jsp"&gt;Site map&lt;/a&gt;&lt;/li&gt; -->
           </ul>
          </div>
         </div>
        </div>
        <!--img src="/Asset_Archive/GPWeb/content/0009/815/677/assets/footer2.gif" alt=""-->
        <script type="text/javascript">
         /* NEW GOL EMAIL REG CODE */
function setDefaultGapFooter(elem) {
	if(elem.value==elem.defaultValue)elem.value='';
	$(elem).removeClassName('validationWarning');
}
function clearDefaultGapFooter(elem) {
	if(elem.value=='')elem.value=elem.defaultValue;
}

function validateFormGapFooter()
{
	// check form fields
	var form = $('joinEmail_gap');
	var sendForm = false;
	if (form.email) {
		var reg = /\b(^(\S+@).+((\.com)|(\.net)|(\.edu)|(\.mil)|(\.gov)|(\.org)|(\.aero)|(\.arpa)|(\.asia)|(\.biz)|(\.cat)|(\.coop)|(\.info)|(\.int)|(\.jobs)|(\.mobi)|(\.name)|(\.post)|(\.pro)|(\.tel)|(\.xxx)|(\..{2,2}))$)\b/gi;
		var email = form.email.value;
		var confirmEmail = form.confirm_email.value;
		
		function checkRequired() {
			var requiredFields = false;
			var warning = 'This field is required';
			if (form.email.value == form.email.defaultValue) {
				form.email.defaultValue = warning;
				form.email.value = warning;
				$(form).email.addClassName('validationWarning');
				requiredFields = false;
			} else {
				$(form).email.removeClassName('validationWarning');
				requiredFields = true;
			}
			if (form.confirm_email.value == form.confirm_email.defaultValue) {
				form.confirm_email.defaultValue = warning;
				form.confirm_email.value = warning;
				$(form).confirm_email.addClassName('validationWarning');
				requiredFields = false;
			} else if (requiredFields == false) {
				requiredFields = false;
			} else {
				$(form).confirm_email.removeClassName('validationWarning');
				requiredFields = true;
			}
			if (requiredFields == true) {
				sendForm = true;
				checkEmail();
			}
		}
		function checkEmail() {
			if (reg.test(email) == false) {
				var warning = 'Invalid Email Address';
				form.email.defaultValue = warning;
				form.email.value = warning;
				$(form).email.addClassName('validationWarning');
				sendForm = false;
			} else {
				$(form).email.removeClassName('validationWarning');
				sendForm = true;
				checkConfirmEmail();
			}
		}
		function checkConfirmEmail() {
			if (sendForm = true &amp;&amp; email != confirmEmail) {
				var warning = 'Email Addresses Must Match';
				form.confirm_email.defaultValue = warning;
				form.confirm_email.value = warning;
				$(form).confirm_email.addClassName('validationWarning');
				sendForm = false;
			} else if (email == confirmEmail) {
				$(form).confirm_email.removeClassName('validationWarning');
				sendForm = true;
			}
		}
		checkRequired();
	}
	return sendForm;
}
        </script>
       </div>
       <!-- END Content Item File: /content/0009/815/677/cn9815677.html -->
      </div>
      <!--copyright-->
      <div class="clearfix" id="textFooterLink2_10000516">
       <!-- BEGIN Content Item File: /content/0008/692/698/cn8692698.html -->
       <div class="8692698" id="contentItemContainer10000516">
        <!-- Begin Pull Year from Personalization - DO NOT REMOVE est. 2014 -->
        <script type="text/javascript">
         document.observe('personalizationData:ready', function() {
	if( personalizationService.model.personalizationData.personalizationInfoV1.userContext.viewDate ) {
		var dateString = personalizationService.model.personalizationData.personalizationInfoV1.userContext.viewDate
		var currentYear = dateString.split("-",1);
		jQuery('#currentYearFooter').text(currentYear);
	}
});
        </script>
        <!-- End Pull Year from Personalization - DO NOT REMOVE est. 2014 -->
        <div class="clearfix" id="copyRightFooter">
         <!--copyright bottom footer-->
         <p>
           1997 -
          <span id="currentYearFooter">
          </span>
          Gap Inc. |
          <a href="/customerService/info.do?cid=2331" onclick="return contentItemLink(this,'','CS_Footer_PrivacyPolicy');">
           <em>
            Privacy Policy
           </em>
          </a>
          |
          <a href="http://www.gap.com/customerService/info.do?cid=2331&amp;mlink=5058,8118674,CS_Footer_PrivacyPolicy&amp;clink=8118674#interestAdvert">
           Interest Based Ads
          </a>
          |
          <a href="/customerService/info.do?cid=2331&amp;mlink=5058,5217025,CS_Footer_Returns_CA_Policy&amp;clink=5217025#caliRights">
           Your California Privacy Rights
          </a>
          |
          <a href="/customerService/info.do?cid=6754" onclick="return contentItemLink(this,'','CS_Footer_TermsOfUse');">
           Terms of Use
          </a>
          |
          <a href="http://www.gapinc.com/content/gapinc/html/careers.html" target="_blank">
           Careers
          </a>
          |
          <a href="http://gapinc.com/content/gapinc/html/social_responsibility.html" target="_blank">
           Social Responsibility
          </a>
          |
          <a href="http://www.gapinc.com/content/gapinc/html/aboutus.html" target="_blank">
           About Gap Inc.
          </a>
         </p>
         <p>
          <a href="/customerService/info.do?cid=1005563">
           Accessibility for Ontarians with Disabilities Act
          </a>
         </p>
         <p>
          <a href="http://m.gap.com">
           gap.com mobile site
          </a>
         </p>
        </div>
       </div>
       <!-- END Content Item File: /content/0008/692/698/cn8692698.html -->
      </div>
     </div>
     <div id="brandFooter_mobile">
      <a href="/customerService/info.do?cid=81264">
       Return Policy
      </a>
      |
      <a href="/buy/info.do?cid=2020">
       Credit Card Safeguard
      </a>
     </div>
     <script type="text/javascript">
      function adjustFooterWidth(elementsArray) {
  // get the width of the browser window viewport
  var viewport = document.viewport.getDimensions();
  var width = viewport.width;
  var elementsArrayLength = elementsArray.length;


  if (width &gt;=1000) {

    // loop through the different elements
    // and set their width to the viewport width
    // then we offset the left position
    for(var i=0; i &lt; elementsArrayLength; i++) {
      $(elementsArray[i]).setStyle({
        width: width + "px",
        //position: "relative",
        marginLeft: - (((width - 988)/2) - 1) + "px",
        overflow: "hidden"
      });
    }
  }
}
//span the full width of the window
var adjustFooterWidthArray = ["footer-background-wrapper"];

Event.observe(window, 'resize', function() {
	if( window["responsiveBagAbTestOn"] != null &amp;&amp; ! responsiveBagAbTestOn ) {
	  adjustFooterWidth(adjustFooterWidthArray);
	}
});

jQuery(document).ready(function($) {
	if( window["responsiveBagAbTestOn"] != null &amp;&amp; ! responsiveBagAbTestOn ) {
	  adjustFooterWidth(adjustFooterWidthArray);
	}
});
     </script>
     <script type="text/javascript">
      // Responsive bag JS overrides
if( window["responsiveBagAbTestOn"] != null &amp;&amp; responsiveBagAbTestOn ) {
	
	var wcdFooterResponsiveUpdate = function() {

		jQuery(document).ready( function() {
			//jQuery('#contentItemContainer10000512 &gt; div, #contentItemContainer10000512 &gt; div img, #contentItemContainer10000649 &gt; div, #contentItemContainer10000515 &gt; div, #emailSignUpFooter .for_ie7_div1, #emailSignUpFooter .for_ie7_div2').attr('style','');

			// jbox popups
			var edfsFooter = jQuery('#MapfooterNewEDFS area');
			var edfsPopupWidth = '472';
			var edfsPopupHeight = '450';
			if( jQuery(window).width() &lt; 569 ) {
				//edfsPopupStr = '/Asset_Archive/GPWeb/content/0008/638/040/assets/edfs_popup.html';
				edfsPopupWidth = '300';
				edfsPopupHeight = '350';
			}
			
			if( edfsFooter.length &gt; 0 ) {
				/*edfsFooter[0].onclick = function() {
					return gidLib.layeredPopup.openLayeredPopup({str:'/buy/info.do?cid=47471',id:'edfsPopup',width:472,height:410,style:{name:'universalPopup'}});
				}*/
				edfsFooter.attr({ 'onclick':'', 'rel':'jbox', 'data-jbox-url':'/buy/info.do?cid=35295', 'data-jbox-width':edfsPopupWidth, 'data-jbox-height':edfsPopupHeight });
				// rel="jbox" data-jbox-url="/buy/promo_legal_details.do?promoId=90166&amp;locale=en_CA" data-jbox-width="500" data-jbox-height="450"
			}		
			jbox.checkDataAttributes();
		});

	}
	wcdFooterResponsiveUpdate();
	
}
     </script>
    </div>
   </div>
   <!-- Future Story Place holder #209 &amp; #210-->
   <div id="footer_GID_marketing">
   </div>
   <div id="footer_TextLinkNavigation">
    <div id="footer_brand_region2">
     <!-- @TemplateContentLayout(templateRegionName:"gid.common.siteWide.brand.footers.region2") -->
     <div id="brandFooter_Region2">
      <div class="clearfix" id="brandftr4_10000510">
       <!-- BEGIN Content Item File: /content/0009/713/869/cn9713869.html -->
       <div class="9713869" id="contentItemContainer10000510">
        <style type="text/css">
         /*GFOL FOOTER CSS */
#footer_brand_region2 { background-color: #FFFFFF;}

#gfol-footer {
	display:none;
	margin-left: 152px;
}
#gfol-ecom-footer{
	width: 838px;
/*	height:295px;*/
	overflow:hidden;
	position: relative;
	
}
#gfol-csFooter { font-size: 10px; color: #666666; margin-bottom: 10px; margin-top: 10px; text-align: center; width: 838px;border-top: 1px solid #666666; padding-top: 10px;}
#gfol-copyRightFooter{ font-size: 10px; color: #666666; margin-bottom: 10px; margin-top: 10px; text-align: center; width: 838px;/*border-top: 1px solid #666666;*/ padding-top: 10px;}
#gfol-copyRightFooter p, #gfol-csFooter p {color: #666666; line-height: 14px;} 
#gfol-csFooter a:link, #gfol-csFooter a:visited, #gfol-csFooter a:active { color: #666666; }
#gfol-copyRightFooter a:link, #gfol-copyRightFooter a:visited, #gfol-copyRightFooter a:active { color: #666666; }
#gfol-freeship{position: relative;float:left;}
#gfol-email-sign-up{
	float:left;
	position: relative;
	width:422px; 
	height:206px;
}
#gfol-storelocator{
	float:left;
	position: relative;
	width:416px;
	height:206px;
}

.gfol-email-btn {
	background: none repeat scroll 0 0 #fff;
    border: medium none;
    color: #000d42;
    cursor: pointer;
    display: inline-block;
    font-family: "Helvetica Neue",Helvetica,Arial,sans-serif;
    font-size: 12px;
    font-weight: 500;
    letter-spacing: 1px;
    line-height: 12px;
    margin: 0;
    padding: 5px 5px 5px 0px;
    text-transform: uppercase;
}

.gfol-email-btn &gt; .gfol-email-caret {
/*    margin-left: 4px;*/
    margin-top: 2px;
}
.gfol-email-caret {
    border-color: transparent transparent transparent #000d42;
    border-style: solid;
    border-width: 4px 4px 4px 7px;
    content: "";
    display: inline-block;
    height: 0;
    vertical-align: top;
    width: 0;
}

#joinEmailGFOL input.validationWarning {
    color: #ff0000;
    font-weight: bold;
}
#searchDexFooter .expFooter{
	padding-left: 152px;
}
        </style>
        <!-- Begin Pull Year from Personalization - DO NOT REMOVE est. 2014 -->
        <script type="text/javascript">
         document.observe('personalizationData:ready', function() {
	if( personalizationService.model.personalizationData.personalizationInfoV1.userContext.viewDate ) {
		var dateString = personalizationService.model.personalizationData.personalizationInfoV1.userContext.viewDate
		var currentYear = dateString.split("-",1);
		jQuery('#gfol-currentYearFooter').text(currentYear);
	}
});
        </script>
        <!-- End Pull Year from Personalization - DO NOT REMOVE est. 2014 -->
        <div class="clearfix" id="gfol-footer">
         <div class="clearfix" id="gfol-ecom-footer">
          <div id="gfol-freeship">
           <!-- &lt;a onclick="return gidLib.layeredPopup.openLayeredPopup({str:'/browse/info.do?cid=47471',id:'edfsPopup',width:472,height:410,style:{name:'universalPopup'}});" href="#edfs"&gt; -->
           <img alt="free shipping on all orders over $50. free returns on all orders. details." id="" src="/Asset_Archive/GPWeb/content/0009/713/869/assets/GFS_HP_LimitedOnline_FreeShipping_Bottom.gif" usemap="#MapReturn"/>
           <map id="MapReturn" name="MapReturn">
            <area alt="warm welcome" coords="462,95,838,148" href="http://www.gap.com//customerService/info.do?cid=81264" onclick="return wcdLib.contentItemLinkWithFacet(this,'','');" shape="rect">
            </area>
            <area coords="1,97,465,148" href="#edfs" onclick="return gidLib.layeredPopup.openLayeredPopup({str:'/browse/info.do?cid=47471',id:'edfsPopup',width:472,height:410,style:{name:'universalPopup'}});" shape="rect">
            </area>
           </map>
           <!-- 		&lt;/a&gt; -->
          </div>
          <div id="gfol-email-sign-up">
           <img alt="sign up for email" id="" src="/Asset_Archive/GPWeb/content/0009/713/869/assets/GFS_HP_EMAIL.gif"/>
           <!--start: ecom gfol email form -->
           <form action="https://secure-www.gap.com/profile/updateEmailPreferences.do" id="joinEmailGFOL" method="post" name="joinEmailGFOL" onsubmit="return validateFormGFOL(this);">
            <input name="brand_country_code" type="HIDDEN" value="GPUSO"/>
            <input name="lang_pref" type="HIDDEN" value="US_EN"/>
            <input id="target_url" name="targetURL" type="HIDDEN" value="/profile/info.do?cid=63678&amp;mlink=48620,5240179,email_v&amp;clink=5240179"/>
            <input id="src_gen" name="src_gnrc_cd" type="HIDDEN" value="WEBSITE EMAIL SIGNUP"/>
            <input id="src_spec" name="src_spfc_cd" type="HIDDEN" value="GP=N/A;BR=N/A;ON=N/A;PL=N/A;AT=N/A;GFS=N/A;GPO=GO Site_Footer_OutletSignUp_Ecom"/>
            <div id="gfol-email-form" style="width: 400px; position: absolute; left: 14px; top: 130px;">
             <div style="width:180px; height:29px;float:left;">
              <label for="gfol-emailOutletAddr2" style="display:none;">
               Email Signup
              </label>
              <input id="gfol-emailOutletAddr2" maxlength="125" name="email" onblur="clearDefaultGFOL(this);" onfocus="setDefaultGFOL(this);" style="font-size: 9px; width: 170px; height: 20px;" type="text" value="*First time registrants only"/>
             </div>
             <div style="width:180px; height:29px;float:left;margin-left:10px">
              <label for="gfol-emailOutletAddr" style="display:none;">
               Confirm Email
              </label>
              <input id="gfol-emailOutletAddr" maxlength="125" name="confirm_email" onblur="clearDefaultGFOL(this);" onfocus="setDefaultGFOL(this);" style="font-size: 9px; width: 170px; height: 20px;" type="text" value="Confirm your email address"/>
             </div>
             <div style="float: left; width: 20px; height: 20px;">
              <button class="gfol-email-btn" title="Submit" type="submit">
               <span class="gfol-email-caret">
               </span>
               <span style="display:none;">
                Sign Up Now
               </span>
              </button>
              <!--input type="image" style="margin-left:7px; margin-top: 3px;" title="sign up now" alt="Sign up now" value="submit" id="addressOutlet" src="/Asset_Archive/GPWeb/content/0008/932/614/assets/2348_GO_Landing_Page_Update_signup_button.png"-->
             </div>
            </div>
           </form>
           <!--end: ecom gfol email form -->
          </div>
          <div id="gfol-storelocator">
           <img alt="store locator" border="0" id="" src="/Asset_Archive/GPWeb/content/0009/713/869/assets/GFS_HP_STORE-LOCATOR.gif" usemap="#storeLocatorMap"/>
           <map id="storeLocatorMap" name="storeLocatorMap">
            <area alt="find a store" coords="219,4,416,206" href="/customerService/storeLocator.do?showOutlets=true" onclick="return wcdLib.contentItemLinkWithFacet(this,'','GFOL_storeLocator');" shape="rect">
            </area>
            <area alt="print coupon" coords="1,2,218,206" href="/Asset_Archive/GPWeb/content/0009/713/869/assets/GFOL_deals_footer.pdf" shape="rect" target="_blank">
            </area>
           </map>
          </div>
         </div>
         <div class="clearfix" id="gfol-csFooter">
          <!--gfol cs footer-->
          <a href="/customerService/info.do?cid=2136" onclick="return contentItemLink(this,'','GFOL_Footer_CustomerService');">
           Customer Service
          </a>
          |
          <a href="http://www.gap.com//customerService/info.do?cid=81264" onclick="return contentItemLink(this,'','GFOL_Footer_Returns');">
           Returns
          </a>
          | 1.844.GFS-ONLINE (1.844.437.6654) |
          <a href="/customerService/storeLocator.do" onclick="return contentItemLink(this,'','GFOL_Footer_StoreLocator');">
           Store Locator
          </a>
          |
          <a href="/browse/info.do?cid=46079" onclick="return contentItemLink(this,'','GFOL_Footer_GapCard');">
           GapCard
          </a>
          |
          <a href="https://eapply.gap.com/eapplygen2/load.do?cHash=711671167&amp;subActionId=1000&amp;cmpid=FTR_APL&amp;siteCode=FTR_APL" target="_blank">
           Apply now and save today
          </a>
          |
          <a href="https://www.onlinecreditcenter6.com/consumergen2/login.do?subActionId=1008&amp;clientId=gap&amp;langId=en&amp;accountType=dualcard&amp;cmpid=FTR_ACTIV" target="_blank">
           Activate card
          </a>
          |
          <a href="/customerService/info.do?cid=44651" onclick="return contentItemLink(this,'','GFOL_Footer_CardBenefits');">
           Review your card benefits
          </a>
          |
          <a href="https://www3.onlinecreditcenter6.com/consumergen2/login.do?subActionId=1000&amp;clientId=gap&amp;langId=en&amp;accountType=plcc&amp;cmpid=FTR_MNG_ACT" target="_blank">
           Pay my bill
          </a>
          |
          <a href="/customerService/info.do?cid=44651" onclick="return contentItemLink(this,'','GFOL_Footer_CardBenefits');">
           Review your card benefits
          </a>
          |
          <a href="http://www.gap.com/products/index.jsp">
           Site map
          </a>
         </div>
         <div class="clearfix" id="gfol-copyRightFooter">
          <!--copyright bottom footer-->
          <p>
            1997 -
           <span id="gfol-currentYearFooter">
           </span>
           Gap Inc. |
           <a href="/customerService/info.do?cid=2331" onclick="return contentItemLink(this,'','CS_Footer_PrivacyPolicy');">
            <em>
             Privacy Policy
            </em>
           </a>
           |
           <a href="http://www.gap.com/customerService/info.do?cid=2331&amp;mlink=5058,8118674,CS_Footer_PrivacyPolicy&amp;clink=8118674#interestAdvert">
            Interest Based Ads
           </a>
           |
           <a href="/customerService/info.do?cid=2331&amp;mlink=5058,5217025,CS_Footer_Returns_CA_Policy&amp;clink=5217025#caliRights">
            Your California Privacy Rights
           </a>
           |
           <a href="/customerService/info.do?cid=6754" onclick="return contentItemLink(this,'','CS_Footer_TermsOfUse');">
            Terms of Use
           </a>
           |
           <a href="http://www.gapinc.com/content/gapinc/html/careers.html" target="_blank">
            Careers
           </a>
           |
           <a href="http://gapinc.com/content/gapinc/html/social_responsibility.html" target="_blank">
            Social Responsibility
           </a>
           |
           <a href="http://www.gapinc.com/content/gapinc/html/aboutus.html" target="_blank">
            About Gap Inc.
           </a>
          </p>
          <p>
           <a href="/customerService/info.do?cid=1005563">
            Accessibility for Ontarians with Disabilities Act
           </a>
          </p>
          <p>
           <a href="http://m.gap.com">
            gap.com mobile site
           </a>
          </p>
         </div>
        </div>
        <script type="text/javascript">
         function setDefaultGFOL(elem) {
	if(elem.value==elem.defaultValue)elem.value='';
	$(elem).removeClassName('validationWarning');
}
function clearDefaultGFOL(elem) {
	if(elem.value=='')elem.value=elem.defaultValue;
}

function validateFormGFOL()
{
	// check form fields
	var form = $('joinEmailGFOL');
	var sendForm = false;
	if (form.email) {
		var reg = /\b(^(\S+@).+((\.com)|(\.net)|(\.edu)|(\.mil)|(\.gov)|(\.org)|(\.aero)|(\.arpa)|(\.asia)|(\.biz)|(\.cat)|(\.coop)|(\.info)|(\.int)|(\.jobs)|(\.mobi)|(\.name)|(\.post)|(\.pro)|(\.tel)|(\.xxx)|(\..{2,2}))$)\b/gi;
		var email = form.email.value;
		var confirmEmail = form.confirm_email.value;
		
		function checkRequired() {
			var requiredFields = false;
			var warning = 'This field is required';
			if (form.email.value == form.email.defaultValue) {
				form.email.defaultValue = warning;
				form.email.value = warning;
				$(form).email.addClassName('validationWarning');
				requiredFields = false;
			} else {
				$(form).email.removeClassName('validationWarning');
				requiredFields = true;
			}
			if (form.confirm_email.value == form.confirm_email.defaultValue) {
				form.confirm_email.defaultValue = warning;
				form.confirm_email.value = warning;
				$(form).confirm_email.addClassName('validationWarning');
				requiredFields = false;
			} else if (requiredFields == false) {
				requiredFields = false;
			} else {
				$(form).confirm_email.removeClassName('validationWarning');
				requiredFields = true;
			}
			if (requiredFields == true) {
				sendForm = true;
				checkEmail();
			}
		}
		function checkEmail() {
			if (reg.test(email) == false) {
				var warning = 'Invalid Email Address';
				form.email.defaultValue = warning;
				form.email.value = warning;
				$(form).email.addClassName('validationWarning');
				sendForm = false;
			} else {
				$(form).email.removeClassName('validationWarning');
				sendForm = true;
				checkConfirmEmail();
			}
		}
		function checkConfirmEmail() {
			if (sendForm = true &amp;&amp; email != confirmEmail) {
				var warning = 'Email Addresses Must Match';
				form.confirm_email.defaultValue = warning;
				form.confirm_email.value = warning;
				$(form).confirm_email.addClassName('validationWarning');
				sendForm = false;
			} else if (email == gfol_onfirmEmail) {
				$(form).confirm_email.removeClassName('validationWarning');
				sendForm = true;
			}
		}
		checkRequired();
	}
	return sendForm;
}
        </script>
       </div>
       <!-- END Content Item File: /content/0009/713/869/cn9713869.html -->
      </div>
      <div class="clearfix" id="brandftr5_10000511">
      </div>
     </div>
    </div>
   </div>
   <div id="footer_languageToggle">
   </div>
   <div id="footer_preferLocaleLanguageOptions">
   </div>
   <div id="footer_Region3">
    <div id="footer_brand_region3">
    </div>
   </div>
  </div>
  <div class="cssHide">
   <script src="/gid/js/common/layouts/en/reporting/sCode.js" type="text/javascript">
   </script>
   <script type="text/javascript">
    reportingService.controller.viewManagers.commonViewManager.model.contentItemIdListReport = "9938585,9955888,9938585,9955888,9712387,9712387,9058692,9712385,9700385,9151488,9932674,9713869,9934941,9886741,9886743,9765554,9886802,9409544,9815677,8692698";
   </script>
   <noscript>
    <img alt="" src="http://gapnojavaproduction.112.2o7.net/b/ss/gapnojavaproduction?pageName=gp%3AcustomerService%3AHome&amp;g=http%3A%2F%2Fwww.gap.com%2FcustomerService%2FcookieFailure.do"/>
   </noscript>
  </div>
  <script type="text/javascript">
   document.write('&lt;div id="noCookie" class="siteError"&gt;');
				document.write('&lt;p id="noCookieText" class="supportErrorText"&gt;');
				document.write('Please enable cookies in your browser to experience all the custom features of our site, including the ability to make a purchase. ');
				document.write('&lt;/p&gt;');
				document.write('&lt;/div&gt;');
  </script>
  <noscript>
   <div class="siteError" id="noScript">
    <p class="supportErrorText" id="noScriptText">
     Please
     <a href="/customerService/info.do?cid=000000">
      enable JavaScript
     </a>
     in your browser to experience all the custom features of our site, including the ability to make a purchase.
    </p>
    <p class="supportErrorText" id="noCookieText">
     Please enable cookies in your browser to experience all the custom features of our site, including the ability to make a purchase.
    </p>
   </div>
  </noscript>
  <div class="cssHide2" id="popupLayeredContent">
  </div>
  <div id="quickLookWindow">
  </div>
  <img alt="QuickLook" class="cssHide2" id="quickLookLauncher" onclick="quickLook.launchQuickLook();" onmousedown="setImgSrc(this,'/gid/assets/common/quicklook/en_US/button_quicklook_launcher_down.gif');" onmouseout="setImgSrc(this,'/gid/assets/common/quicklook/en_US/button_quicklook_launcher_on.gif');" onmouseover="setImgSrc(this,'/gid/assets/common/quicklook/en_US/button_quicklook_launcher_over.gif');" src="/assets/common/clear.gif" style="cursor: pointer;"/>
  <div id="dragLayer">
   <div id="dragBox">
    <img id="dragImg" src="/assets/common/clear.gif"/>
   </div>
  </div>
  <div id="zoomLayer">
   <img id="zoomImg" src="/assets/common/clear.gif"/>
  </div>
  <div class="cssHide2 productError" id="productColorError" style="display:none;">
   <div class="" id="productColorErrorMain">
    select
   </div>
   <div class="" id="productColorErrorArrow">
   </div>
  </div>
  <div class="cssHide2 productError" id="productSizeDimension1Error" style="display:none;">
   <div class="" id="productSizeDimension1ErrorMain">
    select
   </div>
   <div class="" id="productSizeDimension1ErrorArrow">
   </div>
  </div>
  <div class="cssHide2 productError" id="productSizeDimension2Error" style="display:none;">
   <div class="" id="productSizeDimension2ErrorMain">
    select
   </div>
   <div class="" id="productSizeDimension2ErrorArrow">
   </div>
  </div>
  <div class="cssHide2" id="productBagError">
  </div>
  <div class="cssHide2" id="productSoldOutMsg">
  </div>
  <div class="cssHide2" id="productOnOrderMsg">
  </div>
  <div class="cssHide2" id="productAjaxLoader">
  </div>
  <div class="cssHide2" id="outfitProductAjaxLoader">
  </div>
  <div class="cssHide2" id="inlineBagAjaxLoader">
   <div id="inlineShoppingBagDataLoaderContainer">
   </div>
   <div id="inlineShoppingBagDataMarketingContainer">
   </div>
  </div>
  <div class="cssHide2" id="watirDebug">
   <div id="debugAjaxStatus">
   </div>
   <div id="debugModules">
   </div>
  </div>
  <div class="onesite modal fade insitu-bag" data-bind="template: {name: modal.modalTemplate, data: modal.modalData}" id="modalWindow" style="letter-spacing: 0em;">
  </div>
  <script id="testModal-template" type="text/html">
   &lt;h1&gt;Example header&lt;/h1&gt;
  </script>
  <script id="addToBag-template" type="text/html">
   &lt;div class="modal-dialog"&gt;
    &lt;div class="modal-content"&gt;
      &lt;div tabindex="1" id="screenreader" aria-labeledby="modalTitle" class="modal-header pd_right_0-75 pd_left_0-75 pd_top pd"&gt;
        &lt;button type="button" class="close right tx_2-00 g-1-24" data-dismiss="modal" aria-label="close"&gt;
          &lt;span aria-hidden="true"&gt;&times;&lt;/span&gt;&lt;span class="sr-only"&gt;&lt;/span&gt;
        &lt;/button&gt;
        &lt;h4 id="modalTitle" tabindex="1" class="tx_bold grey g-11-12"&gt;Added to your bag&lt;/h4&gt;
      &lt;/div&gt;

      &lt;div class="modal-body pd_top_0-75 pd_right_0-75 pd_left_0-75" data-bind="foreach: data.inlineBagModelData.inlineBagItems"&gt;
        &lt;div tabindex='1' class="product-container g-1-1"&gt;
          &lt;a tabindex="-1" data-bind="attr: {href: productLink }"&gt;
            &lt;img class="g-1-6 left border-box hide-at-md product-img"  data-bind="attr: {src: '/' + siImageURI, alt: styleDescription }"&gt;
          &lt;/a&gt;
          &lt;div class="g-lg-5-6 g-1-1 border-box right info-content"&gt;

            &lt;div class="g-lg-2-3 g-1-1 sp_sm "&gt;
              &lt;a id="productTitle" tabindex="-1" data-bind="attr: {href: productLink }"&gt;
                &lt;h4 class="tx_bold black sp_sm overflow-ellipses" data-bind="html: styleDescription"&gt;&lt;/h4&gt;
              &lt;/a&gt;
              &lt;div class="tx_sm light-grey insitu-sku" data-bind="text: '#'+sku"&gt;&lt;/div&gt;
            &lt;/div&gt;
            &lt;div class="g-lg-1-3 g-1-1 sp_sm border-box price-container insitu-price"&gt;
              &lt;!-- ko if: shouldShowSalePrice --&gt;
              &lt;h4 aria-hidden="true" class="tx_bold insitu--price original_price light-grey sp_right_sm" data-bind="text: listPrice"&gt;&lt;/h4&gt;
              &lt;h4 class="tx_bold insitu--price gap-inc-orange" data-bind="text: sellPrice"&gt;&lt;/h4&gt;
              &lt;!-- /ko --&gt;
              &lt;!-- ko if: !shouldShowSalePrice --&gt;
              &lt;h4 class="tx_bold black insitu--price" data-bind="text: listPrice"&gt;&lt;/h4&gt;
              &lt;!-- /ko --&gt;
            &lt;/div&gt;
            &lt;ul id="productDetails"&gt;
              &lt;li class="sp_sm"&gt;
                &lt;span class="product-attr light-grey"&gt;Color:&lt;/span&gt;
                &lt;span class="black" data-bind="text: colorDescription"&gt;&lt;/span&gt;
              &lt;/li&gt;
              &lt;li class="sp_sm"&gt;
                &lt;span class="product-attr light-grey"&gt;Size:&lt;/span&gt;
                &lt;span class="black" data-bind="text: skuDescription"&gt;&lt;/span&gt;
              &lt;/li&gt;
              &lt;li&gt;
                &lt;span class="product-attr light-grey"&gt;Qty:&lt;/span&gt;
                &lt;span class="black" data-bind="text: quantity"&gt;&lt;/span&gt;
              &lt;/li&gt;
            &lt;/ul&gt;
          &lt;/div&gt;
        &lt;/div&gt;
        &lt;!-- ko if: inventoryLevel === '4' --&gt;
        &lt;div class="g-1-1 sp_top_sm"&gt;
          &lt;span class="icon-info-red-outer"&gt;
            &lt;span class="icon-info-red"&gt;
              &lt;span class="visually-hidden"&gt;alert&lt;/span&gt;
              &lt;/span&gt;
          &lt;/span&gt;
          &lt;span class="tx_sm alert-red" data-bind="html: onOrderMessage + ' ' + estimatedShipDate"&gt;&lt;/span&gt;
        &lt;/div&gt;
        &lt;!-- /ko --&gt;
        &lt;hr aria-hidden="true"&gt;
      &lt;/div&gt;

      &lt;div class="modal-footer pd_0-75 pd_right_0-75 pd_left_0-75"&gt;

        &lt;div class="g-1-1 sp_sm"&gt;
          &lt;div class="left g-1-2 border-box tx_left black tx_bold"&gt;

            &lt;span data-bind="if: data.inlineBagModelData.itemCount === '1' "&gt;
              &lt;span&gt;1 item in bag&lt;/span&gt;
            &lt;/span&gt;
            &lt;span data-bind="if: +data.inlineBagModelData.itemCount &gt; 1 "&gt;
              &lt;span data-bind="text: '%1 items in bag'.replace('%1', data.inlineBagModelData.itemCount) "&gt;&lt;/span&gt;
            &lt;/span&gt;

          &lt;/div&gt;
          &lt;div class="right g-1-2 border-box tx_right black tx_bold" data-bind="text: 'Subtotal: ' + data.inlineBagModelData.subTotal"&gt;
          &lt;/div&gt;
        &lt;/div&gt;

        &lt;div class="left g-1-1"&gt;
          &lt;div class="g-1-2 border-box left pd_right_sm"&gt;
            &lt;button type="button" class="btn grey-bg tx_bold" data-dismiss="modal"&gt;
              keep shopping
            &lt;/button&gt;
          &lt;/div&gt;

          &lt;div class="g-1-2 border-box pd_left_sm"&gt;
            &lt;a tabindex="-1" href="#" data-bind="attr: {href: data.checkoutUrl}, click: function() {window.location=data.checkoutUrl;}" class="insitu-checkout"&gt;
              &lt;button type="button" class="btn gap-inc-orange-bg tx_bold"&gt;
                checkout
                &lt;span class="icon-right-chevron-white-outer"&gt;
                  &lt;span class="icon-right-chevron-white"&gt;&lt;/span&gt;
                &lt;/span&gt;
              &lt;/button&gt;
            &lt;/a&gt;
          &lt;/div&gt;
        &lt;/div&gt;

        &lt;!--
        &lt;div class="g-1-1 vvm tx_left sp_top_sm pd_all border-box"&gt;
          Virtual Value Message Area: FPO Redeem Your $20 in Rewards
        &lt;/div&gt;
        --&gt;

      &lt;/div&gt;
    &lt;/div&gt;
  &lt;/div&gt;
  </script>
  <div class="onesite">
   <!-- ko if: universalModal.isModalVisible -->
   <div data-bind="with: universalModal">
    <div class="universal-modal" data-bind="
      css: {
        'show-modal': isModalVisible
      }
    ">
     <div class="modal--header" data-bind="css:{ 'modal--header_no-title': hasTitle() }">
      <span data-bind="text: templateData().title">
      </span>
      <button aria-label="Close Modal" class="modal--close-button" data-bind="click: closeModal">
      </button>
     </div>
     <div class="modal--content" data-bind="template: {name: templateName, data: templateData()}">
     </div>
    </div>
    <div class="universal-modal--backdrop" data-bind="
      css: {
        'show-modal': isModalVisible
      },
      click: closeModal
    ">
    </div>
   </div>
   <!-- /ko -->
   <script id="modal-iframe-template" type="template/handlebars">
    &lt;iframe id="iframe" data-bind="attr: {src: url}"&gt;&lt;/iframe&gt;
   </script>
  </div>
  <script src="/Asset_Archive/static-content/build/vendor/vendor-common.js">
  </script>
  <script src="/Asset_Archive/static-content/build/js/gap-common.js">
  </script>
  <div id="siteWideBusinessCodeBody">
   <!-- @TemplateContentLayout(templateRegionName:"gid.common.siteWide.businessCode.regionBottom") -->
   <!-- start onesite-611-->
   <script id="onesite-brandbar" type="text/html">
    &lt;div id="smBPLogo" class="newSmBPLogo needsclick"&gt;
    &lt;a href="/" class="needsclick"&gt;
      &lt;img src="/content/static-preview/grunticon-logos/png/gap.png" alt="gap home" class="needsclick"/&gt;
    &lt;/a&gt;
  &lt;/div&gt;

  &lt;div class="static-edfs onesite"&gt;
    &lt;!-- BEGIN - WCD Sitewide Container 19 --&gt;
    &lt;!-- BEGIN Content Item File: /content/0009/058/692/cn9058692.html --&gt;
&lt;div id="contentItemContainer212630" class="9058692" &gt;

&lt;div id="sm_bp_edfs_banner"&gt;&lt;a href="#edfs" onclick="" rel="jbox" data-jbox-url="/buy/info.do?cid=47471" data-jbox-width="300" data-jbox-height="350" class="needsclick"&gt;&lt;img src="/content/static/edfs/gol/gap_us.png" alt="Free shipping on all orders over $50. Free returns on all orders." width="100%" class="needsclick" /&gt;&lt;/a&gt;&lt;/div&gt;


&lt;/div&gt;
&lt;!-- END Content Item File: /content/0009/058/692/cn9058692.html --&gt;

    &lt;!-- END - WCD Sitewide Container 19 --&gt;
  &lt;/div&gt;
   </script>
   <!-- end onesite-611-->
   <style>
    /* new edfs banner */
.static-edfs { display:none; margin-bottom: 1em;}
/*#responsiveUniversalBar &gt; .limit-width, 
#responsiveUniversalBar &gt; .edfs_for-sm { display: none; } // TAKE THIS OUT
 #smBPLogo {height: 37px;margin-left: auto;margin-right: auto; width: 249px;} */
#smBPLogo {text-align: center; max-width: 177px; margin: 0.4em auto;}

.breakpoint-medium .newSmBPLogo, .breakpoint-small .newSmBPLogo,
.breakpoint-medium .static-edfs, .breakpoint-small .static-edfs { display: block;}

.breakpoint-large .newSmBPLogo, .breakpoint-large .newSmBPLogo,
.breakpoint-large .static-edfs, .breakpoint-large .static-edfs,
.breakpoint-xlarge .newSmBPLogo, .breakpoint-xlarge .newSmBPLogo,
.breakpoint-xlarge .static-edfs, .breakpoint-xlarge .static-edfs { display: none;}

.breakpoint-medium #universalBar, .breakpoint-small #universalBar,
.breakpoint-medium #storeLogoContainer, .breakpoint-small #storeLogoContainer {display:none !important; height: 0px;}

/* FIX TO DIRECT CLASS TO THE CORRECT URL FOR BGD IMAGE 
.sister-brands--sprite {
  background-image: url(/Asset_Archive/static-content-preview/build/images/sprite/sister-brands-1x.png);
}*/
   </style>
   <!--script&gt;
(function($) {
  /* this is for the static edfs, logo and hiding universal bar in s bp*/

  $(function () {
    var shouldCare = /(order|orderConfirm|shopping_bag)\.do/.test(window.location.pathname) &amp;&amp; $('.newSmBPLogo').length == 0,
      universalBar;
    var isASeg = gidLib.getCookie("ABSeg") === 'ASeg' || gidLib.getCookie("ABSeg") === 0;
    if(shouldCare &amp;&amp; isASeg) {
      universalBar = $('#universalBar')[0] || $('#responsiveUniversalBar')[0];
      $($("#onesite-brandbar").text())
      .insertAfter(universalBar);
    }

  });

})(jQuery);
&lt;/script-->
   <!-- BEGIN - WCD Sitewide Container 16 -->
   <!-- BEGIN Content Item File: /content/0009/712/385/cn9712385.html -->
   <div class="9712385" id="contentItemContainer212633">
    <script>
     if (window.gap &amp;&amp; gap.CustomNavigationIntegrator &amp;&amp; gap.CustomNavigationIntegrator.setConfig) {
	// IF NOT FACTORY
	if (omni.strCurrentPageName != null &amp;&amp; (omni.strCurrentPageName.indexOf("Factory") &lt; 0) &amp;&amp; (window.location.href.indexOf("cid=48620") &lt; 0) ){
		gap.CustomNavigationIntegrator.setConfig({
			// to edit the default name of a division or subdiv
			// define the biz and follow it with corrected text
			rename : {
			/* EXAMPLE
			"5646" : "Women's"
			*/
			"5646" : "Women",
			"5997" : "Maternity",
			"6413" : "Toddler",
			"6487" : "Baby"
			},

			// to hide a division or sub/div or category
			// only use the biz id
			/* EXAMPLE
			hide : [76739,69775,90824],*/
			hide : [36707,36709,36710,94810,1014714,1014823,1015086,1015088,6345],

			// to add a division or subdiv
			addDivisions : [
			/* EXAMPLE
			{id:"c2136", template:"85035", name:"Customer Service", url:"/customerService/info.do?cid=2136"},
			{id:"c60786", template:"85035", name:"Toasty Tech", url:"/browse/category.do?cid=60786"},
			*/
			{id:"c48620", template:"5646", name:"Gap Factory", url:"/browse/info.do?cid=48620&amp;mlink=39813,8846349,MainNav_GFOLHP&amp;clink=8846349"}
			],

			// to change order of division or subdivision. use biz id or id (from addDivisions)
			/* EXAMPLE
			divisionOrder : [56999,5646,85035,85032,5063,12021,5997,6256,6172,43184,37470,"c2136","c60786","google"]
			*/
			divisionOrder : [5646,83062,5997,5065,6256,6172,6413,6487,"c48620"],
		
			customConfig : function() {
				// make Factory Store clickable
				jQuery('li[data-cid=c48620]').on('click', function(){
					window.location = jQuery(this).children('a').attr('href');
				});
				jQuery('li[data-cid=6256]').children('a').addClass('catnav--item_first-of-type'); // FIX INDENTATION
				jQuery('li[data-cid=6413]').children('a').addClass('catnav--item_first-of-type'); // FIX INDENTATION
				jQuery('li[data-site-cat-key="Womens, Shop Womens styles"]').children('a').text("Shop Women styles").attr('aria-label','Shop Womens styles');
				jQuery('li[data-site-cat-key="divlink: Toddler Girl (1-5 yrs), Shop Toddler Girl (1-5 yrs) styles"]').children('a').text("Shop Toddler styles").attr('aria-label','Shop Toddler styles');
				jQuery('li[data-site-cat-key="Toddler Girl (1-5 yrs), Shop Toddler Girl (1-5 yrs) styles"]').children('a').text("Shop Toddler styles").attr('aria-label','Shop Toddler styles');
				jQuery('li[data-site-cat-key="divlink: Baby Girl (0-24 mos), Shop Baby Girl (0-24 mos) styles"]').children('a').text("Shop Baby styles").attr('aria-label','Shop Baby styles');
				jQuery('li[data-site-cat-key="Baby Girl (0-24 mos), Shop Baby Girl (0-24 mos) styles"]').children('a').text("Shop Baby styles").attr('aria-label','Shop Baby styles');
				
				/* HIDING GapFactory per a diff cookie */
				var gfolSeg = gidLib.getCookieVar("mktUniversalPersist","testGFOL0423");
				if(gfolSeg == 'testGFOL0423_SegB' || gfolSeg == 'testGFOL0423_SegD' || gfolSeg == 'testGFOL0423_SegE' || gfolSeg == 'testGFOL0423_SegF' || gfolSeg == 'testGFOL0423_SegG' || gfolSeg == 'testGFOL0423_SegH') {
					jQuery('li[data-cid=c48620]').hide();
					//console.log(gfolSeg + 'not');
				}

				/*  HIDES CIDs IN SM BP */
				var cidHideArray =[1016310, 57059,1017805];
				if (gap.Mediaqueries.currentBP.size == 'small') {
					jQuery.each(cidHideArray, function(index, value) {
						jQuery("li[data-cid="+value+"]").hide();
					}); 
				} 
				
				/* Hide Search on small BP in shopping bag */
				if (gap.Mediaqueries.currentBP.size == 'small' &amp;&amp; location.pathname == "/buy/shopping_bag.do") {
					jQuery('div[class~=search-component--wrapper_large]').hide().attr('aria-label','hidden');
				} 

				/* overridden leftnav category links reincorporated into menu */			
				jQuery('li[data-cid=6345] a').attr('href','/browse/subDivision.do?cid=6413'); // Redirect Toddler Boy (6345) Division to Toddler (6413)
				jQuery('li[data-cid=1027011] a').attr('href','/browse/info.do?cid=1028245'); // gift shop link
				
			} // end customConfig

		});
		// IS FACTORY
	} else {
		gap.CustomNavigationIntegrator.setConfig({
		// to edit the default name of a division or subdiv
		// define the biz and follow it with corrected text
			rename : {
			/* EXAMPLE
			"5646" : "Women's"
			*/
			"1014714" : "Women",
			"1014823" : "Men",
			"1015086" : "Kids",
			"1015088" : "Baby"
			},

			// to hide a division or sub/div or category
			// only use the biz id
			hide : [36707,36709,36710,94810,5646,83062,5997,5065,6256,6172,6413,6487,6345],

			// to add a division or subdiv
			addDivisions : [
			{id:"c5058", template:"1014714", name:"Gap.com", url:"/browse/home.do?cid=5058&amp;mlink=39813,8846349,GFOL_MainNav_GOLHP&amp;clink=8846349"},
			],

			// to change order of division or subdivision. use biz id or id (from addDivisions)
			divisionOrder : [1014714,1014823,1015086,1015088,"c5058"],
		
			customConfig : function() {
				// make Factory Store clickable
				jQuery('li[data-cid=c5058]').on('click', function(){
					window.location = jQuery(this).children('a').attr('href');
				});
				jQuery('li[data-site-cat-key="Factory Womens, Shop Factory Womens styles"]').children('a').text("Shop Women Styles").attr('aria-label','Shop Women Division styles');
				jQuery('li[data-site-cat-key="Factory Mens, Shop Factory Mens styles"]').children('a').text("Shop Men Styles").attr('aria-label','Shop Men Division styles');
				jQuery('li[data-site-cat-key="Factory Kids, Shop Factory Kids styles"]').children('a').text("Shop Kids Styles").attr('aria-label','Shop Kids Division styles');
				jQuery('li[data-site-cat-key="Factory Baby, Shop Factory Baby styles"]').children('a').text("Shop Baby Styles").attr('aria-label','Shop Baby Division styles');
				/*  HIDES CIDs IN SM BP */
				var cidHideArray =[1016310, 57059];
				if (gap.Mediaqueries.currentBP.size == 'small') {
					jQuery.each(cidHideArray, function(index, value) {
						jQuery("li[data-cid="+value+"]").hide();
					}); 
				} 
				
				
				/* hide search in the brand bar for factory */
				jQuery('div[class~=search-component--wrapper_large]').hide().attr('aria-label','hidden');
				
				
				
			} // end customConfig

		});
	}
};
    </script>
    <!-- BEGIN fix issue where s_pers is being set to blank and causing JS errors during reporting -->
    <script type="text/javascript">
     (function() {
		if (gidLib.getCookie("s_pers") == "") {
			var p = gidLib.setCookieParamsHelper("s_pers");
			gidLib.setCookie("s_pers", null, p.exp, p.path, p.domain, p.isSecure);
		}
	})();
    </script>
    <!-- END fix issue where s_pers is being set to blank and causing JS errors during reporting -->
   </div>
   <!-- END Content Item File: /content/0009/712/385/cn9712385.html -->
   <!-- END - WCD Sitewide Container 16 -->
   <!-- BEGIN - WCD Sitewide Container 17 -->
   <!-- BEGIN Content Item File: /content/0009/700/385/cn9700385.html -->
   <div class="9700385" id="contentItemContainer212632">
    <!-- *************** Matt's Overlay A/B Test*****************  -->
    <map name="gapOverlayMap">
     <area alt="Gap" coords="5,2,139,151" href="/">
     </area>
     <area alt="Women" coords="148,27,260,138" href="/browse/subDivision.do?cid=5646">
     </area>
     <area alt="GapFit" coords="266,26,377,140" href="/browse/subDivision.do?cid=83062">
     </area>
     <area alt="Maternity" coords="385,29,505,139" href="/browse/division.do?cid=5997">
     </area>
     <area alt="Men" coords="511,31,614,138" href="/browse/subDivision.do?cid=5065">
     </area>
     <area alt="Girls" coords="619,30,714,138" href="/browse/subDivision.do?cid=6256">
     </area>
     <area alt="Boys" coords="719,26,823,142" href="/browse/subDivision.do?cid=6172">
     </area>
     <area alt="Toddler" coords="830,28,934,143" href="/browse/subDivision.do?cid=6413">
     </area>
     <area alt="Baby" coords="939,25,1048,143" href="/browse/subDivision.do?cid=6487">
     </area>
    </map>
    <!-- ********************end of Matt's Overlay A/B Test************************* -->
    <!-- CIID: 7952694 US GP 05_30_2014-->
    <!-- VV override - contains content for VV disruptor -->
    <style type="text/css">
     /* Start Banner Discount Message Styles CSS*/
.vvParentContainerClass {position: relative; 
	font-size:0px; 
	z-index: 60; 
	height: 0px; 
	width: 212px; 
	color:#FFFFFF; 
	overflow: hidden;
	}

.offersOnlyBannerClass {background-image: url("/Asset_Archive/GPWeb/content/0009/700/385/assets/OffersOnly_212x27_blue.png"); /*if Brand has specific OFFERS insert Brand specific Offers banner*/
	background-repeat: no-repeat;
	display: block;     
	height: 20px;
	width: 212px;
	}
 .offersOnlyBannerAmtStyle {display:none;margin: 0 0 0 55px; padding-top: 4px; text-align: center; width: 45px}
    
.offersAndRewardsBannerClass {background-image: url("/Asset_Archive/GPWeb/content/0009/700/385/assets/RewardsOffers_212x27_blue.png");  /*if Brand has specific OFFERS AND REWARDS insert Brand specific OFFERS AND REWARDS  banner*/
	background-repeat: no-repeat;
	display: block;
	height: 27px;
	width: 212px;
	}
.offersAndRewardsBannerAmtStyle {display:block; color: #FFFFFF;margin: 0 0 0 46px; padding-top: 5px; text-align: center; width: 45px}
    
.rewardsOnlyBannerClass {background-image: url("/Asset_Archive/GPWeb/content/0009/700/385/assets/RewardsOnly_212x27.gif");
	background-repeat: no-repeat;
	display: block;
	height: 27px;
	width: 212px;
	}
    .rewardsOnlyBannerAmtStyle {display:block;margin: 0 0 0 87px; padding-top: 4px; text-align: center; width: 45px}
   /* END Banner Discount Message CSS*/ 
   
   /* Start Disrupter Styles CSS*/

.offersOnlyFlyOutClass {background-image: url("/Asset_Archive/GPWeb/content/0009/700/385/assets/VV-GapCashOffersOnly_violator_blue.png");
	color: #FFFFFF;
	font-size: 0;
	height: 100%;
	overflow: hidden;
	position: absolute;
	width: 212px;
	z-index: 60;
	}
    
  .offersAndRewardsFlyOutClass {background-image: url("/Asset_Archive/GPWeb/content/0009/700/385/assets/VV-RewardsOffers-violator_blue.png");
	color: #FFFFFF;
	font-size: 0;
	height: 100%;
	overflow: hidden;
	position: absolute;
	width: 212px;
	z-index: 60;
}

.rewardsOnlyFlyOutClass {background-image: url("/Asset_Archive/GPWeb/content/0009/700/385/assets/VV-RewardOnly-violator.png");
	color: #FFFFFF;
	font-size: 0;
	height: 100%;
	overflow: hidden;
	position: absolute;
	width: 212px;
	z-index: 60;
	}
   /* END Disrupter Style CSS*/
    </style>
    <script type="text/javascript">
     /* Add the custom prototype events to the jQuery so we can use jQuery to observe these events:
 * - categoryFacetedSearchGrid:ready
 * - productPage:ready
 * - filterTools:ready
 */
if (jQuery.event.trigger.toString().indexOf("oldjQueryTrigger") == -1) {
	(function( $ ) {
		$.each(['personalizationData:ready','categoryFacetedSearchGrid:ready','productPage:ready','filterTools:ready'], function(index,eventName) {
			document.observe(eventName,function(){ 
				$(document).trigger(eventName);
			});
		});
	})( jQuery );
}

var wcd_VV = function() {

var psRewardsOffers = false;  //note: BOOLEAN
var psVvAmtStyle = ''; //style VV AMOUNT
var psVvAmtStyleDsrpt = 'none'; //style VV AMOUNT

	//if ( (personalizationService.model.personalizationData.personalizationInfoV1.customerAttributes) &amp;&amp; (parseInt(personalizationService.model.personalizationData.personalizationInfoV1.customerAttributes.totalRewardValue) &gt; 0) ) {
if (jQuery(personalizationService.model.personalizationData.personalizationInfoV1.customerAttributes).length == 1){
		
	//Check for Brand ID in personalizationService and IF true equal to this BRAND_CODE set thisBrandOfferAvailable = true;
		var offersAvailable;
		var currentBrand;
		var thisBrandOfferAvailable;

		currentBrand = brandConst.BRAND_CODE.toString();
		offersAvailable = personalizationService.model.personalizationData.personalizationInfoV1.customerAttributes.offerBrands;
		offersAvailable.split(',');
		if (jQuery.inArray(currentBrand, offersAvailable) != -1) {
		    thisBrandOfferAvailable = true;
		} else {
		    thisBrandOfferAvailable = false;
		}
		//console.info(thisBrandOfferAvailable);
		
	//End Check for Brand ID and set offersForThisBrand = true;
		
	    var psRewards = false;
		if (parseInt(personalizationService.model.personalizationData.personalizationInfoV1.customerAttributes.totalRewardValue) &gt; 0) {
		psRewards = true};

		var psOffersOnly = 'false';
		if (personalizationService.model.personalizationData.personalizationInfoV1.customerAttributes.hasOffers=="true" &amp;&amp; thisBrandOfferAvailable == true ) {
		psOffersOnly = "true";}; ;  //note: STRING
		
		//var psRewardsOffers = false;  //note: BOOLEAN
		if(psRewards == true &amp;&amp; psOffersOnly == 'true' &amp;&amp; thisBrandOfferAvailable == true){psRewardsOffers = true;};  //set var for rewards and Offers - true or false

//Define Display Styles:  Rewards Only:	
if (psRewards == true){
	psVvAmtStyle = "rewardsOnlyBannerAmtStyle";  
	psVvAmtStyleDsrpt = "block";
	bannerClass = "rewardsOnlyBannerClass";
	discruptorClass = "rewardsOnlyFlyOutClass";
	}

//Define Display Styles:  Offers Only:		 
	if(psOffersOnly == 'true' &amp;&amp; psRewardsOffers != true){
	psVvAmtStyle = "offersOnlyBannerAmtStyle";
	psVvAmtStyleDsrpt = "none";
	bannerClass = "offersOnlyBannerClass";
	discruptorClass = "offersOnlyFlyOutClass";
	} 
	
//Define Display Styles:  Rewards and Offers:
	if(psRewardsOffers == true &amp;&amp; psOffersOnly == 'true'){
	psVvAmtStyle = "offersAndRewardsBannerAmtStyle";
	psVvAmtStyleDsrpt = "block";
	bannerClass = "offersAndRewardsBannerClass";
	discruptorClass = "offersAndRewardsFlyOutClass";
	} 

//console.info("VV Exists!");		
			
		// check for and setup the disruptor
		var disruptorVal = gidLib.getCookieVar("mktGlobalSession","vvdisruptorvalue");
		var value = 1;

// if wcdBrandDisrupterDidFire var not present assume false.
		if(typeof wcdBrandDisrupterDidFire == 'undefined') {
			wcdBrandDisrupterDidFire = false;
		}
		if ( (location.href.indexOf("category.do") &lt; 0) &amp;&amp; (location.href.indexOf("account_rewards_summary.do") &lt; 0) &amp;&amp; (location.href.indexOf("account_summary.do") &lt; 0) &amp;&amp; (!wcdBrandDisrupterDidFire) ){ // do not show disruptor if on a category page or account summary page
			if (disruptorVal == "" &amp;&amp; psRewards == true || disruptorVal == "" &amp;&amp; psOffersOnly == 'true' &amp;&amp; psRewardsOffers != true || disruptorVal == "" &amp;&amp; psRewardsOffers == true &amp;&amp; psOffersOnly == 'true' ) {	// show disruptor only three times and in the specific 3 cases
				gidLib.setCookieVar("mktGlobalSession","vvdisruptorvalue",value);
				
				fireVVDisruptor(psVvAmtStyle, psVvAmtStyleDsrpt, psRewardsOffers);
			} 
			else if (parseInt(disruptorVal) &lt; 3 &amp;&amp; psRewards == true || disruptorVal &lt; 3 &amp;&amp; psOffersOnly == 'true' &amp;&amp; psRewardsOffers != true || disruptorVal &lt; 3 &amp;&amp; psRewardsOffers == true &amp;&amp; psOffersOnly == 'true') {
				value = parseInt(disruptorVal) + 1;
				gidLib.setCookieVar("mktGlobalSession","vvdisruptorvalue",value);
				
				fireVVDisruptor(psVvAmtStyle, psVvAmtStyleDsrpt, psRewardsOffers);
			} 
			
			else {
				Event.fire(document, "personalizationService:renderCustomerAttributes");
				if(jQuery("#offersAndRewards").length){ 
					jQuery("#offersAndRewards").addClass(bannerClass);
					jQuery("#offersAndRewards").html("&lt;p class='"+psVvAmtStyle+"'&gt;$"+personalizationService.model.personalizationData.personalizationInfoV1.customerAttributes.totalRewardValue+"&lt;/p&gt;");
				}
			}
		} 
		else {
			Event.fire(document, "personalizationService:renderCustomerAttributes");
			if(jQuery("#offersAndRewards").length){ 
						jQuery("#offersAndRewards").addClass(bannerClass);
						jQuery("#offersAndRewards").html("&lt;p class='"+psVvAmtStyle+"'&gt;$"+personalizationService.model.personalizationData.personalizationInfoV1.customerAttributes.totalRewardValue+"&lt;/p&gt;");
						jQuery("#offersAndRewards").css("display","block");
				}
		}
		// fire virtual value code
	}
}

var fireVVDisruptor = function(psVvAmtStyle, psVvAmtStyleDsrpt, psRewardsOffers) {
//console.info(wcd_VV.psRewardsOffers);
var psRewardsOffers= psRewardsOffers;
var psVvAmtStyle = psVvAmtStyle;     //style VV AMOUNT
var psVvAmtStyleDsrpt = psVvAmtStyleDsrpt;    //style VV AMOUNT

//console.info("VV Disruptor Firing!");
	var vvvalue = parseInt(personalizationService.model.personalizationData.personalizationInfoV1.customerAttributes.totalRewardValue);
//	if (psRewards == true){
		var vvfontvalue = 12;
		var vvmargintopvalue = 2;
		vvMarginLeftValue= 128;
		var vvcurrency="";
		if (vvvalue &lt; 100) { 
			vvfontvalue = 60;
			vvmargintopvalue = 1;
		} else if (vvvalue &lt; 1000) {
			vvfontvalue = 42;
			vvmargintopvalue = 6;
		} else if (vvvalue &lt; 10000) {
			vvmargintopvalue = 11;
			vvfontvalue = 28;
		}
//	}

if(psRewardsOffers == true ){	
		var vvfontvalue = 12;
		var vvmargintopvalue = 2;
		var vvcurrency="$";
		vvMarginLeftValue= 100;
		if (vvvalue &lt; 100) { 
			vvfontvalue = 23;
			vvmargintopvalue = 3;
		} else if (vvvalue &lt; 1000 ) {
			vvfontvalue = 18;
			vvmargintopvalue = 5;
		} else if (vvvalue &lt; 10000) {
			vvmargintopvalue = 9;
			vvfontvalue = 28;
		}
}	

//insert inline bag header

jQuery( "&lt;div id='vvParentContainer' class = 'vvParentContainerClass'&gt;&lt;a href='/profile/account_rewards_summary.do?locale=en_US'&gt;&lt;div id='vvDivDisContainer' class = " + discruptorClass + "&gt;&lt;div id='vvamount' style='display: "+psVvAmtStyleDsrpt +";color:#f47529; margin-left:"+vvMarginLeftValue+"px; margin-top:"+ vvmargintopvalue + "px; font-size:" + vvfontvalue + "px;'&gt;&lt;/div&gt;&lt;/div&gt;&lt;/a&gt;&lt;/div&gt;").insertAfter("#inlineBagHeader");

if( jQuery('#vvamount').length &gt; 0 ) {
	$("vvamount").update(vvvalue);	
}

jQuery( "#vvParentContainer" ).animate({height:"78px"},500,function() {
			setTimeout( function() { 
							if(jQuery("#vvParentContainer").length){
								jQuery("#vvParentContainer").css ("height","0px");
							} 
//console.info("Firing VV main code!");
							Event.fire(document, "personalizationService:renderCustomerAttributes");
				
							if(jQuery("#offersAndRewards").length){ 
									jQuery("#offersAndRewards").addClass(bannerClass);
									jQuery("#offersAndRewards").html("&lt;p class='"+psVvAmtStyle+"'&gt;$"+personalizationService.model.personalizationData.personalizationInfoV1.customerAttributes.totalRewardValue+"&lt;/p&gt;");
									jQuery("#offersAndRewards").css("display","block");
							}
							
//console.info("VV Main code complete!");							
				}, 5000);
		});

//console.info("VV Disruptor Fired! Value = " + vvvalue);
}

var thisBrowser = navigator.userAgent;
if (thisBrowser.indexOf("MSIE") != -1) { // if IE
    if (thisBrowser.indexOf("MSIE 7") &lt; 0) { // if not IE 7
        if (document.documentMode != 7) { // if not IE 7 mode

			//Event.observe( document, 'personalizationData:ready', function () {
			jQuery(document).on('personalizationData:ready', function () {
		       // alert ("personalization ready");
			    wcd_VV();
		   })

        }
    }
} else { // all other browsers
			//Event.observe( document, 'personalizationData:ready', function () {
		jQuery(document).on('personalizationData:ready', function () {
		//     alert ("personalization ready");
		    wcd_VV();
		  })

}
    </script>
    <!-- End VV override


&lt;/div&gt;
&lt;!-- END Content Item File: /content/0009/700/385/cn9700385.html -->
    <!-- END - WCD Sitewide Container 17 -->
    <!-- BEGIN - WCD Sitewide Container 18 -->
    <!-- BEGIN Content Item File: /content/0009/151/488/cn9151488.html -->
    <div class="9151488" id="contentItemContainer212631">
     <script type="text/javascript">
      if( location.pathname == '/buy/shopping_bag.do' || location.pathname == '/checkout/order.do' ) {

var wcdShipOptionOverrides = {

	model: {
		piperlimeInBag: false,
		shipOption3To5: '2101'
	},
	
	controller: { 
		// Init for shopping bag
		initShoppingBag: function() {
			
			// Initial loop thru ship options; this decorator will run on load, whenever new option selected or shopping bag item updated/removed
			var shoppingBagTransformerModule = angular.module('gid.transformer.shoppingBagTransformer');
			shoppingBagTransformerModule.config(function($provide) {
				$provide.decorator('shoppingBagTransformer', function($delegate) {
					var oldTransformResponse    = $delegate.transformResponse;
					var oldTransformBagResponse = $delegate.transformBagResponse;
		
					var overrideShippingData = function(jsonData) {
						var model = wcdShipOptionOverrides.model;
											
						if (jsonData.shoppingBag &amp;&amp; jsonData.shoppingBag.shippingInfo &amp;&amp; jsonData.shoppingBag.shippingInfo.shippingOptions) {
							// Piperlime in bag check
							var activeItems = [];
							if( jsonData.shoppingBag.activeItems ) {
								activeItems = jsonData.shoppingBag.activeItems;
								if( activeItems.length &gt; 0 ) {
									wcdShipOptionOverrides.model.piperlimeInBag = false;
									activeItems.each( function( elt, idx ) {
										if( ! elt.deleted &amp;&amp; elt.brandAbbrName == 'BG' ) {
											wcdShipOptionOverrides.model.piperlimeInBag = true;
										}
									});
								}
							}
							
							// Loop through shipping options
							var shipOptions = jsonData.shoppingBag.shippingInfo.shippingOptions;
							shipOptions.each( function( elt, idx ) {
								if( wcdShipOptionOverrides.model.piperlimeInBag ) {
									if( elt.shippingId == wcdShipOptionOverrides.model.shipOption3To5 ) {
										elt.description = '3-5 business days - FREE with Piperlime';
									}
								}
							});
							
							jsonData.shoppingBag.shippingInfo.shippingOptions = shipOptions;
						} 
						return jsonData;
					};
		
					$delegate.transformResponse = function(data, headers) {
						var jsonData = oldTransformResponse(data, headers);
						return overrideShippingData(jsonData);
					};
		
					$delegate.transformBagResponse = function(data) {
						var jsonData = oldTransformBagResponse(data);
						return overrideShippingData(jsonData);
					}
		
					return $delegate;
				});
			});
		},
	
		initCheckout: function() {
			// If Piperlime in bag, update language on 3-5
			if( ccm &amp;&amp; ccm.shipping &amp;&amp; ccm.shipping.view &amp;&amp; ccm.shipping.view.setDataToPage ) { 
				ccm.shipping.view.setDataToPage = ccm.shipping.view.setDataToPage.wrap( function( om ) {
					om();
					
					var model = wcdShipOptionOverrides.model;
					var plInBagCheck = false;
					if( checkout.model &amp;&amp; checkout.model.data &amp;&amp; checkout.model.data.shoppingBag &amp;&amp; checkout.model.data.shoppingBag.lineItems ) {
						for( var i=0; i &lt; checkout.model.data.shoppingBag.lineItems.length; i++ ) {
							if( checkout.model.data.shoppingBag.lineItems[i].brandRo == '4' ) {
								plInBagCheck = true;
							}
						}
						
					}
					if( plInBagCheck === true ) {						
						if( jQuery('#shippingOptionsRadioText' + model.shipOption3To5 ).length &gt; 0 ) {
							var shipOptionTextToUpdate = jQuery('#shippingOptionsRadioText' + model.shipOption3To5 ).text();
							shipOptionTextToUpdate = shipOptionTextToUpdate.replace('$0.00','FREE with Piperlime');
							jQuery('#shippingOptionsRadioText' + model.shipOption3To5 ).text( shipOptionTextToUpdate );
						}
					}
				});
			}
		}
	}
}

if( location.pathname == '/buy/shopping_bag.do' ) {
	wcdShipOptionOverrides.controller.initShoppingBag();
}
else if( location.pathname == '/checkout/order.do' ) {
	wcdShipOptionOverrides.controller.initCheckout();
}

}
     </script>
    </div>
    <!-- END Content Item File: /content/0009/151/488/cn9151488.html -->
    <!-- END - WCD Sitewide Container 18 -->
    <!-- BEGIN - WCD Sitewide Container 20 -->
    <!-- BEGIN Content Item File: /content/0009/932/674/cn9932674.html -->
    <div class="9932674" id="contentItemContainer212629">
     <!-- GOL US - pixel container -->
     <script type="text/javascript">
      if( location.pathanem != '/checkout/order.do' ) {

var doubleClickPixelPartner = new pixelManagementService.constructors.AbstractPixelPartner();
pixelManagementService.controller.pixelPartnerManager.setPixelPartnerToPixelPartnerRegistry(doubleClickPixelPartner);

with (doubleClickPixelPartner) {
	isReadyForTransmission = false;
	isWaitReport = false;
	pixelPartnerId = "doubleClickPixelPartner";
	pixelPartnerName = "DoubleClick Iframe Pixel Partner";
	pixelPartnerCookieVarPrefix = "doubleClick";
	pixelPartnerInboundParameterList = [];
	pixelPartnerPersistedParameterList = [];
	pixelPartnerStartDate = "2011/10/20";
	pixelPartnerEndDate = "2020/10/24";

	controller.setPixelPartnerModel = function() {
		
		// Set DoubleClick config parameters for brands		
		this.model.config_gap_us = {
		  confirmation: { type : 'usgap534', cat : 'usgap269'},
		  bag:          { type : 'usgap090', cat : 'usgap542'},
		  browse:       { type : 'usgap090', cat : 'usgap037'},
		  currency : "USD",
		  src : 2840522
		};
		
		this.model.config_br_us = {
		  confirmation: { type : 'usban166', cat : 'usban828'},
		  bag:          { type : 'usban607', cat : 'usban981'},
		  browse:       { type : 'usban607', cat : 'usban884'},
		  currency : "USD",
		  src : 2840522
		};
		
		this.model.config_on_us = {
		  confirmation: { type : 'usold624', cat : 'usold194'},
		  bag:          { type : 'usold987', cat : 'usold108'},
		  browse:       { type : 'usold987', cat : 'usold797'},
		  currency : "USD",
		  src : 2840522
		};
		
		this.model.config_pl_us = {
		  confirmation: { type : 'uspip864', cat : 'uspip652'},
		  bag:          { type : 'uspip685', cat : 'uspip428'},
		  browse:       { type : 'uspip685', cat : 'uspip655'},
		  currency : "USD",
		  src : 2840522
		};
		
		this.model.config_at_us = {
		  confirmation: { type : 'usath604', cat : 'usath169'},
		  bag:          { type : 'usath562', cat : 'usath310'},
		  browse:       { type : 'usath562', cat : 'usath994'},
		  currency : "USD",
		  src : 2840522
		};
		
		// Set up configs for entering brand code
		this.model.configs = { '1': this.model.config_gap_us, '2': this.model.config_br_us, '3' : this.model.config_on_us, '4' : this.model.config_pl_us, '10' : this.model.config_at_us };
		this.model.config = this.model.config_gap_us;
		
		// Set metrics from PixMan library
		var metricsLibrary = pixelManagementService.model.metricsLibrary;
		this.model.enteringBrandCode = ( metricsLibrary.common.enteringBrandCode ) ? metricsLibrary.common.enteringBrandCode : '';
		this.model.pageUrl = ( metricsLibrary.common.pageUrl ) ? encodeURIComponent(metricsLibrary.common.pageUrl) : '';
		this.model.pageName = ( metricsLibrary.common.pageName ) ? encodeURIComponent(metricsLibrary.common.pageName) : '';
		this.model.pageType = ( metricsLibrary.common.pageType ) ? metricsLibrary.common.pageType : '';
		if( this.model.pageType.substr(0,1) == "/" ) { this.model.pageType = this.model.pageType.substr(1); }
		this.model.pageId = ( metricsLibrary.common.pageId ) ? metricsLibrary.common.pageId : '';
		this.model.lastInTID = ( metricsLibrary.common.tid ) ? metricsLibrary.common.tid : '';
		this.model.apCode = ( metricsLibrary.common.ap ) ? metricsLibrary.common.ap : '';
		this.model.isNewCustomer = ( metricsLibrary.common.isNewCustomer ) ? metricsLibrary.common.isNewCustomer : '';
		this.model.visitorFlag = ( metricsLibrary.common.isRecognizedVisitor ) ? metricsLibrary.common.isRecognizedVisitor : '';
		this.model.proto = window.location.protocol;
			
		// Set product variables
		var productList = ( metricsLibrary.shoppingBag.productList ) ? metricsLibrary.shoppingBag.productList : [];
		var skus = "";
		var prices = "";
		var productNames = "";
		var brands = "";
		var prodQty = ( metricsLibrary.shoppingBag.productCount ) ? metricsLibrary.shoppingBag.productCount : 0;
		if (typeof(productList != "undefined") &amp;&amp; Object.isArray(productList) &amp;&amp; productList.length != 0 &amp;&amp; productList[0].skuId != "") {  //to be changed
			prices = productList.pluck('price').join('|');
			productNames = productList.pluck('productName').join('|');
			brands = productList.pluck('productBrandCode').join('|');
			productList.each( function( prod, i ) {
				skus += prod.skuId;
				if( ( i + 1 ) != productList.length ) { skus += "|"; }
			});
		}
		
		this.model.itemPrices = prices;
		this.model.itemBrands = brands;
		this.model.qty = prodQty;
		this.model.productSkus = skus;
		
	}
	controller.setPixelPartnerTransmissionTemplate = function() {
		var shoppingBagUrls = ['/buy/shopping_bag.do','/buy/shopping_bag_delete_item.do','/buy/shopping_bag_save_item.do','/buy/shopping_bag_move_item.do','/buy/edit_shipping_method_bag.do'];
		var metricsLibrary = pixelManagementService.model.metricsLibrary;
		var axel = Math.random() + "";
		var a = axel * 10000000000000;
		
		if (location.pathname == "/checkout/orderConfirm.do") {

			if( this.model.enteringBrandCode ) {
				this.model.config = this.model.configs[ this.model.enteringBrandCode ] || this.model.config;
			}
			
			// Set order metrics
			// Quantity fix
			var orderProductList = ( metricsLibrary.order.productList ) ? metricsLibrary.order.productList : [];
			var orderProductQty = 0;
			if (typeof(orderProductList != "undefined") &amp;&amp; Object.isArray(orderProductList) &amp;&amp; orderProductList.length != 0 &amp;&amp; orderProductList[0].productBusinessId != "") {
				orderProductList.each( function( prod, i ) {
					orderProductQty += parseInt( prod.quantity );
				});
			}
			this.model.qty = orderProductQty.toString();
			
			// Check/set metrics to partner
			this.model.grossMerchDemand = ( metricsLibrary.order.orderTotal ) ? metricsLibrary.order.orderTotal : 0;
			this.model.checkoutBrand = ( metricsLibrary.order.checkoutBrand ) ? metricsLibrary.order.checkoutBrand : '';			
			this.model.shippingZip = ( metricsLibrary.order.shippingZip ) ? encodeURIComponent( metricsLibrary.order.shippingZip ) : ''; 		
			this.model.billingZip = ( metricsLibrary.order.billingZip ) ? encodeURIComponent( metricsLibrary.order.billingZip ) : '';
			this.model.orderId = ( metricsLibrary.order.orderId ) ? metricsLibrary.order.orderId : '';

			this.model.promotionSubTotal = ( metricsLibrary.order.promotionSubTotal ) ? parseFloat( metricsLibrary.order.promotionSubTotal ) : 0;
			this.model.promotionRewardsTotal = ( metricsLibrary.order.promotionRewardsTotal ) ? parseFloat( metricsLibrary.order.promotionRewardsTotal ) : 0;		
			this.model.giftServicesTotal = ( metricsLibrary.order.giftServicesTotal ) ? parseFloat( metricsLibrary.order.giftServicesTotal ) : 0;
			
			this.model.shippingTotal = ( metricsLibrary.order.shippingTotal ) ? parseFloat( metricsLibrary.order.shippingTotal ) : 0;
			
			this.model.taxTotal = ( metricsLibrary.order.taxTotal ) ? parseFloat( metricsLibrary.order.taxTotal ) : 0;
		
			this.model.orderTotal = ( metricsLibrary.order.orderTotal ) ? parseFloat( metricsLibrary.order.orderTotal ) : 0;
				
			// Fixes rounding problem and convert data back to string for passing in URL
			this.model.myShipTotal = parseInt( this.model.shippingTotal*100 );
			this.model.myTaxTotal = parseInt( this.model.taxTotal*100 );
			this.model.myOrderTotal = parseInt( this.model.orderTotal*100 );
			this.model.myTotal = this.model.myOrderTotal - this.model.myShipTotal - this.model.myTaxTotal;
			this.model.myTotal = parseFloat(this.model.myTotal/100);
			this.model.netDemand = this.model.myTotal;
			this.model.grossMerchandise = this.model.netDemand + this.model.promotionSubTotal;
			this.model.grossMerchandise = this.model.grossMerchandise.toString();
			
			this.pixelPartnerTransmissionTemplate = new Template(		
				"&lt;iframe src=\"#{model.proto}//fls.doubleclick.net/activityi;src=#{model.config.src};type=#{model.config.confirmation.type};cat=#{model.config.confirmation.cat};tran=#{model.enteringBrandCode};qty=#{model.qty};cost=#{model.grossMerchandise};u=#{model.config.currency};u1=#{model.productSkus};u2=#{model.pageType};u3=#{model.pageId};u4=#{model.apCode};u5=#{model.lastInTID};u6=#{model.itemPrices};u7=#{model.itemBrands};u8=#{model.checkoutBrand};u9=#{model.pageName};u11=#{model.isNewCustomer};u12=#{model.shippingZip};u15=#{model.netDemand};u16=#{model.promotionSubTotal};u17=#{model.taxTotal};u18=#{model.shippingTotal};ord=#{model.orderId}?\" width=\"1\" height=\"1\" frameborder=\"0\" scrolling=\"no\" marginheight=\"0\" marginwidth=\"0\"&gt;&lt;/iframe&gt;");
		}
		else if ( shoppingBagUrls.include( location.pathname ) ) {
			this.model.pageType = "shopping_bag";
			this.pixelPartnerTransmissionTemplate = new Template(
				"&lt;iframe src=\"#{model.proto}//fls.doubleclick.net/activityi;src=#{model.config.src};type=#{model.config.bag.type};cat=#{model.config.bag.cat};tran=#{model.enteringBrandCode};qty=#{model.qty};u=#{model.config.currency};u1=#{model.productSkus};u2=#{model.pageType};u3=#{model.pageId};u4=#{model.apCode};u5=#{model.lastInTID};u6=#{model.itemPrices};u7=#{model.itemBrands};u8=#{model.checkoutBrand};u9=#{model.pageName};u10=#{model.pageUrl};ord=" + a + "?\" width=\"1\" height=\"1\" frameborder=\"0\"&gt;&lt;\/iframe&gt;" );
				
		}
		else if (window.location.protocol != "https:") {
			this.pixelPartnerTransmissionTemplate = new Template(
				"&lt;iframe src=\"#{model.proto}//fls.doubleclick.net/activityi;src=#{model.config.src};type=#{model.config.browse.type};cat=#{model.config.browse.cat};tran=#{model.enteringBrandCode};u=#{model.config.currency};u2=#{model.pageType};u3=#{model.pageId};u4=#{model.apCode};u5=#{model.lastInTID};u9=#{model.pageName};u10=#{model.pageUrl};ord=" + a + "?\" width=\"1\" height=\"1\" frameborder=\"0\"&gt;&lt;\/iframe&gt;" );
				
		}
	}
	controller.setCleanUp = function() {
		// alert("setCleanUp() running: pixelPartnerName = " + this.pixelPartnerName);
	}
}

}
     </script>
     <!-- Range DoubleClick pixel - ap-14 -->
     <script type="text/javascript">
      if( location.pathanem != '/checkout/order.do' ) {

var rangeDoubleClickPixelPartner = new pixelManagementService.constructors.AbstractPixelPartner();
pixelManagementService.controller.pixelPartnerManager.setPixelPartnerToPixelPartnerRegistry(rangeDoubleClickPixelPartner);

with (rangeDoubleClickPixelPartner) {
	isReadyForTransmission = false;
	isWaitReport = false;
	pixelPartnerId = "rangeDoubleClickPixelPartner";
	pixelPartnerName = "Range DoubleClick Pixel Partner";
	pixelPartnerCookieVarPrefix = "rangeDoubleClick";
	pixelPartnerInboundParameterList = [];
	pixelPartnerPersistedParameterList = [];
	pixelPartnerStartDate = "2011/10/20";
	pixelPartnerEndDate = "2020/10/24";

	controller.setPixelPartnerModel = function() {
		
		// Range DFA Configs
		this.model.config_range_gap_us = {
		  confirmation: { type : 'confi102', cat : 'gapco477'},
		  currency : "USD",
		  src : 1890739
		};
		
		this.model.config_range_br_us = {
		  confirmation: { type : 'confi102', cat : 'brcon200'},
		  currency : "USD",
		  src : 1890739
		};
	
		this.model.config_range_on_us = {
		  confirmation: { type : 'confi102', cat : 'oncon155'},
		  currency : "USD",
		  src : 1890739
		};
		
		this.model.config_range_pl_us = {
		  confirmation: { type : 'confi102', cat : 'piper427'},
		  currency : "USD",
		  src : 1890739
		};
		
		this.model.config_range_at_us = {
		  confirmation: { type : 'confi102', cat : 'at_co303'},
		  currency : "USD",
		  src : 1890739
		};

		// Set up configs for entering brand code
		this.model.configs_range = { '1': this.model.config_range_gap_us, '2': this.model.config_range_br_us, '3' : this.model.config_range_on_us, '4' : this.model.config_range_pl_us, '10' : this.model.config_range_at_us };
		this.model.config_range = this.model.config_range_gap_us;
		
		// Set metrics from PixMan library
		var metricsLibrary = pixelManagementService.model.metricsLibrary;
		this.model.enteringBrandCode = ( metricsLibrary.common.enteringBrandCode ) ? metricsLibrary.common.enteringBrandCode : '';
		this.model.pageUrl = ( metricsLibrary.common.pageUrl ) ? encodeURIComponent(metricsLibrary.common.pageUrl) : '';
		this.model.pageName = ( metricsLibrary.common.pageName ) ? encodeURIComponent(metricsLibrary.common.pageName) : '';
		this.model.pageType = ( metricsLibrary.common.pageType ) ? metricsLibrary.common.pageType : '';
		if( this.model.pageType.substr(0,1) == "/" ) { this.model.pageType = this.model.pageType.substr(1); }
		this.model.pageId = ( metricsLibrary.common.pageId ) ? metricsLibrary.common.pageId : '';
		this.model.lastInTID = ( metricsLibrary.common.tid ) ? metricsLibrary.common.tid : '';
		this.model.apCode = ( metricsLibrary.common.ap ) ? metricsLibrary.common.ap : '';
		this.model.isNewCustomer = ( metricsLibrary.common.isNewCustomer ) ? metricsLibrary.common.isNewCustomer : '';
		this.model.visitorFlag = ( metricsLibrary.common.isRecognizedVisitor ) ? metricsLibrary.common.isRecognizedVisitor : '';
		this.model.proto = window.location.protocol;
			
		// Set product variables
		var productList = ( metricsLibrary.shoppingBag.productList ) ? metricsLibrary.shoppingBag.productList : [];
		var skus = "";
		var prices = "";
		var productNames = "";
		var brands = "";
		var prodQty = ( metricsLibrary.shoppingBag.productCount ) ? metricsLibrary.shoppingBag.productCount : 0;
		if (typeof(productList != "undefined") &amp;&amp; Object.isArray(productList) &amp;&amp; productList.length != 0 &amp;&amp; productList[0].skuId != "") {  //to be changed
			prices = productList.pluck('price').join('|');
			productNames = productList.pluck('productName').join('|');
			brands = productList.pluck('productBrandCode').join('|');
			productList.each( function( prod, i ) {
				skus += prod.skuId;
				if( ( i + 1 ) != productList.length ) { skus += "|"; }
			});
		}
		
		this.model.itemPrices = prices;
		this.model.itemBrands = brands;
		this.model.qty = prodQty;
		this.model.productSkus = skus;
		
	}
	controller.setPixelPartnerTransmissionTemplate = function() {
		var shoppingBagUrls = ['/buy/shopping_bag.do','/buy/shopping_bag_delete_item.do','/buy/shopping_bag_save_item.do','/buy/shopping_bag_move_item.do','/buy/edit_shipping_method_bag.do'];
		var metricsLibrary = pixelManagementService.model.metricsLibrary;
		var axel = Math.random() + "";
		var a = axel * 10000000000000;
		var partnerCookieValue = metricsLibrary.common.ap;
		
		if (location.pathname == "/checkout/orderConfirm.do" &amp;&amp; partnerCookieValue == "14") {

			if( this.model.enteringBrandCode ) {
				this.model.config_range = this.model.configs_range[ this.model.enteringBrandCode ] || this.model.config_range;
			}
			
			// Set order metrics
			// Quantity fix
			var orderProductList = metricsLibrary.order.productList;
			var orderProductQty = 0;
			if (typeof(orderProductList != "undefined") &amp;&amp; Object.isArray(orderProductList) &amp;&amp; orderProductList.length != 0 &amp;&amp; orderProductList[0].productBusinessId != "") {
				orderProductList.each( function( prod, i ) {
					orderProductQty += parseInt( prod.quantity );
				});
			}
			this.model.qty = orderProductQty.toString();

			this.model.grossMerchDemand = ( metricsLibrary.order.orderTotal ) ? metricsLibrary.order.orderTotal : 0;
			this.model.checkoutBrand = ( metricsLibrary.order.checkoutBrand ) ? metricsLibrary.order.checkoutBrand : '';			
			this.model.shippingZip = ( metricsLibrary.order.shippingZip ) ? encodeURIComponent( metricsLibrary.order.shippingZip ) : ''; 		
			this.model.billingZip = ( metricsLibrary.order.billingZip ) ? encodeURIComponent( metricsLibrary.order.billingZip ) : '';
			this.model.orderId = ( metricsLibrary.order.orderId ) ? metricsLibrary.order.orderId : '';

			this.model.promotionSubTotal = ( metricsLibrary.order.promotionSubTotal ) ? parseFloat( metricsLibrary.order.promotionSubTotal ) : 0;
			this.model.promotionRewardsTotal = ( metricsLibrary.order.promotionRewardsTotal ) ? parseFloat( metricsLibrary.order.promotionRewardsTotal ) : 0;		
			this.model.giftServicesTotal = ( metricsLibrary.order.giftServicesTotal ) ? parseFloat( metricsLibrary.order.giftServicesTotal ) : 0;
			
			this.model.shippingTotal = ( metricsLibrary.order.shippingTotal ) ? parseFloat( metricsLibrary.order.shippingTotal ) : 0;
			
			this.model.taxTotal = ( metricsLibrary.order.taxTotal ) ? parseFloat( metricsLibrary.order.taxTotal ) : 0;
		
			this.model.orderTotal = ( metricsLibrary.order.orderTotal ) ? parseFloat( metricsLibrary.order.orderTotal ) : 0;
						
			// Fixes rounding problem
			this.model.myShipTotal = parseInt( this.model.shippingTotal*100 );
			this.model.myTaxTotal = parseInt( this.model.taxTotal*100 );
			this.model.myOrderTotal = parseInt( this.model.orderTotal*100 );
			this.model.myTotal = this.model.myOrderTotal - this.model.myShipTotal - this.model.myTaxTotal;
			this.model.myTotal = parseFloat(this.model.myTotal/100);
			this.model.netDemand = this.model.myTotal;
			this.model.grossMerchandise = this.model.netDemand + this.model.promotionSubTotal;
			
			this.pixelPartnerTransmissionTemplate = new Template(		
				"&lt;img src=\"https://ad.doubleclick.net/activity;src=#{model.config_range.src};type='#{model.config_range.confirmation.type};cat=#{model.config_range.confirmation.cat};qty=#{model.qty};cost=#{model.grossMerchandise};u11=;u10=;u9=;u8=#{model.shippingZip};u12=#{model.enteringBrandCode};u3=#{model.skus};u2=#{model.productNames};u1=#{model.orderId};u7=;u6=;u5=#{model.netDemand};u4=#{model.qty};ord=#{model.orderId}?\" width=\"1\" height=\"1\" frameborder=\"0\" ALT=\"\"/&gt;");
			
		}
	}
	controller.setCleanUp = function() {
		// alert("setCleanUp() running: pixelPartnerName = " + this.pixelPartnerName);
	}
}

}
     </script>
     <!-- Google Ad Services pixel - PixMan - ap=13 -->
     <script type="text/javascript">
      if( location.pathanem != '/checkout/order.do' ) {

var googleAdServicesPixelPartner = new pixelManagementService.constructors.AbstractPixelPartner();
pixelManagementService.controller.pixelPartnerManager.setPixelPartnerToPixelPartnerRegistry(googleAdServicesPixelPartner);

with (googleAdServicesPixelPartner) {
	isReadyForTransmission = false;
	isWaitReport = false;
	pixelPartnerId = "googleAdServicesPixelPartner";
	pixelPartnerName = "Google Ad Services Pixel Partner";
	pixelPartnerCookieVarPrefix = "googleAdServices";
	pixelPartnerInboundParameterList = [];
	pixelPartnerPersistedParameterList = [];
	pixelPartnerStartDate = "2011/01/26";
	pixelPartnerEndDate = "2020/01/26";
	googleAdServicesPixelPartner.model.google_conversion_id = "999883742";
	googleAdServicesPixelPartner.model.google_conversion_label = "2YddCJrhoQIQ3ofk3AM";
	googleAdServicesPixelPartner.model.guid = "ON";

	controller.setPixelPartnerModel = function() {
		// Pull in order subtotal (netDemand)
		var metricsLibrary = pixelManagementService.model.metricsLibrary;
		var orderTotal = ( metricsLibrary.order.orderTotal ) ? parseFloat(metricsLibrary.order.orderTotal) : 0;
		var myShipTotal = ( metricsLibrary.order.shippingTotal ) ? parseInt(metricsLibrary.order.shippingTotal*100) : 0;
		var myTaxTotal = ( metricsLibrary.order.taxTotal ) ? parseInt(metricsLibrary.order.taxTotal*100) : 0;
		var myOrderTotal = parseInt(orderTotal*100);
		var myTotal = myOrderTotal - myShipTotal - myTaxTotal;
		model.netDemand = parseFloat(myTotal/100);
		
		// Pull product list in proper format
		var getFormattedProductListBound = this.controller.helper.getFormattedProductList.bind(this);
		var formattedProductList = getFormattedProductListBound();
		this.model.formattedProductList = formattedProductList;
	}
	controller.setPixelPartnerTransmissionTemplate = function() {
		var metricsLibrary = pixelManagementService.model.metricsLibrary;
		var pageType = ( metricsLibrary.common.pageType ) ? metricsLibrary.common.pageType : '';
		var partnerCookieValue = ( metricsLibrary.common.ap ) ? metricsLibrary.common.ap : '';
		if (pageType != null &amp;&amp; pageType != undefined) {
			if (( location.pathname == "/checkout/orderConfirm.do" ) &amp;&amp; ( partnerCookieValue == "13" )) {
				this.pixelPartnerTransmissionTemplate = new Template(
					"&lt;img height=\"1\" width=\"1\" style=\"border-style:none;\" alt=\"\" src=\"http://www.googleadservices.com/pagead/conversion/#{model.google_conversion_id}/?value=#{model.netDemand}&amp;label=#{model.google_conversion_label}&amp;guid=#{model.guid}&amp;oid=#{model.metricsLibrary.order.orderId}&amp;item=#{model.formattedProductList}&amp;script=0\" /&gt;");
			}
		}
	}
	controller.setCleanUp = function() {
		// alert("setCleanUp() running: pixelPartnerName = " + this.pixelPartnerName);
	}
	controller.helper = new Object();
	// Product list with specific formatting
	controller.helper.getFormattedProductList = function() {
		var productList = null;
		if( location.pathname == "/checkout/orderConfirm.do" ){
			productList = ( this.model.metricsLibrary.order.productList ) ? this.model.metricsLibrary.order.productList : [];
		}
		var formattedProductList = "";
		if( productList != null ) {
			productList.each( function( prod ) {
				var pricePer = prod.price/prod.quantity;
				var sku9dig = '';
				if( prod.skuId != null ) sku9dig = prod.skuId.substr(0,9);
				formattedProductList += "("
				formattedProductList += pricePer.toFixed(2) + "*";
				formattedProductList += prod.quantity + "*";
				formattedProductList += sku9dig + "*";
				formattedProductList += "null*";
				formattedProductList += sku9dig + ")";
			});
		}
		return formattedProductList;
	}
}

}
     </script>
     <!-- BrightTag iframe -->
     <script type="text/javascript">
      if( location.pathanem != '/checkout/order.do' ) {

var brightTagPixelPartner = new pixelManagementService.constructors.AbstractPixelPartner();
pixelManagementService.controller.pixelPartnerManager.setPixelPartnerToPixelPartnerRegistry(brightTagPixelPartner);

with (brightTagPixelPartner) {
	isReadyForTransmission = false;
	isWaitReport = false;
	pixelPartnerId = "brightTagPixelPartner";
	pixelPartnerName = "Bright Tag Pixel Partner";
	pixelPartnerCookieVarPrefix = "brightTag";
	// 'sid' = TrialPay: maps to v1
	pixelPartnerInboundParameterList = ['sid'];
	pixelPartnerPersistedParameterList = ['sid'];
	pixelPartnerStartDate = "2011/07/19";
	pixelPartnerEndDate = "2020/07/19";
	// BrightTag site id - region-specific (US, CA, EU)
	brightTagPixelPartner.model.brighttag_site_id = "NaJ7y9Z";
	// Currensy - u
	brightTagPixelPartner.model.currencyType = "USD";
	
	controller.getPixmanElement = function (variableName, pixManValue, suffix){
		var returnKeyPair="";
		if(suffix==null || suffix==undefined){
			suffix="";
		}
		if(pixManValue!=null &amp;&amp; pixManValue!=undefined &amp;&amp; pixManValue!=""){
			returnKeyPair = variableName + "=" + pixManValue + suffix; 
		}
		else{
			returnKeyPair="";
		}
		return returnKeyPair;
    },

	controller.setPixelPartnerModel = function() {
		
		// Set BT variables from metricsLibrary
		var metricsLibrary = pixelManagementService.model.metricsLibrary;
		
		// Declare dynamic vendor metrics
		this.model.vendorMetrics = { };
		
		// TrialPay : AP=15 conditional; sid = v1
		this.model.vendorMetrics.trialPay = { }
		this.model.vendorMetrics.trialPay.sid = controller.getCookieVar("sid");
		
		// BROWSE/BAG/ORDER CONF variables
		
		// Total qty in cart - qty
		if( location.pathname == "/checkout/orderConfirm.do" ) {
			var orderProductList = ( metricsLibrary.order.productList ) ? metricsLibrary.order.productList : [];
			var orderProductQty = 0;
			if (typeof(orderProductList != "undefined") &amp;&amp; Object.isArray(orderProductList) &amp;&amp; orderProductList.length != 0 &amp;&amp; orderProductList[0].productBusinessId != "") {
				orderProductList.each( function( prod, i ) {
					orderProductQty += parseInt( prod.quantity );
				});
			}
			this.model.totalQty = orderProductQty.toString();
		}
		else {
			this.model.totalQty = ( metricsLibrary.shoppingBag.productCount ) ? metricsLibrary.shoppingBag.productCount : 0;
		}
		
		// Entering brand code  - tran - ONLY set if PARTNER cookie set
		this.model.enteringBrandCode = ( metricsLibrary.common.enteringBrandCode ) ? metricsLibrary.common.enteringBrandCode : '';
		
		// Product level metrics
		if( location.pathname == "/checkout/orderConfirm.do" &amp;&amp; metricsLibrary.order.productListForCJ ) {
			var productList = ( metricsLibrary.order.productListForCJ ) ? metricsLibrary.order.productListForCJ : [];
		}
		else {
			var productList = ( metricsLibrary.shoppingBag.productList ) ? metricsLibrary.shoppingBag.productList : [];
		}
		// Product SKUs in Cart - pipe-delimited - u1
		var skus = "";
		// Product Item Prices in Cart - pipe-delimited - u6
		var prices = "";
		// Product Item Brands in Cart - pipe-delimited - u7
		var brands = "";
		// Product Item Quantities in Cart - pipe-delimited - u19
		var prodQty = "";
		// Gross Net Demand by Brand - pipe-delimited - u52
		var grossNetDemand = '';
		
		if( typeof(productList != "undefined") &amp;&amp; Object.isArray(productList) &amp;&amp; productList.length != 0 &amp;&amp; productList[0].skuDescription != "" ) {
			// All product-level metrics set within this each loop
			productList.each( function( prod, i ) {
				// Base product metrics
				skus += prod.skuId;
				prices += prod.price;
				brands += prod.productBrandCode;
				prodQty += prod.quantity;
				
				// Net demand calculation
				var prodPrice = prod.price/prod.quantity;
				var lineBrandPlccBrandProductLevel = 0;
				var orderLevelDiscountProductLevel = 0;
				var plccDiscountsProductLevel = 0;
				var netDemand = 0;
				
				if( prod.lineBrandPlccBrandProductLevel ) lineBrandPlccBrandProductLevel = prod.lineBrandPlccBrandProductLevel/prod.quantity;
				if( prod.orderLevelDiscountProductLevel ) orderLevelDiscountProductLevel = prod.orderLevelDiscountProductLevel/prod.quantity;
				if( prod.plccDiscountsProductLevel ) plccDiscountsProductLevel = prod.plccDiscountsProductLevel/prod.quantity;
				
				netDemand = prodPrice - ( lineBrandPlccBrandProductLevel + orderLevelDiscountProductLevel + plccDiscountsProductLevel );
				grossNetDemand += netDemand.toFixed(2);
				
				// Add delimiter
				if( ( i + 1 ) != productList.length ) { 
					skus += "|";
					prices += "|";
					brands += "|";
					prodQty += "|";
					if( grossNetDemand != '' ) grossNetDemand += "|"; 
				}
			});
		}
		this.model.itemPrices = prices;
		this.model.itemBrands = brands;
		this.model.prodQty = prodQty;
		this.model.productSkus = skus;
		this.model.productNetDemand = grossNetDemand;
				
		// Page Type - u2
		this.model.pageType = ( metricsLibrary.common.pageType ) ? metricsLibrary.common.pageType : '';
		if( this.model.pageType.substr(0,1) == "/" ) { this.model.pageType = this.model.pageType.substr(1); }

		// Page ID - u3 - CID, Outfit ID or Product ID
		this.model.pageId = ( metricsLibrary.common.pageId ) ? metricsLibrary.common.pageId : '';
		if( metricsLibrary.common.pageName &amp;&amp; ( location.pathname == '/' || location.pathname == '/browse/home.do' ) ) {
			// Fix CIDs not being pulled on home page content
			if( metricsLibrary.common.pageName.substr( 0, 2 ) == 'gp' ) { this.model.pageId = '5058'; }
			else if( metricsLibrary.common.pageName.substr( 0, 2 ) == 'on' ) { this.model.pageId = '5151'; }
			else if( metricsLibrary.common.pageName.substr( 0, 2 ) == 'br' ) { this.model.pageId = '5001'; }
			else if( metricsLibrary.common.pageName.substr( 0, 2 ) == 'bg' ) { this.model.pageId = '15956'; }
			else if( metricsLibrary.common.pageName.substr( 0, 2 ) == 'at' ) { this.model.pageId = '46650'; }			
		}
		
		// AP (Affiliate Partner) Value - u4 - ONLY set if PARTNER cookie set
		this.model.apCode = ( metricsLibrary.common.ap ) ? metricsLibrary.common.ap : '';
		
		// Last in TID - u5 - Last tracking ID recieved; ONLY set if PARTNER cookie set
		this.model.lastInTID = ( metricsLibrary.common.tid ) ? metricsLibrary.common.tid : '';
		
		// Page Name - u9 - Omniture Page Name
		this.model.pageName = ( metricsLibrary.common.pageName ) ? encodeURIComponent( metricsLibrary.common.pageName ) : '';
		
		// Page URL - u10 - Full page URL
		this.model.pageURL = ( metricsLibrary.common.pageUrl ) ? encodeURIComponent( metricsLibrary.common.pageUrl ) : '';
		
		// Is New Customer flag - u11
		this.model.isNewCustomer = ( metricsLibrary.common.isNewCustomer ) ? metricsLibrary.common.isNewCustomer : '';

		// Recognized Visitor flah - u14
		this.model.isRecognizedVisitor = ( metricsLibrary.common.isRecognizedVisitor ) ? metricsLibrary.common.isRecognizedVisitor : '';
		
		// Unknown shopper ID - u20 - GID unknown shopper ID
		// "988B422DA188A5C5DFCD32567DDBA4ED|||"
		if( gidLib.getCookie('unknownShopperId') != 0  ) {
			this.model.unknownShopperID = gidLib.getCookie('unknownShopperId');
			this.model.unknownShopperID = this.model.unknownShopperID.substr( 0, this.model.unknownShopperID.indexOf('|') );
		}
		else {
			this.model.unknownShopperID = '';
		}

		// Customer ID - u21 - GID KNOWN customer ID
		// "40895368|||"
		if( gidLib.getCookie('customerId') != 0  ) {
			this.model.customerID = gidLib.getCookie('customerId');
			this.model.customerID = this.model.customerID.substr( 0, this.model.customerID.indexOf('|') );
		}
		else {
			this.model.customerID = '';
		}
		
		// DotomiToken - u26 - 22-25 taken in EU/JP - to merge in
		this.model.dotomiToken = ( metricsLibrary.common.dotomiToken ) ? metricsLibrary.common.dotomiToken : '';

		// DI ID - u27 - DI/Email ID - pulled from mktUniversalPersist
		this.model.diID = ( gidLib.getCookieVar('mktUniversalPersist','DI') != '' ) ? gidLib.getCookieVar('mktUniversalPersist','DI') : '';
		
		// Encrypted email cipher - u40
		this.model.encryptionCipher = ( metricsLibrary.common.cipher ) ? metricsLibrary.common.cipher : '';
		
		// Encrypted email vector - u41
		this.model.encryptionVector = ( metricsLibrary.common.vector ) ? metricsLibrary.common.vector : '';

		// Encrypted email string - u42
		this.model.encryptedEmail = ( metricsLibrary.common.userEmailEncrypt ) ? metricsLibrary.common.userEmailEncrypt : '';
	
		// Mobile vs desktop user - u44
		// GID mobile detection includes: iPhone, iPod, Android Mobile ONLY
		this.model.mobileVsDesktop = 'desktop';
		
		var userAgentCheck = navigator.userAgent.toLowerCase();
		if( responsiveService.api.isMobileBrowser() || /iphone|ipod/i.test( userAgentCheck ) || ( userAgentCheck.indexOf('android') &gt; -1 &amp;&amp; userAgentCheck.indexOf('mobile') &gt; -1 ) ) {
			this.model.mobileVsDesktop = 'mobile';	
		}

		// Referring Page URL - u48
		this.model.referringPageURL = ( document.referrer ) ? encodeURIComponent( document.referrer ) : '';

		// PRODUCT PAGE ONLY variables 
		if( location.pathname == '/browse/product.do' ) {
			
			// Set up product page data
			this.model.productName = '';
			this.model.productBrandCode = '';
			this.model.productPrice = '';
			this.model.productImage = '';
			this.model.productIdDefault9Dig = '';
			this.model.productSizesInStock = '';
			this.model.productSizesOutOfStock = '';
			this.model.productVendorName = '';
			this.model.productOriginalPrice = '';
			this.model.productDefaultCID = '';
			this.model.currentDivisionName = '';
			this.model.categoryNameClicked = '';
			this.model.productOnOrder = '';
			this.model.productLowInventory = '';
			
			if( window["productService"] != null &amp;&amp; productService.objP &amp;&amp; productService.objV ) {
				
				// Update URL if there's no CID in it
				if( gidLib.getQuerystringParam('cid') == '' &amp;&amp; this.model.pageURL.indexOf('cid') == -1 &amp;&amp; productPage.strDefaultCategoryId ) {
					this.model.pageURL += '%26cid%3D' + productPage.strDefaultCategoryId;
				}
				// Set default CID if CID is not in URL
				if( gidLib.getQuerystringParam('cid') == '' &amp;&amp; productPage.strDefaultCategoryId ) {
					this.model.productDefaultCID = productPage.strDefaultCategoryId;
				}
				
				// Highlighted division pulled from page name metric
				var currentDivisionName = '';
				if( metricsLibrary.common.pageName != '' ) {
					var pageNameArr = metricsLibrary.common.pageName.split(':');
					if( pageNameArr.length &gt; 2 ) {
						if( pageNameArr[1] == 'browse' ) {
							currentDivisionName = pageNameArr[2];
						}
					}
				}
				this.model.currentDivisionName = encodeURIComponent( currentDivisionName );

				// Highlighted category name pulled from page leftnav
				var categoryNameClicked = '';
				if( jQuery('#sideNavCategories').length &gt; 0 ) {
					var selectedCategory = jQuery('#sideNavCategories a[class*="categorySelected"]');
					if( selectedCategory.length &gt; 0 ) {
						categoryNameClicked += selectedCategory.text();
					}
				}
				this.model.categoryNameClicked = encodeURIComponent( categoryNameClicked );

				// Product Name - u28
				if( productService.objP.strProductStyleName ) {
					this.model.productName = encodeURIComponent( productService.objP.strProductStyleName );
				
					// Check whether item has a vendor (ie. Piperlime), if so prepend vendor name
					if( this.model.productName != '' &amp;&amp; productService.objP.strVendorName &amp;&amp; productService.objP.strVendorName != '' ) {
						this.model.productName = productService.objP.strVendorName + ' ' + this.model.productName;
						this.model.productVendorName = encodeURIComponent( productService.objP.strVendorName );
					}
				}
				
				// Product Brand - u29 - brand code sent
				if( productService.objP.brandCode ) {
					this.model.productBrandCode = productService.objP.brandCode;
				}
				
				// Variant/color based
				if( productService.hasOwnProperty('objV') &amp;&amp; productService.hasOwnProperty('activeColor') ) {
					var currentProductColor = productService.activeColor;
					var currentProductColorObj = productService.objV.arrayVariantStyleColors[ currentProductColor ];
					
					// Product Price - u30 - find selected variant/color to determine best
					if( currentProductColorObj.price ) {
						this.model.productPrice = currentProductColorObj.price;
						//console.log('price set');
					}
					
					// Product Original Price - u35
					if( currentProductColorObj.strRegularPrice ) {
						this.model.productOriginalPrice = currentProductColorObj.strRegularPrice.replace('$','');
					}
					
					// Product Image URL - u31
					if( currentProductColorObj.hasOwnProperty('arrayVariantStyleColorImages') ) {
						if( currentProductColorObj.arrayVariantStyleColorImages['Main'] ) {
							this.model.productImage = 'http://' + location.hostname + currentProductColorObj.arrayVariantStyleColorImages['Main'].strImagePath;
							//console.log('image set from Main');
						}
						else if( currentProductColorObj.arrayVariantStyleColorImages['MainThumb'] ) {
							this.model.productImage = 'http://' + location.hostname + currentProductColorObj.arrayVariantStyleColorImages['MainThumb'].strImagePath;
						}
					}	
					
					// Default 9-digit Product ID - 9-digit - u50
					if( currentProductColorObj.strColorCodeId ) {
						this.model.productIdDefault9Dig = currentProductColorObj.strColorCodeId;				
					}
				}
									
				// Product Sizes In Stock - u32 - pulling from page
				// Product Sizes Out of Stock - u33				
				var allSkus = productPage.objV.arrayVariantSkus;
				var allSize1s = productPage.arrayAllSizeDimension1;
				var allSize2s = productPage.arrayAllSizeDimension2;
				var currentSkuId = '';
				var currentSkuSize1 = '';
				var currentSkuSize2 = '';
				var currentSkuSizeDescription = '';
				var sizeDesc = '';
				var arrSkuSizesAll = [];
				var arrSkuSizesInStock = [];
				var arrSkuSizesOutOfStock = [];
				
				if( allSize1s.length &gt; 0 &amp;&amp; allSize2s.length &gt; 0 ) {
					for( var i=0; i &lt; allSize1s.length; i++ ) {
						for( var j=0; j &lt; allSize2s.length; j++ ) {
							sizeDesc = '';
							sizeDesc += allSize1s[i].strName + ':' + allSize2s[j].strName;
							arrSkuSizesAll.push( sizeDesc );
						}
					}
				}
				else if( allSize1s.length &gt; 0 ) {
					for( var i=0; i &lt; allSize1s.length; i++ ) {
						sizeDesc = '';
						sizeDesc += allSize1s[i].strName;
						arrSkuSizesAll.push( sizeDesc );
					}
				}
				
				//console.log( 'all sizes ' + arrSkuSizesAll );
				
				jQuery.each(allSkus, function(key,valueObj){
					// If the value is an object that represents an in-stock color/size SKU of the initially loaded color
					var currentPid = productPage.strDefaultStyleColorId;
					if( jQuery.type( valueObj ) == 'object' ) {
						// Restrict to initially loaded color
						if( valueObj.strSkuId.indexOf( currentPid ) &gt; -1 ) {
							currentSkuSizeDescription = '';
							currentSkuId = valueObj.strSkuId;
							currentSkuSize1 = valueObj.strSizeDim1Id;
							currentSkuSize2 = valueObj.strSizeDim2Id;
							
							if( allSize1s.length &gt; 0 ) {
								for( var i=0; i &lt; allSize1s.length; i++ ) {
									if( allSize1s[i].strId == currentSkuSize1 ) {
										currentSkuSizeDescription += allSize1s[i].strName;
									}			
								}
							}
							
							if( allSize2s.length &gt; 0 ) {
								for( var j=0; j &lt; allSize2s.length; j++ ) {
									if( allSize2s[j].strId == currentSkuSize2 ) {
										currentSkuSizeDescription += ':' + allSize2s[j].strName;
									}			
								}
							}
					
							//console.log( 'sku = ' + currentSkuId + '; size1 = ' + currentSkuSize1 + '; size2 = ' + currentSkuSize2 + '; sizeDesc = ' + currentSkuSizeDescription );
							arrSkuSizesInStock.push( currentSkuSizeDescription );
						}
					}
				});
				
				//console.log( 'sizes in stock ' + arrSkuSizesInStock );
				
				arrSkuSizesOutOfStock = jQuery.grep( arrSkuSizesAll, function( elt ) {
					return jQuery.inArray( elt, arrSkuSizesInStock ) == -1;
				});
				
				//console.log( 'sizes out of stock ' + arrSkuSizesOutOfStock );
				
				if( arrSkuSizesInStock.length &gt; 0 ) {
					// Replace ' &amp;#189' with 'half'
					for( var i=0; i &lt; arrSkuSizesInStock.length; i++ ) {
						arrSkuSizesInStock[i] = arrSkuSizesInStock[i].replace(' &amp;#189','half');
					}
					this.model.productSizesInStock = arrSkuSizesInStock.join();
					this.model.productSizesInStock = this.model.productSizesInStock.toLowerCase();
					//console.log('in stock sizes set');
				}
				if( arrSkuSizesOutOfStock.length &gt; 0 ) {
					// Replace ' &amp;#189' with 'half'
					for( var j=0; j &lt; arrSkuSizesOutOfStock.length; j++ ) {
						arrSkuSizesOutOfStock[j] = arrSkuSizesOutOfStock[j].replace(' &amp;#189','half');
					}
					this.model.productSizesOutOfStock = arrSkuSizesOutOfStock.join();
					this.model.productSizesOutOfStock = this.model.productSizesOutOfStock.toLowerCase();
					//console.log('out of stock sizes set');
				}
				
				// Is product on order - u45 - based on existance of an on-order date
				var productOnOrder = 'false';
				if( productPage.isSkuOnOrder(productPage.activeColor, productPage.activeSizeDimension1, productPage.activeSizeDimension2) != null ) {
					productOnOrder = 'true';
				}
				this.model.productOnOrder = productOnOrder;
				
				// Low Inventory - u46 - based on return of Low Inventory function
				var productLowInventory = 'false';
				if( productPage.isSkuLowInventory(productPage.activeColor, productPage.activeSizeDimension1, productPage.activeSizeDimension2) != null &amp;&amp; productPage.isSkuLowInventory(productPage.activeColor, productPage.activeSizeDimension1, productPage.activeSizeDimension2) == true ) {
					productLowInventory = 'true';
				}
				this.model.productLowInventory = productLowInventory;
				
				// Current selected variant on product page load - u49
				// 1: Regular, 2: Tall, 3: Petite, 8: Plus
				var currentVariantId = '1'; 
				if( productService.strVariantId ) {
					currentVariantId = productService.strVariantId.toString();
				}
				this.model.currentVariantId = currentVariantId;
			}
		}

		// ORDER CONF ONLY variables
		else if (location.pathname == "/checkout/orderConfirm.do") {

			// Page Type fix on order conf page
			this.model.pageType = 'orderConfirm';

			// Order ID - ord - Gap.com order ID
			this.model.orderId = ( metricsLibrary.order.orderId ) ? metricsLibrary.order.orderId : '';
			
			this.model.promotionSubTotal = ( metricsLibrary.order.promotionSubTotal ) ? parseFloat( metricsLibrary.order.promotionSubTotal ) : 0;
			this.model.promotionRewardsTotal = ( metricsLibrary.order.promotionRewardsTotal ) ? parseFloat( metricsLibrary.order.promotionRewardsTotal ) : 0;
			this.model.giftServicesTotal = ( metricsLibrary.order.giftServicesTotal ) ? parseFloat( metricsLibrary.order.giftServicesTotal ) : 0;
			this.model.shippingTotal = ( metricsLibrary.order.shippingTotal ) ? parseFloat( metricsLibrary.order.shippingTotal ) : 0;
			this.model.taxTotal = ( metricsLibrary.order.taxTotal ) ? parseFloat( metricsLibrary.order.taxTotal ) : 0;
			this.model.orderTotal = ( metricsLibrary.order.orderTotal ) ? parseFloat( metricsLibrary.order.orderTotal ) : 0;
				
			// Fixes rounding problem
			this.model.myShipTotal = parseInt( this.model.shippingTotal*100 );
			this.model.myTaxTotal = parseInt( this.model.taxTotal*100 );
			this.model.myOrderTotal = parseInt( this.model.orderTotal*100 );
			this.model.myTotal = this.model.myOrderTotal - this.model.myShipTotal - this.model.myTaxTotal;
			this.model.myTotal = parseFloat(this.model.myTotal/100);

			// Total Merch (ie. Net Demand) - u15 - Order total - shipping - tax
			this.model.netDemand = this.model.myTotal;

			// Total Merch + promo dolloers (ie. Gross Merch Demand) - cost - Order total - shipping - tax + promo dollares
			this.model.grossMerchandise = this.model.netDemand + this.model.promotionSubTotal;
			
			// Checkout Brand - u8 - brand a user checks out on
			this.model.checkoutBrand = ( metricsLibrary.order.checkoutBrand ) ? metricsLibrary.order.checkoutBrand : '';
			
			// Shipping &amp; Billing zips - u12, u13 respectively - user zip codes
			this.model.shippingZip = ( metricsLibrary.order.shippingZip ) ? metricsLibrary.order.shippingZip : '';
			this.model.billingZip = ( metricsLibrary.order.billingZip ) ? metricsLibrary.order.billingZip : '';
			
			// Promotional dollars - u16 - coupon dollars
			this.model.promoDollars = this.model.promotionSubTotal;
			
			// Tax - u17 - tax amount
			this.model.tax = this.model.taxTotal;
			
			// Shipping - u18 - total shipping charged
			this.model.shipping = this.model.shippingTotal;

			// Encrypted billing address string - u43
			this.model.encryptedBillingAddress = ( metricsLibrary.order.billingAddressEncrypt ) ? metricsLibrary.order.billingAddressEncrypt : '';
		}
		document.fire('brightTagPixelPartner:dataModelLoaded');
		
	}
	controller.setPixelPartnerTransmissionTemplate = function() {
		var shoppingBagUrls = ['/buy/shopping_bag.do','/buy/shopping_bag_delete_item.do','/buy/shopping_bag_save_item.do','/buy/shopping_bag_move_item.do','/buy/edit_shipping_method_bag.do'];

		// Order conf page fire
		if( location.pathname == "/checkout/orderConfirm.do" ) {
			this.pixelPartnerTransmissionTemplate = new Template(		
				"&lt;iframe src=\"//s.thebrighttag.com/tag?" + 
					"site=#{model.brighttag_site_id}&amp;" + 
					"mode=iframe&amp;" + 
					"ord=#{model.orderId}&amp;" + 
					"qty=#{model.totalQty}&amp;" + 
					"cost=#{model.grossMerchandise}&amp;" + 
					"tran=#{model.enteringBrandCode}&amp;" + 
					"u=#{model.currencyType}&amp;" + 
					"u1=#{model.productSkus}&amp;" + 
					"u2=#{model.pageType}&amp;" + 
					"u3=#{model.pageId}&amp;" + 
					"u4=#{model.apCode}&amp;" + 
					"u5=#{model.lastInTID}&amp;" + 
					"u6=#{model.itemPrices}&amp;" + 
					"u7=#{model.itemBrands}&amp;" + 
					"u8=#{model.checkoutBrand}&amp;" + 
					"u9=#{model.pageName}&amp;" + 
					"u10=#{model.pageURL}&amp;" + 
					"u11=#{model.isNewCustomer}&amp;" + 
					"u12=#{model.shippingZip}&amp;" + 
					"u13=#{model.billingZip}&amp;" + 
					"u14=#{model.isRecognizedVisitor}&amp;" + 
					"u15=#{model.netDemand}&amp;" + 
					"u16=#{model.promoDollars}&amp;" + 
					"u17=#{model.tax}&amp;" + 
					"u18=#{model.shipping}&amp;" + 
					"u19=#{model.prodQty}&amp;" + 
					"u20=#{model.unknownShopperID}&amp;" + 
					"u21=#{model.customerID}&amp;" + 
					this.controller.getPixmanElement("u26",model.dotomiToken,"&amp;") + 
					"u27=#{model.diID}&amp;" + 
					"u40=#{model.encryptionCipher}&amp;" + 
					"u41=#{model.encryptionVector}&amp;" + 
					"u42=#{model.encryptedEmail}&amp;" + 
					"u43=#{model.encryptedBillingAddress}&amp;" + 
					"u44=#{model.mobileVsDesktop}&amp;" + 
					"u48=#{model.referringPageURL}&amp;" + 
					"u52=#{model.productNetDemand}&amp;" + 
					
					// Vendor specific metrics				
					"v1=#{model.vendorMetrics.trialPay.sid}&amp;" + 
					
					"\" width=\"1\" height=\"1\" frameborder=\"0\" scrolling=\"no\" marginheight=\"0\" marginwidth=\"0\"&gt;&lt;/iframe&gt;");
		}
		
		// Product Page fire
		else if( location.pathname == '/browse/product.do' ) {
			this.pixelPartnerTransmissionTemplate = new Template(		
				"&lt;iframe src=\"//s.thebrighttag.com/tag?" + 
					"site=#{model.brighttag_site_id}&amp;" + 
					"mode=iframe&amp;" + 
					"qty=#{model.totalQty}&amp;" + 
					"tran=#{model.enteringBrandCode}&amp;" + 
					"u=#{model.currencyType}&amp;" + 
					"u1=#{model.productSkus}&amp;" + 
					"u2=#{model.pageType}&amp;" + 
					"u3=#{model.pageId}&amp;" + 
					"u4=#{model.apCode}&amp;" + 
					"u5=#{model.lastInTID}&amp;" + 
					"u6=#{model.itemPrices}&amp;" + 
					"u7=#{model.itemBrands}&amp;" + 
					"u9=#{model.pageName}&amp;" + 
					"u10=#{model.pageURL}&amp;" + 
					"u11=#{model.isNewCustomer}&amp;" + 
					"u14=#{model.isRecognizedVisitor}&amp;" + 
					"u19=#{model.prodQty}&amp;" + 
					"u20=#{model.unknownShopperID}&amp;" + 
					"u21=#{model.customerID}&amp;" + 
					this.controller.getPixmanElement("u26",model.dotomiToken,"&amp;") +
					"u27=#{model.diID}&amp;" + 
					"u28=#{model.productName}&amp;" + 
					"u29=#{model.productBrandCode}&amp;" + 
					"u30=#{model.productPrice}&amp;" + 
					"u31=#{model.productImage}&amp;" + 
					"u32=#{model.productSizesInStock}&amp;" + 
					"u33=#{model.productSizesOutOfStock}&amp;" + 
					"u34=#{model.productVendorName}&amp;" + 
					"u35=#{model.productOriginalPrice}&amp;" + 
					"u36=#{model.productDefaultCID}&amp;" + 
					"u37=#{model.currentDivisionName}&amp;" + 
					"u38=#{model.categoryNameClicked}&amp;" + 
					"u40=#{model.encryptionCipher}&amp;" + 
					"u41=#{model.encryptionVector}&amp;" + 
					"u42=#{model.encryptedEmail}&amp;" + 
					"u44=#{model.mobileVsDesktop}&amp;" + 
					"u45=#{model.productOnOrder}&amp;" + 
					"u46=#{model.productLowInventory}&amp;" + 
					"u48=#{model.referringPageURL}&amp;" + 
					"u49=#{model.currentVariantId}&amp;" + 
					"u50=#{model.productIdDefault9Dig}&amp;" + 
					"u52=#{model.productNetDemand}&amp;" + 
					
					// Vendor specific metrics				
					"v1=#{model.vendorMetrics.trialPay.sid}&amp;" + 
					
					"\" width=\"1\" height=\"1\" frameborder=\"0\" scrolling=\"no\" marginheight=\"0\" marginwidth=\"0\"&gt;&lt;/iframe&gt;");
		}
		
		// Other non-secure pages
		else if( window.location.protocol != "https:" || shoppingBagUrls.include( location.pathname ) ) {
			this.pixelPartnerTransmissionTemplate = new Template(
				"&lt;iframe src=\"//s.thebrighttag.com/tag?" + 
					"site=#{model.brighttag_site_id}&amp;" + 
					"mode=iframe&amp;" + 
					"qty=#{model.totalQty}&amp;" + 
					"tran=#{model.enteringBrandCode}&amp;" +
					"u=#{model.currencyType}&amp;" + 
					"u1=#{model.productSkus}&amp;" + 
					"u2=#{model.pageType}&amp;" + 
					"u3=#{model.pageId}&amp;" +
					"u4=#{model.apCode}&amp;" + 
					"u5=#{model.lastInTID}&amp;" + 
					"u6=#{model.itemPrices}&amp;" + 
					"u7=#{model.itemBrands}&amp;" + 
					"u9=#{model.pageName}&amp;" + 
					"u10=#{model.pageURL}&amp;" + 
					"u11=#{model.isNewCustomer}&amp;" + 
					"u14=#{model.isRecognizedVisitor}&amp;" + 
					"u19=#{model.prodQty}&amp;" + 
					"u20=#{model.unknownShopperID}&amp;" + 
					"u21=#{model.customerID}&amp;" + 
					this.controller.getPixmanElement("u26",model.dotomiToken,"&amp;") +
					"u27=#{model.diID}&amp;" + 
					"u40=#{model.encryptionCipher}&amp;" + 
					"u41=#{model.encryptionVector}&amp;" + 
					"u42=#{model.encryptedEmail}&amp;" + 
					"u44=#{model.mobileVsDesktop}&amp;" + 
					"u48=#{model.referringPageURL}&amp;" + 
					"u52=#{model.productNetDemand}&amp;" + 
					
					// Vendor specific metrics				
					"v1=#{model.vendorMetrics.trialPay.sid}&amp;" + 
					
					"\" width=\"1\" height=\"1\" frameborder=\"0\" scrolling=\"no\" marginheight=\"0\" marginwidth=\"0\"&gt;&lt;/iframe&gt;");
		}
		// Profile/account pages for Gap
		else if (location.pathname == "/profile/info.do" &amp;&amp; ( location.search.indexOf('cid=48755') &gt; -1 || location.search.indexOf('cid=53959') &gt; -1 || location.search.indexOf('cid=82640') &gt; -1 ) ) {
			this.pixelPartnerTransmissionTemplate = new Template(
				"&lt;iframe src=\"//s.thebrighttag.com/tag?" + 
					"site=#{model.brighttag_site_id}&amp;" + 
					"mode=iframe&amp;" + 
					"qty=#{model.totalQty}&amp;" + 
					"tran=#{model.enteringBrandCode}&amp;" +
					"u=#{model.currencyType}&amp;" + 
					"u1=#{model.productSkus}&amp;" + 
					"u2=#{model.pageType}&amp;" + 
					"u3=#{model.pageId}&amp;" +
					"u4=#{model.apCode}&amp;" + 
					"u5=#{model.lastInTID}&amp;" + 
					"u6=#{model.itemPrices}&amp;" + 
					"u7=#{model.itemBrands}&amp;" + 
					"u9=#{model.pageName}&amp;" + 
					"u10=#{model.pageURL}&amp;" + 
					"u11=#{model.isNewCustomer}&amp;" + 
					"u14=#{model.isRecognizedVisitor}&amp;" + 
					"u19=#{model.prodQty}&amp;" + 
					"u20=#{model.unknownShopperID}&amp;" + 
					"u21=#{model.customerID}&amp;" + 
					this.controller.getPixmanElement("u26",model.dotomiToken,"&amp;") +
					"u27=#{model.diID}&amp;" + 
					"u40=#{model.encryptionCipher}&amp;" + 
					"u41=#{model.encryptionVector}&amp;" + 
					"u42=#{model.encryptedEmail}&amp;" + 
					"u44=#{model.mobileVsDesktop}&amp;" + 
					"u48=#{model.referringPageURL}&amp;" + 
					"u52=#{model.productNetDemand}&amp;" + 
					
					// Vendor specific metrics				
					"v1=#{model.vendorMetrics.trialPay.sid}&amp;" + 
					
					"\" width=\"1\" height=\"1\" frameborder=\"0\" scrolling=\"no\" marginheight=\"0\" marginwidth=\"0\"&gt;&lt;/iframe&gt;");
		}
	}
	controller.setCleanUp = function() {
		// alert("setCleanUp() running: pixelPartnerName = " + this.pixelPartnerName);
	}
	controller.helper = new Object();
}

}
     </script>
     <div id="doubleClickPixelDiv">
     </div>
     <div id="partnerPixelDiv">
     </div>
     <script type="text/javascript">
      // WCD in-page event BrightTag service - Quicklook, QL Add To Bag, Find It Now, Reserve In Store, Add To Bag
if( location.pathname == '/browse/product.do' || location.pathname == '/browse/outfit.do' || location.pathname == '/browse/category.do' || location.pathname == '/browse/categorySearch.do' || location.pathname == '/browse/search.do' ) {

	var wcdBrightTagService = {
		model: {
			supportedEvents: ['QuickLook','AddToQLBag','FindItNow','ReserveInStore','AddToBag','LoadVariantProduct','LoadVariantQLProduct'],
			btFrameId: 'wcdBrightTagServiceFrame',
			brFrameUrl: '',
			btDataModel: '',
			btFrameExists: false,
			btLoadVariantCalls: 0
		},
  	init: function() {
			// Copy data model over from existing BT tag
			if( window["brightTagPixelPartner"] != null ) {
				if( brightTagPixelPartner.model ) {
					wcdBrightTagService.model.btDataModel = {};
					jQuery.extend( wcdBrightTagService.model.btDataModel, brightTagPixelPartner.model );
				}
			}
		},
		controller: {
			// Creates dynamic BT frame if not present
			createBrightTagFrame: function() {
				var model = wcdBrightTagService.model;
				if( jQuery('#' + model.btFrameId + ' iframe').length == 0 ) {
					jQuery('body').append('&lt;div id="' + model.btFrameId + '"&gt;&lt;iframe width="1" height="1" frameborder="0" scrolling="no" marginheight="0" marginwidth="0"&gt;&lt;/iframe&gt;&lt;/div&gt;');
					//jQuery('body').append('&lt;div id="' + model.btFrameId + '"&gt;&lt;iframe src="/Asset_Archive/BRWeb/content/0008/954/949/assets/blank.gif" width="1" height="1" frameborder="0" scrolling="no" marginheight="0" marginwidth="0"&gt;&lt;/iframe&gt;&lt;/div&gt;');
					model.btFrameExists = true;
				}
			},
			updateBrightTagFrame: function() {
				var model = wcdBrightTagService.model;
				if( model.btFrameUrl != '' &amp;&amp; jQuery('#' + model.btFrameId + ' iframe').length &gt; 0 ) {
					jQuery('#' + model.btFrameId + ' iframe' ).attr('src', model.btFrameUrl );
					//console.log('iframe URL set');
				}
			},
			fireBrightTag: function( eventName, eventModifier ) {
				//console.log('fired for ' + eventName );
				
				var wcdBTRef = wcdBrightTagService;
				var model = wcdBTRef.model;
				var btDataModel = model.btDataModel;
				var controller = wcdBTRef.controller;
				var btFrameUrl = '';
				// Fire BrightTag for supported events only
				if( jQuery.inArray( eventName, model.supportedEvents ) &gt; -1 &amp;&amp; btDataModel != '' ) {
					if( ! model.btFrameExists ) {
						controller.createBrightTagFrame();
					}
					
					btDataModel.pageName = brightTagPixelPartner.model.pageName;
					if( btDataModel.pageName &amp;&amp; btDataModel.pageName.indexOf( eventName ) == -1 ) {
						btDataModel.pageName += '%3A' + eventName;
					}
					
					// Update Add to Bag events to pass price of product added to bag
					if( eventName == 'AddToBag' || eventName == 'AddToQLBag' ) {
						btDataModel.addToBagSellPrice = '';
						btDataModel.addToBagProductSku = '';
						btDataModel.addToBagOutfitSkus = '';

						if( eventName == 'AddToBag' ) {
							if( eventModifier == null ) {
								var currentProductColor = productPage.activeColor;
								var currentProductColorObj = productPage.objV.arrayVariantStyleColors[ currentProductColor ];
								// Product SKU added-to-bag - u51
								if( currentProductColorObj.strColorCodeId ) {
									var strSkuID = '';
									if( productPage.objV.objStyleSizeInfo.intSizeDimensionsCount &amp;&amp; productPage.objV.objStyleSizeInfo &amp;&amp; productPage.objV &amp;&amp; productPage.selectedColor != null ) {
										if( productPage.objV.objStyleSizeInfo.intSizeDimensionsCount &gt;= 1 ) {
												var strColorId = productPage.objV.arrayVariantStyleColors[ productPage.selectedColor ].strColorCodeId;
												var strSize1Id = productPage.arrayAllSizeDimension1[ productPage.selectedSizeDimension1 ].strId;
												var strSize2Id = "";
										}
										if( productPage.objV.objStyleSizeInfo.intSizeDimensionsCount == 2 ) {
												strSize2Id = productPage.arrayAllSizeDimension2[ productPage.selectedSizeDimension2 ].strId;
										}
										strSkuID = productPage.objV.arrayVariantSkus[ strColorId + "_" + strSize1Id + "_" + strSize2Id ].strSkuId; 
									}
									btDataModel.addToBagProductSku = strSkuID;
								}
								// Product add-to-bag price - u39
								if( currentProductColorObj.price ) {
									btDataModel.addToBagSellPrice = currentProductColorObj.price;
								}
								if( productPage.strSelectedQty ) {
									if( productPage.strSelectedQty != '1' ) {
										btDataModel.addToBagSellPrice = parseFloat( btDataModel.addToBagSellPrice ) * parseInt( productPage.strSelectedQty );
										btDataModel.addToBagSellPrice = btDataModel.addToBagSellPrice.toFixed(2);
										btDataModel.addToBagSellPrice = btDataModel.addToBagSellPrice.toString();
									}
								}
							}
							else if( eventModifier == 'outfitPage' ) {
								if( outfitPage.arrayProducts != null &amp;&amp; outfitPage.arrayProducts.length &gt; 0 ) {
									var currentOutfitProductColor = '';
									var currentOutfitProductColorObj = null;
									var currentOutfitProductSku = '';
									
									for( var i=0; i &lt; outfitPage.arrayProducts.length; i++ ) {
										if( outfitPage.arrayProducts[i].selectedToAdd ) {
											currentOutfitProductColor = '';
											currentOutfitProductColorObj = null;
											currentOutfitProductSku = '';
											
											currentOutfitProductColor = outfitPage.arrayProducts[i].activeColor;
											currentOutfitProductColorObj = outfitPage.arrayProducts[i].objV.arrayVariantStyleColors[ currentOutfitProductColor ];
											if( currentOutfitProductColorObj.price ) {
												btDataModel.addToBagSellPrice += currentOutfitProductColorObj.price + '|'
											}
											if( currentOutfitProductColorObj.strColorCodeId ) {
												btDataModel.addToBagOutfitSkus += currentOutfitProductColorObj.strColorCodeId + '|'
											}
										}
									}
									if( btDataModel.addToBagSellPrice != '' &amp;&amp; btDataModel.addToBagSellPrice.substr( btDataModel.addToBagSellPrice.length - 1 ) == '|' ) {
										btDataModel.addToBagSellPrice = btDataModel.addToBagSellPrice.substr( 0, btDataModel.addToBagSellPrice.length - 1 );
									}
									if( btDataModel.addToBagOutfitSkus != '' &amp;&amp; btDataModel.addToBagOutfitSkus.substr( btDataModel.addToBagOutfitSkus.length - 1 ) == '|' ) {
										btDataModel.addToBagOutfitSkus = btDataModel.addToBagOutfitSkus.substr( 0, btDataModel.addToBagOutfitSkus.length - 1 );
									}
								}
							}
						}
						else if( eventName == 'AddToQLBag' ) {
							var currentProductColor = quickLook.activeColor;
							var currentProductColorObj = quickLook.objV.arrayVariantStyleColors[ currentProductColor ];
							// Product SKU added-to-bag - u51
							if( currentProductColorObj.strColorCodeId ) {
								var strSkuID = '';
								if( quickLook.objV.objStyleSizeInfo.intSizeDimensionsCount &amp;&amp; quickLook.objV.objStyleSizeInfo &amp;&amp; quickLook.objV &amp;&amp; quickLook.selectedColor != null ) {
									if( quickLook.objV.objStyleSizeInfo.intSizeDimensionsCount &gt;= 1 ) {
											var strColorId = quickLook.objV.arrayVariantStyleColors[ quickLook.selectedColor ].strColorCodeId;
											var strSize1Id = quickLook.arrayAllSizeDimension1[ quickLook.selectedSizeDimension1 ].strId;
											var strSize2Id = "";
									}
									if( quickLook.objV.objStyleSizeInfo.intSizeDimensionsCount == 2 ) {
											strSize2Id = quickLook.arrayAllSizeDimension2[ quickLook.selectedSizeDimension2 ].strId;
									}
									strSkuID = quickLook.objV.arrayVariantSkus[ strColorId + "_" + strSize1Id + "_" + strSize2Id ].strSkuId; 
								}
								btDataModel.addToBagProductSku = strSkuID;
							}
							// Product add-to-bag price - u39
							if( currentProductColorObj.price ) {
								btDataModel.addToBagSellPrice = currentProductColorObj.price;
							}
							if( model.qtySelected ) {
								if( model.qtySelected != '1' ) {
									btDataModel.addToBagSellPrice = parseFloat( btDataModel.addToBagSellPrice ) * parseInt( model.qtySelected );
									btDataModel.addToBagSellPrice = btDataModel.addToBagSellPrice.toFixed(2);
									btDataModel.addToBagSellPrice = btDataModel.addToBagSellPrice.toString();
								}
							}
						}
					}
					
					// Update Add to Bag event to pass full product ID in page URL
					if( eventName == 'AddToBag' &amp;&amp; eventModifier == null ) {
						// Update URL if there's no CID in it
						if( gidLib.getQuerystringParam('cid') == '' &amp;&amp; btDataModel.pageURL.indexOf('cid') == -1 &amp;&amp; productPage.strDefaultCategoryId ) {
							btDataModel.pageURL += '%26cid%3D' + productPage.strDefaultCategoryId;
						}

						if( productPage.objV.objStyleSizeInfo.intSizeDimensionsCount &gt;= 1 ) {
							var strColorId = productPage.objV.arrayVariantStyleColors[ productPage.selectedColor ].strColorCodeId;
							var strSize1Id = productPage.arrayAllSizeDimension1[ productPage.selectedSizeDimension1 ].strId;
							var strSize2Id = "";
						}
						if( productPage.objV.objStyleSizeInfo.intSizeDimensionsCount == 2 ) {
							strSize2Id = productPage.arrayAllSizeDimension2[ productPage.selectedSizeDimension2 ].strId;
						}
						var strSkuID = productPage.objV.arrayVariantSkus[ strColorId + "_" + strSize1Id + "_" + strSize2Id ].strSkuId;
						
						// Parse URL and replace product ID with selected
						var currentProductId = btDataModel.pageURL;
						currentProductId = currentProductId.substr( currentProductId.indexOf('pid%3D') + 6 );
						if( currentProductId.indexOf('%26') &gt; -1 ) {
							currentProductId = currentProductId.substr( 0, currentProductId.indexOf('%26') );
						}
						var arrAddedProductURL = btDataModel.pageURL.split( currentProductId );
						var addedProductURL = '';
						if( arrAddedProductURL.length &gt; 0 ) {
							addedProductURL = arrAddedProductURL[0] + strSkuID;
							if( arrAddedProductURL.length &gt; 1 ) { addedProductURL += arrAddedProductURL[1]; }
						}
						
						btDataModel.pageURL = addedProductURL;
							
						// Current selected variant on product page load - u49
						// 1: Regular, 2: Tall, 3: Petite, 8: Plus
						var currentVariantId = '1'; 
						if( productPage.strVariantId ) {
							currentVariantId = productPage.strVariantId.toString();
						}
						btDataModel.currentVariantId = currentVariantId;
					}
					
					// If Load Product Variant, adjusts product page elements for new variant
					else if( eventName == 'LoadVariantProduct' || eventName == 'LoadVariantQLProduct' ) {
						var productObjRef = '';
						if( eventName == 'LoadVariantProduct' &amp;&amp; window["productPage"] != null ) {
							productObjRef = productPage;
						}
						else if( eventName == 'LoadVariantQLProduct' &amp;&amp; window["quickLook"] != null ) {
							productObjRef = quickLook;
						}
							
						if( productObjRef != '' ) {
							
							// New product ID of variant
							var currentProductColor = productObjRef.activeColor;
							var currentProductColorObj = productObjRef.objV.arrayVariantStyleColors[ currentProductColor ];
							var newVariantProductId = currentProductColorObj.strColorCodeId;
							
							// Update Page ID with variant ID
							btDataModel.pageId = newVariantProductId;
							
							// Update Page URL with variant ID
							// Parse URL and replace product ID with selected
							var currentProductId = btDataModel.pageURL;
							currentProductId = currentProductId.substr( currentProductId.indexOf('pid%3D') + 6 );
							if( currentProductId.indexOf('&amp;') &gt; -1 ) {
								currentProductId = currentProductId.substr( 0, currentProductId.indexOf('%26') );
							}
							var arrVariantProductURL = btDataModel.pageURL.split( currentProductId );
							var variantProductURL = '';
							if( arrVariantProductURL.length &gt; 0 ) {
								variantProductURL = arrVariantProductURL[0] + newVariantProductId;
								if( arrVariantProductURL.length &gt; 1 ) { variantProductURL += arrVariantProductURL[1]; }
							}
							
							btDataModel.pageURL = variantProductURL;

							// Update URL if there's no CID in it
							if( gidLib.getQuerystringParam('cid') == '' &amp;&amp; btDataModel.pageURL.indexOf('cid') == -1 &amp;&amp; productObjRef.strDefaultCategoryId ) {
								btDataModel.pageURL += '%26cid%3D' + productObjRef.strDefaultCategoryId;
							}

							// Product Name - u28, Product Vendor Name - u34
							if( productObjRef.objP.strProductStyleName ) {
								btDataModel.productName = '';
								btDataModel.productName = encodeURIComponent( productObjRef.objP.strProductStyleName );
							
								// Check whether item has a vendor (ie. Piperlime), if so prepend vendor name
								if( btDataModel.productName != '' &amp;&amp; productObjRef.objP.strVendorName &amp;&amp; productObjRef.objP.strVendorName != '' ) {
									btDataModel.productName = encodeURIComponent( productObjRef.objP.strVendorName ) + '%20' + btDataModel.productName;					
									btDataModel.productVendorName = encodeURIComponent( productObjRef.objP.strVendorName );
								}
							}
							
							// Product Brand - u29 - brand code sent
							if( productObjRef.objP.brandCode ) {
								btDataModel.productBrandCode = '';
								btDataModel.productBrandCode = productObjRef.objP.brandCode;
							}
							
							// Variant/color based
							if( productObjRef.hasOwnProperty('objV') &amp;&amp; productObjRef.hasOwnProperty('activeColor') ) {
								btDataModel.productPrice = '';
								var currentProductColor = productObjRef.activeColor;
								var currentProductColorObj = productObjRef.objV.arrayVariantStyleColors[ currentProductColor ];
								
								// Product Price - u30 - find selected variant/color to determine best
								if( currentProductColorObj.price ) {
									btDataModel.productPrice = currentProductColorObj.price;
									//console.log('price set');
								}
					
								// Product Original Price - u35
								if( currentProductColorObj.strRegularPrice ) {
									btDataModel.productOriginalPrice = currentProductColorObj.strRegularPrice.replace('$','');
								}
								
								// Product Image URL - u31
								if( currentProductColorObj.hasOwnProperty('arrayVariantStyleColorImages') ) {
									btDataModel.productImage = '';
									if( currentProductColorObj.arrayVariantStyleColorImages['Main'] ) {
										btDataModel.productImage = encodeURIComponent('http://' + location.hostname + currentProductColorObj.arrayVariantStyleColorImages['Main'].strImagePath );
										//console.log('image set from Main');
									}
									else if( currentProductColorObj.arrayVariantStyleColorImages['MainThumb'] ) {
										btDataModel.productImage = encodeURIComponent('http://' + location.hostname + currentProductColorObj.arrayVariantStyleColorImages['MainThumb'].strImagePath );
									}
								}					
							}
							
							// Product Sizes In Stock - u32 - pulling from page
							// Product Sizes Out of Stock - u33
							var allSkus = productObjRef.objV.arrayVariantSkus;
							var allSize1s = productObjRef.arrayAllSizeDimension1;
							var allSize2s = productObjRef.arrayAllSizeDimension2;
							var currentSkuId = '';
							var currentSkuSize1 = '';
							var currentSkuSize2 = '';
							var currentSkuSizeDescription = '';
							var sizeDesc = '';
							var arrSkuSizesAll = [];
							var arrSkuSizesInStock = [];
							var arrSkuSizesOutOfStock = [];
							
							if( allSize1s.length &gt; 0 &amp;&amp; allSize2s.length &gt; 0 ) {
								for( var i=0; i &lt; allSize1s.length; i++ ) {
									for( var j=0; j &lt; allSize2s.length; j++ ) {
										sizeDesc = '';
										sizeDesc += allSize1s[i].strName + ':' + allSize2s[j].strName;
										arrSkuSizesAll.push( sizeDesc );
									}
								}
							}
							else if( allSize1s.length &gt; 0 ) {
								for( var i=0; i &lt; allSize1s.length; i++ ) {
									sizeDesc = '';
									sizeDesc += allSize1s[i].strName;
									arrSkuSizesAll.push( sizeDesc );
								}
							}
							
							//console.log( 'all sizes ' + arrSkuSizesAll );
							
							jQuery.each(allSkus, function(key,valueObj){
								// If the value is an object that represents an in-stock color/size SKU of the initially loaded color
								if( eventName == 'LoadVariantProduct' ) {
									var currentPid = productObjRef.strDefaultStyleColorId;
								}
								else if( quickLook.objQuickLookTarget ) {
									var currentPid = quickLook.objQuickLookTarget.strDefaultStyleColor;
								}

								if( jQuery.type( valueObj ) == 'object' ) {
									// Restrict to initially loaded color
									if( valueObj.strSkuId.indexOf( currentPid ) &gt; -1 ) {
										currentSkuSizeDescription = '';
										currentSkuId = valueObj.strSkuId;
										currentSkuSize1 = valueObj.strSizeDim1Id;
										currentSkuSize2 = valueObj.strSizeDim2Id;
										
										if( allSize1s.length &gt; 0 ) {
											for( var i=0; i &lt; allSize1s.length; i++ ) {
												if( allSize1s[i].strId == currentSkuSize1 ) {
													currentSkuSizeDescription += allSize1s[i].strName;
												}			
											}
										}
										
										if( allSize2s.length &gt; 0 ) {
											for( var j=0; j &lt; allSize2s.length; j++ ) {
												if( allSize2s[j].strId == currentSkuSize2 ) {
													currentSkuSizeDescription += ':' + allSize2s[j].strName;
												}			
											}
										}
								
										//console.log( 'sku = ' + currentSkuId + '; size1 = ' + currentSkuSize1 + '; size2 = ' + currentSkuSize2 + '; sizeDesc = ' + currentSkuSizeDescription );
										arrSkuSizesInStock.push( currentSkuSizeDescription );
									}
								}
							});
							
							//console.log( 'sizes in stock ' + arrSkuSizesInStock );
							
							arrSkuSizesOutOfStock = jQuery.grep( arrSkuSizesAll, function( elt ) {
								return jQuery.inArray( elt, arrSkuSizesInStock ) == -1;
							});
							
							//console.log( 'sizes out of stock ' + arrSkuSizesOutOfStock );
							
							btDataModel.productSizesInStock = '';
							if( arrSkuSizesInStock.length &gt; 0 ) {
								// Replace ' &amp;#189' with 'half'
								for( var i=0; i &lt; arrSkuSizesInStock.length; i++ ) {
									arrSkuSizesInStock[i] = arrSkuSizesInStock[i].replace(' &amp;#189','half');
								}
								btDataModel.productSizesInStock = arrSkuSizesInStock.join();
								btDataModel.productSizesInStock = btDataModel.productSizesInStock.toLowerCase();
								//console.log('in stock sizes set');
							}
							btDataModel.productSizesOutOfStock = '';
							if( arrSkuSizesOutOfStock.length &gt; 0 ) {
								// Replace ' &amp;#189' with 'half'
								for( var j=0; j &lt; arrSkuSizesOutOfStock.length; j++ ) {
									arrSkuSizesOutOfStock[j] = arrSkuSizesOutOfStock[j].replace(' &amp;#189','half');
								}
								btDataModel.productSizesOutOfStock = arrSkuSizesOutOfStock.join();
								btDataModel.productSizesOutOfStock = btDataModel.productSizesOutOfStock.toLowerCase();
								//console.log('out of stock sizes set');
							}
							
							// Current selected variant on product page load - u49
							// 1: Regular, 2: Tall, 3: Petite, 8: Plus
							var currentVariantId = '1'; 
							if( productObjRef.strVariantId ) {
								currentVariantId = productObjRef.strVariantId.toString();
							}
							btDataModel.currentVariantId = currentVariantId;
						}
					}

					// If QuickLook or AddToQLBag, add product elements
					else if( eventName == 'QuickLook' || eventName == 'AddToQLBag' ) {
						if( ( eventName == 'QuickLook' || eventName == 'AddToQLBag' ) &amp;&amp; window["quickLook"] != null &amp;&amp; quickLook.objP &amp;&amp; quickLook.objV ) {
							
							// Fake URL to be product page
							var qlProductId = quickLook.objP.strProductId;
							var currentCid = gidLib.getQuerystringParam('cid');
							currentCid = currentCid.substr(0,6);
							
							// Update Add to Bag QL event to override product ID to pass full product ID of item added
							if( eventName == 'AddToQLBag' ) {
								if( quickLook.objV.objStyleSizeInfo.intSizeDimensionsCount &gt;= 1 ) {
									var strColorId = quickLook.objV.arrayVariantStyleColors[ quickLook.selectedColor ].strColorCodeId;
									var strSize1Id = quickLook.arrayAllSizeDimension1[ quickLook.selectedSizeDimension1 ].strId;
									var strSize2Id = "";
								}
								if( quickLook.objV.objStyleSizeInfo.intSizeDimensionsCount == 2 ) {
									strSize2Id = quickLook.arrayAllSizeDimension2[ quickLook.selectedSizeDimension2 ].strId;
								}
								qlProductId = quickLook.objV.arrayVariantSkus[ strColorId + "_" + strSize1Id + "_" + strSize2Id ].strSkuId;
							}
							
							btDataModel.pageURL = 'http://' + location.hostname + location.pathname.replace('category','product').replace('categorySearch','product').replace('search','product') + '?cid=' + currentCid + '&amp;pid=' + qlProductId;
							btDataModel.pageURL = encodeURIComponent( btDataModel.pageURL );

							// Product Name - u28
							if( quickLook.objP.strProductStyleName ) {
								btDataModel.productName = '';
								btDataModel.productVendorName = '';
								btDataModel.productName = encodeURIComponent( quickLook.objP.strProductStyleName );
							
								// Check whether item has a vendor (ie. Piperlime), if so prepend vendor name
								if( btDataModel.productName != '' &amp;&amp; quickLook.objP.strVendorName &amp;&amp; quickLook.objP.strVendorName != '' ) {
									btDataModel.productName = encodeURIComponent( quickLook.objP.strVendorName ) + '%20' + btDataModel.productName;					
									btDataModel.productVendorName = encodeURIComponent( quickLook.objP.strVendorName );
								}
							}
							
							// Product Brand - u29 - brand code sent
							if( quickLook.objP.brandCode ) {
								btDataModel.productBrandCode = '';
								btDataModel.productBrandCode = quickLook.objP.brandCode;
							}
							
							// Variant/color based
							if( quickLook.hasOwnProperty('objV') &amp;&amp; quickLook.hasOwnProperty('activeColor') ) {
								btDataModel.productPrice = '';
								var currentProductColor = quickLook.activeColor;
								var currentProductColorObj = quickLook.objV.arrayVariantStyleColors[ currentProductColor ];
								
								// Product Price - u30 - find selected variant/color to determine best
								if( currentProductColorObj.price ) {
									btDataModel.productPrice = currentProductColorObj.price;
									//console.log('price set');
								}
					
								// Product Original Price - u35
								if( currentProductColorObj.strRegularPrice ) {
									btDataModel.productOriginalPrice = currentProductColorObj.strRegularPrice.replace('$','');
								}
								
								// Product Image URL - u31
								if( currentProductColorObj.hasOwnProperty('arrayVariantStyleColorImages') ) {
									btDataModel.productImage = '';
									if( currentProductColorObj.arrayVariantStyleColorImages['Main'] ) {
										btDataModel.productImage = encodeURIComponent('http://' + location.hostname + currentProductColorObj.arrayVariantStyleColorImages['Main'].strImagePath );
										//console.log('image set from Main');
									}
									else if( currentProductColorObj.arrayVariantStyleColorImages['MainThumb'] ) {
										btDataModel.productImage = encodeURIComponent('http://' + location.hostname + currentProductColorObj.arrayVariantStyleColorImages['MainThumb'].strImagePath );
									}
								}					
							}
												
							// Product Sizes In Stock - u32 - pulling from page
							// Product Sizes Out of Stock - u33
							var allSkus = quickLook.objV.arrayVariantSkus;
							var allSize1s = quickLook.arrayAllSizeDimension1;
							var allSize2s = quickLook.arrayAllSizeDimension2;
							var currentSkuId = '';
							var currentSkuSize1 = '';
							var currentSkuSize2 = '';
							var currentSkuSizeDescription = '';
							var sizeDesc = '';
							var arrSkuSizesAll = [];
							var arrSkuSizesInStock = [];
							var arrSkuSizesOutOfStock = [];
							
							if( allSize1s.length &gt; 0 &amp;&amp; allSize2s.length &gt; 0 ) {
								for( var i=0; i &lt; allSize1s.length; i++ ) {
									for( var j=0; j &lt; allSize2s.length; j++ ) {
										sizeDesc = '';
										sizeDesc += allSize1s[i].strName + ':' + allSize2s[j].strName;
										arrSkuSizesAll.push( sizeDesc );
									}
								}
							}
							else if( allSize1s.length &gt; 0 ) {
								for( var i=0; i &lt; allSize1s.length; i++ ) {
									sizeDesc = '';
									sizeDesc += allSize1s[i].strName;
									arrSkuSizesAll.push( sizeDesc );
								}
							}
							
							//console.log( 'all sizes ' + arrSkuSizesAll );
							
							jQuery.each(allSkus, function(key,valueObj){
								// If the value is an object that represents an in-stock color/size SKU of the initially loaded color
								var currentPid = quickLook.objQuickLookTarget.strDefaultStyleColor;
								if( jQuery.type( valueObj ) == 'object' ) {
									// Restrict to initially loaded color
									if( valueObj.strSkuId.indexOf( currentPid ) &gt; -1 ) {
										currentSkuSizeDescription = '';
										currentSkuId = valueObj.strSkuId;
										currentSkuSize1 = valueObj.strSizeDim1Id;
										currentSkuSize2 = valueObj.strSizeDim2Id;
										
										if( allSize1s.length &gt; 0 ) {
											for( var i=0; i &lt; allSize1s.length; i++ ) {
												if( allSize1s[i].strId == currentSkuSize1 ) {
													currentSkuSizeDescription += allSize1s[i].strName;
												}			
											}
										}
										
										if( allSize2s.length &gt; 0 ) {
											for( var j=0; j &lt; allSize2s.length; j++ ) {
												if( allSize2s[j].strId == currentSkuSize2 ) {
													currentSkuSizeDescription += ':' + allSize2s[j].strName;
												}			
											}
										}
								
										//console.log( 'sku = ' + currentSkuId + '; size1 = ' + currentSkuSize1 + '; size2 = ' + currentSkuSize2 + '; sizeDesc = ' + currentSkuSizeDescription );
										arrSkuSizesInStock.push( currentSkuSizeDescription );
									}
								}
							});
							
							//console.log( 'sizes in stock ' + arrSkuSizesInStock );
							
							arrSkuSizesOutOfStock = jQuery.grep( arrSkuSizesAll, function( elt ) {
								return jQuery.inArray( elt, arrSkuSizesInStock ) == -1;
							});
							
							//console.log( 'sizes out of stock ' + arrSkuSizesOutOfStock );
							
							btDataModel.productSizesInStock = '';
							if( arrSkuSizesInStock.length &gt; 0 ) {
								// Replace ' &amp;#189' with 'half'
								for( var i=0; i &lt; arrSkuSizesInStock.length; i++ ) {
									arrSkuSizesInStock[i] = arrSkuSizesInStock[i].replace(' &amp;#189','half');
								}
								btDataModel.productSizesInStock = arrSkuSizesInStock.join();
								btDataModel.productSizesInStock = btDataModel.productSizesInStock.toLowerCase();
								//console.log('in stock sizes set');
							}
							btDataModel.productSizesOutOfStock = '';
							if( arrSkuSizesOutOfStock.length &gt; 0 ) {
								// Replace ' &amp;#189' with 'half'
								for( var j=0; j &lt; arrSkuSizesOutOfStock.length; j++ ) {
									arrSkuSizesOutOfStock[j] = arrSkuSizesOutOfStock[j].replace(' &amp;#189','half');
								}
								btDataModel.productSizesOutOfStock = arrSkuSizesOutOfStock.join();
								btDataModel.productSizesOutOfStock = btDataModel.productSizesOutOfStock.toLowerCase();
								//console.log('out of stock sizes set');
							}
							
							// Current selected variant on product page load - u49
							// 1: Regular, 2: Tall, 3: Petite, 8: Plus
							var currentVariantId = '1'; 
							if( quickLook.strVariantId ) {
								currentVariantId = quickLook.strVariantId.toString();
							}
							btDataModel.currentVariantId = currentVariantId;
						}
					}
					
					//console.log('data dump');
					//console.log( btDataModel );
					
					// Set the iframe URL and fire
					btFrameUrl = '//s.thebrighttag.com/tag?' + 
						'site=' + btDataModel.brighttag_site_id + '&amp;' + 
						'mode=iframe&amp;' + 
						'qty=' + btDataModel.totalQty + '&amp;' + 
						'tran=' + btDataModel.enteringBrandCode + '&amp;' + 
						'u=' + btDataModel.currencyType + '&amp;' + 
						'u1=' + btDataModel.productSkus + '&amp;' + 
						'u2=' + btDataModel.pageType + '&amp;' + 
						'u3=' + btDataModel.pageId + '&amp;' + 
						'u4=' + btDataModel.apCode + '&amp;' + 
						'u5=' + btDataModel.lastInTID + '&amp;' + 
						'u6=' + btDataModel.itemPrices + '&amp;' + 
						'u7=' + btDataModel.itemBrands + '&amp;' + 
						'u9=' + btDataModel.pageName + '&amp;' + 
						'u10=' + btDataModel.pageURL + '&amp;' + 
						'u11=' + btDataModel.isNewCustomer + '&amp;' + 
						'u14=' + btDataModel.isRecognizedVisitor + '&amp;' + 
						'u19=' + btDataModel.prodQty + '&amp;' + 
						'u20=' + btDataModel.unknownShopperID + '&amp;' + 
						'u21=' + btDataModel.customerID + '&amp;' + 
						brightTagPixelPartner.controller.getPixmanElement('u26', btDataModel.dotomiToken, '&amp;') +
						'u27=' + btDataModel.diID + '&amp;';
						
					if( location.pathname == '/browse/product.do' || eventName == 'QuickLook' || eventName == 'AddToQLBag' || eventName == 'LoadVariantProduct' || eventName == 'LoadVariantQLProduct' ) {
						btFrameUrl += 'u28=' + btDataModel.productName + '&amp;' + 
						'u29=' + btDataModel.productBrandCode + '&amp;' + 
						'u30=' + btDataModel.productPrice + '&amp;' + 
						'u31=' + btDataModel.productImage + '&amp;' + 
						'u32=' + btDataModel.productSizesInStock + '&amp;' + 
						'u33=' + btDataModel.productSizesOutOfStock + '&amp;' + 
						'u34=' + btDataModel.productVendorName + '&amp;' + 
						'u35=' + btDataModel.productOriginalPrice + '&amp;';
					}
					if( ( eventName == 'AddToBag' || eventName == 'AddToQLBag' ) &amp;&amp; btDataModel.addToBagSellPrice ) {
						btFrameUrl += 'u39=' + btDataModel.addToBagSellPrice + '&amp;';
					}
					
					// Mobile vs desktop 
					btFrameUrl += 'u44=' + btDataModel.mobileVsDesktop + '&amp;';

					// Outfit SKUs added to bag
					if( location.pathname == '/browse/outfit.do' &amp;&amp; eventName == 'AddToBag' &amp;&amp; btDataModel.addToBagOutfitSkus ) {
						btFrameUrl += 'u47=' + btDataModel.addToBagOutfitSkus + '&amp;';
					}
					
					// Referring URL
					btFrameUrl += 'u48=' + btDataModel.referringPageURL + '&amp;';
					if( typeof btDataModel.currentVariantId != 'undefined' ) {
						btFrameUrl += 'u49=' + btDataModel.currentVariantId + '&amp;';
					}

					// Add-to-bag price
					if( ( eventName == 'AddToBag' || eventName == 'AddToQLBag' ) &amp;&amp; btDataModel.addToBagProductSku ) {
						btFrameUrl += 'u51=' + btDataModel.addToBagProductSku + '&amp;';
					}
					
					model.btFrameUrl = btFrameUrl;

					controller.updateBrightTagFrame();
				}
			}
		}
	}
	
	Event.observe( document, 'brightTagPixelPartner:dataModelLoaded', function() {
		wcdBrightTagService.init();
	});
	
	// Quicklook wrap
	if( ( location.pathname == '/browse/category.do' || location.pathname == '/browse/categorySearch.do' || location.pathname == '/browse/search.do' || location.pathname == '/browse/product.do' ) &amp;&amp; window["quickLook"] != null ) {
		Event.observe( document, 'quicklook:load', function() {
		//quickLook.launchQuickLook = quickLook.launchQuickLook.wrap( function( originalMethod ) {
			//console.log('quicklook loaded');
			//originalMethod();
			wcdBrightTagService.controller.fireBrightTag('QuickLook');
		});
		
		quickLook.addToBag = quickLook.addToBag.wrap( function( originalMethod ) {
			if( quickLook.strSelectedQty ) {
				wcdBrightTagService.model.qtySelected = quickLook.strSelectedQty;
			}
			originalMethod();
			wcdBrightTagService.controller.fireBrightTag('AddToQLBag');
		});
	}
	
	// Find-it-now wrap
	if( location.pathname == '/browse/product.do' &amp;&amp; window["merchLocationsManager"] != null ) {
		if( merchLocationsManager.view &amp;&amp; merchLocationsManager.view.storeLocationsListOverlay &amp;&amp; merchLocationsManager.view.storeLocationsListOverlay.open ) {
			merchLocationsManager.view.storeLocationsListOverlay.open = merchLocationsManager.view.storeLocationsListOverlay.open.wrap( function( originalMethod ) {
				originalMethod();
				wcdBrightTagService.controller.fireBrightTag('FindItNow');
			});
		}
	}
	
	// Reserve-in-store wrap
	if( location.pathname == '/browse/product.do' &amp;&amp; window["reserveInStoreManager"] != null ) {
		if( reserveInStoreManager.api &amp;&amp; reserveInStoreManager.api.open ) {
			reserveInStoreManager.api.open = reserveInStoreManager.api.open.wrap( function( originalMethod, parentContainer, triggeredBy, productImgUrl ) {
				originalMethod( parentContainer, triggeredBy, productImgUrl );
				wcdBrightTagService.controller.fireBrightTag('ReserveInStore');
			});
		}
	}
	
	// Add-to-bag wrap - product and outfit page
	if( location.pathname == '/browse/product.do' &amp;&amp; window["productPage"] != null ) {
		productPage.addToBag = productPage.addToBag.wrap( function( originalMethod ) {
			originalMethod();
			wcdBrightTagService.controller.fireBrightTag('AddToBag');
		});
	}
	if( location.pathname == '/browse/outfit.do' &amp;&amp; window["outfitPage"] != null ) {
		outfitPage.addToBag = outfitPage.addToBag.wrap( function( originalMethod ) {
			originalMethod();
			wcdBrightTagService.controller.fireBrightTag('AddToBag','outfitPage');
		});
	}
	
	// Load Variant wrap
	if( location.pathname == '/browse/product.do' &amp;&amp; window["productPage"] != null ) {
		productPage.loadVariantProduct = productPage.loadVariantProduct.wrap( function( originalMethod, strProductId, strVariantId ) {
			originalMethod( strProductId, strVariantId );
			wcdBrightTagService.model.btLoadVariantCalls++;
			if( wcdBrightTagService.model.btLoadVariantCalls &gt; 1 ) {
				wcdBrightTagService.controller.fireBrightTag('LoadVariantProduct');
			}
		});
	}
	
	// Load QL Variant wrap
	if( ( location.pathname == '/browse/category.do' || location.pathname == '/browse/categorySearch.do' || location.pathname == '/browse/search.do' || location.pathname == '/browse/product.do' ) &amp;&amp; window["quickLook"] != null ) {
		quickLook.loadVariantProduct = quickLook.loadVariantProduct.wrap( function( originalMethod, strProductId, strVariantId ) {
			originalMethod( strProductId, strVariantId );
			wcdBrightTagService.model.btLoadVariantCalls++;
			if( wcdBrightTagService.model.btLoadVariantCalls &gt; 1 ) {
				wcdBrightTagService.controller.fireBrightTag('LoadVariantQLProduct');
			}
		});
		quickLook.closeQuickLook = quickLook.closeQuickLook.wrap( function( originalMethod ) {
			originalMethod();
			wcdBrightTagService.model.btLoadVariantCalls = 0;
		});
	}
}
     </script>
     <script type="text/javascript">
      //////////////////////////////////////////////////////////////////
// IE StyleTag to get around 31 tags consolidation script 1.0 //
// Jeff Held, Director - Web Content Development        //
//////////////////////////////////////////////////////////////////

var IEStyleTagConsolidator = function() {
  var myClientBrowserType = navigator.userAgent;
  if (myClientBrowserType.indexOf("MSIE") &gt; 0) {
  var browserVersionString = myClientBrowserType.split("MSIE ")[1];
  var browserVersionNumber = browserVersionString.split(".")[0];
  browserVersionNumber = parseInt(browserVersionNumber);

  // do this only for IE 9 and below...
    if (browserVersionNumber &lt; 10){
      var styleArr = $$('body')[0].select("style");

      var newStyleString = "";

      for (i=0; i&lt; styleArr.length; i++) {
        var workingHTML = styleArr[i].innerHTML;
        newStyleString += workingHTML;
        styleArr[i].remove();
      }
      var mynewtag = "&lt;style type='text/css'&gt;" + newStyleString + "&lt;/style&gt;";
      document.write(mynewtag);
    }
  }
}

IEStyleTagConsolidator();
     </script>
    </div>
    <!-- END Content Item File: /content/0009/932/674/cn9932674.html -->
    <!-- END - WCD Sitewide Container 20 -->
   </div>
  </div>
 </body>
</html>