<!DOCTYPE html>
<html>
 <head>
  <title>
   NSFW - Make NSFW Links Shorter &amp; Safer
  </title>
  <meta charset="utf-8"/>
  <meta content="A service that makes NSFW links shorter and safer." name="description"/>
  <meta content="16f0dd1b04397fbbc10d1f3eddc23684" name="verifyownership"/>
  <!-- ubuntu -->
  <!-- Combo-handled YUI CSS files: -->
  <link href="http://yui.yahooapis.com/combo?2.9.0/build/reset-fonts-grids/reset-fonts-grids.css" rel="stylesheet" type="text/css"/>
  <!-- Google Fonts -->
  <link href="http://fonts.googleapis.com/css?family=Oswald&amp;v2" rel="stylesheet" type="text/css"/>
  <link href="/static/css/style.css" rel="stylesheet"/>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.6.2/jquery.min.js" type="text/javascript">
  </script>
 </head>
 <body>
  <div class="homepage container">
   <header id="header">
    <h1>
     <a class="title logo" href="/">
      NSFW
     </a>
    </h1>
    <h2 class="tagline">
     Make NSFW Links Shorter &amp; Safer.
    </h2>
    <div class="clearboth">
    </div>
   </header>
   <form action="/" class="nsfw_post" method="POST" name="nsfw_post">
    <input name="csrfmiddlewaretoken" type="hidden" value="vMn6SyrX3iFoliUOgwlJ52eR7gvYhIgm"/>
    <textarea autofocus="" class="tiptip" id="url-container" name="nsfw_url">
    </textarea>
    <script>
     if (!("autofocus" in document.createElement("input"))) {
              document.getElementById("url-container").focus();
            }
    </script>
    <input class="nsfw_create_btn" type="submit" value="Make link safer "/>
   </form>
   <div class="clearboth">
   </div>
   <div class="created_urls">
    <table>
     <thead>
      <tr>
       <th class="tleft">
        Original Links
       </th>
       <th class="tright">
        Short &amp; Safe Links
       </th>
      </tr>
     </thead>
     <tbody>
     </tbody>
    </table>
    <div class="clearall">
     <a href="javascript:void(0)">
      Clear All
     </a>
    </div>
   </div>
  </div>
  <script type="text/javascript">
   $(document).ready(function() {
        function makeCreateBtnActive() {
            $(".nsfw_create_btn").removeClass("grey_btn").val("Make link safer ");
        }

        /* ------------------------
            Events
           ------------------------ */

        // Clear All
        $(".clearall a").click(function() {
            $.ajax({
                url: '/-post/',
                type: 'POST',
                success: function(response) {
                            $(".created_urls thead").hide('slow');
                            $(".created_urls tbody").slideUp('slow');
                            $('.created_urls tbody tr').remove();
                            $(".clearall").hide();
                         },
                error: function() {
                        showNotifyBar("Sorry! Something went wrong. Try Again Later!", "notify_alert");
                },
                headers: { "X-CSRFToken": getCookie('csrftoken') },
                crossDomain: false,
                data: { "clear_session": "1" }
                });
        });

        // On Click of Make Link Safer Button
        $(".nsfw_create_btn").click(function() { 
            $(".nsfw_create_btn").addClass("grey_btn").attr("value", "Making..."); 
        });

        // On Mouse Over the Short URLs (Once they are live / exist)
        $(".created_urls tbody .tright input").live('mouseover click', function() {
                $(this).select();
        });

        // On Submit of NSFW Link
        $(".nsfw_post").submit(
            function() {
                var long_url = $('.nsfw_post textarea').attr('value');

                /* No Input from User */
                if (long_url.trim() == '') { 
                    showNotifyBar("Please Enter URL to Make it Safer.", "notify_alert");
                    makeCreateBtnActive();
                    $("#url-container").focus();
                }

                $.ajax({
                    url: '/-post/',
                    type: 'POST',
                    success: function(response) {
                               if(response === "invalid_url") {
                                /* Invalid URL from User */
                                    $("#url-container").focus();
                                    showNotifyBar("Can't make a safer URL. Please enter a valid URL!", "notify_alert");
                               }
                               else if(response === "no_input") {
                                /* No Input from User */
                                    $("#url-container").focus();
                                    showNotifyBar("Please Enter URL to Make it Safer.", "notify_alert");
                               } 
                               else {
                                $(".created_urls tbody").show();
                                $(".clearall").show();
                                // Show the Result Table (Header) on first entry
                                if ($('.created_urls tbody tr').length === 0) {
                                    $('.created_urls thead').show();
                                }
                                $("#url-container").val('');
                                $(".created_urls table tbody").prepend($(response).hide().show('slow', function(){
                                    $(".created_urls input").filter(":first").select();
                                }));
                               }
                               makeCreateBtnActive();
                             },
                    error: function() {
                            showNotifyBar("Sorry! Something went wrong. Try Again Later!", "notify_alert");
                            makeCreateBtnActive();
                    },
                    headers: { "X-CSRFToken": getCookie('csrftoken') },
                    crossDomain: false,
                    data: { "nsfw_url": long_url }
                    });
                return false;
            });
    });
  </script>
  <div class="for-sale">
   <div class="wrapper">
    <strong>
     NSFW.in
    </strong>
    (domain + software + setup) is on sale. Interested buyers, please contact
    <a href="//brajeshwar.me/
">
     Brajeshwar
    </a>
    .
   </div>
  </div>
  <!-- 
&lt;div class="sep-line"&gt;&lt;/div&gt;
&lt;footer id="footer"&gt;
    &lt;div class="fleft"&gt;
        &lt;ul&gt;
            &lt;li&gt;&lt;a href="/"&gt;Home&lt;/a&gt;&lt;/li&gt;
            &lt;li&gt;&lt;a href="http://twitter.com/NSFWdotIN"&gt;Twitter&lt;/a&gt;&lt;/li&gt;
            &lt;li&gt;&lt;a href="http://blog.nsfw.in"&gt;Blog&lt;/a&gt;&lt;/li&gt;
            &lt;li&gt;&lt;a href="https://getsatisfaction.com/nsfw"&gt;Feedback&lt;/a&gt;&lt;/li&gt;
    &lt;/div&gt;
    &lt;div class="fright"&gt;
        Copyright &copy; 2007-2015 &lt;strong&gt;NSFW&lt;/strong&gt;.
    &lt;/div&gt;
&lt;/footer&gt;
-->
  <!-- Gaug.es Realtime Tracking -->
  <script type="text/javascript">
   var _gauges = _gauges || [];
      (function() {
        var t   = document.createElement('script');
        t.type  = 'text/javascript';
        t.async = true;
        t.id    = 'gauges-tracker';
        t.setAttribute('data-site-id', '4e58a1f8f5a1f51153000001');
        t.src = '//secure.gaug.es/track.js';
        var s = document.getElementsByTagName('script')[0];
        s.parentNode.insertBefore(t, s);
      })();
  </script>
  <!-- Google Analytics -->
  <script type="text/javascript">
   var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-188760-32']);
    _gaq.push(['_trackPageview']);
    _gaq.push(['_trackPageLoadTime']);
     
    (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>
  <script type="text/javascript">
   window.getCookie  = function(name) {
        var cookieValue = null;
        if (document.cookie &amp;&amp; document.cookie != '') {
            var cookies = document.cookie.split(';');
            for (var i = 0; i &lt; cookies.length; i++) {
                var cookie = jQuery.trim(cookies[i]);
                // Does this cookie string begin with the name we want?
                if (cookie.substring(0, name.length + 1) == (name + '=')) {
                    cookieValue = decodeURIComponent(cookie.substring(name.length + 1));
                    break;
                }
            }
        }
        return cookieValue;
    }
    
    window.sameOrigin = function(url) {
        // url could be relative or scheme relative or absolute
        var host = document.location.host; // host + port
        var protocol = document.location.protocol;
        var sr_origin = '//' + host;
        var origin = protocol + sr_origin;
        // Allow absolute or scheme relative URLs to same origin
        return (url == origin || url.slice(0, origin.length + 1) == origin + '/') ||
            (url == sr_origin || url.slice(0, sr_origin.length + 1) == sr_origin + '/') ||
            // or any other URL that isn't scheme relative or absolute i.e relative.
            !(/^(\/\/|http:|https:).*/.test(url));
    }

    window.safeMethod = function(method) {
        return (/^(GET|HEAD|OPTIONS|TRACE)$/.test(method));
    }

    String.prototype.trim=function(){return this.replace(/^\s\s*/, '').replace(/\s\s*$/, '');};

    $(document).ready(function() {
        window.showNotifyBar = function(msg, type) {
            if($("#"+type).length) {
                var $notifybar = $("#"+type);
                clearTimeout(window.notifybar_tid);
            }
            else {
                var $notifybar = $('&lt;div class="notify_alert" id="' + type + '"/&gt;');
            }

            $notifybar.html('&lt;span&gt;&lt;/span&gt; ' + msg);
            $notifybar.bind('click', function() {
                $(this).fadeOut('slow');
            });
            $(document.body).append($notifybar);
            $notifybar.slideDown('slow');
            window.notifybar_tid = setTimeout(function(){ $notifybar.fadeOut('slow'); }, 5000);
        }

    }); // End of document.ready()
  </script>
 </body>
</html>