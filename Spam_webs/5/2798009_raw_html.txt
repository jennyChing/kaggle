<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8"/>
  <meta content="width=device-width, initial-scale=1.0" name="viewport"/>
  <title>
   File: README
  
     Documentation for plataformatec/devise (master)
  </title>
  <link charset="utf-8" href="/css/style.css" rel="stylesheet" type="text/css"/>
  <link charset="utf-8" href="/css/common.css" rel="stylesheet" type="text/css"/>
  <link charset="utf-8" href="/css/custom.css" rel="stylesheet" type="text/css"/>
  <script charset="utf-8" type="text/javascript">
   pathId = "README"
  relpath = '/';
  docsPrefix = 'github/plataformatec/devise/master';
  listPrefix = 'list/github/plataformatec/devise/master';
  searchPrefix = 'search/github/plataformatec/devise/master';
  </script>
  <script charset="utf-8" src="/js/jquery.js" type="text/javascript">
  </script>
  <script charset="utf-8" src="/js/app.js" type="text/javascript">
  </script>
  <script charset="utf-8" src="/js/autocomplete.js" type="text/javascript">
  </script>
  <script charset="utf-8" src="/js/rubydoc_custom.js" type="text/javascript">
  </script>
 </head>
 <body>
  <div class="nav_wrap">
   <iframe id="nav" src="/list/github/plataformatec/devise/master/class">
   </iframe>
   <div id="resizer">
   </div>
  </div>
  <div id="main" tabindex="-1">
   <div id="header">
    <form action="/search/github/plataformatec/devise/master" class="search" method="get">
     <input id="search_box" name="q" placeholder="Search" size="30" type="search" value=""/>
    </form>
    <script charset="utf-8" type="text/javascript">
     $(function() {
    $('#search_box').autocomplete($('#search_box').parent().attr('action'), {
      width: 200,
      formatItem: function(item) {
        var values = item[0].split(",");
        return values[0] + (values[1] == '' ? "" : " &lt;small&gt;(" + values[1] + ")&lt;/small&gt;");
      }
    }).result(function(event, item) {
      var values = item[0].split(",")
      $('#search_box').val(values[1]);
      location.href = values[3];
      return false;
    });
  });
    </script>
    <div id="menu">
     <a href="/github" target="_top">
      Libraries
     </a>
     
     <span class="title">
      plataformatec/devise
      <small>
       (master)
      </small>
     </span>
     
     <a href="/github/plataformatec/devise/master/index">
      Index
     </a>
     
     <span class="title">
      File: README
     </span>
    </div>
    <div id="search">
     <a class="full_list_link" href="/list/github/plataformatec/devise/master/class" id="class_list_link">
      <svg height="24" width="24">
       <rect height="4" rx="1" ry="1" width="24" x="0" y="4">
       </rect>
       <rect height="4" rx="1" ry="1" width="24" x="0" y="12">
       </rect>
       <rect height="4" rx="1" ry="1" width="24" x="0" y="20">
       </rect>
      </svg>
     </a>
    </div>
    <div class="clear">
    </div>
   </div>
   <iframe id="search_frame" src="/list/github/plataformatec/devise/master/class">
   </iframe>
   <div id="content">
    <div id="filecontents">
     <p>
      <img alt="Devise Logo" src="https://raw.github.com/plataformatec/devise/master/devise.png"/>
     </p>
     <p>
      By
      <a href="http://plataformatec.com.br/">
       Plataformatec
      </a>
      .
     </p>
     <p>
      <a href="http://travis-ci.org/plataformatec/devise">
       <img alt="Build Status" src="https://api.travis-ci.org/plataformatec/devise.svg?branch=master"/>
      </a>
      <a href="https://codeclimate.com/github/plataformatec/devise">
       <img alt="Code Climate" src="https://codeclimate.com/github/plataformatec/devise.svg"/>
      </a>
      <a href="https://hakiri.io/github/plataformatec/devise/master">
       <img alt="Security" src="https://hakiri.io/github/plataformatec/devise/master.svg"/>
      </a>
     </p>
     <p>
      This README is
      <a href="http://devise.plataformatec.com.br/">
       also available in a friendly navigable format
      </a>
      .
     </p>
     <p>
      Devise is a flexible authentication solution for Rails based on Warden. It:
     </p>
     <ul>
      <li>
       Is Rack based;
      </li>
      <li>
       Is a complete MVC solution based on Rails engines;
      </li>
      <li>
       Allows you to have multiple models signed in at the same time;
      </li>
      <li>
       Is based on a modularity concept: use only what you really need.
      </li>
     </ul>
     <p>
      It's composed of 10 modules:
     </p>
     <ul>
      <li>
       <a href="http://rubydoc.info/github/plataformatec/devise/master/Devise/Models/DatabaseAuthenticatable">
        Database Authenticatable
       </a>
       : encrypts and stores a password in the database to validate the authenticity of a user while signing in. The authentication can be done both through POST requests or HTTP Basic Authentication.
      </li>
      <li>
       <a href="http://rubydoc.info/github/plataformatec/devise/master/Devise/Models/Omniauthable">
        Omniauthable
       </a>
       : adds OmniAuth (
       <a href="https://github.com/intridea/omniauth">
        https://github.com/intridea/omniauth
       </a>
       ) support.
      </li>
      <li>
       <a href="http://rubydoc.info/github/plataformatec/devise/master/Devise/Models/Confirmable">
        Confirmable
       </a>
       : sends emails with confirmation instructions and verifies whether an account is already confirmed during sign in.
      </li>
      <li>
       <a href="http://rubydoc.info/github/plataformatec/devise/master/Devise/Models/Recoverable">
        Recoverable
       </a>
       : resets the user password and sends reset instructions.
      </li>
      <li>
       <a href="http://rubydoc.info/github/plataformatec/devise/master/Devise/Models/Registerable">
        Registerable
       </a>
       : handles signing up users through a registration process, also allowing them to edit and destroy their account.
      </li>
      <li>
       <a href="http://rubydoc.info/github/plataformatec/devise/master/Devise/Models/Rememberable">
        Rememberable
       </a>
       : manages generating and clearing a token for remembering the user from a saved cookie.
      </li>
      <li>
       <a href="http://rubydoc.info/github/plataformatec/devise/master/Devise/Models/Trackable">
        Trackable
       </a>
       : tracks sign in count, timestamps and IP address.
      </li>
      <li>
       <a href="http://rubydoc.info/github/plataformatec/devise/master/Devise/Models/Timeoutable">
        Timeoutable
       </a>
       : expires sessions that have not been active in a specified period of time.
      </li>
      <li>
       <a href="http://rubydoc.info/github/plataformatec/devise/master/Devise/Models/Validatable">
        Validatable
       </a>
       : provides validations of email and password. It's optional and can be customized, so you're able to define your own validations.
      </li>
      <li>
       <a href="http://rubydoc.info/github/plataformatec/devise/master/Devise/Models/Lockable">
        Lockable
       </a>
       : locks an account after a specified number of failed sign-in attempts. Can unlock via email or after a specified time period.
      </li>
     </ul>
     <p>
      Devise is guaranteed to be thread-safe on YARV. Thread-safety support on JRuby is in progress.
     </p>
     <h2>
      Information
     </h2>
     <h3>
      The Devise wiki
     </h3>
     <p>
      The Devise Wiki has lots of additional information about Devise including many "how-to" articles and answers to the most frequently asked questions. Please browse the Wiki after finishing this README:
     </p>
     <p>
      <a href="https://github.com/plataformatec/devise/wiki">
       https://github.com/plataformatec/devise/wiki
      </a>
     </p>
     <h3>
      Bug reports
     </h3>
     <p>
      If you discover a problem with Devise, we would like to know about it. However, we ask that you please review these guidelines before submitting a bug report:
     </p>
     <p>
      <a href="https://github.com/plataformatec/devise/wiki/Bug-reports">
       https://github.com/plataformatec/devise/wiki/Bug-reports
      </a>
     </p>
     <p>
      If you have discovered a security related bug, please do
      <em>
       NOT
      </em>
      use the GitHub issue tracker. Send an email to
      <a href="mailto:opensource@plataformatec.com.br">
       opensource@plataformatec.com.br
      </a>
      .
     </p>
     <h3>
      Mailing list
     </h3>
     <p>
      If you have any questions, comments, or concerns, please use the Google Group instead of the GitHub issue tracker:
     </p>
     <p>
      <a href="https://groups.google.com/group/plataformatec-devise">
       https://groups.google.com/group/plataformatec-devise
      </a>
     </p>
     <h3>
      RDocs
     </h3>
     <p>
      You can view the Devise documentation in RDoc format here:
     </p>
     <p>
      <a href="http://rubydoc.info/github/plataformatec/devise/master/frames">
       http://rubydoc.info/github/plataformatec/devise/master/frames
      </a>
     </p>
     <p>
      If you need to use Devise with previous versions of Rails, you can always run "gem server" from the command line after you install the gem to access the old documentation.
     </p>
     <h3>
      Example applications
     </h3>
     <p>
      There are a few example applications available on GitHub that demonstrate various features of Devise with different versions of Rails. You can view them here:
     </p>
     <p>
      <a href="https://github.com/plataformatec/devise/wiki/Example-Applications">
       https://github.com/plataformatec/devise/wiki/Example-Applications
      </a>
     </p>
     <h3>
      Extensions
     </h3>
     <p>
      Our community has created a number of extensions that add functionality above and beyond what is included with Devise. You can view a list of available extensions and add your own here:
     </p>
     <p>
      <a href="https://github.com/plataformatec/devise/wiki/Extensions">
       https://github.com/plataformatec/devise/wiki/Extensions
      </a>
     </p>
     <h3>
      Contributing
     </h3>
     <p>
      We hope that you will consider contributing to Devise. Please read this short overview for some information about how to get started:
     </p>
     <p>
      <a href="https://github.com/plataformatec/devise/wiki/Contributing">
       https://github.com/plataformatec/devise/wiki/Contributing
      </a>
     </p>
     <p>
      You will usually want to write tests for your changes.  To run the test suite, go into Devise's top-level directory and run "bundle install" and "rake".  For the tests to pass, you will need to have a MongoDB server (version 2.0 or newer) running on your system.
     </p>
     <h2>
      Starting with Rails?
     </h2>
     <p>
      If you are building your first Rails application, we recommend you
      <em>
       do not
      </em>
      use Devise. Devise requires a good understanding of the Rails Framework. In such cases, we advise you to start a simple authentication system from scratch. Today we have two resources that should help you get started:
     </p>
     <ul>
      <li>
       Michael Hartl's online book:
       <a href="https://www.railstutorial.org/book/modeling_users">
        https://www.railstutorial.org/book/modeling_users
       </a>
      </li>
      <li>
       Ryan Bates' Railscast:
       <a href="http://railscasts.com/episodes/250-authentication-from-scratch">
        http://railscasts.com/episodes/250-authentication-from-scratch
       </a>
      </li>
     </ul>
     <p>
      Once you have solidified your understanding of Rails and authentication mechanisms, we assure you Devise will be very pleasant to work with. :smiley:
     </p>
     <h2>
      Getting started
     </h2>
     <p>
      Devise 3.0 works with Rails 3.2 onwards. You can add it to your Gemfile with:
     </p>
     <pre class="code ruby">
      <code class="ruby">
       <span class="id identifier rubyid_gem">
        gem
       </span>
       <span class="tstring">
        <span class="tstring_beg">
         '
        </span>
        <span class="tstring_content">
         devise
        </span>
        <span class="tstring_end">
         '
        </span>
       </span>
      </code>
     </pre>
     <p>
      Run the bundle command to install it.
     </p>
     <p>
      After you install Devise and add it to your Gemfile, you need to run the generator:
     </p>
     <pre class="code console">
      <code class="console">
       rails generate devise:install
      </code>
     </pre>
     <p>
      The generator will install an initializer which describes ALL of Devise's configuration options. It is
      <em>
       imperative
      </em>
      that you take a look at it. When you are done, you are ready to add Devise to any of your models using the generator:
     </p>
     <pre class="code console">
      <code class="console">
       rails generate devise MODEL
      </code>
     </pre>
     <p>
      Replace MODEL with the class name used for the applications users (its frequently
      <code>
       User
      </code>
      but could also be
      <code>
       Admin
      </code>
      ). This will create a model (if one does not exist) and configure it with default Devise modules. The generator also configures your
      <code>
       config/routes.rb
      </code>
      file to point to the Devise controller.
     </p>
     <p>
      Next, check the MODEL for any additional configuration options you might want to add, such as confirmable or lockable. If you add an option, be sure to inspect the migration file (created by the generator if your ORM supports them) and uncomment the appropriate section.  For example, if you add the confirmable option in the model, you'll need to uncomment the Confirmable section in the migration. Then run
      <code>
       rake db:migrate
      </code>
     </p>
     <p>
      Next, you need to set up the default URL options for the Devise mailer in each environment. Here is a possible configuration for
      <code>
       config/environments/development.rb
      </code>
      :
     </p>
     <pre class="code ruby">
      <code class="ruby">
       <span class="id identifier rubyid_config">
        config
       </span>
       <span class="period">
        .
       </span>
       <span class="id identifier rubyid_action_mailer">
        action_mailer
       </span>
       <span class="period">
        .
       </span>
       <span class="id identifier rubyid_default_url_options">
        default_url_options
       </span>
       <span class="op">
        =
       </span>
       <span class="lbrace">
        {
       </span>
       <span class="label">
        host:
       </span>
       <span class="tstring">
        <span class="tstring_beg">
         '
        </span>
        <span class="tstring_content">
         localhost
        </span>
        <span class="tstring_end">
         '
        </span>
       </span>
       <span class="comma">
        ,
       </span>
       <span class="label">
        port:
       </span>
       <span class="int">
        3000
       </span>
       <span class="rbrace">
        }
       </span>
      </code>
     </pre>
     <p>
      You should restart your application after changing Devise's configuration options. Otherwise, you will run into strange errors, for example, users being unable to login and route helpers being undefined.
     </p>
     <h3>
      Controller filters and helpers
     </h3>
     <p>
      Devise will create some helpers to use inside your controllers and views. To set up a controller with user authentication, just add this before_action (assuming your devise model is 'User'):
     </p>
     <pre class="code ruby">
      <code class="ruby">
       <span class="id identifier rubyid_before_action">
        before_action
       </span>
       <span class="symbol">
        :authenticate_user!
       </span>
      </code>
     </pre>
     <p>
      If your devise model is something other than User, replace "_user" with "_yourmodel". The same logic applies to the instructions below.
     </p>
     <p>
      To verify if a user is signed in, use the following helper:
     </p>
     <pre class="code ruby">
      <code class="ruby">
       <span class="id identifier rubyid_user_signed_in?">
        user_signed_in?
       </span>
      </code>
     </pre>
     <p>
      For the current signed-in user, this helper is available:
     </p>
     <pre class="code ruby">
      <code class="ruby">
       <span class="id identifier rubyid_current_user">
        current_user
       </span>
      </code>
     </pre>
     <p>
      You can access the session for this scope:
     </p>
     <pre class="code ruby">
      <code class="ruby">
       <span class="id identifier rubyid_user_session">
        user_session
       </span>
      </code>
     </pre>
     <p>
      After signing in a user, confirming the account or updating the password, Devise will look for a scoped root path to redirect to. For instance, when using a
      <code>
       :user
      </code>
      resource, the
      <code>
       user_root_path
      </code>
      will be used if it exists; otherwise, the default
      <code>
       root_path
      </code>
      will be used. This means that you need to set the root inside your routes:
     </p>
     <pre class="code ruby">
      <code class="ruby">
       <span class="id identifier rubyid_root">
        root
       </span>
       <span class="label">
        to:
       </span>
       <span class="tstring">
        <span class="tstring_beg">
         "
        </span>
        <span class="tstring_content">
         home#index
        </span>
        <span class="tstring_end">
         "
        </span>
       </span>
      </code>
     </pre>
     <p>
      You can also override
      <code>
       after_sign_in_path_for
      </code>
      and
      <code>
       after_sign_out_path_for
      </code>
      to customize your redirect hooks.
     </p>
     <p>
      Notice that if your Devise model is called
      <code>
       Member
      </code>
      instead of
      <code>
       User
      </code>
      , for example, then the helpers available are:
     </p>
     <pre class="code ruby">
      <code class="ruby">
       <span class="id identifier rubyid_before_action">
        before_action
       </span>
       <span class="symbol">
        :authenticate_member!
       </span>
       <span class="id identifier rubyid_member_signed_in?">
        member_signed_in?
       </span>
       <span class="id identifier rubyid_current_member">
        current_member
       </span>
       <span class="id identifier rubyid_member_session">
        member_session
       </span>
      </code>
     </pre>
     <h3>
      Configuring Models
     </h3>
     <p>
      The Devise method in your models also accepts some options to configure its modules. For example, you can choose the cost of the encryption algorithm with:
     </p>
     <pre class="code ruby">
      <code class="ruby">
       <span class="id identifier rubyid_devise">
        devise
       </span>
       <span class="symbol">
        :database_authenticatable
       </span>
       <span class="comma">
        ,
       </span>
       <span class="symbol">
        :registerable
       </span>
       <span class="comma">
        ,
       </span>
       <span class="symbol">
        :confirmable
       </span>
       <span class="comma">
        ,
       </span>
       <span class="symbol">
        :recoverable
       </span>
       <span class="comma">
        ,
       </span>
       <span class="label">
        stretches:
       </span>
       <span class="int">
        20
       </span>
      </code>
     </pre>
     <p>
      Besides
      <code>
       :stretches
      </code>
      , you can define
      <code>
       :pepper
      </code>
      ,
      <code>
       :encryptor
      </code>
      ,
      <code>
       :confirm_within
      </code>
      ,
      <code>
       :remember_for
      </code>
      ,
      <code>
       :timeout_in
      </code>
      ,
      <code>
       :unlock_in
      </code>
      among other options. For more details, see the initializer file that was created when you invoked the "devise:install" generator described above. This file is usually located at
      <code>
       /config/initializers/devise.rb
      </code>
      .
     </p>
     <h3>
      Strong Parameters
     </h3>
     <p>
      When you customize your own views, you may end up adding new attributes to forms. Rails 4 moved the parameter sanitization from the model to the controller, causing Devise to handle this concern at the controller as well.
     </p>
     <p>
      There are just three actions in Devise that allows any set of parameters to be passed down to the model, therefore requiring sanitization. Their names and the permitted parameters by default are:
     </p>
     <ul>
      <li>
       <code>
        sign_in
       </code>
       (
       <code>
        Devise::SessionsController#create
       </code>
       ) - Permits only the authentication keys (like
       <code>
        email
       </code>
       )
      </li>
      <li>
       <code>
        sign_up
       </code>
       (
       <code>
        Devise::RegistrationsController#create
       </code>
       ) - Permits authentication keys plus
       <code>
        password
       </code>
       and
       <code>
        password_confirmation
       </code>
      </li>
      <li>
       <code>
        account_update
       </code>
       (
       <code>
        Devise::RegistrationsController#update
       </code>
       ) - Permits authentication keys plus
       <code>
        password
       </code>
       ,
       <code>
        password_confirmation
       </code>
       and
       <code>
        current_password
       </code>
      </li>
     </ul>
     <p>
      In case you want to permit additional parameters (the lazy way), you can do so using a simple before filter in your
      <code>
       ApplicationController
      </code>
      :
     </p>
     <pre class="code ruby">
      <code class="ruby">
       <span class="kw">
        class
       </span>
       <span class="const">
        ApplicationController
       </span>
       <span class="op">
        &lt;
       </span>
       <span class="const">
        ActionController
       </span>
       <span class="op">
        ::
       </span>
       <span class="const">
        Base
       </span>
       <span class="id identifier rubyid_before_action">
        before_action
       </span>
       <span class="symbol">
        :configure_permitted_parameters
       </span>
       <span class="comma">
        ,
       </span>
       <span class="label">
        if:
       </span>
       <span class="symbol">
        :devise_controller?
       </span>
       <span class="id identifier rubyid_protected">
        protected
       </span>
       <span class="kw">
        def
       </span>
       <span class="id identifier rubyid_configure_permitted_parameters">
        configure_permitted_parameters
       </span>
       <span class="id identifier rubyid_devise_parameter_sanitizer">
        devise_parameter_sanitizer
       </span>
       <span class="period">
        .
       </span>
       <span class="id identifier rubyid_for">
        for
       </span>
       <span class="lparen">
        (
       </span>
       <span class="symbol">
        :sign_up
       </span>
       <span class="rparen">
        )
       </span>
       <span class="op">
        &lt;&lt;
       </span>
       <span class="symbol">
        :username
       </span>
       <span class="kw">
        end
       </span>
       <span class="kw">
        end
       </span>
      </code>
     </pre>
     <p>
      The above works for any additional fields where the parameters are simple scalar types. If you have nested attributes (say you're using
      <code>
       accepts_nested_attributes_for
      </code>
      ), then you will need to tell devise about those nestings and types. Devise allows you to completely change Devise defaults or invoke custom behaviour by passing a block:
     </p>
     <p>
      To permit simple scalar values for username and email, use this
     </p>
     <pre class="code ruby">
      <code class="ruby">
       <span class="kw">
        def
       </span>
       <span class="id identifier rubyid_configure_permitted_parameters">
        configure_permitted_parameters
       </span>
       <span class="id identifier rubyid_devise_parameter_sanitizer">
        devise_parameter_sanitizer
       </span>
       <span class="period">
        .
       </span>
       <span class="id identifier rubyid_for">
        for
       </span>
       <span class="lparen">
        (
       </span>
       <span class="symbol">
        :sign_in
       </span>
       <span class="rparen">
        )
       </span>
       <span class="lbrace">
        {
       </span>
       <span class="op">
        |
       </span>
       <span class="id identifier rubyid_u">
        u
       </span>
       <span class="op">
        |
       </span>
       <span class="id identifier rubyid_u">
        u
       </span>
       <span class="period">
        .
       </span>
       <span class="id identifier rubyid_permit">
        permit
       </span>
       <span class="lparen">
        (
       </span>
       <span class="symbol">
        :username
       </span>
       <span class="comma">
        ,
       </span>
       <span class="symbol">
        :email
       </span>
       <span class="rparen">
        )
       </span>
       <span class="rbrace">
        }
       </span>
       <span class="kw">
        end
       </span>
      </code>
     </pre>
     <p>
      If you have some checkboxes that express the roles a user may take on registration, the browser will send those selected checkboxes as an array. An array is not one of Strong Parameters' permitted scalars, so we need to configure Devise in the following way:
     </p>
     <pre class="code ruby">
      <code class="ruby">
       <span class="kw">
        def
       </span>
       <span class="id identifier rubyid_configure_permitted_parameters">
        configure_permitted_parameters
       </span>
       <span class="id identifier rubyid_devise_parameter_sanitizer">
        devise_parameter_sanitizer
       </span>
       <span class="period">
        .
       </span>
       <span class="id identifier rubyid_for">
        for
       </span>
       <span class="lparen">
        (
       </span>
       <span class="symbol">
        :sign_up
       </span>
       <span class="rparen">
        )
       </span>
       <span class="lbrace">
        {
       </span>
       <span class="op">
        |
       </span>
       <span class="id identifier rubyid_u">
        u
       </span>
       <span class="op">
        |
       </span>
       <span class="id identifier rubyid_u">
        u
       </span>
       <span class="period">
        .
       </span>
       <span class="id identifier rubyid_permit">
        permit
       </span>
       <span class="lparen">
        (
       </span>
       <span class="lbrace">
        {
       </span>
       <span class="label">
        roles:
       </span>
       <span class="lbracket">
        [
       </span>
       <span class="rbracket">
        ]
       </span>
       <span class="rbrace">
        }
       </span>
       <span class="comma">
        ,
       </span>
       <span class="symbol">
        :email
       </span>
       <span class="comma">
        ,
       </span>
       <span class="symbol">
        :password
       </span>
       <span class="comma">
        ,
       </span>
       <span class="symbol">
        :password_confirmation
       </span>
       <span class="rparen">
        )
       </span>
       <span class="rbrace">
        }
       </span>
       <span class="kw">
        end
       </span>
      </code>
     </pre>
     <p>
      For the list of permitted scalars, and how to declare permitted keys in nested hashes and arrays, see
     </p>
     <p>
      <a href="https://github.com/rails/strong_parameters#nested-parameters">
       https://github.com/rails/strong_parameters#nested-parameters
      </a>
     </p>
     <p>
      If you have multiple Devise models, you may want to set up a different parameter sanitizer per model. In this case, we recommend inheriting from
      <code>
       Devise::ParameterSanitizer
      </code>
      and adding your own logic:
     </p>
     <pre class="code ruby">
      <code class="ruby">
       <span class="kw">
        class
       </span>
       <span class="const">
        User
       </span>
       <span class="op">
        ::
       </span>
       <span class="const">
        ParameterSanitizer
       </span>
       <span class="op">
        &lt;
       </span>
       <span class="const">
        Devise
       </span>
       <span class="op">
        ::
       </span>
       <span class="const">
        ParameterSanitizer
       </span>
       <span class="kw">
        def
       </span>
       <span class="id identifier rubyid_sign_in">
        sign_in
       </span>
       <span class="id identifier rubyid_default_params">
        default_params
       </span>
       <span class="period">
        .
       </span>
       <span class="id identifier rubyid_permit">
        permit
       </span>
       <span class="lparen">
        (
       </span>
       <span class="symbol">
        :username
       </span>
       <span class="comma">
        ,
       </span>
       <span class="symbol">
        :email
       </span>
       <span class="rparen">
        )
       </span>
       <span class="kw">
        end
       </span>
       <span class="kw">
        end
       </span>
      </code>
     </pre>
     <p>
      And then configure your controllers to use it:
     </p>
     <pre class="code ruby">
      <code class="ruby">
       <span class="kw">
        class
       </span>
       <span class="const">
        ApplicationController
       </span>
       <span class="op">
        &lt;
       </span>
       <span class="const">
        ActionController
       </span>
       <span class="op">
        ::
       </span>
       <span class="const">
        Base
       </span>
       <span class="id identifier rubyid_protected">
        protected
       </span>
       <span class="kw">
        def
       </span>
       <span class="id identifier rubyid_devise_parameter_sanitizer">
        devise_parameter_sanitizer
       </span>
       <span class="kw">
        if
       </span>
       <span class="id identifier rubyid_resource_class">
        resource_class
       </span>
       <span class="op">
        ==
       </span>
       <span class="const">
        User
       </span>
       <span class="const">
        User
       </span>
       <span class="op">
        ::
       </span>
       <span class="const">
        ParameterSanitizer
       </span>
       <span class="period">
        .
       </span>
       <span class="id identifier rubyid_new">
        new
       </span>
       <span class="lparen">
        (
       </span>
       <span class="const">
        User
       </span>
       <span class="comma">
        ,
       </span>
       <span class="symbol">
        :user
       </span>
       <span class="comma">
        ,
       </span>
       <span class="id identifier rubyid_params">
        params
       </span>
       <span class="rparen">
        )
       </span>
       <span class="kw">
        else
       </span>
       <span class="kw">
        super
       </span>
       <span class="comment">
        # Use the default one
       </span>
       <span class="kw">
        end
       </span>
       <span class="kw">
        end
       </span>
       <span class="kw">
        end
       </span>
      </code>
     </pre>
     <p>
      The example above overrides the permitted parameters for the user to be both
      <code>
       :username
      </code>
      and
      <code>
       :email
      </code>
      . The non-lazy way to configure parameters would be by defining the before filter above in a custom controller. We detail how to configure and customize controllers in some sections below.
     </p>
     <h3>
      Configuring views
     </h3>
     <p>
      We built Devise to help you quickly develop an application that uses authentication. However, we don't want to be in your way when you need to customize it.
     </p>
     <p>
      Since Devise is an engine, all its views are packaged inside the gem. These views will help you get started, but after some time you may want to change them. If this is the case, you just need to invoke the following generator, and it will copy all views to your application:
     </p>
     <pre class="code console">
      <code class="console">
       rails generate devise:views
      </code>
     </pre>
     <p>
      If you have more than one Devise model in your application (such as
      <code>
       User
      </code>
      and
      <code>
       Admin
      </code>
      ), you will notice that Devise uses the same views for all models. Fortunately, Devise offers an easy way to customize views. All you need to do is set
      <code>
       config.scoped_views = true
      </code>
      inside the
      <code>
       config/initializers/devise.rb
      </code>
      file.
     </p>
     <p>
      After doing so, you will be able to have views based on the role like
      <code>
       users/sessions/new
      </code>
      and
      <code>
       admins/sessions/new
      </code>
      . If no view is found within the scope, Devise will use the default view at
      <code>
       devise/sessions/new
      </code>
      . You can also use the generator to generate scoped views:
     </p>
     <pre class="code console">
      <code class="console">
       rails generate devise:views users
      </code>
     </pre>
     <p>
      If you would like to generate only a few sets of views, like the ones for the
      <code>
       registerable
      </code>
      and
      <code>
       confirmable
      </code>
      module,
you can pass a list of modules to the generator with the
      <code>
       -v
      </code>
      flag.
     </p>
     <pre class="code console">
      <code class="console">
       rails generate devise:views -v registrations confirmations
      </code>
     </pre>
     <h3>
      Configuring controllers
     </h3>
     <p>
      If the customization at the views level is not enough, you can customize each controller by following these steps:
     </p>
     <ol>
      <li>
       <p>
        Create your custom controllers using the generator which requires a scope:
       </p>
       <pre class="code console">
        <code class="console">
         rails generate devise:controllers [scope]
        </code>
       </pre>
       <p>
        If you specify
        <code>
         users
        </code>
        as the scope, controllers will be created in
        <code>
         app/controllers/users/
        </code>
        .
And the sessions controller will look like this:
       </p>
       <pre class="code ruby">
        <code class="ruby">
         class Users::SessionsController &lt; Devise::SessionsController
  # GET /resource/sign_in
  # def new
  #   super
  # end
  ...
end
        </code>
       </pre>
      </li>
      <li>
       <p>
        Tell the router to use this controller:
       </p>
       <pre class="code ruby">
        <code class="ruby">
         <span class="id identifier rubyid_devise_for">
          devise_for
         </span>
         <span class="symbol">
          :users
         </span>
         <span class="comma">
          ,
         </span>
         <span class="label">
          controllers:
         </span>
         <span class="lbrace">
          {
         </span>
         <span class="label">
          sessions:
         </span>
         <span class="tstring">
          <span class="tstring_beg">
           "
          </span>
          <span class="tstring_content">
           users/sessions
          </span>
          <span class="tstring_end">
           "
          </span>
         </span>
         <span class="rbrace">
          }
         </span>
        </code>
       </pre>
      </li>
      <li>
       <p>
        Copy the views from
        <code>
         devise/sessions
        </code>
        to
        <code>
         users/sessions
        </code>
        . Since the controller was changed, it won't use the default views located in
        <code>
         devise/sessions
        </code>
        .
       </p>
      </li>
      <li>
       <p>
        Finally, change or extend the desired controller actions.
       </p>
       <p>
        You can completely override a controller action:
       </p>
       <pre class="code ruby">
        <code class="ruby">
         <span class="kw">
          class
         </span>
         <span class="const">
          Users
         </span>
         <span class="op">
          ::
         </span>
         <span class="const">
          SessionsController
         </span>
         <span class="op">
          &lt;
         </span>
         <span class="const">
          Devise
         </span>
         <span class="op">
          ::
         </span>
         <span class="const">
          SessionsController
         </span>
         <span class="kw">
          def
         </span>
         <span class="id identifier rubyid_create">
          create
         </span>
         <span class="comment">
          # custom sign-in code
         </span>
         <span class="kw">
          end
         </span>
         <span class="kw">
          end
         </span>
        </code>
       </pre>
       <p>
        Or you can simply add new behaviour to it:
       </p>
       <pre class="code ruby">
        <code class="ruby">
         <span class="kw">
          class
         </span>
         <span class="const">
          Users
         </span>
         <span class="op">
          ::
         </span>
         <span class="const">
          SessionsController
         </span>
         <span class="op">
          &lt;
         </span>
         <span class="const">
          Devise
         </span>
         <span class="op">
          ::
         </span>
         <span class="const">
          SessionsController
         </span>
         <span class="kw">
          def
         </span>
         <span class="id identifier rubyid_create">
          create
         </span>
         <span class="kw">
          super
         </span>
         <span class="kw">
          do
         </span>
         <span class="op">
          |
         </span>
         <span class="id identifier rubyid_resource">
          resource
         </span>
         <span class="op">
          |
         </span>
         <span class="const">
          BackgroundWorker
         </span>
         <span class="period">
          .
         </span>
         <span class="id identifier rubyid_trigger">
          trigger
         </span>
         <span class="lparen">
          (
         </span>
         <span class="id identifier rubyid_resource">
          resource
         </span>
         <span class="rparen">
          )
         </span>
         <span class="kw">
          end
         </span>
         <span class="kw">
          end
         </span>
         <span class="kw">
          end
         </span>
        </code>
       </pre>
       <p>
        This is useful for triggering background jobs or logging events during certain actions.
       </p>
      </li>
     </ol>
     <p>
      Remember that Devise uses flash messages to let users know if sign in was successful or unsuccessful. Devise expects your application to call
      <code>
       flash[:notice]
      </code>
      and
      <code>
       flash[:alert]
      </code>
      as appropriate. Do not print the entire flash hash, print only specific keys. In some circumstances, Devise adds a
      <code>
       :timedout
      </code>
      key to the flash hash, which is not meant for display. Remove this key from the hash if you intend to print the entire hash.
     </p>
     <h3>
      Configuring routes
     </h3>
     <p>
      Devise also ships with default routes. If you need to customize them, you should probably be able to do it through the devise_for method. It accepts several options like :class_name, :path_prefix and so on, including the possibility to change path names for I18n:
     </p>
     <pre class="code ruby">
      <code class="ruby">
       <span class="id identifier rubyid_devise_for">
        devise_for
       </span>
       <span class="symbol">
        :users
       </span>
       <span class="comma">
        ,
       </span>
       <span class="label">
        path:
       </span>
       <span class="tstring">
        <span class="tstring_beg">
         "
        </span>
        <span class="tstring_content">
         auth
        </span>
        <span class="tstring_end">
         "
        </span>
       </span>
       <span class="comma">
        ,
       </span>
       <span class="label">
        path_names:
       </span>
       <span class="lbrace">
        {
       </span>
       <span class="label">
        sign_in:
       </span>
       <span class="tstring">
        <span class="tstring_beg">
         '
        </span>
        <span class="tstring_content">
         login
        </span>
        <span class="tstring_end">
         '
        </span>
       </span>
       <span class="comma">
        ,
       </span>
       <span class="label">
        sign_out:
       </span>
       <span class="tstring">
        <span class="tstring_beg">
         '
        </span>
        <span class="tstring_content">
         logout
        </span>
        <span class="tstring_end">
         '
        </span>
       </span>
       <span class="comma">
        ,
       </span>
       <span class="label">
        password:
       </span>
       <span class="tstring">
        <span class="tstring_beg">
         '
        </span>
        <span class="tstring_content">
         secret
        </span>
        <span class="tstring_end">
         '
        </span>
       </span>
       <span class="comma">
        ,
       </span>
       <span class="label">
        confirmation:
       </span>
       <span class="tstring">
        <span class="tstring_beg">
         '
        </span>
        <span class="tstring_content">
         verification
        </span>
        <span class="tstring_end">
         '
        </span>
       </span>
       <span class="comma">
        ,
       </span>
       <span class="label">
        unlock:
       </span>
       <span class="tstring">
        <span class="tstring_beg">
         '
        </span>
        <span class="tstring_content">
         unblock
        </span>
        <span class="tstring_end">
         '
        </span>
       </span>
       <span class="comma">
        ,
       </span>
       <span class="label">
        registration:
       </span>
       <span class="tstring">
        <span class="tstring_beg">
         '
        </span>
        <span class="tstring_content">
         register
        </span>
        <span class="tstring_end">
         '
        </span>
       </span>
       <span class="comma">
        ,
       </span>
       <span class="label">
        sign_up:
       </span>
       <span class="tstring">
        <span class="tstring_beg">
         '
        </span>
        <span class="tstring_content">
         cmon_let_me_in
        </span>
        <span class="tstring_end">
         '
        </span>
       </span>
       <span class="rbrace">
        }
       </span>
      </code>
     </pre>
     <p>
      Be sure to check
      <code>
       devise_for
      </code>
      documentation for details.
     </p>
     <p>
      If you have the need for more deep customization, for instance to also allow "/sign_in" besides "/users/sign_in", all you need to do is to create your routes normally and wrap them in a
      <code>
       devise_scope
      </code>
      block in the router:
     </p>
     <pre class="code ruby">
      <code class="ruby">
       <span class="id identifier rubyid_devise_scope">
        devise_scope
       </span>
       <span class="symbol">
        :user
       </span>
       <span class="kw">
        do
       </span>
       <span class="id identifier rubyid_get">
        get
       </span>
       <span class="tstring">
        <span class="tstring_beg">
         "
        </span>
        <span class="tstring_content">
         sign_in
        </span>
        <span class="tstring_end">
         "
        </span>
       </span>
       <span class="comma">
        ,
       </span>
       <span class="label">
        to:
       </span>
       <span class="tstring">
        <span class="tstring_beg">
         "
        </span>
        <span class="tstring_content">
         devise/sessions#new
        </span>
        <span class="tstring_end">
         "
        </span>
       </span>
       <span class="kw">
        end
       </span>
      </code>
     </pre>
     <p>
      This way, you tell Devise to use the scope
      <code>
       :user
      </code>
      when "/sign_in" is accessed. Notice
      <code>
       devise_scope
      </code>
      is also aliased as
      <code>
       as
      </code>
      in your router.
     </p>
     <h3>
      I18n
     </h3>
     <p>
      Devise uses flash messages with I18n, in conjunction with the flash keys :notice and :alert. To customize your app, you can set up your locale file:
     </p>
     <pre class="code yaml">
      <code class="yaml">
       en:
  devise:
    sessions:
      signed_in: 'Signed in successfully.'
      </code>
     </pre>
     <p>
      You can also create distinct messages based on the resource you've configured using the singular name given in routes:
     </p>
     <pre class="code yaml">
      <code class="yaml">
       en:
  devise:
    sessions:
      user:
        signed_in: 'Welcome user, you are signed in.'
      admin:
        signed_in: 'Hello admin!'
      </code>
     </pre>
     <p>
      The Devise mailer uses a similar pattern to create subject messages:
     </p>
     <pre class="code yaml">
      <code class="yaml">
       en:
  devise:
    mailer:
      confirmation_instructions:
        subject: 'Hello everybody!'
        user_subject: 'Hello User! Please confirm your email'
      reset_password_instructions:
        subject: 'Reset instructions'
      </code>
     </pre>
     <p>
      Take a look at our locale file to check all available messages. You may also be interested in one of the many translations that are available on our wiki:
     </p>
     <p>
      <a href="https://github.com/plataformatec/devise/wiki/I18n">
       https://github.com/plataformatec/devise/wiki/I18n
      </a>
     </p>
     <p>
      Caution: Devise Controllers inherit from ApplicationController. If your app uses multiple locales, you should be sure to set I18n.locale in ApplicationController.
     </p>
     <h3>
      Test helpers
     </h3>
     <p>
      Devise includes some test helpers for functional specs. In order to use them, you need to include Devise in your functional tests by adding the following to the bottom of your
      <code>
       test/test_helper.rb
      </code>
      file:
     </p>
     <pre class="code ruby">
      <code class="ruby">
       <span class="kw">
        class
       </span>
       <span class="const">
        ActionController
       </span>
       <span class="op">
        ::
       </span>
       <span class="const">
        TestCase
       </span>
       <span class="id identifier rubyid_include">
        include
       </span>
       <span class="const">
        Devise
       </span>
       <span class="op">
        ::
       </span>
       <span class="const">
        TestHelpers
       </span>
       <span class="kw">
        end
       </span>
      </code>
     </pre>
     <p>
      If you're using RSpec, you can put the following inside a file named
      <code>
       spec/support/devise.rb
      </code>
      or in your
      <code>
       spec/spec_helper.rb
      </code>
      (or
      <code>
       spec/rails_helper.rb
      </code>
      if you are using rspec-rails):
     </p>
     <pre class="code ruby">
      <code class="ruby">
       <span class="const">
        RSpec
       </span>
       <span class="period">
        .
       </span>
       <span class="id identifier rubyid_configure">
        configure
       </span>
       <span class="kw">
        do
       </span>
       <span class="op">
        |
       </span>
       <span class="id identifier rubyid_config">
        config
       </span>
       <span class="op">
        |
       </span>
       <span class="id identifier rubyid_config">
        config
       </span>
       <span class="period">
        .
       </span>
       <span class="id identifier rubyid_include">
        include
       </span>
       <span class="const">
        Devise
       </span>
       <span class="op">
        ::
       </span>
       <span class="const">
        TestHelpers
       </span>
       <span class="comma">
        ,
       </span>
       <span class="label">
        type:
       </span>
       <span class="symbol">
        :controller
       </span>
       <span class="kw">
        end
       </span>
      </code>
     </pre>
     <p>
      Now you are ready to use the
      <code>
       sign_in
      </code>
      and
      <code>
       sign_out
      </code>
      methods. Such methods have the same signature as in controllers:
     </p>
     <pre class="code ruby">
      <code class="ruby">
       <span class="id identifier rubyid_sign_in">
        sign_in
       </span>
       <span class="symbol">
        :user
       </span>
       <span class="comma">
        ,
       </span>
       <span class="ivar">
        @user
       </span>
       <span class="comment">
        # sign_in(scope, resource)
       </span>
       <span class="id identifier rubyid_sign_in">
        sign_in
       </span>
       <span class="ivar">
        @user
       </span>
       <span class="comment">
        # sign_in(resource)
       </span>
       <span class="id identifier rubyid_sign_out">
        sign_out
       </span>
       <span class="symbol">
        :user
       </span>
       <span class="comment">
        # sign_out(scope)
       </span>
       <span class="id identifier rubyid_sign_out">
        sign_out
       </span>
       <span class="ivar">
        @user
       </span>
       <span class="comment">
        # sign_out(resource)
       </span>
      </code>
     </pre>
     <p>
      There are two things that are important to keep in mind:
     </p>
     <ol>
      <li>
       <p>
        These helpers are not going to work for integration tests driven by Capybara or Webrat. They are meant to be used with functional tests only. Instead, fill in the form or explicitly set the user in session;
       </p>
      </li>
      <li>
       <p>
        If you are testing Devise internal controllers or a controller that inherits from Devise's, you need to tell Devise which mapping should be used before a request. This is necessary because Devise gets this information from the router, but since functional tests do not pass through the router, it needs to be stated explicitly. For example, if you are testing the user scope, simply use:
       </p>
       <pre class="code ruby">
        <code class="ruby">
         <span class="ivar">
          @request
         </span>
         <span class="period">
          .
         </span>
         <span class="id identifier rubyid_env">
          env
         </span>
         <span class="lbracket">
          [
         </span>
         <span class="tstring">
          <span class="tstring_beg">
           "
          </span>
          <span class="tstring_content">
           devise.mapping
          </span>
          <span class="tstring_end">
           "
          </span>
         </span>
         <span class="rbracket">
          ]
         </span>
         <span class="op">
          =
         </span>
         <span class="const">
          Devise
         </span>
         <span class="period">
          .
         </span>
         <span class="id identifier rubyid_mappings">
          mappings
         </span>
         <span class="lbracket">
          [
         </span>
         <span class="symbol">
          :user
         </span>
         <span class="rbracket">
          ]
         </span>
         <span class="id identifier rubyid_get">
          get
         </span>
         <span class="symbol">
          :new
         </span>
        </code>
       </pre>
      </li>
     </ol>
     <h3>
      OmniAuth
     </h3>
     <p>
      Devise comes with OmniAuth support out of the box to authenticate with other providers. To use it, simply specify your OmniAuth configuration in
      <code>
       config/initializers/devise.rb
      </code>
      :
     </p>
     <pre class="code ruby">
      <code class="ruby">
       <span class="id identifier rubyid_config">
        config
       </span>
       <span class="period">
        .
       </span>
       <span class="id identifier rubyid_omniauth">
        omniauth
       </span>
       <span class="symbol">
        :github
       </span>
       <span class="comma">
        ,
       </span>
       <span class="tstring">
        <span class="tstring_beg">
         '
        </span>
        <span class="tstring_content">
         APP_ID
        </span>
        <span class="tstring_end">
         '
        </span>
       </span>
       <span class="comma">
        ,
       </span>
       <span class="tstring">
        <span class="tstring_beg">
         '
        </span>
        <span class="tstring_content">
         APP_SECRET
        </span>
        <span class="tstring_end">
         '
        </span>
       </span>
       <span class="comma">
        ,
       </span>
       <span class="label">
        scope:
       </span>
       <span class="tstring">
        <span class="tstring_beg">
         '
        </span>
        <span class="tstring_content">
         user,public_repo
        </span>
        <span class="tstring_end">
         '
        </span>
       </span>
      </code>
     </pre>
     <p>
      You can read more about OmniAuth support in the wiki:
     </p>
     <ul>
      <li>
       <a href="https://github.com/plataformatec/devise/wiki/OmniAuth:-Overview">
        https://github.com/plataformatec/devise/wiki/OmniAuth:-Overview
       </a>
      </li>
     </ul>
     <h3>
      Configuring multiple models
     </h3>
     <p>
      Devise allows you to set up as many Devise models as you want. If you want to have an Admin model with just authentication and timeout features, in addition to the User model above, just run:
     </p>
     <pre class="code ruby">
      <code class="ruby">
       <span class="comment">
        # Create a migration with the required fields
       </span>
       <span class="id identifier rubyid_create_table">
        create_table
       </span>
       <span class="symbol">
        :admins
       </span>
       <span class="kw">
        do
       </span>
       <span class="op">
        |
       </span>
       <span class="id identifier rubyid_t">
        t
       </span>
       <span class="op">
        |
       </span>
       <span class="id identifier rubyid_t">
        t
       </span>
       <span class="period">
        .
       </span>
       <span class="id identifier rubyid_string">
        string
       </span>
       <span class="symbol">
        :email
       </span>
       <span class="id identifier rubyid_t">
        t
       </span>
       <span class="period">
        .
       </span>
       <span class="id identifier rubyid_string">
        string
       </span>
       <span class="symbol">
        :encrypted_password
       </span>
       <span class="id identifier rubyid_t">
        t
       </span>
       <span class="period">
        .
       </span>
       <span class="id identifier rubyid_timestamps">
        timestamps
       </span>
       <span class="label">
        null:
       </span>
       <span class="kw">
        false
       </span>
       <span class="kw">
        end
       </span>
       <span class="comment">
        # Inside your Admin model
       </span>
       <span class="id identifier rubyid_devise">
        devise
       </span>
       <span class="symbol">
        :database_authenticatable
       </span>
       <span class="comma">
        ,
       </span>
       <span class="symbol">
        :timeoutable
       </span>
       <span class="comment">
        # Inside your routes
       </span>
       <span class="id identifier rubyid_devise_for">
        devise_for
       </span>
       <span class="symbol">
        :admins
       </span>
       <span class="comment">
        # Inside your protected controller
       </span>
       <span class="id identifier rubyid_before_filter">
        before_filter
       </span>
       <span class="symbol">
        :authenticate_admin!
       </span>
       <span class="comment">
        # Inside your controllers and views
       </span>
       <span class="id identifier rubyid_admin_signed_in?">
        admin_signed_in?
       </span>
       <span class="id identifier rubyid_current_admin">
        current_admin
       </span>
       <span class="id identifier rubyid_admin_session">
        admin_session
       </span>
      </code>
     </pre>
     <p>
      Alternatively, you can simply run the Devise generator.
     </p>
     <p>
      Keep in mind that those models will have completely different routes. They
      <strong>
       do not
      </strong>
      and
      <strong>
       cannot
      </strong>
      share the same controller for sign in, sign out and so on. In case you want to have different roles sharing the same actions, we recommend that you use a role-based approach, by either providing a role column or using a dedicated gem for authorization.
     </p>
     <h3>
      ActiveJob Integration
     </h3>
     <p>
      If you are using Rails 4.2 and ActiveJob to deliver ActionMailer messages in the
background through a queuing back-end, you can send Devise emails through your
existing queue by overriding the
      <code>
       send_devise_notification
      </code>
      method in your model.
     </p>
     <pre class="code ruby">
      <code class="ruby">
       <span class="kw">
        def
       </span>
       <span class="id identifier rubyid_send_devise_notification">
        send_devise_notification
       </span>
       <span class="lparen">
        (
       </span>
       <span class="id identifier rubyid_notification">
        notification
       </span>
       <span class="comma">
        ,
       </span>
       <span class="op">
        *
       </span>
       <span class="id identifier rubyid_args">
        args
       </span>
       <span class="rparen">
        )
       </span>
       <span class="id identifier rubyid_devise_mailer">
        devise_mailer
       </span>
       <span class="period">
        .
       </span>
       <span class="id identifier rubyid_send">
        send
       </span>
       <span class="lparen">
        (
       </span>
       <span class="id identifier rubyid_notification">
        notification
       </span>
       <span class="comma">
        ,
       </span>
       <span class="kw">
        self
       </span>
       <span class="comma">
        ,
       </span>
       <span class="op">
        *
       </span>
       <span class="id identifier rubyid_args">
        args
       </span>
       <span class="rparen">
        )
       </span>
       <span class="period">
        .
       </span>
       <span class="id identifier rubyid_deliver_later">
        deliver_later
       </span>
       <span class="kw">
        end
       </span>
      </code>
     </pre>
     <h3>
      Password reset tokens and Rails logs
     </h3>
     <p>
      If you enable the
      <a href="http://rubydoc.info/github/plataformatec/devise/master/Devise/Models/Recoverable">
       Recoverable
      </a>
      module, note that a stolen password reset token could give an attacker access to your application. Devise takes effort to generate random, secure tokens, and stores only token digests in the database, never plaintext. However the default logging behavior in Rails can cause plaintext tokens to leak into log files:
     </p>
     <ol>
      <li>
       Action Mailer logs the entire contents of all outgoing emails to the DEBUG level. Password reset tokens delivered to users in email will be leaked.
      </li>
      <li>
       Active Job logs all arguments to every enqueued job at the INFO level. If you configure Devise to use
       <code>
        deliver_later
       </code>
       to send password reset emails, password reset tokens will be leaked.
      </li>
     </ol>
     <p>
      Rails sets the production logger level to DEBUG by default. Consider changing your production logger level to WARN if you wish to prevent tokens from being leaked into your logs. In
      <code>
       config/environments/production.rb
      </code>
      :
     </p>
     <pre class="code ruby">
      <code class="ruby">
       <span class="id identifier rubyid_config">
        config
       </span>
       <span class="period">
        .
       </span>
       <span class="id identifier rubyid_log_level">
        log_level
       </span>
       <span class="op">
        =
       </span>
       <span class="symbol">
        :warn
       </span>
      </code>
     </pre>
     <h3>
      Other ORMs
     </h3>
     <p>
      Devise supports ActiveRecord (default) and Mongoid. To select another ORM, simply require it in the initializer file.
     </p>
     <h2>
      Additional information
     </h2>
     <h3>
      Heroku
     </h3>
     <p>
      Using Devise on Heroku with Ruby on Rails 3.2 requires setting:
     </p>
     <pre class="code ruby">
      <code class="ruby">
       <span class="id identifier rubyid_config">
        config
       </span>
       <span class="period">
        .
       </span>
       <span class="id identifier rubyid_assets">
        assets
       </span>
       <span class="period">
        .
       </span>
       <span class="id identifier rubyid_initialize_on_precompile">
        initialize_on_precompile
       </span>
       <span class="op">
        =
       </span>
       <span class="kw">
        false
       </span>
      </code>
     </pre>
     <p>
      Read more about the potential issues at
      <a href="http://guides.rubyonrails.org/asset_pipeline.html">
       http://guides.rubyonrails.org/asset_pipeline.html
      </a>
     </p>
     <h3>
      Warden
     </h3>
     <p>
      Devise is based on Warden, which is a general Rack authentication framework created by Daniel Neighman. We encourage you to read more about Warden here:
     </p>
     <p>
      <a href="https://github.com/hassox/warden">
       https://github.com/hassox/warden
      </a>
     </p>
     <h3>
      Contributors
     </h3>
     <p>
      We have a long list of valued contributors. Check them all at:
     </p>
     <p>
      <a href="https://github.com/plataformatec/devise/graphs/contributors">
       https://github.com/plataformatec/devise/graphs/contributors
      </a>
     </p>
     <h2>
      License
     </h2>
     <p>
      MIT License. Copyright 2009-2015 Plataformatec.
      <a href="http://plataformatec.com.br">
       http://plataformatec.com.br
      </a>
     </p>
     <p>
      You are not granted rights or licenses to the trademarks of Plataformatec, including without limitation the Devise name or logo.
     </p>
    </div>
   </div>
   <div id="footer">
    Generated on Sat Jun 20 12:54:02 2015 by
    <a href="http://yardoc.org" target="_parent" title="Yay! A Ruby Documentation Tool">
     yard
    </a>
    0.8.7.6 (ruby-2.1.4).
   </div>
   <script src="http://static.getclicky.com/js" type="text/javascript">
   </script>
   <script type="text/javascript">
    clicky.init(246206);
   </script>
   <noscript>
    <p>
     <img alt="Clicky" height="1" src="http://static.getclicky.com/246206ns.gif" width="1"/>
    </p>
   </noscript>
   <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-7172246-5', 'auto');
  ga('send', 'pageview');
   </script>
  </div>
 </body>
</html>