<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html lang="en" xml:lang="en" xmlns="http://www.w3.org/1999/xhtml">
 <head>
  <title>
   Grotto Calculator
  </title>
  <link href="dq9_grotto/dq9_grotto_screen.css" rel="stylesheet" type="text/css"/>
  <link href="dq9_grotto/dq9_grotto_print.css" media="print" rel="stylesheet" type="text/css"/>
  <style media="screen" type="text/css">
   .nonDisplay { display: none; }
  </style>
  <script src="dq9_grotto/dq9_grotto_combined.js" type="text/javascript">
  </script>
  <!--
  (c) 2010 - saintly@innocent.com, licensed under the GPL

  developers: use dq9_grotto_interface.js and dq9_grotto_db_objects.js instead of _combined.js

-->
  <script type="text/javascript">
   // &lt;![CDATA[

  var VERSION = '2.0', RELEASED = '24 August 2010', ui = {};
  function initialize () {
    ui = new dq9grottoUI({

      showDownloadIcon:   true, // change to false if you dont offer the zip file

      // display element IDs
      rankTableId:        'GrottoRankDisplay',
      terrainTableId:     'TerrainNames',
      slimeTableId:       'SlimeNames',
      bossTableId:        'BossNames',
      slimeReport:        [ 'SlimeReportScreen', 'SlimeReportPrint' ],
      monsterTableHeader: 'MonsterRankHeader',
      monsterTableData:   'MonsterRankData',
      chestTableData:     'ChestRankData',
      allDataEntry:       'AllDataEntry',
      downloadIcon:       'DownloadIcon',

      // element IDs for containers covering multiple display elements
      viewContainers: {
        grottoRanks:    'GrottoRanks',
        grottoContents: 'GrottoContents',
        searchResults:  'SearchResults',
        reportResults:  'ReportResults'
      },

      // database objects
      db: {
        grottoRanks: grottoRankSet.ALL,
        grottoNames: grottoNameSet.ALL,
        monsters:    grottoMonsterSet.ALL,
        chests:      chestRankSet.ALL,
        bosses:      bossTypeSet.ALL
      },

      // operating modes + initialization params
      modes: [
        {
          name: 'Predict', labelId: 'LabelPredict', entryId: 'EntryPredict', view: 'grottoRanks',
          managerData: {
            levelSelectId:      'HeroLevel',
            reVocateSelectId:   'HeroReVocate',
            infoId:             'HeroInfo',
            lastGrottoLevelSelectId: 'HeroLastGrotto'
          }
        },
        {
          name: 'Analyze', labelId: 'LabelAnalyze', entryId: 'EntryAnalyze', view: 'grottoRanks',
          managerData: {
            prefixSelectId:     'GrottoPrefix',
            terrainSelectId:    'GrottoTerrain',
            bossSelectId:       'GrottoBoss',
            levelSelectId:      'GrottoLevel',
            includePredictId:   'GrottoIncludePredict',
            qualityInfoId:      'GrottoQualityInfo',
            infoId:             'GrottoInfo'
          }
        },
        {
          name: 'Itemize', labelId: 'LabelItemize', entryId: 'EntryItemize', view: 'grottoContents',
          managerData: {
            monstRankId:        'ItemizeMonstRank',
            floorCountId:       'ItemizeFloors',
            terrainTypeId:      'ItemizeTerrain',
            bossTypeId:         'ItemizeBoss',
            levelId:            'ItemizeLevel',
            bossListId:         'ItemizeBossList',
            infoId:             'ItemizeInfo'
          }
        },
        {
          name: 'Search',  labelId: 'LabelSearch',  entryId: 'EntrySearch',  view: 'searchResults',
          managerData: {
            searchBoxId:        'SearchText',
            monsterResultsId:   'SearchResultsMonsters',
            itemResultsId:      'SearchResultsItems',
            infoId:             'SearchInfo'
          }
        },
        {
          name: 'Report',  labelId: 'LabelReport',  entryId: 'EntryReport',  view: 'reportResults',
          managerData: {
            prefixSelectId:     'ReportGrottoPrefix',
            terrainSelectId:    'ReportGrottoTerrainLabel',
            bossSelectId:       'ReportGrottoBossSuffix',
            levelSelectId:      'ReportGrottoLevel',
            monstRankId:        'ReportMonstRank',
            floorCountId:       'ReportFloors',
            terrainTypeId:      'ReportTerrain',
            bossTypeId:         'ReportBossType',
            reportTitleId:      'ReportTitle',
            reportDataId:       'ReportData',
            infoId:             'ReportInfo'
          }
        }
      ]
    });

    ui.startWatcher( 200 ); // watch page URL for changes
    if( !ui.activeLabel ) ui.setActiveLabel('Predict');
  }

  // called when user clicks on a tab (active or inactive)
  function setActiveLabel  ( activeLabel ) { ui.setActiveLabel( activeLabel ); }

  // called by onchange event on select boxes
  function updateHero ()    { ui.updateDisplay('Predict'); }
  function updateName ()    { ui.updateDisplay('Analyze'); }
  function updateItemize () { ui.updateDisplay('Itemize'); }
  function updateSearch ()  { ui.updateDisplay('Search'); }
  function updateReport ()  { ui.updateDisplay('Report'); }

  function exportReport ()  { ui.exportReport(); }

  function download () {
    if( confirm('Download this app to your computer?') ) {
      window.open('dq9_grotto/dq9_grotto_' + VERSION + '.zip', 'DQ9_GROTTO_DL');
    }
  }

  function help () {
    alert(
      "HELP:\n\n" +
      "This application is intended to help you play Dragon Quest IX: Sentinels of the Starry Skies.\n\n" +
      "Specifically, it calculates and displays various properties of the grotto maps ('treasure maps') you " +
      "find within the game.\n\n" +
      "Click the tabs at the top to switch between various modes.  Use the other icons to print or save this " +
      "app to your computer.  It saves as a web page you can load into your browser later, and works fine " +
      "even if you're not connected to the internet.\n\n" +
      "In most cases, if you bookmark the page, it will also bookmark all the data you have entered.\n" +
      "The browser back/forward buttons will also act as an undo/redo feature.\n\n" +
      "(These features work in IE 8 and Firefox 3, possibly other browsers)\n\n" +
      ui.contextHelp()
    );
  }

  function about () {
    alert(
      "This is DQ9 Grotto Calculator v" + VERSION + ", released " + RELEASED + "\n\n" +
      "Latest version hosted at the following sites:\n" +
      "  http://plumeria.vmth.ucdavis.edu/~saintly/gaming/dq9_grotto.html \n" +
      "  http://www.woodus.com/den/games/dq9ds/dq9_grotto.html \n\n" +
      "This application is based on grotto formulas and analysis discovered by Terence (from the GameFaqs DQ9 Message Board).\n\n" +
      "It also incorporates grotto name formulas by joek0 (also from the DQ9 message board), and grotto monster information from " +
      "Zaraf's DQ9 Bestiary FAQ.\n\n" +
      "The following users also contributed interface suggestions/bugfixes:\n" +
      "- joek0, CaptainStemol, pikawss, ZeroNineTwo, Boozler\n\n" +
      "Zaraf's DQ9 Bestiary FAQ:\nhttp://www.gamefaqs.com/ds/937281-dragon-quest-ix-sentinels-of-the-starry-skies/faqs/60450 \n\n" +
      "DQ9 Message Board:\nhttp://www.gamefaqs.com/boards/937281-dragon-quest-ix-sentinels-of-the-starry-skies \n\n" +
      "Icons created by Mark James:\nhttp://www.famfamfam.com/lab/icons/silk/ \n\n" +
      "This application created by saintly (saintly@innocent.com)\n\n" +
	  "This application is available under the GNU General Public License.  You are free to " +
	  "copy it, modify it and redistribute it under the terms of that license.\n\n" +
	  "To see a copy of the license, go to http://www.gnu.org/ \n\n" +
	  "Although reasonable attempts have been made to verify the accuracy of the program's " +
	  "performance &amp; data, it's possible that there still may be inconsistencies, bugs or " +
      "inaccurate data.  You can let the author know about them and he'll try to fix them."
    );
  }

// ]]&gt; // end CDATA
  </script>
 </head>
 <body onload="initialize()">
  <div class="ParameterEntry" id="AllDataEntry">
   <div class="EntryTypeContainer nonPrinting" id="EntryContainerTabbed">
    <span class="EntryTypeLabel InactiveLabel" id="LabelPredict" onclick='setActiveLabel("Predict");'>
     Predict Next Grotto
    </span>
    <span class="EntryTypeLabel InactiveLabel" id="LabelAnalyze" onclick='setActiveLabel("Analyze");'>
     Analyze Grotto Name
    </span>
    <span class="EntryTypeLabel InactiveLabel" id="LabelItemize" onclick='setActiveLabel("Itemize");'>
     Monsters &amp; Items
    </span>
    <span class="EntryTypeLabel InactiveLabel" id="LabelSearch" onclick='setActiveLabel("Search");'>
     Search
    </span>
    <span class="EntryTypeLabel InactiveLabel" id="LabelReport" onclick='setActiveLabel("Report");'>
     Report
    </span>
    <span style="float: right; padding-right: 10px;">
     <img alt="Help" height="16" onclick="help();" src="dq9_grotto/help.png" style="border: none;" width="16"/>
     <img alt="Help" height="16" onclick="window.print();" src="dq9_grotto/printer.png" style="border: none;" width="16"/>
     <img alt="About this app" height="16" onclick="about();" src="dq9_grotto/information.png" style="border: none;" width="16"/>
     <img alt="Click to Download" height="16" id="DownloadIcon" onclick="download();" src="dq9_grotto/disk.png" style="border: none;" width="16"/>
    </span>
   </div>
   <div class="EntryData">
    <form action="">
     <div id="EntryPredict" style="display: none">
      <span>
       Hero's max level:
       <select id="HeroLevel" onchange="updateHero();">
        <option value="">
         Loading...
        </option>
       </select>
      </span>
      <span>
       Hero's max ReVocation:
       <select id="HeroReVocate" onchange="updateHero();">
        <option value="">
         Loading...
        </option>
       </select>
      </span>
      <span>
       Level of last dungeon:
       <select id="HeroLastGrotto" onchange="updateHero();">
        <option value="">
         Loading...
        </option>
       </select>
      </span>
      <span class="nonDisplay">
       <br/>
       <br/>
      </span>
      <span class="shortInfoDisplay">
       Predicted quality:
       <span class="SelectInfo" id="HeroInfo">
        ...
       </span>
      </span>
     </div>
     <div id="EntryAnalyze" style="display: none">
      <span>
       Grotto Name:
       <select id="GrottoPrefix" onchange="updateName();">
        <option>
         ...
        </option>
       </select>
       <select id="GrottoTerrain" onchange="updateName();">
        <option>
         ...
        </option>
       </select>
       of
       <select id="GrottoBoss" onchange="updateName();">
        <option>
         ...
        </option>
       </select>
       Lv.
       <select id="GrottoLevel" onchange="updateName();">
        <option>
         ...
        </option>
       </select>
       <label class="nonPrinting">
        <input id="GrottoIncludePredict" onchange="updateName();" type="checkbox"/>
        <acronym title='Merge possible results with the grotto quality prediction from the "Predict Next Grotto" tab'>
         Include Prediction
        </acronym>
       </label>
      </span>
      <span class="nonDisplay">
       <br/>
       <br/>
       <span id="GrottoQualityInfo">
       </span>
      </span>
      <span class="shortInfoDisplay">
       Name Info:
       <span class="SelectInfo" id="GrottoInfo">
        ...
       </span>
      </span>
     </div>
     <div id="EntryItemize" style="display: none">
      <span>
       Starting Monster Rank:
       <select id="ItemizeMonstRank" onchange="updateItemize();">
        <option>
         ...
        </option>
       </select>
       Non-boss floors:
       <select id="ItemizeFloors" onchange="updateItemize();">
        <option>
         ...
        </option>
       </select>
       Boss:
       <select id="ItemizeBoss" onchange="updateItemize();">
        <option>
         ...
        </option>
       </select>
       Level:
       <select id="ItemizeLevel" onchange="updateItemize();">
        <option>
         ...
        </option>
       </select>
      </span>
      <span class="nonDisplay">
       <br/>
       <br/>
      </span>
      <span class="shortInfoDisplay">
       Auto:
       <span class="SelectInfo" id="ItemizeInfo">
        ...
       </span>
      </span>
     </div>
     <div id="EntrySearch" style="display: none">
      <span>
       Type something:
       <input id="SearchText" onchange="updateSearch();" onkeyup="updateSearch();" size="40" type="text"/>
      </span>
      <span class="nonDisplay">
       <br/>
       <br/>
      </span>
      <span class="shortInfoDisplay">
       Found:
       <span class="SelectInfo" id="SearchInfo">
        ...
       </span>
      </span>
     </div>
     <div id="EntryReport" style="display: none">
      <div>
       Grotto Name:
       <select id="ReportGrottoPrefix" onchange="updateReport();">
        <option>
         ...
        </option>
       </select>
       <select id="ReportGrottoTerrainLabel" onchange="updateReport();">
        <option>
         ...
        </option>
       </select>
       of
       <select id="ReportGrottoBossSuffix" onchange="updateReport();">
        <option>
         ...
        </option>
       </select>
       Lv.
       <select id="ReportGrottoLevel" onchange="updateReport();">
        <option>
         ...
        </option>
       </select>
      </div>
      <br/>
      <div>
       Starting Monster Rank:
       <select id="ReportMonstRank" onchange="updateReport();">
        <option>
         ...
        </option>
       </select>
       Non-boss floors:
       <select id="ReportFloors" onchange="updateReport();">
        <option>
         ...
        </option>
       </select>
       Terrain:
       <select id="ReportTerrain" onchange="updateReport();">
        <option>
         ...
        </option>
       </select>
       Boss:
       <select id="ReportBossType" onchange="updateReport();">
        <option>
         ...
        </option>
       </select>
      </div>
     </div>
    </form>
   </div>
  </div>
  <div class="RankDisplay" id="GrottoRanks" style="display: none;">
   <!-- layout table -->
   <table border="0">
    <tr>
     <td style="width: 25%">
      <table border="1">
       <thead>
        <tr>
         <th>
          Rank
         </th>
         <th>
          Level
         </th>
         <th>
          Starting
          <br/>
          Monsters
         </th>
         <th>
          Bosses
         </th>
         <th>
          #Floors
         </th>
         <th>
          Quality
         </th>
         <th>
          Chance
         </th>
        </tr>
       </thead>
       <tbody id="GrottoRankDisplay">
        <tr>
         <td colspan="6">
          Loading...
         </td>
        </tr>
       </tbody>
      </table>
     </td>
     <td style="vertical-align: top;">
      <table border="1" style="width: 100%">
       <thead>
        <tr>
         <th>
          Terrain
         </th>
         <th>
          Chance
         </th>
        </tr>
       </thead>
       <tbody id="TerrainNames">
        <tr>
         <td>
          Loading...
         </td>
        </tr>
       </tbody>
      </table>
      <br/>
      <table border="1" style="width: 100%">
       <thead>
        <tr>
         <th>
          Slimes
         </th>
        </tr>
       </thead>
       <tbody id="SlimeNames">
        <tr>
         <td>
          Loading...
         </td>
        </tr>
       </tbody>
      </table>
     </td>
     <td>
      <table border="1">
       <thead>
        <tr>
         <th>
          Bosses
         </th>
        </tr>
       </thead>
       <tbody id="BossNames">
        <tr>
         <td>
          Loading...
         </td>
        </tr>
       </tbody>
      </table>
     </td>
     <td class="nonPrinting" rowspan="2" style="width: 100%;">
      <div id="SlimeReportScreen" style="width: 100%;">
      </div>
     </td>
    </tr>
    <tr>
     <td class="RankExplanation nonPrinting" colspan="3">
      Greyed-out rows are the ones that will be unavailable to you with that combination.
     </td>
    </tr>
   </table>
   <br/>
   <div class="nonDisplay" id="SlimeReportPrint">
   </div>
  </div>
  <div class="RankDisplay" id="GrottoContents" style="display: none;">
   <div style="font-size: x-small;">
    <br/>
    <br/>
   </div>
   <div id="MonsterRankHeader" style="width: 100%;">
   </div>
   <table border="1" style="border-top: none; width: 100%;">
    <thead>
     <tr style="border-top: none;">
      <th style="border: none;">
       Rank
      </th>
      <th style="border: none;">
       Monsters
      </th>
      <th style="border: none;">
       Floors
      </th>
     </tr>
    </thead>
    <tbody id="MonsterRankData">
     <tr>
      <td colspan="3">
       Loading...
      </td>
     </tr>
    </tbody>
    <tbody>
     <tr>
      <th>
       BOSS
      </th>
      <td id="ItemizeBossList">
      </td>
      <th>
       BOSS
      </th>
     </tr>
    </tbody>
   </table>
   <br/>
   <table border="1" style="width: 100%;">
    <thead>
     <tr>
      <th>
       Chest Items
      </th>
      <th>
       Floors
      </th>
     </tr>
    </thead>
    <tbody id="ChestRankData">
     <tr>
      <td colspan="3">
       Loading...
      </td>
     </tr>
    </tbody>
   </table>
  </div>
  <div class="RankDisplay" id="SearchResults" style="display: none;">
   <div style="font-size: x-large; font-weight: bold;">
    Search Results:
   </div>
   <br/>
   <table border="0">
    <tbody>
     <tr>
      <td id="SearchResultsMonsters">
      </td>
      <td id="SearchResultsItems">
      </td>
     </tr>
    </tbody>
   </table>
  </div>
  <div class="RankDisplay" id="ReportResults" style="display: none;">
   <div style="font-size: large; font-weight: bold;">
    Grotto Report:
    <span id="ReportTitle">
    </span>
    <span class="shortInfoDisplay" style="padding-right: 10px;">
     <img alt="Help" height="16" onclick="exportReport();" src="dq9_grotto/database_save.png" style="border: none;" width="16"/>
    </span>
   </div>
   <div id="ReportInfo">
   </div>
   <br/>
   <div id="ReportData">
    Search Results:
   </div>
  </div>
 </body>
</html>