<!DOCTYPE html>
<html class="no-js" lang="en-US">
 <head>
  <meta charset="utf-8"/>
  <meta content="width=device-width" name="viewport"/>
  <link href="http://gmpg.org/xfn/11" rel="profile"/>
  <link href="http://mikehillyer.com/wordpress/xmlrpc.php" rel="pingback"/>
  <!--[if lt IE 9]&gt;
	&lt;script src="http://mikehillyer.com/wordpress/wp-content/themes/twentyfifteen/js/html5.js"&gt;&lt;/script&gt;
	&lt;![endif]-->
  <script>
   (function(html){html.className = html.className.replace(/\bno-js\b/,'js')})(document.documentElement);&lt;/script&gt;
&lt;title&gt;Managing Hierarchical Data in MySQL | Mike Hillyer&#039;s Personal Webspace&lt;/title&gt;
&lt;link rel="alternate" type="application/rss+xml" title="Mike Hillyer&#039;s Personal Webspace &raquo; Feed" href="http://mikehillyer.com/feed/" /&gt;
&lt;link rel="alternate" type="application/rss+xml" title="Mike Hillyer&#039;s Personal Webspace &raquo; Comments Feed" href="http://mikehillyer.com/comments/feed/" /&gt;
&lt;link rel="alternate" type="application/rss+xml" title="Mike Hillyer&#039;s Personal Webspace &raquo; Managing Hierarchical Data in MySQL Comments Feed" href="http://mikehillyer.com/articles/managing-hierarchical-data-in-mysql/feed/" /&gt;
		&lt;script type="text/javascript"&gt;
			window._wpemojiSettings = {"baseUrl":"http:\/\/s.w.org\/images\/core\/emoji\/72x72\/","ext":".png","source":{"concatemoji":"http:\/\/mikehillyer.com\/wordpress\/wp-includes\/js\/wp-emoji-release.min.js?ver=4.2.2"}};
			!function(a,b,c){function d(a){var c=b.createElement("canvas"),d=c.getContext&amp;&amp;c.getContext("2d");return d&amp;&amp;d.fillText?(d.textBaseline="top",d.font="600 32px Arial","flag"===a?(d.fillText(String.fromCharCode(55356,56812,55356,56807),0,0),c.toDataURL().length&gt;3e3):(d.fillText(String.fromCharCode(55357,56835),0,0),0!==d.getImageData(16,16,1,1).data[0])):!1}function e(a){var c=b.createElement("script");c.src=a,c.type="text/javascript",b.getElementsByTagName("head")[0].appendChild(c)}var f,g;c.supports={simple:d("simple"),flag:d("flag")},c.DOMReady=!1,c.readyCallback=function(){c.DOMReady=!0},c.supports.simple&amp;&amp;c.supports.flag||(g=function(){c.readyCallback()},b.addEventListener?(b.addEventListener("DOMContentLoaded",g,!1),a.addEventListener("load",g,!1)):(a.attachEvent("onload",g),b.attachEvent("onreadystatechange",function(){"complete"===b.readyState&amp;&amp;c.readyCallback()})),f=c.source||{},f.concatemoji?e(f.concatemoji):f.wpemoji&amp;&amp;f.twemoji&amp;&amp;(e(f.twemoji),e(f.wpemoji)))}(window,document,window._wpemojiSettings);
  </script>
  <style type="text/css">
   img.wp-smiley,
img.emoji {
	display: inline !important;
	border: none !important;
	box-shadow: none !important;
	height: 1em !important;
	width: 1em !important;
	margin: 0 .07em !important;
	vertical-align: -0.1em !important;
	background: none !important;
	padding: 0 !important;
}
  </style>
  <link href="http://mikehillyer.com/wordpress/wp-content/plugins/wp-syntax/css/wp-syntax.css?ver=1.0" id="wp-syntax-css-css" media="all" rel="stylesheet" type="text/css"/>
  <link href="//fonts.googleapis.com/css?family=Noto+Sans%3A400italic%2C700italic%2C400%2C700%7CNoto+Serif%3A400italic%2C700italic%2C400%2C700%7CInconsolata%3A400%2C700&amp;subset=latin%2Clatin-ext" id="twentyfifteen-fonts-css" media="all" rel="stylesheet" type="text/css"/>
  <link href="http://mikehillyer.com/wordpress/wp-content/themes/twentyfifteen/genericons/genericons.css?ver=3.2" id="genericons-css" media="all" rel="stylesheet" type="text/css"/>
  <link href="http://mikehillyer.com/wordpress/wp-content/themes/twentyfifteen/style.css?ver=4.2.2" id="twentyfifteen-style-css" media="all" rel="stylesheet" type="text/css"/>
  <!--[if lt IE 9]&gt;
&lt;link rel='stylesheet' id='twentyfifteen-ie-css'  href='http://mikehillyer.com/wordpress/wp-content/themes/twentyfifteen/css/ie.css?ver=20141010' type='text/css' media='all' /&gt;
&lt;![endif]-->
  <!--[if lt IE 8]&gt;
&lt;link rel='stylesheet' id='twentyfifteen-ie7-css'  href='http://mikehillyer.com/wordpress/wp-content/themes/twentyfifteen/css/ie7.css?ver=20141010' type='text/css' media='all' /&gt;
&lt;![endif]-->
  <script src="http://mikehillyer.com/wordpress/wp-includes/js/jquery/jquery.js?ver=1.11.2" type="text/javascript">
  </script>
  <script src="http://mikehillyer.com/wordpress/wp-includes/js/jquery/jquery-migrate.min.js?ver=1.2.1" type="text/javascript">
  </script>
  <link href="http://mikehillyer.com/wordpress/xmlrpc.php?rsd" rel="EditURI" title="RSD" type="application/rsd+xml"/>
  <link href="http://mikehillyer.com/wordpress/wp-includes/wlwmanifest.xml" rel="wlwmanifest" type="application/wlwmanifest+xml"/>
  <meta content="WordPress 4.2.2" name="generator"/>
  <link href="http://mikehillyer.com/articles/managing-hierarchical-data-in-mysql/" rel="canonical"/>
  <link href="http://mikehillyer.com/?p=72" rel="shortlink"/>
 </head>
 <body class="page page-id-72 page-child parent-pageid-67 page-template-default">
  <div class="hfeed site" id="page">
   <a class="skip-link screen-reader-text" href="#content">
    Skip to content
   </a>
   <div class="sidebar" id="sidebar">
    <header class="site-header" id="masthead" role="banner">
     <div class="site-branding">
      <p class="site-title">
       <a href="http://mikehillyer.com/" rel="home">
        Mike Hillyer's Personal Webspace
       </a>
      </p>
      <button class="secondary-toggle">
       Menu and widgets
      </button>
     </div>
     <!-- .site-branding -->
    </header>
    <!-- .site-header -->
    <div class="secondary" id="secondary">
     <div class="widget-area" id="widget-area" role="complementary">
      <aside class="widget widget_text" id="text-3">
       <h2 class="widget-title">
        Monetization!
       </h2>
       <div class="textwidget">
        <script async="" src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js">
        </script>
        <!-- RespSide -->
        <ins class="adsbygoogle" data-ad-client="ca-pub-2660766695269970" data-ad-format="auto" data-ad-slot="7032382676" style="display:block">
        </ins>
        <script>
         (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
       </div>
      </aside>
      <aside class="widget widget_pages" id="pages-3">
       <h2 class="widget-title">
        Pages!
       </h2>
       <ul>
        <li class="page_item page-item-2">
         <a href="http://mikehillyer.com/about-me/">
          About Me
         </a>
        </li>
        <li class="page_item page-item-67 page_item_has_children current_page_ancestor current_page_parent">
         <a href="http://mikehillyer.com/articles/">
          Articles
         </a>
         <ul class="children">
          <li class="page_item page-item-69">
           <a href="http://mikehillyer.com/articles/an-introduction-to-database-normalization/">
            An Introduction to Database Normalization
           </a>
          </li>
          <li class="page_item page-item-72 current_page_item">
           <a href="http://mikehillyer.com/articles/managing-hierarchical-data-in-mysql/">
            Managing Hierarchical Data in MySQL
           </a>
          </li>
          <li class="page_item page-item-96">
           <a href="http://mikehillyer.com/articles/the-vb-net-mysql-tutorial-part-1/">
            The VB.NET-MySQL Tutorial  Part 1
           </a>
          </li>
         </ul>
        </li>
       </ul>
      </aside>
      <aside class="widget widget_recent_entries" id="recent-posts-5">
       <h2 class="widget-title">
        Posts!
       </h2>
       <ul>
        <li>
         <a href="http://mikehillyer.com/sales-engineer/dig-a-little-deeper/">
          Dig a Little Deeper!
         </a>
        </li>
        <li>
         <a href="http://mikehillyer.com/message-systems/pictures-from-life-as-a-sales-engineer/">
          Pictures from Life as a Sales Engineer
         </a>
        </li>
       </ul>
      </aside>
      <aside class="widget widget_tag_cloud" id="tag_cloud-4">
       <h2 class="widget-title">
        Tags!
       </h2>
       <div class="tagcloud">
        <a class="tag-link-49" href="http://mikehillyer.com/tag/430n/" style="font-size: 8pt;" title="1 topic">
         430n
        </a>
        <a class="tag-link-53" href="http://mikehillyer.com/tag/a2dp/" style="font-size: 8pt;" title="1 topic">
         A2DP
        </a>
        <a class="tag-link-10" href="http://mikehillyer.com/tag/apache/" style="font-size: 8pt;" title="1 topic">
         Apache
        </a>
        <a class="tag-link-54" href="http://mikehillyer.com/tag/bluetooth-audio/" style="font-size: 8pt;" title="1 topic">
         Bluetooth Audio
        </a>
        <a class="tag-link-37" href="http://mikehillyer.com/tag/business-travel/" style="font-size: 8pt;" title="1 topic">
         Business Travel
        </a>
        <a class="tag-link-35" href="http://mikehillyer.com/tag/careers/" style="font-size: 8pt;" title="1 topic">
         careers
        </a>
        <a class="tag-link-45" href="http://mikehillyer.com/tag/chrysler/" style="font-size: 8pt;" title="1 topic">
         Chrysler
        </a>
        <a class="tag-link-5" href="http://mikehillyer.com/tag/cinematic-titanic/" style="font-size: 8pt;" title="1 topic">
         Cinematic Titanic
        </a>
        <a class="tag-link-7" href="http://mikehillyer.com/tag/comedy/" style="font-size: 8pt;" title="1 topic">
         Comedy
        </a>
        <a class="tag-link-14" href="http://mikehillyer.com/tag/deliverability/" style="font-size: 20.218181818182pt;" title="5 topics">
         Deliverability
        </a>
        <a class="tag-link-20" href="http://mikehillyer.com/tag/dilbert/" style="font-size: 8pt;" title="1 topic">
         Dilbert
        </a>
        <a class="tag-link-47" href="http://mikehillyer.com/tag/dodge/" style="font-size: 8pt;" title="1 topic">
         Dodge
        </a>
        <a class="tag-link-6" href="http://mikehillyer.com/tag/east-meets-watts/" style="font-size: 8pt;" title="1 topic">
         East Meets Watts
        </a>
        <a class="tag-link-40" href="http://mikehillyer.com/tag/ed-catmull/" style="font-size: 15.636363636364pt;" title="3 topics">
         Ed Catmull
        </a>
        <a class="tag-link-15" href="http://mikehillyer.com/tag/email/" style="font-size: 22pt;" title="6 topics">
         Email
        </a>
        <a class="tag-link-34" href="http://mikehillyer.com/tag/hiring/" style="font-size: 12.581818181818pt;" title="2 topics">
         hiring
        </a>
        <a class="tag-link-31" href="http://mikehillyer.com/tag/infrastructure/" style="font-size: 12.581818181818pt;" title="2 topics">
         infrastructure
        </a>
        <a class="tag-link-52" href="http://mikehillyer.com/tag/ios-5/" style="font-size: 8pt;" title="1 topic">
         iOS 5
        </a>
        <a class="tag-link-50" href="http://mikehillyer.com/tag/iphone/" style="font-size: 8pt;" title="1 topic">
         iPhone
        </a>
        <a class="tag-link-51" href="http://mikehillyer.com/tag/iphone-4/" style="font-size: 8pt;" title="1 topic">
         iPhone 4
        </a>
        <a class="tag-link-36" href="http://mikehillyer.com/tag/ip-warmup/" style="font-size: 8pt;" title="1 topic">
         IP Warmup
        </a>
        <a class="tag-link-42" href="http://mikehillyer.com/tag/leadership/" style="font-size: 8pt;" title="1 topic">
         Leadership
        </a>
        <a class="tag-link-11" href="http://mikehillyer.com/tag/linux/" style="font-size: 8pt;" title="1 topic">
         Linux
        </a>
        <a class="tag-link-16" href="http://mikehillyer.com/tag/mailchimp/" style="font-size: 8pt;" title="1 topic">
         MailChimp
        </a>
        <a class="tag-link-38" href="http://mikehillyer.com/tag/management/" style="font-size: 12.581818181818pt;" title="2 topics">
         Management
        </a>
        <a class="tag-link-25" href="http://mikehillyer.com/tag/merge/" style="font-size: 8pt;" title="1 topic">
         Merge
        </a>
        <a class="tag-link-13" href="http://mikehillyer.com/tag/message-systems/" style="font-size: 18.181818181818pt;" title="4 topics">
         Message Systems
        </a>
        <a class="tag-link-30" href="http://mikehillyer.com/tag/monitoring/" style="font-size: 8pt;" title="1 topic">
         monitoring
        </a>
        <a class="tag-link-28" href="http://mikehillyer.com/tag/mta/" style="font-size: 12.581818181818pt;" title="2 topics">
         MTA
        </a>
        <a class="tag-link-9" href="http://mikehillyer.com/tag/mysql/" style="font-size: 8pt;" title="1 topic">
         MySQL
        </a>
        <a class="tag-link-55" href="http://mikehillyer.com/tag/phines-ferb/" style="font-size: 8pt;" title="1 topic">
         Phines &amp; Ferb
        </a>
        <a class="tag-link-33" href="http://mikehillyer.com/tag/phishing/" style="font-size: 8pt;" title="1 topic">
         Phishing
        </a>
        <a class="tag-link-8" href="http://mikehillyer.com/tag/php/" style="font-size: 12.581818181818pt;" title="2 topics">
         PHP
        </a>
        <a class="tag-link-39" href="http://mikehillyer.com/tag/pixar/" style="font-size: 12.581818181818pt;" title="2 topics">
         Pixar
        </a>
        <a class="tag-link-29" href="http://mikehillyer.com/tag/reputation/" style="font-size: 12.581818181818pt;" title="2 topics">
         Reputation
        </a>
        <a class="tag-link-48" href="http://mikehillyer.com/tag/rhb/" style="font-size: 8pt;" title="1 topic">
         RHB
        </a>
        <a class="tag-link-21" href="http://mikehillyer.com/tag/sales-engineer/" style="font-size: 15.636363636364pt;" title="3 topics">
         Sales Engineer
        </a>
        <a class="tag-link-32" href="http://mikehillyer.com/tag/security/" style="font-size: 8pt;" title="1 topic">
         Security
        </a>
        <a class="tag-link-12" href="http://mikehillyer.com/tag/selinux/" style="font-size: 8pt;" title="1 topic">
         SELinux
        </a>
        <a class="tag-link-26" href="http://mikehillyer.com/tag/spam/" style="font-size: 8pt;" title="1 topic">
         Spam
        </a>
        <a class="tag-link-24" href="http://mikehillyer.com/tag/telephone/" style="font-size: 8pt;" title="1 topic">
         telephone
        </a>
        <a class="tag-link-41" href="http://mikehillyer.com/tag/the-pixar-way/" style="font-size: 8pt;" title="1 topic">
         The Pixar Way
        </a>
        <a class="tag-link-46" href="http://mikehillyer.com/tag/town-country/" style="font-size: 8pt;" title="1 topic">
         Town &amp; Country
        </a>
        <a class="tag-link-27" href="http://mikehillyer.com/tag/traffic-shaping/" style="font-size: 12.581818181818pt;" title="2 topics">
         traffic shaping
        </a>
        <a class="tag-link-23" href="http://mikehillyer.com/tag/twilio/" style="font-size: 8pt;" title="1 topic">
         twilio
        </a>
       </div>
      </aside>
      <aside class="widget widget_categories" id="categories-4">
       <h2 class="widget-title">
        Categories!
       </h2>
       <ul>
        <li class="cat-item cat-item-10">
         <a href="http://mikehillyer.com/category/apache/">
          Apache
         </a>
        </li>
        <li class="cat-item cat-item-44">
         <a href="http://mikehillyer.com/category/tips/automotive/">
          Automotive
         </a>
        </li>
        <li class="cat-item cat-item-17">
         <a href="http://mikehillyer.com/category/reviews/books/">
          Books
         </a>
        </li>
        <li class="cat-item cat-item-14">
         <a href="http://mikehillyer.com/category/deliverability/">
          Deliverability
         </a>
        </li>
        <li class="cat-item cat-item-15">
         <a href="http://mikehillyer.com/category/email/">
          Email
         </a>
        </li>
        <li class="cat-item cat-item-19">
         <a href="http://mikehillyer.com/category/funny/">
          Funny
         </a>
        </li>
        <li class="cat-item cat-item-57">
         <a href="http://mikehillyer.com/category/gaming/">
          Gaming
         </a>
        </li>
        <li class="cat-item cat-item-56">
         <a href="http://mikehillyer.com/category/ideas/">
          Ideas
         </a>
        </li>
        <li class="cat-item cat-item-11">
         <a href="http://mikehillyer.com/category/linux/">
          Linux
         </a>
        </li>
        <li class="cat-item cat-item-38">
         <a href="http://mikehillyer.com/category/management/">
          Management
         </a>
        </li>
        <li class="cat-item cat-item-13">
         <a href="http://mikehillyer.com/category/message-systems/">
          Message Systems
         </a>
        </li>
        <li class="cat-item cat-item-4">
         <a href="http://mikehillyer.com/category/reviews/movies/">
          Movies
         </a>
        </li>
        <li class="cat-item cat-item-9">
         <a href="http://mikehillyer.com/category/mysql/">
          MySQL
         </a>
        </li>
        <li class="cat-item cat-item-8">
         <a href="http://mikehillyer.com/category/php/">
          PHP
         </a>
        </li>
        <li class="cat-item cat-item-3">
         <a href="http://mikehillyer.com/category/reviews/">
          Reviews
         </a>
        </li>
        <li class="cat-item cat-item-21">
         <a href="http://mikehillyer.com/category/sales-engineer/">
          Sales Engineer
         </a>
        </li>
        <li class="cat-item cat-item-32">
         <a href="http://mikehillyer.com/category/security/">
          Security
         </a>
        </li>
        <li class="cat-item cat-item-43">
         <a href="http://mikehillyer.com/category/tips/">
          Tips
         </a>
        </li>
       </ul>
      </aside>
     </div>
     <!-- .widget-area -->
    </div>
    <!-- .secondary -->
   </div>
   <!-- .sidebar -->
   <div class="site-content" id="content">
    <div class="content-area" id="primary">
     <main class="site-main" id="main" role="main">
      <article class="post-72 page type-page status-publish hentry" id="post-72">
       <header class="entry-header">
        <h1 class="entry-title">
         Managing Hierarchical Data in MySQL
        </h1>
       </header>
       <!-- .entry-header -->
       <div class="entry-content">
        <h3>
         Introduction
        </h3>
        <p>
         Most users at one time or another have dealt with hierarchical data in a SQL database and no doubt learned that the management of hierarchical data is not what a relational database is intended for. The tables of a relational database are not hierarchical (like XML), but are simply a flat list. Hierarchical data has a parent-child relationship that is not naturally represented in a relational database table.
        </p>
        <p>
         For our purposes, hierarchical data is a collection of data where each item has a single parent and zero or more children (with the exception of the root item, which has no parent). Hierarchical data can be found in a variety of database applications, including forum and mailing list threads, business organization charts, content management categories, and product categories. For our purposes we will use the following product category hierarchy from an fictional electronics store:
        </p>
        <p>
         <img alt="" class="size-full wp-image-74 alignnone" height="362" src="http://mikehillyer.com/media//categories.png" title="categories" width="664"/>
        </p>
        <p>
         These categories form a hierarchy in much the same way as the other examples cited above. In this article we will examine two models for dealing with hierarchical data in MySQL, starting with the traditional adjacency list model.
        </p>
        <h3>
         The Adjacency List Model
        </h3>
        <p>
         Typically the example categories shown above will be stored in a table like the following (Im including full CREATE and INSERT statements so you can follow along):
        </p>
        <pre class="samplecode">
         CREATE TABLE category(
        category_id INT AUTO_INCREMENT PRIMARY KEY,
        name VARCHAR(20) NOT NULL,
        parent INT DEFAULT NULL
);

INSERT INTO category VALUES(1,'ELECTRONICS',NULL),(2,'TELEVISIONS',1),(3,'TUBE',2),
        (4,'LCD',2),(5,'PLASMA',2),(6,'PORTABLE ELECTRONICS',1),(7,'MP3 PLAYERS',6),(8,'FLASH',7),
        (9,'CD PLAYERS',6),(10,'2 WAY RADIOS',6);

SELECT * FROM category ORDER BY category_id;
+-------------+----------------------+--------+
| category_id | name                 | parent |
+-------------+----------------------+--------+
|           1 | ELECTRONICS          |   NULL |
|           2 | TELEVISIONS          |      1 |
|           3 | TUBE                 |      2 |
|           4 | LCD                  |      2 |
|           5 | PLASMA               |      2 |
|           6 | PORTABLE ELECTRONICS |      1 |
|           7 | MP3 PLAYERS          |      6 |
|           8 | FLASH                |      7 |
|           9 | CD PLAYERS           |      6 |
|          10 | 2 WAY RADIOS         |      6 |
+-------------+----------------------+--------+
10 rows in set (0.00 sec)
        </pre>
        <p>
         In the adjacency list model, each item in the table contains a pointer to its parent. The topmost element, in this case
         <em>
          electronics
         </em>
         , has a NULL value for its parent. The adjacency list model has the advantage of being quite simple, it is easy to see that
         <em>
          FLASH
         </em>
         is a child of
         <em>
          mp3
         </em>
         players, which is a child of
         <em>
          portable electronics
         </em>
         , which is a child of
         <em>
          electronics
         </em>
         . While the adjacency list model can be dealt with fairly easily in client-side code, working with the model can be more problematic in pure SQL.
        </p>
        <h4>
         Retrieving a Full Tree
        </h4>
        <p>
         The first common task when dealing with hierarchical data is the display of the entire tree, usually with some form of indentation. The most common way of doing this is in pure SQL is through the use of a self-join:
        </p>
        <pre class="samplecode">
         SELECT t1.name AS lev1, t2.name as lev2, t3.name as lev3, t4.name as lev4
FROM category AS t1
LEFT JOIN category AS t2 ON t2.parent = t1.category_id
LEFT JOIN category AS t3 ON t3.parent = t2.category_id
LEFT JOIN category AS t4 ON t4.parent = t3.category_id
WHERE t1.name = 'ELECTRONICS';

+-------------+----------------------+--------------+-------+
| lev1        | lev2                 | lev3         | lev4  |
+-------------+----------------------+--------------+-------+
| ELECTRONICS | TELEVISIONS          | TUBE         | NULL  |
| ELECTRONICS | TELEVISIONS          | LCD          | NULL  |
| ELECTRONICS | TELEVISIONS          | PLASMA       | NULL  |
| ELECTRONICS | PORTABLE ELECTRONICS | MP3 PLAYERS  | FLASH |
| ELECTRONICS | PORTABLE ELECTRONICS | CD PLAYERS   | NULL  |
| ELECTRONICS | PORTABLE ELECTRONICS | 2 WAY RADIOS | NULL  |
+-------------+----------------------+--------------+-------+
6 rows in set (0.00 sec)
        </pre>
        <h4>
         Finding all the Leaf Nodes
        </h4>
        <p>
         We can find all the leaf nodes in our tree (those with no children) by using a LEFT JOIN query:
        </p>
        <pre class="samplecode">
         SELECT t1.name FROM
category AS t1 LEFT JOIN category as t2
ON t1.category_id = t2.parent
WHERE t2.category_id IS NULL;

+--------------+
| name         |
+--------------+
| TUBE         |
| LCD          |
| PLASMA       |
| FLASH        |
| CD PLAYERS   |
| 2 WAY RADIOS |
+--------------+
        </pre>
        <h4>
         Retrieving a Single Path
        </h4>
        <p>
         The self-join also allows us to see the full path through our hierarchies:
        </p>
        <pre class="samplecode">
         SELECT t1.name AS lev1, t2.name as lev2, t3.name as lev3, t4.name as lev4
FROM category AS t1
LEFT JOIN category AS t2 ON t2.parent = t1.category_id
LEFT JOIN category AS t3 ON t3.parent = t2.category_id
LEFT JOIN category AS t4 ON t4.parent = t3.category_id
WHERE t1.name = 'ELECTRONICS' AND t4.name = 'FLASH';

+-------------+----------------------+-------------+-------+
| lev1        | lev2                 | lev3        | lev4  |
+-------------+----------------------+-------------+-------+
| ELECTRONICS | PORTABLE ELECTRONICS | MP3 PLAYERS | FLASH |
+-------------+----------------------+-------------+-------+
1 row in set (0.01 sec)
        </pre>
        <p>
         The main limitation of such an approach is that you need one self-join for every level in the hierarchy, and performance will naturally degrade with each level added as the joining grows in complexity.
        </p>
        <h4>
         Limitations of the Adjacency List Model
        </h4>
        <p>
         Working with the adjacency list model in pure SQL can be difficult at best. Before being able to see the full path of a category we have to know the level at which it resides. In addition, special care must be taken when deleting nodes because of the potential for orphaning an entire sub-tree in the process (delete the portable electronics category and all of its children are orphaned). Some of these limitations can be addressed through the use of client-side code or stored procedures. With a procedural language we can start at the bottom of the tree and iterate upwards to return the full tree or a single path. We can also use procedural programming to delete nodes without orphaning entire sub-trees by promoting one child element and re-ordering the remaining children to point to the new parent.
        </p>
        <h3>
         The Nested Set Model
        </h3>
        <p>
         What I would like to focus on in this article is a different approach, commonly referred to as the
         <strong>
          Nested Set Model
         </strong>
         . In the Nested Set Model, we can look at our hierarchy in a new way, not as nodes and lines, but as nested containers. Try picturing our electronics categories this way:
        </p>
        <p>
         <img alt="" class="alignnone size-full wp-image-76" height="218" src="http://mikehillyer.com/media//nested_categories.png" title="nested_categories" width="702"/>
        </p>
        <p>
         Notice how our hierarchy is still maintained, as parent categories envelop their children.We represent this form of hierarchy in a table through the use of left and right values to represent the nesting of our nodes:
        </p>
        <pre class="samplecode">
         CREATE TABLE nested_category (
        category_id INT AUTO_INCREMENT PRIMARY KEY,
        name VARCHAR(20) NOT NULL,
        lft INT NOT NULL,
        rgt INT NOT NULL
);

INSERT INTO nested_category VALUES(1,'ELECTRONICS',1,20),(2,'TELEVISIONS',2,9),(3,'TUBE',3,4),
 (4,'LCD',5,6),(5,'PLASMA',7,8),(6,'PORTABLE ELECTRONICS',10,19),(7,'MP3 PLAYERS',11,14),(8,'FLASH',12,13),
 (9,'CD PLAYERS',15,16),(10,'2 WAY RADIOS',17,18);

SELECT * FROM nested_category ORDER BY category_id;

+-------------+----------------------+-----+-----+
| category_id | name                 | lft | rgt |
+-------------+----------------------+-----+-----+
|           1 | ELECTRONICS          |   1 |  20 |
|           2 | TELEVISIONS          |   2 |   9 |
|           3 | TUBE                 |   3 |   4 |
|           4 | LCD                  |   5 |   6 |
|           5 | PLASMA               |   7 |   8 |
|           6 | PORTABLE ELECTRONICS |  10 |  19 |
|           7 | MP3 PLAYERS          |  11 |  14 |
|           8 | FLASH                |  12 |  13 |
|           9 | CD PLAYERS           |  15 |  16 |
|          10 | 2 WAY RADIOS         |  17 |  18 |
+-------------+----------------------+-----+-----+
        </pre>
        <p>
         We use
         <strong>
          lft
         </strong>
         and
         <strong>
          rgt
         </strong>
         because
         <em>
          left
         </em>
         and
         <em>
          right
         </em>
         are reserved words in MySQL, see
         <a href="http://dev.mysql.com/doc/mysql/en/reserved-words.html">
          http://dev.mysql.com/doc/mysql/en/reserved-words.html
         </a>
         for the full list of reserved words.
        </p>
        <p>
         So how do we determine left and right values? We start numbering at the leftmost side of the outer node and continue to the right:
        </p>
        <p>
         <img alt="" class="alignnone size-full wp-image-79" height="194" src="http://mikehillyer.com/media//nested_numbered.png" title="nested_numbered" width="642"/>
        </p>
        <p>
         This design can be applied to a typical tree as well:
        </p>
        <p>
         <img alt="" class="alignnone size-full wp-image-80" height="362" src="http://mikehillyer.com/media//numbered_tree.png" title="numbered_tree" width="695"/>
        </p>
        <p>
         When working with a tree, we work from left to right, one layer at a time, descending to each nodes children before assigning a right-hand number and moving on to the right. This approach is called the
         <strong>
          modified preorder tree traversal algorithm
         </strong>
         .
        </p>
        <h4>
         Retrieving a Full Tree
        </h4>
        <p>
         We can retrieve the full tree through the use of a self-join that links parents with nodes on the basis that a nodes
         <strong>
          lft
         </strong>
         value will always appear between its parents
         <strong>
          lft
         </strong>
         and
         <strong>
          rgt
         </strong>
         values:
        </p>
        <pre class="samplecode">
         SELECT node.name
FROM nested_category AS node,
        nested_category AS parent
WHERE node.lft BETWEEN parent.lft AND parent.rgt
        AND parent.name = 'ELECTRONICS'
ORDER BY node.lft;

+----------------------+
| name                 |
+----------------------+
| ELECTRONICS          |
| TELEVISIONS          |
| TUBE                 |
| LCD                  |
| PLASMA               |
| PORTABLE ELECTRONICS |
| MP3 PLAYERS          |
| FLASH                |
| CD PLAYERS           |
| 2 WAY RADIOS         |
+----------------------+
        </pre>
        <p>
         Unlike our previous examples with the adjacency list model, this query will work regardless of the depth of the tree. We do not concern ourselves with the rgt value of the node in our BETWEEN clause because the rgt value will always fall within the same parent as the lft values.
        </p>
        <h4>
         Finding all the Leaf Nodes
        </h4>
        <p>
         Finding all leaf nodes in the nested set model even simpler than the LEFT JOIN method used in the adjacency list model. If you look at the nested_category table, you may notice that the lft and rgt values for leaf nodes are consecutive numbers. To find the leaf nodes, we look for nodes where rgt = lft + 1:
        </p>
        <pre class="samplecode">
         SELECT name
FROM nested_category
WHERE rgt = lft + 1;

+--------------+
| name         |
+--------------+
| TUBE         |
| LCD          |
| PLASMA       |
| FLASH        |
| CD PLAYERS   |
| 2 WAY RADIOS |
+--------------+
        </pre>
        <h4>
         Retrieving a Single Path
        </h4>
        <p>
         With the nested set model, we can retrieve a single path without having multiple self-joins:
        </p>
        <pre class="samplecode">
         SELECT parent.name
FROM nested_category AS node,
        nested_category AS parent
WHERE node.lft BETWEEN parent.lft AND parent.rgt
        AND node.name = 'FLASH'
ORDER BY node.lft;

+----------------------+
| name                 |
+----------------------+
| ELECTRONICS          |
| PORTABLE ELECTRONICS |
| MP3 PLAYERS          |
| FLASH                |
+----------------------+
        </pre>
        <h4>
         Finding the Depth of the Nodes
        </h4>
        <p>
         We have already looked at how to show the entire tree, but what if we want to also show the depth of each node in the tree, to better identify how each node fits in the hierarchy? This can be done by adding a COUNT function and a GROUP BY clause to our existing query for showing the entire tree:
        </p>
        <pre class="samplecode">
         SELECT node.name, (COUNT(parent.name) - 1) AS depth
FROM nested_category AS node,
        nested_category AS parent
WHERE node.lft BETWEEN parent.lft AND parent.rgt
GROUP BY node.name
ORDER BY node.lft;

+----------------------+-------+
| name                 | depth |
+----------------------+-------+
| ELECTRONICS          |     0 |
| TELEVISIONS          |     1 |
| TUBE                 |     2 |
| LCD                  |     2 |
| PLASMA               |     2 |
| PORTABLE ELECTRONICS |     1 |
| MP3 PLAYERS          |     2 |
| FLASH                |     3 |
| CD PLAYERS           |     2 |
| 2 WAY RADIOS         |     2 |
+----------------------+-------+
        </pre>
        <p>
         We can use the depth value to indent our category names with the CONCAT and REPEAT string functions:
        </p>
        <pre class="samplecode">
         SELECT CONCAT( REPEAT(' ', COUNT(parent.name) - 1), node.name) AS name
FROM nested_category AS node,
        nested_category AS parent
WHERE node.lft BETWEEN parent.lft AND parent.rgt
GROUP BY node.name
ORDER BY node.lft;

+-----------------------+
| name                  |
+-----------------------+
| ELECTRONICS           |
|  TELEVISIONS          |
|   TUBE                |
|   LCD                 |
|   PLASMA              |
|  PORTABLE ELECTRONICS |
|   MP3 PLAYERS         |
|    FLASH              |
|   CD PLAYERS          |
|   2 WAY RADIOS        |
+-----------------------+
        </pre>
        <p>
         Of course, in a client-side application you will be more likely to use the depth value directly to display your hierarchy. Web developers could loop through the tree, adding &lt;li&gt;&lt;/li&gt; and &lt;ul&gt;&lt;/ul&gt; tags as the depth number increases and decreases.
        </p>
        <h4>
         Depth of a Sub-Tree
        </h4>
        <p>
         When we need depth information for a sub-tree, we cannot limit either the node or parent tables in our self-join because it will corrupt our results. Instead, we add a third self-join, along with a sub-query to determine the depth that will be the new starting point for our sub-tree:
        </p>
        <pre class="samplecode">
         SELECT node.name, (COUNT(parent.name) - (sub_tree.depth + 1)) AS depth
FROM nested_category AS node,
        nested_category AS parent,
        nested_category AS sub_parent,
        (
                SELECT node.name, (COUNT(parent.name) - 1) AS depth
                FROM nested_category AS node,
                nested_category AS parent
                WHERE node.lft BETWEEN parent.lft AND parent.rgt
                AND node.name = 'PORTABLE ELECTRONICS'
                GROUP BY node.name
                ORDER BY node.lft
        )AS sub_tree
WHERE node.lft BETWEEN parent.lft AND parent.rgt
        AND node.lft BETWEEN sub_parent.lft AND sub_parent.rgt
        AND sub_parent.name = sub_tree.name
GROUP BY node.name
ORDER BY node.lft;

+----------------------+-------+
| name                 | depth |
+----------------------+-------+
| PORTABLE ELECTRONICS |     0 |
| MP3 PLAYERS          |     1 |
| FLASH                |     2 |
| CD PLAYERS           |     1 |
| 2 WAY RADIOS         |     1 |
+----------------------+-------+
        </pre>
        <p>
         This function can be used with any node name, including the root node. The depth values are always relative to the named node.
        </p>
        <p>
         <!--adsense-->
        </p>
        <h4>
         Find the Immediate Subordinates of a Node
        </h4>
        <p>
         Imagine you are showing a category of electronics products on a retailer web site. When a user clicks on a category, you would want to show the products of that category, as well as list its immediate sub-categories, but not the entire tree of categories beneath it. For this, we need to show the node and its immediate sub-nodes, but no further down the tree. For example, when showing the PORTABLE ELECTRONICS category, we will want to show MP3 PLAYERS, CD PLAYERS, and 2 WAY RADIOS, but not FLASH.
        </p>
        <p>
         This can be easily accomplished by adding a HAVING clause to our previous query:
        </p>
        <pre class="samplecode">
         SELECT node.name, (COUNT(parent.name) - (sub_tree.depth + 1)) AS depth
FROM nested_category AS node,
        nested_category AS parent,
        nested_category AS sub_parent,
        (
                SELECT node.name, (COUNT(parent.name) - 1) AS depth
                FROM nested_category AS node,
                        nested_category AS parent
                WHERE node.lft BETWEEN parent.lft AND parent.rgt
                        AND node.name = 'PORTABLE ELECTRONICS'
                GROUP BY node.name
                ORDER BY node.lft
        )AS sub_tree
WHERE node.lft BETWEEN parent.lft AND parent.rgt
        AND node.lft BETWEEN sub_parent.lft AND sub_parent.rgt
        AND sub_parent.name = sub_tree.name
GROUP BY node.name
HAVING depth &lt;= 1
ORDER BY node.lft;

+----------------------+-------+
| name                 | depth |
+----------------------+-------+
| PORTABLE ELECTRONICS |     0 |
| MP3 PLAYERS          |     1 |
| CD PLAYERS           |     1 |
| 2 WAY RADIOS         |     1 |
+----------------------+-------+
        </pre>
        <p>
         If you do not wish to show the parent node, change the
         <strong>
          HAVING depth &lt;= 1
         </strong>
         line to
         <strong>
          HAVING depth = 1
         </strong>
         .
        </p>
        <h4>
         Aggregate Functions in a Nested Set
        </h4>
        <p>
         Lets add a table of products that we can use to demonstrate aggregate functions with:
        </p>
        <pre class="samplecode">
         CREATE TABLE product
(
        product_id INT AUTO_INCREMENT PRIMARY KEY,
        name VARCHAR(40),
        category_id INT NOT NULL
);

INSERT INTO product(name, category_id) VALUES('20" TV',3),('36" TV',3),
('Super-LCD 42"',4),('Ultra-Plasma 62"',5),('Value Plasma 38"',5),
('Power-MP3 5gb',7),('Super-Player 1gb',8),('Porta CD',9),('CD To go!',9),
('Family Talk 360',10);

SELECT * FROM product;

+------------+-------------------+-------------+
| product_id | name              | category_id |
+------------+-------------------+-------------+
|          1 | 20" TV            |           3 |
|          2 | 36" TV            |           3 |
|          3 | Super-LCD 42"     |           4 |
|          4 | Ultra-Plasma 62"  |           5 |
|          5 | Value Plasma 38"  |           5 |
|          6 | Power-MP3 128mb   |           7 |
|          7 | Super-Shuffle 1gb |           8 |
|          8 | Porta CD          |           9 |
|          9 | CD To go!         |           9 |
|         10 | Family Talk 360   |          10 |
+------------+-------------------+-------------+
        </pre>
        <p>
         Now lets produce a query that can retrieve our category tree, along with a product count for each category:
        </p>
        <pre class="samplecode">
         SELECT parent.name, COUNT(product.name)
FROM nested_category AS node ,
        nested_category AS parent,
        product
WHERE node.lft BETWEEN parent.lft AND parent.rgt
        AND node.category_id = product.category_id
GROUP BY parent.name
ORDER BY node.lft;

+----------------------+---------------------+
| name                 | COUNT(product.name) |
+----------------------+---------------------+
| ELECTRONICS          |                  10 |
| TELEVISIONS          |                   5 |
| TUBE                 |                   2 |
| LCD                  |                   1 |
| PLASMA               |                   2 |
| PORTABLE ELECTRONICS |                   5 |
| MP3 PLAYERS          |                   2 |
| FLASH                |                   1 |
| CD PLAYERS           |                   2 |
| 2 WAY RADIOS         |                   1 |
+----------------------+---------------------+
        </pre>
        <p>
         This is our typical whole tree query with a COUNT and GROUP BY added, along with a reference to the product table and a join between the node and product table in the WHERE clause. As you can see, there is a count for each category and the count of subcategories is reflected in the parent categories.
        </p>
        <h4>
         Adding New Nodes
        </h4>
        <p>
         Now that we have learned how to query our tree, we should take a look at how to update our tree by adding a new node. Lets look at our nested set diagram again:
        </p>
        <p>
         <img alt="" class="alignnone size-full wp-image-79" height="194" src="http://mikehillyer.com/media//nested_numbered.png" title="nested_numbered" width="642"/>
        </p>
        <p>
         If we wanted to add a new node between the TELEVISIONS and PORTABLE ELECTRONICS nodes, the new node would have lft and rgt values of 10 and 11, and all nodes to its right would have their lft and rgt values increased by two. We would then add the new node with the appropriate lft and rgt values. While this can be done with a stored procedure in MySQL 5, I will assume for the moment that most readers are using 4.1, as it is the latest stable version, and I will isolate my queries with a LOCK TABLES statement instead:
        </p>
        <pre class="samplecode">
         LOCK TABLE nested_category WRITE;

SELECT @myRight := rgt FROM nested_category
WHERE name = 'TELEVISIONS';

UPDATE nested_category SET rgt = rgt + 2 WHERE rgt &gt; @myRight;
UPDATE nested_category SET lft = lft + 2 WHERE lft &gt; @myRight;

INSERT INTO nested_category(name, lft, rgt) VALUES('GAME CONSOLES', @myRight + 1, @myRight + 2);

UNLOCK TABLES;
        </pre>
        <p>
         We can then check our nesting with our indented tree query:
        </p>
        <pre class="samplecode">
         SELECT CONCAT( REPEAT( ' ', (COUNT(parent.name) - 1) ), node.name) AS name
FROM nested_category AS node,
        nested_category AS parent
WHERE node.lft BETWEEN parent.lft AND parent.rgt
GROUP BY node.name
ORDER BY node.lft;

+-----------------------+
| name                  |
+-----------------------+
| ELECTRONICS           |
|  TELEVISIONS          |
|   TUBE                |
|   LCD                 |
|   PLASMA              |
|  GAME CONSOLES        |
|  PORTABLE ELECTRONICS |
|   MP3 PLAYERS         |
|    FLASH              |
|   CD PLAYERS          |
|   2 WAY RADIOS        |
+-----------------------+
        </pre>
        <p>
         If we instead want to add a node as a child of a node that has no existing children, we need to modify our procedure slightly. Lets add a new FRS node below the 2 WAY RADIOS node:
        </p>
        <pre class="samplecode">
         LOCK TABLE nested_category WRITE;

SELECT @myLeft := lft FROM nested_category

WHERE name = '2 WAY RADIOS';

UPDATE nested_category SET rgt = rgt + 2 WHERE rgt &gt; @myLeft;
UPDATE nested_category SET lft = lft + 2 WHERE lft &gt; @myLeft;

INSERT INTO nested_category(name, lft, rgt) VALUES('FRS', @myLeft + 1, @myLeft + 2);

UNLOCK TABLES;
        </pre>
        <p>
         In this example we expand everything to the right of the left-hand number of our proud new parent node, then place the node to the right of the left-hand value. As you can see, our new node is now properly nested:
        </p>
        <pre class="samplecode">
         SELECT CONCAT( REPEAT( ' ', (COUNT(parent.name) - 1) ), node.name) AS name
FROM nested_category AS node,
        nested_category AS parent
WHERE node.lft BETWEEN parent.lft AND parent.rgt
GROUP BY node.name
ORDER BY node.lft;

+-----------------------+
| name                  |
+-----------------------+
| ELECTRONICS           |
|  TELEVISIONS          |
|   TUBE                |
|   LCD                 |
|   PLASMA              |
|  GAME CONSOLES        |
|  PORTABLE ELECTRONICS |
|   MP3 PLAYERS         |
|    FLASH              |
|   CD PLAYERS          |
|   2 WAY RADIOS        |
|    FRS                |
+-----------------------+
        </pre>
        <h4>
         Deleting Nodes
        </h4>
        <p>
         The last basic task involved in working with nested sets is the removal of nodes. The course of action you take when deleting a node depends on the nodes position in the hierarchy; deleting leaf nodes is easier than deleting nodes with children because we have to handle the orphaned nodes.
        </p>
        <p>
         When deleting a leaf node, the process if just the opposite of adding a new node, we delete the node and its width from every node to its right:
        </p>
        <pre class="samplecode">
         LOCK TABLE nested_category WRITE;

SELECT @myLeft := lft, @myRight := rgt, @myWidth := rgt - lft + 1
FROM nested_category
WHERE name = 'GAME CONSOLES';

DELETE FROM nested_category WHERE lft BETWEEN @myLeft AND @myRight;

UPDATE nested_category SET rgt = rgt - @myWidth WHERE rgt &gt; @myRight;
UPDATE nested_category SET lft = lft - @myWidth WHERE lft &gt; @myRight;

UNLOCK TABLES;
        </pre>
        <p>
         And once again, we execute our indented tree query to confirm that our node has been deleted without corrupting the hierarchy:
        </p>
        <pre class="samplecode">
         SELECT CONCAT( REPEAT( ' ', (COUNT(parent.name) - 1) ), node.name) AS name
FROM nested_category AS node,
        nested_category AS parent
WHERE node.lft BETWEEN parent.lft AND parent.rgt
GROUP BY node.name
ORDER BY node.lft;

+-----------------------+
| name                  |
+-----------------------+
| ELECTRONICS           |
|  TELEVISIONS          |
|   TUBE                |
|   LCD                 |
|   PLASMA              |
|  PORTABLE ELECTRONICS |
|   MP3 PLAYERS         |
|    FLASH              |
|   CD PLAYERS          |
|   2 WAY RADIOS        |
|    FRS                |
+-----------------------+
        </pre>
        <p>
         This approach works equally well to delete a node and all its children:
        </p>
        <pre class="samplecode">
         LOCK TABLE nested_category WRITE;

SELECT @myLeft := lft, @myRight := rgt, @myWidth := rgt - lft + 1
FROM nested_category
WHERE name = 'MP3 PLAYERS';

DELETE FROM nested_category WHERE lft BETWEEN @myLeft AND @myRight;

UPDATE nested_category SET rgt = rgt - @myWidth WHERE rgt &gt; @myRight;
UPDATE nested_category SET lft = lft - @myWidth WHERE lft &gt; @myRight;

UNLOCK TABLES;
        </pre>
        <p>
         And once again, we query to see that we have successfully deleted an entire sub-tree:
        </p>
        <pre class="samplecode">
         SELECT CONCAT( REPEAT( ' ', (COUNT(parent.name) - 1) ), node.name) AS name
FROM nested_category AS node,
        nested_category AS parent
WHERE node.lft BETWEEN parent.lft AND parent.rgt
GROUP BY node.name
ORDER BY node.lft;

+-----------------------+
| name                  |
+-----------------------+
| ELECTRONICS           |
|  TELEVISIONS          |
|   TUBE                |
|   LCD                 |
|   PLASMA              |
|  PORTABLE ELECTRONICS |
|   CD PLAYERS          |
|   2 WAY RADIOS        |
|    FRS                |
+-----------------------+
        </pre>
        <p>
         The other scenario we have to deal with is the deletion of a parent node but not the children. In some cases you may wish to just change the name to a placeholder until a replacement is presented, such as when a supervisor is fired. In other cases, the child nodes should all be moved up to the level of the deleted parent:
        </p>
        <pre class="samplecode">
         LOCK TABLE nested_category WRITE;

SELECT @myLeft := lft, @myRight := rgt, @myWidth := rgt - lft + 1
FROM nested_category
WHERE name = 'PORTABLE ELECTRONICS';

DELETE FROM nested_category WHERE lft = @myLeft;

UPDATE nested_category SET rgt = rgt - 1, lft = lft - 1 WHERE lft BETWEEN @myLeft AND @myRight;
UPDATE nested_category SET rgt = rgt - 2 WHERE rgt &gt; @myRight;
UPDATE nested_category SET lft = lft - 2 WHERE lft &gt; @myRight;

UNLOCK TABLES;
        </pre>
        <p>
         In this case we subtract two from all elements to the right of the node (since without children it would have a width of two), and one from the nodes that are its children (to close the gap created by the loss of the parents left value). Once again, we can confirm our elements have been promoted:
        </p>
        <pre class="samplecode">
         SELECT CONCAT( REPEAT( ' ', (COUNT(parent.name) - 1) ), node.name) AS name
FROM nested_category AS node,
        nested_category AS parent
WHERE node.lft BETWEEN parent.lft AND parent.rgt
GROUP BY node.name
ORDER BY node.lft;

+---------------+
| name          |
+---------------+
| ELECTRONICS   |
|  TELEVISIONS  |
|   TUBE        |
|   LCD         |
|   PLASMA      |
|  CD PLAYERS   |
|  2 WAY RADIOS |
|   FRS         |
+---------------+
        </pre>
        <p>
         Other scenarios when deleting nodes would include promoting one of the children to the parent position and moving the child nodes under a sibling of the parent node, but for the sake of space these scenarios will not be covered in this article.
        </p>
        <h3>
         Final Thoughts
        </h3>
        <p>
         While I hope the information within this article will be of use to you, the concept of nested sets in SQL has been around for over a decade, and there is a lot of additional information available in books and on the Internet. In my opinion the most comprehensive source of information on managing hierarchical information is a book called
         <a href="http://www.openwin.org/mike/books/index.php/trees-and-hierarchies-in-sql">
          Joe Celkos Trees and Hierarchies in SQL for Smarties
         </a>
         , written by a very respected author in the field of advanced SQL, Joe Celko. Joe Celko is often credited with the nested sets model and is by far the most prolific author on the subject. I have found Celkos book to be an invaluable resource in my own studies and highly recommend it. The book covers advanced topics which I have not covered in this article, and provides additional methods for managing hierarchical data in addition to the Adjacency List and Nested Set models.
        </p>
        <p>
         In the References / Resources section that follows I have listed some web resources that may be of use in your research of managing hierarchal data, including a pair of PHP related resources that include pre-built PHP libraries for handling nested sets in MySQL. Those of you who currently use the adjacency list model and would like to experiment with the nested set model will find sample code for converting between the two in the
         <a href="http://www.sitepoint.com/article/hierarchical-data-database">
          Storing Hierarchical Data in a Database
         </a>
         resource listed below.
        </p>
        <h3>
         References / Resources
        </h3>
        <ul>
         <li>
          <a href="http://www.openwin.org/mike/books/index.php/trees-and-hierarchies-in-sql">
           Joe Celkos Trees and Hierarchies in SQL for Smarties
          </a>
           ISBN 1-55860-920-2
         </li>
         <li>
          <a href="http://www.sitepoint.com/article/hierarchical-data-database">
           Storing Hierarchical Data in a Database
          </a>
         </li>
         <li>
          <a href="http://www.dbmsmag.com/9603d06.html">
           A Look at SQL Trees
          </a>
         </li>
         <li>
          <a href="http://www.dbmsmag.com/9604d06.html">
           SQL Lessons
          </a>
         </li>
         <li>
          <a href="http://www.dbmsmag.com/9605d06.html">
           Nontraditional Databases
          </a>
         </li>
         <li>
          <a href="http://www.intelligententerprise.com/001020/celko.jhtml?_requestid=123193">
           Trees in SQL
          </a>
         </li>
         <li>
          <a href="http://searchdatabase.techtarget.com/tip/1,289483,sid13_gci537290,00.html">
           Trees in SQL (2)
          </a>
         </li>
         <li>
          <a href="http://searchdatabase.techtarget.com/tip/1,289483,sid13_gci801943,00.html">
           Converting an adjacency list model to a nested set model
          </a>
         </li>
         <li>
          <a href="http://www.klempert.de/php/nested_sets_demo">
           Nested Sets in PHP Demonstration (German)
          </a>
         </li>
         <li>
          <a href="http://dev.e-taller.net/dbtree/">
           A Nested Set Library in PHP
          </a>
         </li>
        </ul>
       </div>
       <!-- .entry-content -->
      </article>
      <!-- #post-## -->
      <div class="comments-area" id="comments">
       <h2 class="comments-title">
        56 thoughts on Managing Hierarchical Data in MySQL
       </h2>
       <nav class="navigation comment-navigation" role="navigation">
        <h2 class="screen-reader-text">
         Comment navigation
        </h2>
        <div class="nav-links">
         <div class="nav-previous">
          <a href="http://mikehillyer.com/articles/managing-hierarchical-data-in-mysql/comment-page-1/#comments">
           Older Comments
          </a>
         </div>
        </div>
        <!-- .nav-links -->
       </nav>
       <!-- .comment-navigation -->
       <ol class="comment-list">
        <li class="comment even thread-even depth-1" id="comment-292397">
         <article class="comment-body" id="div-comment-292397">
          <footer class="comment-meta">
           <div class="comment-author vcard">
            <img alt="" class="avatar avatar-56 photo" height="56" src="http://0.gravatar.com/avatar/6770aeff872982d7cb1807b364332075?s=56&amp;d=mm&amp;r=g" srcset="http://0.gravatar.com/avatar/6770aeff872982d7cb1807b364332075?s=112&amp;d=mm&amp;r=g 2x" width="56"/>
            <b class="fn">
             <a class="url" href="http://www.moving-bytes.at" rel="external nofollow">
              Andreas Beder
             </a>
            </b>
            <span class="says">
             says:
            </span>
           </div>
           <!-- .comment-author -->
           <div class="comment-metadata">
            <a href="http://mikehillyer.com/articles/managing-hierarchical-data-in-mysql/comment-page-2/#comment-292397">
             <time datetime="2015-06-23T08:06:00+00:00">
              2015/06/23 at 8:06 AM
             </time>
            </a>
           </div>
           <!-- .comment-metadata -->
          </footer>
          <!-- .comment-meta -->
          <div class="comment-content">
           <p>
            Thanks !!!
           </p>
          </div>
          <!-- .comment-content -->
          <div class="reply">
           <a aria-label="Reply to Andreas Beder" class="comment-reply-link" href="/articles/managing-hierarchical-data-in-mysql/?replytocom=292397#respond" onclick='return addComment.moveForm( "div-comment-292397", "292397", "respond", "72" )'>
            Reply
           </a>
          </div>
         </article>
         <!-- .comment-body -->
        </li>
        <!-- #comment-## -->
        <li class="pingback odd alt thread-odd thread-alt depth-1" id="comment-292418">
         <div class="comment-body">
          Pingback:
          <a class="url" href="http://dexpage.com/listing-of-all-elements-recursively-through-postgresql/" rel="external nofollow">
           Listing of all elements recursively through postgresql - dex page
          </a>
         </div>
        </li>
        <!-- #comment-## -->
       </ol>
       <!-- .comment-list -->
       <nav class="navigation comment-navigation" role="navigation">
        <h2 class="screen-reader-text">
         Comment navigation
        </h2>
        <div class="nav-links">
         <div class="nav-previous">
          <a href="http://mikehillyer.com/articles/managing-hierarchical-data-in-mysql/comment-page-1/#comments">
           Older Comments
          </a>
         </div>
        </div>
        <!-- .nav-links -->
       </nav>
       <!-- .comment-navigation -->
       <div class="comment-respond" id="respond">
        <h3 class="comment-reply-title" id="reply-title">
         Leave a Reply
         <small>
          <a href="/articles/managing-hierarchical-data-in-mysql/#respond" id="cancel-comment-reply-link" rel="nofollow" style="display:none;">
           Cancel reply
          </a>
         </small>
        </h3>
        <form action="http://mikehillyer.com/wordpress/wp-comments-post.php" class="comment-form" id="commentform" method="post" novalidate="">
         <p class="comment-notes">
          <span id="email-notes">
           Your email address will not be published.
          </span>
          Required fields are marked
          <span class="required">
           *
          </span>
         </p>
         <p class="comment-form-author">
          <label for="author">
           Name
           <span class="required">
            *
           </span>
          </label>
          <input aria-required="true" id="author" name="author" required="required" size="30" type="text" value=""/>
         </p>
         <p class="comment-form-email">
          <label for="email">
           Email
           <span class="required">
            *
           </span>
          </label>
          <input aria-describedby="email-notes" aria-required="true" id="email" name="email" required="required" size="30" type="email" value=""/>
         </p>
         <p class="comment-form-url">
          <label for="url">
           Website
          </label>
          <input id="url" name="url" size="30" type="url" value=""/>
         </p>
         <p class="comment-form-comment">
          <label for="comment">
           Comment
          </label>
          <textarea aria-describedby="form-allowed-tags" aria-required="true" cols="45" id="comment" name="comment" required="required" rows="8">
          </textarea>
         </p>
         <p class="form-allowed-tags" id="form-allowed-tags">
          You may use these
          <abbr title="HyperText Markup Language">
           HTML
          </abbr>
          tags and attributes:
          <code>
           &lt;a href="" title=""&gt; &lt;abbr title=""&gt; &lt;acronym title=""&gt; &lt;b&gt; &lt;blockquote cite=""&gt; &lt;cite&gt; &lt;code&gt; &lt;del datetime=""&gt; &lt;em&gt; &lt;i&gt; &lt;q cite=""&gt; &lt;s&gt; &lt;strike&gt; &lt;strong&gt;
          </code>
         </p>
         <p class="form-submit">
          <input class="submit" id="submit" name="submit" type="submit" value="Post Comment"/>
          <input id="comment_post_ID" name="comment_post_ID" type="hidden" value="72"/>
          <input id="comment_parent" name="comment_parent" type="hidden" value="0"/>
         </p>
         <p style="display: none;">
          <input id="akismet_comment_nonce" name="akismet_comment_nonce" type="hidden" value="0f43f45eaf"/>
         </p>
         <p style="display: none;">
          <input id="ak_js" name="ak_js" type="hidden" value="113"/>
         </p>
        </form>
       </div>
       <!-- #respond -->
      </div>
      <!-- .comments-area -->
     </main>
     <!-- .site-main -->
    </div>
    <!-- .content-area -->
   </div>
   <!-- .site-content -->
   <footer class="site-footer" id="colophon" role="contentinfo">
    <div class="site-info">
     <a href="https://wordpress.org/">
      Proudly powered by WordPress
     </a>
    </div>
    <!-- .site-info -->
   </footer>
   <!-- .site-footer -->
  </div>
  <!-- .site -->
  <script src="http://mikehillyer.com/wordpress/wp-content/plugins/akismet/_inc/form.js?ver=3.1.2" type="text/javascript">
  </script>
  <script src="http://mikehillyer.com/wordpress/wp-content/themes/twentyfifteen/js/skip-link-focus-fix.js?ver=20141010" type="text/javascript">
  </script>
  <script src="http://mikehillyer.com/wordpress/wp-includes/js/comment-reply.min.js?ver=4.2.2" type="text/javascript">
  </script>
  <script type="text/javascript">
   /* &lt;![CDATA[ */
var screenReaderText = {"expand":"&lt;span class=\"screen-reader-text\"&gt;expand child menu&lt;\/span&gt;","collapse":"&lt;span class=\"screen-reader-text\"&gt;collapse child menu&lt;\/span&gt;"};
/* ]]&gt; */
  </script>
  <script src="http://mikehillyer.com/wordpress/wp-content/themes/twentyfifteen/js/functions.js?ver=20150330" type="text/javascript">
  </script>
 </body>
</html>