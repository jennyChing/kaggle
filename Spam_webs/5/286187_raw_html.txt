<!DOCTYPE html>
<html>
 <head>
  <script type="text/javascript">
   var NREUMQ=NREUMQ||[];NREUMQ.push(["mark","firstbyte",new Date().getTime()]);
  </script>
  <meta content="width=device-width, initial-scale=1.0" name="viewport"/>
  <title>
   District Data Labs - What Are the Odds?
  </title>
  <meta content="What Are the Odds? - An Intro to Probability with R" name="description"/>
  <meta content="District Data Labs" name="author"/>
  <!-- Do a conditional here to test for the theme selected in settings.-->
  <link href="/assets/kaia_theme-cd7264b390a254a89f34617b84777895.css" media="all" rel="stylesheet" type="text/css"/>
  <script src="/assets/application-ca489438c3819e65b29e5b66367b9aff.js" type="text/javascript">
  </script>
  <script src="//use.typekit.net/cqm7mbn.js" type="text/javascript">
  </script>
  <script type="text/javascript">
   var _gaq = _gaq || [];
    //handles all back end tracking, and silvrback home tracking

      //pushes stats to user account, with either custom domain or subdomain. One or the other, not both. If custom domain is set, then silvrback subdomain tracking won't show for user. 
      _gaq.push(['user._setAccount', 'UA-47245418-1']);
        _gaq.push(['user._setDomainName', 'silvrback.com']);
      _gaq.push(['user._setAllowLinker', true]);
      _gaq.push(['user._trackPageview']);

      //Send tracking data to 3rd profile. Tracks all front end user domain data (custom domains and subdomains)
      _gaq.push(['custom._setAccount', 'UA-43290725-3']);
      _gaq.push(['custom._setDomainName', 'silvrback.com']);
      _gaq.push(['custom._setAllowLinker', true]);
      _gaq.push(['custom._trackPageview']);


    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>
  <link href="//netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css" rel="stylesheet"/>
  <script type="text/javascript">
   var _sf_startpt=(new Date()).getTime()
  </script>
  <script type="text/javascript">
   try{Typekit.load();}catch(e){}
  </script>
  <!--[if lt IE 9]&gt;
      &lt;script src="http://html5shim.googlecode.com/svn/trunk/html5.js"&gt;&lt;/script&gt;
      &lt;script src="http://css3-mediaqueries-js.googlecode.com/svn/trunk/css3-mediaqueries.js"&gt;&lt;/script&gt;
    &lt;![endif]-->
  <style>
   .theme_wrapper {
          background-color: #242729;
        }
        .header_background_text {
          color: #fff;
        }
        .header_background_text &gt; ul &gt; li &gt;a {
          color: #fff;
        }
  </style>
  <style>
   .hll { background-color: #ffffcc }
.c { color: #408080; font-style: italic } /* Comment */
.err { border: 1px solid #FF0000 } /* Error */
.k { color: #008000; font-weight: bold } /* Keyword */
.o { color: #666666 } /* Operator */
.cm { color: #408080; font-style: italic } /* Comment.Multiline */
.cp { color: #BC7A00 } /* Comment.Preproc */
.c1 { color: #408080; font-style: italic } /* Comment.Single */
.cs { color: #408080; font-style: italic } /* Comment.Special */
.gd { color: #A00000 } /* Generic.Deleted */
.ge { font-style: italic } /* Generic.Emph */
.gr { color: #FF0000 } /* Generic.Error */
.gh { color: #000080; font-weight: bold } /* Generic.Heading */
.gi { color: #00A000 } /* Generic.Inserted */
.go { color: #888888 } /* Generic.Output */
.gp { color: #000080; font-weight: bold } /* Generic.Prompt */
.gs { font-weight: bold } /* Generic.Strong */
.gu { color: #800080; font-weight: bold } /* Generic.Subheading */
.gt { color: #0044DD } /* Generic.Traceback */
.kc { color: #008000; font-weight: bold } /* Keyword.Constant */
.kd { color: #008000; font-weight: bold } /* Keyword.Declaration */
.kn { color: #008000; font-weight: bold } /* Keyword.Namespace */
.kp { color: #008000 } /* Keyword.Pseudo */
.kr { color: #008000; font-weight: bold } /* Keyword.Reserved */
.kt { color: #B00040 } /* Keyword.Type */
.m { color: #666666 } /* Literal.Number */
.s { color: #BA2121 } /* Literal.String */
.na { color: #7D9029 } /* Name.Attribute */
.nb { color: #008000 } /* Name.Builtin */
.nc { color: #0000FF; font-weight: bold } /* Name.Class */
.no { color: #880000 } /* Name.Constant */
.nd { color: #AA22FF } /* Name.Decorator */
.ni { color: #999999; font-weight: bold } /* Name.Entity */
.ne { color: #D2413A; font-weight: bold } /* Name.Exception */
.nf { color: #0000FF } /* Name.Function */
.nl { color: #A0A000 } /* Name.Label */
.nn { color: #0000FF; font-weight: bold } /* Name.Namespace */
.nt { color: #008000; font-weight: bold } /* Name.Tag */
.nv { color: #19177C } /* Name.Variable */
.ow { color: #AA22FF; font-weight: bold } /* Operator.Word */
.w { color: #bbbbbb } /* Text.Whitespace */
.mf { color: #666666 } /* Literal.Number.Float */
.mh { color: #666666 } /* Literal.Number.Hex */
.mi { color: #666666 } /* Literal.Number.Integer */
.mo { color: #666666 } /* Literal.Number.Oct */
.sb { color: #BA2121 } /* Literal.String.Backtick */
.sc { color: #BA2121 } /* Literal.String.Char */
.sd { color: #BA2121; font-style: italic } /* Literal.String.Doc */
.s2 { color: #BA2121 } /* Literal.String.Double */
.se { color: #BB6622; font-weight: bold } /* Literal.String.Escape */
.sh { color: #BA2121 } /* Literal.String.Heredoc */
.si { color: #BB6688; font-weight: bold } /* Literal.String.Interpol */
.sx { color: #008000 } /* Literal.String.Other */
.sr { color: #BB6688 } /* Literal.String.Regex */
.s1 { color: #BA2121 } /* Literal.String.Single */
.ss { color: #19177C } /* Literal.String.Symbol */
.bp { color: #008000 } /* Name.Builtin.Pseudo */
.vc { color: #19177C } /* Name.Variable.Class */
.vg { color: #19177C } /* Name.Variable.Global */
.vi { color: #19177C } /* Name.Variable.Instance */
.il { color: #666666 } /* Literal.Number.Integer.Long */
      .highlight {
        background-color: #f8f8f8;
      }
  </style>
  <link href="/feed" rel="alternate" title="ATOM" type="application/atom+xml"/>
  <link href="/feed.rss" rel="alternate" title="RSS" type="application/rss+xml"/>
 </head>
 <body class="home show">
  <!-- conditional here for the theme body -->
  <article class="theme_wrapper">
   <!--for user uploaded background pics-->
   <div class="banner_container">
    <img alt="Dice_large" class="user_banner animated" src="https://silvrback.s3.amazonaws.com/uploads/2ef97468-2e21-42ba-b9c4-fc98252b01ec/dice_large.png"/>
   </div>
   <div class="shade" style="display:block">
   </div>
   <div class="kaia_page" style="position:relative; z-index:10">
    <div class="big_article_header">
     <h1 class="kaia_header_title header_background_text">
      What Are the Odds?
     </h1>
     <h3 class="kaia_header_subtitle header_background_text">
      <i>
       An Intro to Probability with R
      </i>
     </h3>
     <div class="pic_and_name">
      <div class="name_link">
       <a class="header_background_text" href="https://twitter.com/webbedfeet" target="_blank">
        Abhijit Dasgupta
       </a>
      </div>
     </div>
    </div>
   </div>
   <div class="article_body theme2_body">
    <div class="kaia_page">
     <div class="article_padding theme2_content">
      <div class="all_external_links">
       <p>
        The probability of an event represents the likelihood of the event to occur. For example, most of us would agree that the probability of getting a heads after flipping a fair coin is 0.5 or that the probability of getting a one on rolling a fair die is 1/6. However, there are many more places where we encounter probabilities in our lives. During election season, we have pundits and polls speaking to the likelihood (probability) of winning for each candidate. Doctors will often state that a patient has low or high risk for heart attacks or breast cancer, reflecting either data or the doctor's belief of how likely a patient is to experience that outcome. Banks use customer data to figure out how likely a customer is to default on a loan - the credit risk. We see probability appear in many guises, being called likelihood, risk, odds, propensity, and other synonyms.
       </p>
       <p>
        Broadly speaking, we can arrive at probabilities for events in two ways:
       </p>
       <ol>
        <li>
         <p>
          <strong>
           Subjective probability:
          </strong>
          We can decide and assign a probability to an event based on our experience and beliefs. We see this in the way bookmakers set odds (ratio of probabilities for each team to win) for professional sports, or in how political pundits predict winners, or how likely you think your local football team is to win the game of the week. We will only observe these events once, so we have to base the probabilities on our experience and understanding.
         </p>
        </li>
        <li>
         <p>
          <strong>
           Objective probability:
          </strong>
          Probabilities are assigned based on some physical and repeatedly observable state of affairs. Most commonly, we use
          <em>
           frequentist probabilities
          </em>
          . Suppose we observe a random event (say, getting heads) as the result of an experiment (flipping a coin). The probability of getting heads is determined by the relative frequency of seeing heads when the experiment is repeated a number of times.
         </p>
        </li>
       </ol>
       <h2 id="toc_0">
        Frequentist probability
       </h2>
       <p>
        We can easily demonstrate frequentist probability using R, by simulating random
        <br/>
        events. For example, let's consider the easiest example, flipping a coin. Instead of
        <br/>
        <em>
         heads
        </em>
        and
        <em>
         tails
        </em>
        , we'll call them 1 and 0, since the computer likes them more.
       </p>
       <div class="highlight">
        <pre>
         set.seed
         <span class="p">
          (
         </span>
         <span class="m">
          1357
         </span>
         <span class="p">
          )
         </span>
         x
         <span class="o">
          &lt;-
         </span>
         sample
         <span class="p">
          (
         </span>
         c
         <span class="p">
          (
         </span>
         <span class="s">
          "tail"
         </span>
         <span class="p">
          ,
         </span>
         <span class="s">
          "head"
         </span>
         <span class="p">
          ),
         </span>
         size
         <span class="o">
          =
         </span>
         <span class="m">
          10000
         </span>
         <span class="p">
          ,
         </span>
         replace
         <span class="o">
          =
         </span>
         <span class="kc">
          TRUE
         </span>
         <span class="p">
          )
         </span>
         est_prob
         <span class="o">
          &lt;-
         </span>
         sum
         <span class="p">
          (
         </span>
         x
         <span class="o">
          ==
         </span>
         <span class="s">
          "head"
         </span>
         <span class="p">
          )
         </span>
         <span class="o">
          /
         </span>
         length
         <span class="p">
          (
         </span>
         x
         <span class="p">
          )
         </span>
         est_prob
        </pre>
       </div>
       <div class="highlight">
        <pre>
         <span class="c">
          ## [1] 0.4964
         </span>
        </pre>
       </div>
       <p>
        We see that, after 10000 experiments, the relative frequency of flipping heads is 0.5, as we would expect from a fair coin. But, how quickly could we have figured this out?
       </p>
       <div class="highlight">
        <pre>
         library
         <span class="p">
          (
         </span>
         ggplot2
         <span class="p">
          )
         </span>
         cum_prob
         <span class="o">
          &lt;-
         </span>
         cumsum
         <span class="p">
          (
         </span>
         x
         <span class="o">
          ==
         </span>
         <span class="s">
          'head'
         </span>
         <span class="p">
          )
         </span>
         <span class="o">
          /
         </span>
         <span class="p">
          (
         </span>
         <span class="m">
          1
         </span>
         <span class="o">
          :
         </span>
         length
         <span class="p">
          (
         </span>
         x
         <span class="p">
          ))
         </span>
         qplot
         <span class="p">
          (
         </span>
         <span class="m">
          1
         </span>
         <span class="o">
          :
         </span>
         length
         <span class="p">
          (
         </span>
         x
         <span class="p">
          ),
         </span>
         cum_prob
         <span class="p">
          ,
         </span>
         geom
         <span class="o">
          =
         </span>
         <span class="s">
          'line'
         </span>
         <span class="p">
          ,
         </span>
         ylim
         <span class="o">
          =
         </span>
         c
         <span class="p">
          (
         </span>
         <span class="m">
          0
         </span>
         <span class="p">
          ,
         </span>
         <span class="m">
          1
         </span>
         <span class="p">
          ),
         </span>
         xlab
         <span class="o">
          =
         </span>
         <span class="s">
          'Number of experiments'
         </span>
         <span class="p">
          ,
         </span>
         ylab
         <span class="o">
          =
         </span>
         <span class="s">
          'Relative frequency for a head'
         </span>
         <span class="p">
          )
         </span>
        </pre>
       </div>
       <p>
        <img alt="Silvrback blog image" src="https://silvrback.s3.amazonaws.com/uploads/41c4e4e5-c7c7-40ad-997b-0fe4fc1369c4/unnamed-chunk-3_large.png"/>
       </p>
       <p>
        It turns out that after about 1000 experiments, we're consistently within 1% of the
        <br/>
        true value.
       </p>
       <p>
        Look at the graph below. It is similar to the graph above, but in this one, we have performed 500 coin-tossing experiments. Do you think the coin is fair? What would be your guess about the probability of flipping heads?
       </p>
       <p>
        <img alt="Silvrback blog image" src="https://silvrback.s3.amazonaws.com/uploads/4b7fac2e-40bd-4413-801d-03b3dc05b139/unnamed-chunk-4_large.png"/>
       </p>
       <p>
        Two things are evident here. First, we need to experience quite a number of
        <br/>
        independent experiments to ascertain the probability of a particular event
        <br/>
        (fortunately, for many, we have collective experience). Second, for a small number of experiments, our estimates can bounce around quite a bit. Probability allows us to figure out how much they can bounce around and with what likelihood. This leads us to the idea of
        <strong>
         probability distributions
        </strong>
        .
       </p>
       <h2 id="toc_1">
        Sample spaces, events, and distributions
       </h2>
       <p>
        We'll continue the coin-tossing experiment as before. If we toss a fair coin 5 times, we expect to see 2 or 3 heads. But what if we see no heads? Or 5 heads? If we see either of these, we tend to think there's something wrong with the coin. Let's do an experiment to see how often a fair coin would result in 5 heads in 5 tosses. This is a random experiment, and so we can simulate this in R. We'll run 5000 experiments.
       </p>
       <div class="highlight">
        <pre>
         no_of_experiments
         <span class="o">
          &lt;-
         </span>
         <span class="m">
          5000
         </span>
         no_of_events
         <span class="o">
          &lt;-
         </span>
         rep
         <span class="p">
          (
         </span>
         <span class="m">
          0
         </span>
         <span class="p">
          ,
         </span>
         no_of_experiments
         <span class="p">
          )
         </span>
         <span class="c1">
          # Initializing the output vector
         </span>
         <span class="kr">
          for
         </span>
         <span class="p">
          (
         </span>
         i
         <span class="kr">
          in
         </span>
         <span class="m">
          1
         </span>
         <span class="o">
          :
         </span>
         no_of_experiments
         <span class="p">
          ){
         </span>
         x
         <span class="o">
          &lt;-
         </span>
         sample
         <span class="p">
          (
         </span>
         c
         <span class="p">
          (
         </span>
         <span class="s">
          'tail'
         </span>
         <span class="p">
          ,
         </span>
         <span class="s">
          'head'
         </span>
         <span class="p">
          ),
         </span>
         size
         <span class="o">
          =
         </span>
         <span class="m">
          5
         </span>
         <span class="p">
          ,
         </span>
         replace
         <span class="o">
          =
         </span>
         <span class="kc">
          TRUE
         </span>
         <span class="p">
          )
         </span>
         no_of_events
         <span class="p">
          [
         </span>
         i
         <span class="p">
          ]
         </span>
         <span class="o">
          &lt;-
         </span>
         sum
         <span class="p">
          (
         </span>
         x
         <span class="o">
          ==
         </span>
         <span class="s">
          'head'
         </span>
         <span class="p">
          )
         </span>
         <span class="p">
          }
         </span>
         prob_of_5
         <span class="o">
          &lt;-
         </span>
         mean
         <span class="p">
          (
         </span>
         no_of_events
         <span class="o">
          ==
         </span>
         <span class="m">
          5
         </span>
         <span class="p">
          )
         </span>
         prob_of_5
        </pre>
       </div>
       <div class="highlight">
        <pre>
         <span class="c">
          ## [1] 0.0328
         </span>
        </pre>
       </div>
       <p>
        Though small, there is still about a 3.3% chance of seeing 5 heads out of 5 tosses. Not 0!
       </p>
       <p>
        Out of 5 tosses, we can potentially see 0, 1, 2, 3, 4, or 5 heads. How often would we see each possible outcome? Before we go forward, let's establish some definitions:
       </p>
       <p>
        <strong>
         Sample space:
        </strong>
        The sample space of an experiment is the set of all possible outcomes for that experiment. This is often denoted by
        <em>
         S
        </em>
        or .
       </p>
       <p>
        <strong>
         Elementary event:
        </strong>
        An event which consists of a single outcome in the sample space.
       </p>
       <p>
        Here we will define our experiment as
        <em>
         number of heads in 5 tosses of a fair coin
        </em>
        . The sample space for this experiment is then
        <em>
         S
        </em>
        = {0,1,2,3,4,5}, with each of {0}, {1}, {2}, {3}, {4} and {5} being elementary events. First, let's see the probability associated with each of the elementary events.
       </p>
       <div class="highlight">
        <pre>
         rel_freq
         <span class="o">
          &lt;-
         </span>
         table
         <span class="p">
          (
         </span>
         no_of_events
         <span class="p">
          )
         </span>
         <span class="o">
          /
         </span>
         length
         <span class="p">
          (
         </span>
         no_of_events
         <span class="p">
          )
         </span>
         barplot
         <span class="p">
          (
         </span>
         rel_freq
         <span class="p">
          ,
         </span>
         ylab
         <span class="o">
          =
         </span>
         <span class="s">
          'Probability'
         </span>
         <span class="p">
          )
         </span>
        </pre>
       </div>
       <p>
        <img alt="Silvrback blog image" src="https://silvrback.s3.amazonaws.com/uploads/de260a23-1c66-4680-9fb9-1d533b85d45c/unnamed-chunk-6_large.png"/>
       </p>
       <div class="highlight">
        <pre>
         round
         <span class="p">
          (
         </span>
         rel_freq
         <span class="p">
          ,
         </span>
         <span class="m">
          3
         </span>
         <span class="p">
          )
         </span>
        </pre>
       </div>
       <div class="highlight">
        <pre>
         <span class="c">
          ## no_of_events
         </span>
         <span class="c">
          ##     0     1     2     3     4     5
         </span>
         <span class="c">
          ## 0.033 0.163 0.316 0.307 0.148 0.033
         </span>
        </pre>
       </div>
       <p>
        This gives us a fair idea about how often we'd see each possible outcome.
       </p>
       <p>
        This is a popular sample experiment, and you can think about real experiments for which this would be a good model. The theoretical distribution that this experiment gives rise to is the
        <a href="http://en.wikipedia.org/wiki/Binomial_distribution">
         binomial distribution
        </a>
        . R, being a statistics and probability oriented language, can simulate various standard theoretical distributions like the binomial distribution directly, as well as elicit probabilities directly. Let's see what the binomial distribution says about the probabilities of each elementary event in our sample space.
       </p>
       <div class="highlight">
        <pre>
         S
         <span class="o">
          &lt;-
         </span>
         c
         <span class="p">
          (
         </span>
         <span class="m">
          0
         </span>
         <span class="p">
          ,
         </span>
         <span class="m">
          1
         </span>
         <span class="p">
          ,
         </span>
         <span class="m">
          2
         </span>
         <span class="p">
          ,
         </span>
         <span class="m">
          3
         </span>
         <span class="p">
          ,
         </span>
         <span class="m">
          4
         </span>
         <span class="p">
          ,
         </span>
         <span class="m">
          5
         </span>
         <span class="p">
          )
         </span>
         binomial_prob
         <span class="o">
          &lt;-
         </span>
         dbinom
         <span class="p">
          (
         </span>
         S
         <span class="p">
          ,
         </span>
         size
         <span class="o">
          =
         </span>
         <span class="m">
          5
         </span>
         <span class="p">
          ,
         </span>
         prob
         <span class="o">
          =
         </span>
         <span class="m">
          0.5
         </span>
         <span class="p">
          )
         </span>
         <span class="c1">
          # dbinom gives the "probability mass function" for binomial distributions
         </span>
         out
         <span class="o">
          &lt;-
         </span>
         data.frame
         <span class="p">
          (
         </span>
         outcome
         <span class="o">
          =
         </span>
         S
         <span class="p">
          ,
         </span>
         probability
         <span class="o">
          =
         </span>
         binomial_prob
         <span class="p">
          ,
         </span>
         experimental_probability
         <span class="o">
          =
         </span>
         unclass
         <span class="p">
          (
         </span>
         rel_freq
         <span class="p">
          ),
         </span>
         proportional_error
         <span class="o">
          =
         </span>
         <span class="p">
          (
         </span>
         unclass
         <span class="p">
          (
         </span>
         rel_freq
         <span class="p">
          )
         </span>
         <span class="o">
          -
         </span>
         binomial_prob
         <span class="p">
          )
         </span>
         <span class="o">
          /
         </span>
         binomial_prob
         <span class="p">
          )
         </span>
         out
        </pre>
       </div>
       <div class="highlight">
        <pre>
         <span class="c">
          ##   outcome probability experimental_probability proportional_error
         </span>
         <span class="c">
          ## 0       0     0.03125                   0.0326            0.04320
         </span>
         <span class="c">
          ## 1       1     0.15625                   0.1632            0.04448
         </span>
         <span class="c">
          ## 2       2     0.31250                   0.3164            0.01248
         </span>
         <span class="c">
          ## 3       3     0.31250                   0.3068           -0.01824
         </span>
         <span class="c">
          ## 4       4     0.15625                   0.1482           -0.05152
         </span>
         <span class="c">
          ## 5       5     0.03125                   0.0328            0.04960
         </span>
        </pre>
       </div>
       <p>
        We see that our experimental probabilities are pretty close to the binomial probabilities. Why are they not exactly the same? The binomial distribution is conceptually based on an
        <em>
         infinite
        </em>
        number of experiments, and we have used only 5000 experiments. The discrepancy will go down as we increase the number of experiments. Also, notice that error is higher for the rarer outcomes (0 and 5) than for the more common outcomes (2 and 3). This makes sense since we'll see fewer occurences of the rarer outcomes, and so the corresponding estimates would be worse.
       </p>
       <p>
        <strong>
         Challenge:
        </strong>
        Increase the number of experiments and see how many experiments you need to get closer to the binomial probabilities. For a particular error rate, see how many more experiments you need to achieve it for Prob(0) compared to Prob(3).
       </p>
       <p>
        Both the experiment-based distribution and the binomial distribution are examples
        <br/>
        of
        <strong>
         probability distributions
        </strong>
        . The formal definition is
        <a href="http://en.wikipedia.org/wiki/Probability_distribution">
         a bit involved
        </a>
        , but conceptually, we might consider the following definition for sample spaces like the one we've been playing with -- sample spaces that have a finite number of elements.
       </p>
       <blockquote>
        <p>
         A probability distribution for a finite sample space is the set of probabilities
         <br/>
         associated with each elementary event in the sample space.
        </p>
       </blockquote>
       <p>
        There are corresponding definitions for infinite sample spaces (like, for example, the heights of all people in a city, or the distance a crossbow can fire an arrow), but that is a topic for another day (or today,
        <a href="http://en.wikipedia.org/wiki/Probability_distribution">
         if you like
        </a>
        ).
       </p>
       <p>
        There are many standard
        <a href="http://en.wikipedia.org/wiki/List_of_probability_distributions">
         probability distributions
        </a>
        that are used to model real-life events, including:
       </p>
       <ul>
        <li>
         <a href="http://en.wikipedia.org/wiki/Normal_distribution">
          Normal or Gaussian distribution
         </a>
         , or, if you prefer, the Bell Curve.
        </li>
        <li>
         <a href="http://en.wikipedia.org/wiki/Geometric_distribution">
          Geometric distribution
         </a>
         , or, number of failures till your first success.
        </li>
        <li>
         <a href="http://en.wikipedia.org/wiki/Pareto_distribution">
          Pareto distribution
         </a>
         , the basis of the "80-20 rule."
        </li>
       </ul>
       <h2 id="toc_2">
        Probability of Events
       </h2>
       <p>
        In general, events need not be elementary events. We can consider different kinds of
        <br/>
        events that are composed of elementary events. Since a lot of the
        <a href="http://en.wikipedia.org/wiki/History_of_probability">
         history
        </a>
        of Probablity Theory is entangled with gambling, or, "games of chance," let's consider rolling dice. In particular, let's roll two (fair) dice, like in the game of
        <a href="http://en.wikipedia.org/wiki/Craps">
         craps
        </a>
        . The full sample space
        <em>
         S
        </em>
        for this experiment has 36 elements, which we'll denote by the pair of numbers that we see from the first and second die:
       </p>
       <p>
        | (1,1) (1,2) (1,3) (1,4) (1,5) (1,6)
        <br/>
        | (2,1) (2,2) (2,3) (2,4) (2,5) (2,6)
        <br/>
        | (3,1) (3,2) (3,3) (3,4) (3,5) (3,6)
        <br/>
        | (4,1) (4,2) (4,3) (4,4) (4,5) (4,6)
        <br/>
        | (5,1) (5,2) (5,3) (5,4) (5,5) (5,6)
        <br/>
        | (6,1) (6,2) (6,3) (6,4) (6,5) (6,6)
       </p>
       <p>
        We can use R to create a dice-rolling function:
       </p>
       <div class="highlight">
        <pre>
         dice
         <span class="o">
          &lt;-
         </span>
         <span class="kr">
          function
         </span>
         <span class="p">
          (
         </span>
         no_of_rolls
         <span class="o">
          =
         </span>
         <span class="m">
          1
         </span>
         <span class="p">
          ){
         </span>
         x
         <span class="o">
          &lt;-
         </span>
         sample
         <span class="p">
          (
         </span>
         <span class="m">
          1
         </span>
         <span class="o">
          :
         </span>
         <span class="m">
          6
         </span>
         <span class="p">
          ,
         </span>
         size
         <span class="o">
          =
         </span>
         no_of_rolls
         <span class="p">
          ,
         </span>
         replace
         <span class="o">
          =
         </span>
         <span class="kc">
          TRUE
         </span>
         <span class="p">
          )
         </span>
         y
         <span class="o">
          &lt;-
         </span>
         sample
         <span class="p">
          (
         </span>
         <span class="m">
          1
         </span>
         <span class="o">
          :
         </span>
         <span class="m">
          6
         </span>
         <span class="p">
          ,
         </span>
         size
         <span class="o">
          =
         </span>
         no_of_rolls
         <span class="p">
          ,
         </span>
         replace
         <span class="o">
          =
         </span>
         <span class="kc">
          TRUE
         </span>
         <span class="p">
          )
         </span>
         <span class="kr">
          return
         </span>
         <span class="p">
          (
         </span>
         cbind
         <span class="p">
          (
         </span>
         x
         <span class="p">
          ,
         </span>
         y
         <span class="p">
          ))
         </span>
         <span class="p">
          }
         </span>
         dice
         <span class="p">
          ()
         </span>
        </pre>
       </div>
       <div class="highlight">
        <pre>
         <span class="c">
          ##      x y
         </span>
         <span class="c">
          ## [1,] 1 3
         </span>
        </pre>
       </div>
       <p>
        To compute the probability of different kinds of events, we have several building blocks that make our lives easier than actually counting out the probabilities of elementary events. Imagine if you had to find probabilites of different winning combinations in Powerball by enumeration!
       </p>
       <p>
        But first, some definitions:
       </p>
       <p>
        <strong>
         Disjoint events
        </strong>
        or
        <strong>
         mutually exclusive events
        </strong>
        are those that cannot occur at the same time.
       </p>
       <p>
        The
        <strong>
         complementary event
        </strong>
        of an event (call it A) is the event that A does not occur. For example, the complementary event of
        <em>
         number of heads is less than 2
        </em>
        is
        <em>
         number of heads is at least 2
        </em>
        .
       </p>
       <p>
        The first building block for getting probabilities of composite events is that the probability of seeing at least one of a set of disjoint events is the sum of the individual probabilities. If we want to figure out the probability that we get a 7 on rolling two dice, we have to add up the probabilities (1/36) of the elementary events that give that outcome, so {(1,6),(2,5),...,(6,1)}.
       </p>
       <p>
        More formally,
       </p>
       <blockquote>
        <p>
         If A and B are disjoint events, then Prob(A or B) = Prob(A) + Prob(B)
        </p>
       </blockquote>
       <p>
        The next building block is that the probability for the entire sample space is 1. This makes sense since, in an experiment, we necessarily have to see one of the outcomes in its sample space. Formally,
       </p>
       <blockquote>
        <p>
         Prob(entire sample space) = 1
        </p>
       </blockquote>
       <p>
        This leads to the probability of complementary events. If we look at an event {A} and its complement {not A}, we see that these two events are
        <em>
         disjoint
        </em>
        and the composite event {A or not A} is the entire sample space. So,
       </p>
       <blockquote>
        <p>
         Prob(not A) = 1 - Prob(A)
        </p>
       </blockquote>
       <p>
        Using these building blocks, we can compute the probabilities for any composite event once we know the probability distribution. For example, Prob(total is less than 5) = Prob(total is 2) + Prob(total is 3) + Prob(total is 4), and each of these can be computed from the probabilities of the corresponding elementary events. Similarly, Prob(total is not 7) = 1 - Prob(total is 7).
       </p>
       <p>
        Fortunately, one thing the computer is very good at is enumeration and computation.
        <br/>
        We can easily use simulation to generate the probability distribution for the totals.
       </p>
       <div class="highlight">
        <pre>
         rolls
         <span class="o">
          &lt;-
         </span>
         dice
         <span class="p">
          (
         </span>
         <span class="m">
          100000
         </span>
         <span class="p">
          )
         </span>
         <span class="c1">
          # 100000 experiments
         </span>
         totals
         <span class="o">
          &lt;-
         </span>
         rowSums
         <span class="p">
          (
         </span>
         rolls
         <span class="p">
          )
         </span>
         <span class="c1">
          # Total of the rolls
         </span>
         rel_freq
         <span class="o">
          &lt;-
         </span>
         table
         <span class="p">
          (
         </span>
         totals
         <span class="p">
          )
         </span>
         <span class="o">
          /
         </span>
         length
         <span class="p">
          (
         </span>
         totals
         <span class="p">
          )
         </span>
         barplot
         <span class="p">
          (
         </span>
         rel_freq
         <span class="p">
          ,
         </span>
         ylab
         <span class="o">
          =
         </span>
         <span class="s">
          'Relative frequency'
         </span>
         <span class="p">
          )
         </span>
        </pre>
       </div>
       <p>
        <img alt="Silvrback blog image" src="https://silvrback.s3.amazonaws.com/uploads/f1e95bfd-ee2b-435e-bcdb-61b7dec7c6c0/unnamed-chunk-9_large.png"/>
       </p>
       <div class="highlight">
        <pre>
         rel_freq
        </pre>
       </div>
       <div class="highlight">
        <pre>
         <span class="c">
          ## totals
         </span>
         <span class="c">
          ##       2       3       4       5       6       7       8       9      10
         </span>
         <span class="c">
          ## 0.02757 0.05470 0.08159 0.11241 0.13864 0.16726 0.13923 0.11193 0.08349
         </span>
         <span class="c">
          ##      11      12
         </span>
         <span class="c">
          ## 0.05564 0.02754
         </span>
        </pre>
       </div>
       <p>
        We can also find the theoretical distribution rather easily using R.
       </p>
       <div class="highlight">
        <pre>
         sums
         <span class="o">
          &lt;-
         </span>
         outer
         <span class="p">
          (
         </span>
         <span class="m">
          1
         </span>
         <span class="o">
          :
         </span>
         <span class="m">
          6
         </span>
         <span class="p">
          ,
         </span>
         <span class="m">
          1
         </span>
         <span class="o">
          :
         </span>
         <span class="m">
          6
         </span>
         <span class="p">
          ,
         </span>
         <span class="s">
          '+'
         </span>
         <span class="p">
          )
         </span>
         sums
        </pre>
       </div>
       <div class="highlight">
        <pre>
         <span class="c">
          ##      [,1] [,2] [,3] [,4] [,5] [,6]
         </span>
         <span class="c">
          ## [1,]    2    3    4    5    6    7
         </span>
         <span class="c">
          ## [2,]    3    4    5    6    7    8
         </span>
         <span class="c">
          ## [3,]    4    5    6    7    8    9
         </span>
         <span class="c">
          ## [4,]    5    6    7    8    9   10
         </span>
         <span class="c">
          ## [5,]    6    7    8    9   10   11
         </span>
         <span class="c">
          ## [6,]    7    8    9   10   11   12
         </span>
        </pre>
       </div>
       <p>
        This gives the totals for all 36 elementary events as a matrix. Since each elementary
        <br/>
        event is equally likely with fair dice, each element in the matrix has probability 1/36 to occur. So to find the probability of the total being 7, we just find the number of 7's in the matrix and divide by 36.
       </p>
       <div class="highlight">
        <pre>
         prob_7
         <span class="o">
          &lt;-
         </span>
         sum
         <span class="p">
          (
         </span>
         sums
         <span class="o">
          ==
         </span>
         <span class="m">
          7
         </span>
         <span class="p">
          )
         </span>
         <span class="o">
          /
         </span>
         <span class="m">
          36
         </span>
         prob_7
        </pre>
       </div>
       <div class="highlight">
        <pre>
         <span class="c">
          ## [1] 0.1667
         </span>
        </pre>
       </div>
       <p>
        We can also find the probability of not getting a 7 using the formula Prob(not 7) = 1-Prob(7). Using the computer, we can also verify this from the matrix above.
       </p>
       <div class="highlight">
        <pre>
         prob_not7_1
         <span class="o">
          &lt;-
         </span>
         <span class="m">
          1
         </span>
         <span class="o">
          -
         </span>
         prob_7
prob_not7_2
         <span class="o">
          &lt;-
         </span>
         sum
         <span class="p">
          (
         </span>
         sums
         <span class="o">
          !=
         </span>
         <span class="m">
          7
         </span>
         <span class="p">
          )
         </span>
         <span class="o">
          /
         </span>
         <span class="m">
          36
         </span>
         paste
         <span class="p">
          (
         </span>
         <span class="s">
          'Probability of not getting a 7 is'
         </span>
         <span class="p">
          ,
         </span>
         prob_not7_1
         <span class="p">
          )
         </span>
        </pre>
       </div>
       <div class="highlight">
        <pre>
         <span class="c">
          ## [1] "Probability of not getting a 7 is 0.833333333333333"
         </span>
        </pre>
       </div>
       <div class="highlight">
        <pre>
         prob_not7_1
         <span class="o">
          ==
         </span>
         prob_not7_2
        </pre>
       </div>
       <div class="highlight">
        <pre>
         <span class="c">
          ## [1] TRUE
         </span>
        </pre>
       </div>
       <p>
        <strong>
         Challenge:
        </strong>
        Find the probabilities of other events that would be of interest to a craps
        <br/>
        player or players of other games with two dice.
       </p>
       <h2 id="toc_3">
        Conclusions
       </h2>
       <p>
        Probability plays a central role in many events in our lives. Understanding what probability is, how it is ascertained, and how to figure out the probabilities of different events aids our ability to make sense of many phenomena in our lives, including some of the things that appear in newspaper and TV reports. How probability affects our lives is, in itself, fascinating, and there are several elegant and comprehensible books available for further reading. A few personal favorites are listed below:
       </p>
       <ul>
        <li>
         <a href="http://amzn.to/1mZqY3I">
          The Drunkard's Walk: How Randomness Rules our Lives, by L. Mlodinow
         </a>
        </li>
        <li>
         <a href="http://amzn.to/1tdoDar">
          The Black Swan: The Impact of the Highly Improbable, by N. N. Taleb
         </a>
        </li>
        <li>
         <a href="http://amzn.to/1tdoN1y">
          Fooled by Randomness: The Hidden Role of Chance in Life and in the Markets, by N. N. Taleb
         </a>
        </li>
        <li>
         <a href="http://amzn.to/1oHIKxU">
          The Signal and the Noise: Why So Many Predictions Fail - But Some Don't, by N. Silver
         </a>
        </li>
       </ul>
       <p>
        If you found this post useful, go to the
        <a href="https://districtdatalabs.silvrback.com/">
         blog home page
        </a>
        and click the
        <em>
         Subscribe
        </em>
        button to get an email when we publish future posts.
       </p>
      </div>
      <div class="clear">
      </div>
      <p class="kaia_name_and_tag">
       <a href="https://twitter.com/webbedfeet" target="_blank">
        Abhijit Dasgupta
       </a>
      </p>
      <div class="entry_meta_area">
       <p class="kaia_actions">
        <span class="entry_date">
         August 18, 2014
        </span>
        <a class="comment_link fa fa-comment" href="#comment_drawer_top" title="Comment">
        </a>
        <a class="comment_link comment_link_text" data-disqus-identifier="silvrback-districtdatalabs-7293" href="#disqus_thread">
        </a>
        <span class="share_social">
         <a data-lang="en" href="http://www.twitter.com/share?url=http://districtdatalabs.silvrback.com/intro-to-probability-with-r&amp;text=What Are the Odds? by @districtdatalab" onclick="return !window.open(this.href, 'Twitter', 'width=640,height=300')" title="Share this post on Twitter">
          <i class="fa fa-twitter">
          </i>
         </a>
         <a href="http://www.facebook.com/sharer/sharer.php?u=http://districtdatalabs.silvrback.com/intro-to-probability-with-r" onclick="return !window.open(this.href, 'Facebook', 'width=640,height=300')" target="_blank" title="Share this post on Facebook">
          <i class="fa fa-facebook">
          </i>
         </a>
         <a href="http://plus.google.com/share?url=http://districtdatalabs.silvrback.com/intro-to-probability-with-r" onclick="return !window.open(this.href, 'Google +', 'width=640,height=300')" target="_blank" title="Share this post on Google +">
          <i class="last_link fa fa-google-plus">
          </i>
         </a>
         <script>
          !function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="https://platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");
         </script>
        </span>
       </p>
       <div class="posted_in">
        <p>
         Posted in:
         <a href="/tags/probability">
          probability
         </a>
         <a href="/tags/r">
          r
         </a>
        </p>
       </div>
      </div>
     </div>
    </div>
   </div>
   <div style="position:relative; z-index:100">
    <div class="kaia_page kaia_footer_section">
     <div class="align_center read_next">
      <h2 class="read_next_btn">
      </h2>
     </div>
     <div class="bottom_menu_links align_center header_background_text">
      <ul>
       <li>
        <a href="/">
         Blog Home
        </a>
       </li>
       <li>
        <a href="/archive">
         Archive
        </a>
       </li>
       <li>
        <a href="http://districtdatalabs.com" target="_blank">
         District Data Labs
        </a>
       </li>
       <li>
        <a href="/feed">
         RSS
        </a>
       </li>
      </ul>
     </div>
    </div>
    <div class="kaia_footer">
     <div class="kaia_page">
      <div class="bottom_footer_area">
       <p class="align_center header_background_text">
        You can also find me on
        <a class="personal_social_links" href="https://twitter.com/districtdatalab">
         Twitter
        </a>
        and
        <a class="personal_social_links" href="https://github.com/DistrictDataLabs">
         GitHub
        </a>
        .
        <br/>
         2015
        <a href="https://districtdatalabs.silvrback.com">
         District Data Labs
        </a>
        <br/>
        <br/>
        <a href="https://www.silvrback.com" title="Proudly Published With Silvrback Blog">
         <img alt="Gorilla-white" src="/assets/gorilla-white-cc82aa5e7ecc20a1813b75fdc962458f.svg" style="width:40px; margin-top:20px;"/>
        </a>
       </p>
      </div>
     </div>
    </div>
   </div>
  </article>
  <div class="comments" id="comment_drawer_top">
   <div class="article_body">
    <div class="kaia_page">
     <p class="comments_x">
      <a class="fa fa-times comments_close" style="color:#000">
      </a>
     </p>
     <div class="article_padding comments_inner">
      <div class="align_center disqus">
       <div id="disqus_thread" style="width:94%; border:1px solid #eee; padding:20px;">
       </div>
      </div>
      <script type="text/javascript">
       /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
    var disqus_shortname = "districtdatalabs"; // required: replace example with your forum shortname
    var disqus_identifier = "silvrback-districtdatalabs-7293";

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
      </script>
      <noscript>
       Please enable JavaScript to view the
       <a href="http://disqus.com/?ref_noscript">
        comments powered by Disqus.
       </a>
      </noscript>
      <a class="dsq-brlink" href="http://disqus.com">
       comments powered by
       <span class="logo-disqus">
        Disqus
       </span>
      </a>
     </div>
    </div>
   </div>
  </div>
  <div class="clear">
  </div>
  <script type="text/javascript">
   /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
    var disqus_shortname = "districtdatalabs";; // required: replace example with your forum shortname

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function () {
    var s = document.createElement('script'); s.async = true;
    s.type = 'text/javascript';
    s.src = 'https://' + disqus_shortname + '.disqus.com/count.js';
    (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
    }());
  </script>
  <script type="text/javascript">
   $(document).ready(function() {
    //need to fetch the read next btn via js to avoid the cache. Convert to utc. 
    $.getScript("/home/read_next?date=2014-08-18 12:34:00 UTC&amp;article_id=7293");
    $('.all_external_links').find('a[href^="http://"], a[href^="https://"]').attr('target', '_blank');

  });
  </script>
  <script type="text/javascript">
   var _sf_async_config = { uid: 35610, domain: 'silvrback.com', useCanonical: true };
      (function() {
        function loadChartbeat() {
          window._sf_endpt = (new Date()).getTime();
          var e = document.createElement('script');
          e.setAttribute('language', 'javascript');
          e.setAttribute('type', 'text/javascript');
          e.setAttribute('src','//static.chartbeat.com/js/chartbeat.js');
          document.body.appendChild(e);
        };
        var oldonload = window.onload;
        window.onload = (typeof window.onload != 'function') ?
          loadChartbeat : function() { oldonload(); loadChartbeat(); };
      })();
  </script>
  <script type="text/javascript">
   if (!NREUMQ.f) { NREUMQ.f=function() {
NREUMQ.push(["load",new Date().getTime()]);
var e=document.createElement("script");
e.type="text/javascript";
e.src=(("http:"===document.location.protocol)?"http:":"https:") + "//" +
  "js-agent.newrelic.com/nr-100.js";
document.body.appendChild(e);
if(NREUMQ.a)NREUMQ.a();
};
NREUMQ.a=window.onload;window.onload=NREUMQ.f;
};
NREUMQ.push(["nrfj","bam.nr-data.net","9a6a49e4f0","2607212","JwtXQEMLWF1SRU5aWAkBFkdZC0M=",5,7,new Date().getTime(),"","","","",""]);
  </script>
 </body>
</html>