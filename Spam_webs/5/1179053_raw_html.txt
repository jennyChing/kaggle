<!DOCTYPE html>
<html lang="en-US">
 <!-- load up the fonts ASAP -->
 <head>
  <link href="http://brassblogs.com/wp-content/themes/shelly2012/fonts/fonts.css" media="all" rel="stylesheet" type="text/css"/>
  <meta charset="utf-8"/>
  <meta content="nonprofit website design, web design, design firm, WordPress, design and development, Granby, Simsbury, Hartford, Avon, Farmington" name="keywords"/>
  <meta content="Brass Blogs Web Design is a creative web design and development company that offers solutions to problems in the Hartford, CT area and throughout the world." name="description"/>
  <meta content="width=device-width" name="viewport"/>
  <title>
   Auto-Create Page associated Widgets | Shelly Cole
  </title>
  <link href="http://gmpg.org/xfn/11" rel="profile"/>
  <link href="http://brassblogs.com/wp-content/themes/shelly2012/style.css" media="all" rel="stylesheet" type="text/css"/>
  <link href="http://brassblogs.com/xmlrpc.php" rel="pingback"/>
  <link href="http://brassblogs.com/wp-content/themes/shelly2012/images/apple-touch-icon.png" rel="apple-touch-icon"/>
  <link href="http://brassblogs.com/feed" rel="alternate" title="Shelly Cole  Feed" type="application/rss+xml"/>
  <link href="http://brassblogs.com/comments/feed" rel="alternate" title="Shelly Cole  Comments Feed" type="application/rss+xml"/>
  <link href="http://brassblogs.com/tutorials/auto-create-page-associated-widgets/feed" rel="alternate" title="Shelly Cole  Auto-Create Page associated Widgets Comments Feed" type="application/rss+xml"/>
  <link href="http://brassblogs.com/wp-content/plugins/jquery-expandable-comments/css/?ver=4.0.5" id="bb_toggle_comments-css" media="all" rel="stylesheet" type="text/css"/>
  <link href="http://brassblogs.com/wp-content/plugins/fancy-box/jquery.fancybox.css?ver=1.2.6" id="jquery.fancybox-css" media="all" rel="stylesheet" type="text/css"/>
  <link href="http://brassblogs.com/wp-content/plugins/fv-code-highlighter/public/css/fvch-styles.css?ver=1.1" id="fvch-styles-css" media="all" rel="stylesheet" type="text/css"/>
  <link href="http://brassblogs.com/wp-content/plugins/better-related/css/better-related.css?ver=0.3.5" id="better-related-frontend-css" media="all" rel="stylesheet" type="text/css"/>
  <script src="http://brassblogs.com/wp-includes/js/jquery/jquery.js?ver=1.11.1" type="text/javascript">
  </script>
  <script src="http://brassblogs.com/wp-includes/js/jquery/jquery-migrate.min.js?ver=1.2.1" type="text/javascript">
  </script>
  <script src="http://brassblogs.com/wp-content/themes/shelly2012/scripts/jqueryui.js?ver=4.0.5" type="text/javascript">
  </script>
  <script src="http://brassblogs.com/wp-content/themes/shelly2012/scripts/global.js?ver=4.0.5" type="text/javascript">
  </script>
  <script src="http://brassblogs.com/wp-content/plugins/fancy-box/jquery.fancybox.js?ver=1.2.6" type="text/javascript">
  </script>
  <script src="http://brassblogs.com/wp-content/plugins/fancy-box/jquery.easing.js?ver=1.3" type="text/javascript">
  </script>
  <link href="http://brassblogs.com/blog/defining-my-place-part-v-modesty-is-a-virtue" rel="prev" title="Defining My Place, Part V: Modesty is a Virtue"/>
  <link href="http://brassblogs.com/tutorials/setting-up-virtual-hosts-on-mamp" rel="next" title="Setting Up Virtual Hosts on MAMP"/>
  <link href="http://brassblogs.com/tutorials/auto-create-page-associated-widgets" rel="canonical"/>
  <link href="http://brassblogs.com/?p=165" rel="shortlink"/>
  <link href="http://brassblogs.com/wp-content/plugins/Shelly/tutorial-styles.css" media="all" rel="stylesheet" type="text/css"/>
  <script type="text/javascript">
   jQuery(document).ready(function($){
    var select = $('a[href$=".bmp"],a[href$=".gif"],a[href$=".jpg"],a[href$=".jpeg"],a[href$=".png"],a[href$=".BMP"],a[href$=".GIF"],a[href$=".JPG"],a[href$=".JPEG"],a[href$=".PNG"]');
    select.attr('rel', 'fancybox');
    select.fancybox();
  });
  </script>
  <style type="text/css">
   .fvch-codeblock {
                background: #fff;
            }
            .fvch-codeblock pre, .fvch-line-numbers pre {
                background: #fff;
                line-height: 1.3em;
                font-family: 'Monaco', 'Courier New', Courier, monospace;
                font-size: 11px;
            }
            .fvch-line-numbers pre {
                background: #e2e2e2;
            }
  </style>
  <meta content="FV Code Highlighter" name="generator"/>
  <script type="text/javascript">
   var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-3911861-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
  </script>
 </head>
 <body class="single single-post postid-165 single-format-standard">
  <div id="top_shadow">
   <div class="shadow_right">
    <!-- hackishness-->
   </div>
   <div class="shadow_left">
    <!-- hackishness-->
   </div>
   <!--/top_shadow-->
  </div>
  <div id="bottom_shadow">
   <div class="shadow_right">
    <!-- hackishness-->
   </div>
   <div class="shadow_left">
    <!-- hackishness-->
   </div>
   <div class="shadow_middle">
    <!-- hackishness-->
   </div>
   <!--/top_shadow-->
  </div>
  <div class="clear" id="header">
   <div class="shadow_right">
    <!-- hackishness-->
   </div>
   <div class="shadow_left">
    <!-- hackishness-->
   </div>
   <div class="inner">
    <h1>
     Brass Blogs: Web Design &amp; Development
    </h1>
    <div class="menu-main-navigation-container">
     <ul class="menu" id="menu-main-navigation">
      <li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-293" id="menu-item-293">
       <a href="http://brassblogs.com/about">
        About
       </a>
      </li>
      <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-406" id="menu-item-406">
       <a href="http://brassblogs.com/portfolio">
        Portfolio
       </a>
      </li>
      <li class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-294" id="menu-item-294">
       <a href="http://brassblogs.com/category/blog">
        Blog
       </a>
      </li>
      <li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-292" id="menu-item-292">
       <a href="http://brassblogs.com/contact">
        Contact
       </a>
      </li>
      <li class="searchform">
       <form action="http://brassblogs.com/" id="searchform" method="get">
        <div>
         <input class="default-value" name="s" type="text" value='type a search term and hit "enter"'/>
        </div>
       </form>
      </li>
     </ul>
    </div>
    <div class="header_widgets clear">
     <div class="widget widget_social clear" id="social-3">
      <a class="google" href="https://plus.google.com/105895429865637701293" rel="publisher">
       <span>
        Google+
       </span>
      </a>
      <a class="facebook" href="http://facebook.com/brassblogs">
       <span>
        Facebook
       </span>
      </a>
      <a class="twitter" href="http://twitter.com/brassblogs">
       <span>
        Twitter
       </span>
      </a>
      <a class="linkedin" href="http://linkedin.com/in/brassblogs">
       <span>
        LinkedIn
       </span>
      </a>
      <a class="rss" href="http://feeds.feedburner.com/brassblogs">
       <span>
        RSS Feed
       </span>
      </a>
     </div>
    </div>
    <div class="left" id="logo">
     <a href="http://brassblogs.com">
      <h5>
       S
       <span>
        C
       </span>
      </h5>
      <h6>
       Shelly
       <span>
        Cole
       </span>
      </h6>
     </a>
     <!--/logo-->
    </div>
    <!--/inner-->
   </div>
   <!--/header-->
  </div>
  <div id="border">
   <!-- hackishness-->
  </div>
  <div class="clear" id="main">
   <div class="clear" id="outer">
    <div class="inner">
     <div id="sidebar">
      <div class="widget widget_related_posts clear" id="related_posts-3">
       <h4>
        Related Posts
       </h4>
       <ul>
        <li>
         <a href="http://brassblogs.com/tutorials/client-instructions-through-the-wordpress-admin">
          Client instructions through the WordPress admin
         </a>
        </li>
        <li>
         <a href="http://brassblogs.com/tutorials/better-text-widget">
          Better Text Widget
         </a>
        </li>
        <li>
         <a href="http://brassblogs.com/tutorials/setting-up-virtual-hosts-on-mamp">
          Setting Up Virtual Hosts on MAMP
         </a>
        </li>
        <li>
         <a href="http://brassblogs.com/tutorials/allow-end-users-to-add-images-to-your-gallery">
          Allow End Users to Add Images to Your Gallery
         </a>
        </li>
        <li>
         <a href="http://brassblogs.com/blog/editing-easy-populate-to-recognize-extra-description-fields">
          Editing Easy Populate to recognize extra description fields
         </a>
        </li>
       </ul>
      </div>
      <div class="widget widget_text clear" id="text-5">
       <a href="http://premium.wpmudev.org?ref=doodlebee-214561">
        <img alt="WPMU DEV - The WordPress Experts" src="http://premium.wpmudev.org/wp-content/uploads/2012/05/200x200ad.png" title="Check out WPMU DEV - The WordPress Experts"/>
       </a>
      </div>
      <div class="widget widget_categories clear" id="categories-5">
       <h4>
        Categories
       </h4>
       <ul>
        <li class="cat-item cat-item-1">
         <a href="http://brassblogs.com/category/blog">
          Blog
         </a>
        </li>
        <li class="cat-item cat-item-15">
         <a href="http://brassblogs.com/category/business">
          Business
         </a>
        </li>
        <li class="cat-item cat-item-51">
         <a href="http://brassblogs.com/category/cms-platforms">
          CMS Platforms
         </a>
        </li>
        <li class="cat-item cat-item-13">
         <a href="http://brassblogs.com/category/css">
          CSS
         </a>
        </li>
        <li class="cat-item cat-item-52">
         <a href="http://brassblogs.com/category/ecommerce-platforms">
          eCommerce Platforms
         </a>
        </li>
        <li class="cat-item cat-item-44">
         <a href="http://brassblogs.com/category/freebies">
          Freebies
         </a>
        </li>
        <li class="cat-item cat-item-14">
         <a href="http://brassblogs.com/category/tidbits">
          Tidbits
         </a>
        </li>
        <li class="cat-item cat-item-10">
         <a href="http://brassblogs.com/category/tutorials">
          Tutorials
         </a>
        </li>
        <li class="cat-item cat-item-25">
         <a href="http://brassblogs.com/category/writing">
          Writing
         </a>
        </li>
       </ul>
      </div>
      <!--/sidebar-->
     </div>
     <div id="content">
      <div class="post-165 post type-post status-publish format-standard hentry category-tidbits category-tutorials clear" id="post-165">
       <h2 class="entry-title">
        <a href="http://brassblogs.com/tutorials/auto-create-page-associated-widgets" rel="bookmark" title="Permalink to Auto-Create Page associated Widgets">
         Auto-Create Page associated Widgets
        </a>
       </h2>
       <div class="entry-meta">
        July 16, 2009
        <!--/entry-meta-->
       </div>
       <div class="entry clear">
        <p>
         So heres the idea: Ive had many clients in the past who wanted to have page-specific widgetized sidebars. Now,
         <a href="http://brassblogs.com/blog/get-the-most-out-of-your-widgetized-sidebar">
          Ive covered this before
         </a>
         , but one thing has always gotten me: the fact that you have to write a lot of bloated code to get it to work.  It
         <em>
          seems
         </em>
         like you should be able to pull the post slugs into some kind of array, and have the widgets auto-create themselves with a small bit of code, rather than adding more code every time you add a new page. Ive com
         <em>
          really
         </em>
         close to pulling this off in the past, but  as the saying goes  no cigar.
        </p>
        <p>
         Until now
         <img alt=":)" class="wp-smiley" src="http://brassblogs.com/wp-includes/images/smilies/icon_smile.gif"/>
         <br/>
         <span id="more-165">
         </span>
         <br/>
         My initial code was the following:
        </p>
        <p>
         <code>
          $pages = get_pages();
          <br/>
          $num = count($pages);
          <br/>
         </code>
         <code>
          <br/>
          if ( function_exists('register_sidebar') ) {
          <br/>
          register_sidebars($num, array(
          <br/>
          'name'=&gt; 'Sidebar %d',
          <br/>
          'before_widget' =&gt; '&lt;div id="%1$s" class="widget %2$s"&gt;',
          <br/>
          'after_widget' =&gt; '&lt;/div&gt;',
          <br/>
          'before_title' =&gt; '&lt;h3&gt;',
          <br/>
          'after_title' =&gt; '&lt;/h3&gt;',
          <br/>
          ));
          <br/>
          }
          <br/>
         </code>
        </p>
        <p>
         This is where I had partial success.  The above would, indeed, create a new widget section for every single Page Id created in my WordPress.  The problem? each section was named Sidebar [number].  What I wanted was Sidebar [pagename] so I would know exactly which sidebar was associated with what Page.  However, when I tried to edit the code to make that happen, I was stymied by a fatal error appearing on the front end of the site.  The page names did, indeed show up as I wanted them to on the back end  but whats the point if the front end doesnt work? So it looked like the code above was as close as I was going to get.
        </p>
        <p>
         In steps
         <a href="http://www.jupitercow.com/">
          jcow
         </a>
         over at the WordPress forums.  Now  keep in mind I havent
         <em>
          completely
         </em>
         tested this, but initial trials show lots of joy
         <img alt=":)" class="wp-smiley" src="http://brassblogs.com/wp-includes/images/smilies/icon_smile.gif"/>
         Basically, the idea is to wrap my function into a function, like so:
        </p>
        <p>
         <code>
          <br/>
          $before_widget = '&lt;div id="%1$s" class="widget %2$s"&gt;';
          <br/>
          $after_widget =  '&lt;/div&gt;';
          <br/>
          $before_title = '&lt;h3&gt;';
          <br/>
          $after_title = '&lt;/h3&gt;';
          <br/>
         </code>
         <code>
          <br/>
          if (function_exists('register_sidebar'))
          <br/>
          register_sidebar(array(
          <br/>
          'name' =&gt; 'Home Sidebar',
          <br/>
          'before_widget' =&gt; $before_widget,
          <br/>
          'after_widget' =&gt; $after_widget,
          <br/>
          'before_title' =&gt; $before_title,
          <br/>
          'after_title' =&gt; $after_title
          <br/>
          ));
         </code>
        </p>
        <p>
         <code>
          createPageSidebars();
         </code>
        </p>
        <p>
         <code>
          function createPageSidebars() {
          <br/>
          global $before_widget, $after_widget, $before_title, $after_title;
          <br/>
          if ( function_exists('register_sidebar') ) {
          <br/>
          $pages = get_pages();
          <br/>
          foreach ($pages as $page) {
          <br/>
          register_sidebar(array(
          <br/>
          'name' =&gt; $page-&gt;post_title .' Sidebar',
          <br/>
          'before_widget' =&gt; $before_widget,
          <br/>
          'after_widget' =&gt; $after_widget,
          <br/>
          'before_title' =&gt; $before_title,
          <br/>
          'after_title' =&gt; $after_title));
          <br/>
          }
          <br/>
          }
          <br/>
          }
          <br/>
         </code>
        </p>
        <p>
         Now my dream has come true (I know, slightly pathetic, right?): I now have auto-created widgetized sidebars in the back end, named properly and ready go to.  But how do I use them to display the right stuff on the front end, without using all of those if/else statements?  That part is still manual.  Not so!
        </p>
        <p>
         <code>
          &lt;div id="sidebar"&gt;
         </code>
         <br/>
         <code>
          <br/>
          &lt;?php // Dynamic Sidebars
          <br/>
          if (is_home() &amp;&amp; function_exists('dynamic_sidebar') &amp;&amp; dynamic_sidebar('Home Sidebar')) :
         </code>
        </p>
        <p>
         <code>
          elseif (function_exists('dynamic_sidebar') &amp;&amp; dynamic_sidebar($wp_query-&gt;post-&gt;post_title.' Sidebar')) :
         </code>
        </p>
        <p>
         <code>
          else : // If there is no dynamic sidebar for this page ?&gt;
          <br/>
          put in the default sidebar code here for the display of pages that have no widgetied sidebar association
          <br/>
          &lt;?php endif; ?&gt;
         </code>
        </p>
        <p>
         <code>
          <!--/sidebar-->
          <br/>
          &lt;/div&gt;
         </code>
        </p>
        <p>
         Total awesomeness!
        </p>
        <p>
         Now, for the warning part. One thing Ive noticed about Widgetized sidebars is that if you rearrange them, then the wrong information gets pulled into the wrong page.  For example, I had one client that I used the
         <a href="http://brassblogs.com/blog/get-the-most-out-of-your-widgetized-sidebar">
          old method
         </a>
         with, and when she deleted a Page, or removed (or moved) an if/else statement, then everything got REALLY screwed up and she had to redo her widgets all over again.  Not really that bad  except for the text widgets, which meant she had to rewrite a bunch of stuff.  So right now, Im still testing what happens if you use this method and add or remove Pages. So far, for the
         <em>
          initial
         </em>
         creation of a site, this works a treat.  But if you add or remove Pages, it could mess things up.  I havent checked that part yet  and Im going to do that later today and will report back.  But in the meantime, if you try this, be sure to back up your database and files (or record what your widgets are so you can manually revert them if this doesnt work) before you try this.
        </p>
        <p>
         I will come back and tell you how it went.  But it was so cool to find out how to do it, I had to share immediately!
        </p>
        <p>
         <small>
          <em>
           Update: it was, indeed, as I thought.  You can auto-create, no problem.  But deleting is another thing.  If you delete a Page, then any Pages created after that, their sidebars will shift up a notch to replace the deleted one.  HmmI think now well have to figure out how to unset a sidebar when the Page is deleted so the shift doesnt happen.  Ive also found that re-creating the Page (with the same name) will make the sidebars shift back into place as if nothing happened. unfortunately, saving the Page as Draft or Pending Review causes the sidebars to shift again. So I guess a little work is needed at the moment to perfect this!
          </em>
         </small>
        </p>
        <!--/entry-content-->
       </div>
       <div class="entry-footer">
        <a href="http://brassblogs.com/tutorials/auto-create-page-associated-widgets#comments" title="Comment on Auto-Create Page associated Widgets">
         <span class="comment">
          1
         </span>
        </a>
        <a class="permalink" href="http://brassblogs.com/tutorials/auto-create-page-associated-widgets">
        </a>
        <!-- /entry-footer -->
       </div>
       <!--/post-165-->
      </div>
      <div class="prev_next_nav">
       <span class="right">
        <a href="http://brassblogs.com/tutorials/setting-up-virtual-hosts-on-mamp" rel="next">
         Newer Post 
        </a>
       </span>
       <span class="left">
        <a href="http://brassblogs.com/tutorials/creating-wordpress-themesusing-custom-fields" rel="prev">
          Older Post
        </a>
       </span>
      </div>
      <a name="comments">
      </a>
      <div class="comment-respond" id="respond">
       <h3 class="comment-reply-title" id="reply-title">
        Have your say:
        <small>
         <a href="/tutorials/auto-create-page-associated-widgets#respond" id="cancel-comment-reply-link" rel="nofollow" style="display:none;">
          [Cancel reply]
         </a>
        </small>
       </h3>
       <form action="http://brassblogs.com/wp-comments-post.php" class="comment-form" id="commentpost" method="post">
        <p>
         <input id="author" name="author" size="30" type="text" value=""/>
         <label for="author">
          Name
          <span class="req">
           *
          </span>
         </label>
        </p>
        <p>
         <input id="email" name="email" size="30" type="text" value=""/>
         <label for="email">
          Email
          <span class="req">
           *
          </span>
         </label>
        </p>
        <p>
         <input id="url" name="url" size="30" type="text" value=""/>
         <label for="url">
          Website
         </label>
        </p>
        <textarea aria-required="true" cols="30" id="comment" name="comment" rows="10">
        </textarea>
        <p class="form-submit">
         <input id="submit" name="submit" type="submit" value="Post Comment"/>
         <input id="comment_post_ID" name="comment_post_ID" type="hidden" value="165"/>
         <input id="comment_parent" name="comment_parent" type="hidden" value="0"/>
        </p>
        <p style="display: none;">
         <input id="akismet_comment_nonce" name="akismet_comment_nonce" type="hidden" value="2b4b02b400"/>
        </p>
        <p style="display: none;">
         <input id="ak_js" name="ak_js" type="hidden" value="197"/>
        </p>
       </form>
      </div>
      <!-- #respond -->
      <!--/content-->
     </div>
     <!--/inner-->
    </div>
    <!--/outer-->
   </div>
   <!--/main-->
  </div>
  <div class="clear" id="footer">
   <div class="inner">
    <div class="menu-footer-navigation-container">
     <ul class="menu" id="menu-footer-navigation">
      <li class="first menu-item menu-item-type-post_type menu-item-object-page menu-item-333" id="menu-item-333">
       <a href="http://brassblogs.com/">
        Home
       </a>
      </li>
      <li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-334" id="menu-item-334">
       <a href="http://brassblogs.com/about">
        About
       </a>
      </li>
      <li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-335" id="menu-item-335">
       <a href="http://brassblogs.com/donate">
        Donate
       </a>
      </li>
      <li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-336" id="menu-item-336">
       <a href="http://brassblogs.com/privacy">
        Privacy
       </a>
      </li>
      <li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-338" id="menu-item-338">
       <a href="http://brassblogs.com/contact">
        Contact
       </a>
      </li>
      <li class="searchform">
       <form action="http://brassblogs.com/" id="searchform" method="get">
        <div>
         <input class="default-value" name="s" type="text" value='type a search term and hit "enter"'/>
        </div>
       </form>
      </li>
     </ul>
    </div>
    <span class="right">
     <p>
      All images and content Copyright 2001 - 2015 Brass Blogs Web Design, LLC.  All rights reserved.
     </p>
     <p>
      Brass Blogs Web Design    P.O. Box 46    Weatogue, CT 06089    860.294.9830
     </p>
    </span>
    <!--/inner-->
   </div>
   <!--/footer-->
  </div>
  <script src="http://brassblogs.com/wp-content/plugins/akismet/_inc/form.js?ver=3.0.3" type="text/javascript">
  </script>
  <script src="http://brassblogs.com/wp-content/plugins/jquery-expandable-comments/js/jquery-easing.1.3.js?ver=4.0.5" type="text/javascript">
  </script>
  <script type="text/javascript">
   /* &lt;![CDATA[ */
var bb_toggle_vars = {"hide":"Hide Replies","show":"Show Replies","toggle_down":"slow","toggle_up":"fast","easing":"swing"};
/* ]]&gt; */
  </script>
  <script src="http://brassblogs.com/wp-content/plugins/jquery-expandable-comments/js/bb-toggle-kids.js?ver=4.0.5" type="text/javascript">
  </script>
 </body>
</html>