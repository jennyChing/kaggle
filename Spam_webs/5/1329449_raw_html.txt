<!DOCTYPE html>
<!--[if lt IE 9]&gt;&lt;html class="no-js lte-ie8" id="viget-com" lang="en" prefix="og: http://ogp.me/ns#"&gt;&lt;![endif]-->
<!--[if gt IE 8]&gt;&lt;!-->
<html class="no-js" id="viget-com" lang="en" prefix="og: http://ogp.me/ns#">
 <!--&lt;![endif]-->
 <head>
  <meta charset="utf-8"/>
  <meta content="IE=edge, chrome=1" http-equiv="X-UA-Compatible"/>
  <title>
   Secure Ajax from Non-Secure Pages | Viget
  </title>
  <meta content="width=device-width, initial-scale=1.0" name="viewport"/>
  <link href="/assets/stylesheets/dist/application.min.css?v=1430858688" rel="stylesheet"/>
  <link href="/assets/stylesheets/case-stories.css" rel="stylesheet"/>
  <script src="/assets/javascripts/dist/header.min.js?v=1391695709">
  </script>
  <meta content="summary_large_image" name="twitter:card"/>
  <meta content="@viget" name="twitter:site"/>
  <meta content="@viget" name="twitter:creator"/>
  <meta content="website" property="og:type"/>
  <meta content="http://viget.com/extend/secure-ajax-from-non-secure-pages" property="og:url"/>
  <meta content="Secure Ajax from Non-Secure Pages | Viget" property="og:title"/>
  <meta content="Ok, heres a problem: you have a login form on your web app that needs to be protected via SSL. In addition, on every other page  none of which use SSL  you have a miniature login form that submits via Ajax. Of course, the" property="oq:description"/>
  <meta content="Ok, heres a problem: you have a login form on your web app that needs to be protected via SSL. In addition, on every other page  none of which use SSL  you have a miniature login form that submits via Ajax. Of course, the" name="twitter:description"/>
  <meta content="14171594" property="twitter:account_id"/>
  <link href="http://feeds.feedburner.com/Viget" rel="alternate" title="Viget Blogs Feed" type="application/rss+xml"/>
  <script>
   var _vwo_code=(function(){
    var account_id=135242,
    settings_tolerance=2000,
    library_tolerance=2500,
    use_existing_jquery=false,
    // DO NOT EDIT BELOW THIS LINE
    f=false,d=document;return{use_existing_jquery:function(){return use_existing_jquery;},library_tolerance:function(){return library_tolerance;},finish:function(){if(!f){f=true;var a=d.getElementById('_vis_opt_path_hides');if(a)a.parentNode.removeChild(a);}},finished:function(){return f;},load:function(a){var b=d.createElement('script');b.src=a;b.type='text/javascript';b.innerText;b.onerror=function(){_vwo_code.finish();};d.getElementsByTagName('head')[0].appendChild(b);},init:function(){settings_timer=setTimeout('_vwo_code.finish()',settings_tolerance);this.load('//dev.visualwebsiteoptimizer.com/j.php?a='+account_id+'&amp;u='+encodeURIComponent(d.URL)+'&amp;r='+Math.random());var a=d.createElement('style'),b='body{opacity:0 !important;filter:alpha(opacity=0) !important;background:none !important;}',h=d.getElementsByTagName('head')[0];a.setAttribute('id','_vis_opt_path_hides');a.setAttribute('type','text/css');if(a.styleSheet)a.styleSheet.cssText=b;else a.appendChild(d.createTextNode(b));h.appendChild(a);return settings_timer;}};}());_vwo_settings_timer=_vwo_code.init();
  </script>
 </head>
 <body class="page-blog-extend page-blog-post page-blog page-tertiary page" data-page="blog">
  <script>
   dataLayer = [{
						'date': '1281449400'
					}];
  </script>
  <noscript>
   <iframe height="0" src="//www.googletagmanager.com/ns.html?id=GTM-5V7V&amp;nojs=true" style="display:none;visibility:hidden" width="0">
   </iframe>
  </noscript>
  <script>
   (function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
  new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
  j=d.createElement(s),dl=l!='dataLayer'?'&amp;l='+l:'';j.async=true;j.src=
  '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
  })(window,document,'script','dataLayer','GTM-5V7V');
  </script>
  <!-- ClickTale Top part -->
  <script type="text/javascript">
   var WRInitTime=(new Date()).getTime();
  </script>
  <!-- ClickTale end of Top part -->
  <div id="fb-root">
  </div>
  <div role="main">
   <section class="content-primary content">
    <div class="wrapper">
     <header class="content-primary-header header">
      <h1>
       <span class="left">
        Your friends at Viget present
       </span>
       <a href="/extend">
        <span class="visuallyhidden">
         Extend,
        </span>
       </a>
       <span class="right">
        a Code &amp; Technology Blog
       </span>
      </h1>
     </header>
     <section class="section-blog-wrapper section row stickem-container">
      <div class="col-10 col">
       <article class="article-blog-post article hentry row">
        <div class="article-blog-post-wrapper wrapper col-8 col right">
         <header class="header-blog-post header">
          <h1 class="entry-title">
           <a href="/extend/secure-ajax-from-non-secure-pages" rel="bookmark">
            Secure Ajax from Non-Secure Pages
           </a>
          </h1>
          <div class="blog-post-meta clear">
           <span class="breadcrumbs">
            <a href="/extend">
             Extend
            </a>
            //
           </span>
           <time class="published" datetime="2010-08-10T10:10:00-04:00" pubdate="">
            Aug 10, 2010
           </time>
           <a class="comment-count" data-disqus-identifier="2017" href="/extend/secure-ajax-from-non-secure-pages#disqus_thread">
            Comments
           </a>
          </div>
         </header>
         <div class="entry-content wysiwyg">
          <p>
           Ok, heres a problem: you have a login form on your web app that needs to be protected via SSL. In addition, on every other page  none of which use SSL  you have a miniature login form that submits via Ajax. Of course, the JavaScript
           <a href="http://en.wikipedia.org/wiki/Same_origin_policy">
            same origin policy
           </a>
           prevents you from making an Ajax request from your non-secure page to a secure page, even though theyre on the same site. You cant just make the Ajax login use HTTP, because then youd be sending passwords in the clear. So what do you do?
          </p>
          <p>
           When
           <a href="http://www.viget.com/about/team/deisinger">
            David
           </a>
           and I had to tackle this last week, we used a combination of
           <code>
            &lt;script&gt;
           </code>
           tag insertion and cryptography to rock this issue. We decided to make the Ajax request use HTTP, but encrypt the username and password. We thought of a few hashing schemes at first, but we quickly realized none were secure. We were going to have to have a shared secret that our JavaScript used to encrypt the parameters for the request and our Rails app would use to decrypt them. Then we were stuck with this problem: how do you have a shared secret between them that no one else knows?
          </p>
          <p>
           First, we used SSL to transmit an encryption key and a reference to that key. We create the key in Ruby, store it in the database, and then transmit it with
           <a href="http://en.wikipedia.org/wiki/JSON#JSONP">
            JSONP
           </a>
           over SSL.
          </p>
          <pre class="ruby:nogutter" name="code">
           class CryptoKeysController &lt; ApplicationController
  ssl_required :show

  def show
    render :text =&gt; 
      "#{params[:callback]}(#{CryptoKey.create.to_json});"
  end
end
          </pre>
          <p>
           In Javascript, we used two helper functions:
          </p>
          <pre class="javascript:nogutter" name="code">
           var setCryptData = function (data) {
  window.cryptData = data.crypto_key;
};

var submitFormWithCrypto = function (form, callback) {
  $.getScript('/profiles/crypto_key?callback=setCryptData', 
    function () {
      var queryData = {
        key_id: cryptData.id,
        encrypted: teaEncrypt($(form).serialize(), 
                              cryptData.key)
      };

      $.post(form.action.replace(/^https?:/, 
                                 window.location.protocol), 
             $.param(queryData), callback, "json");
    });
};
          </pre>
          <p>
           In
           <code>
            setCryptData
           </code>
           , we set
           <code>
            cryptData
           </code>
           to be a global variable so we can access it from anywhere. In
           <code>
            submitFormWithCrypto
           </code>
           , we use jQuerys
           <code>
            getScript
           </code>
           to get the key by inserting a
           <code>
            script
           </code>
           tag. This way, we can use SSL to prevent the key from being sniffed.
          </p>
          <p>
           We pass a
           <code>
            form
           </code>
           DOM object and a callback function to
           <code>
            submitFormWithCrypto
           </code>
           so that the user can specify what to do with the return information from the Ajax request.
           <code>
            submitFormWithCrypto
           </code>
           grabs a new crypto key via SSL, then serializes the form and encrypts the query string created from the serialization with the
           <a href="http://en.wikipedia.org/wiki/Tiny_Encryption_Algorithm">
            Tiny Encryption Algorithm
           </a>
           . You could use another algorithm here, of course. We were just looking for something fairly secure that was pretty fast to encrypt and decrypt. Once the form is serialized, we pass it and the id for the crypto key with our standard Ajax request for submitting the form. This was important  we didnt want to write a lot of new code on the server handling the encrypted request as a special case.
          </p>
          <p>
           On the server, we have this in our
           <code>
            ApplicationController
           </code>
           :
          </p>
          <pre class="ruby:nogutter" name="code">
           class ApplicationController &lt; ActionController::Base
  before_filter :decrypt_params

  def ssl_required?
    use_ssl? &amp;&amp; (request.ssl? || !request.xhr?) &amp;&amp; super
  end

  def decrypt_params
    if params[:key_id] &amp;&amp; params[:encrypted]
      key = CryptoKey.search_and_destroy(
        params.delete(:key_id))
      if key.nil?
        raise UnauthorizedException.new
      else
        query_string = Crypt::BlockTea.decrypt(
          params.delete(:encrypted), key)
        unencrypted_params = \
          Rack::Utils.parse_nested_query(query_string)
        params.merge!(unencrypted_params)
      end
    end
  end
end
          </pre>
          <p>
           <code>
            ssl_required?
           </code>
           checks to make sure the request is either SSL-protected
           <em>
            or
           </em>
           an Ajax request if SSL is required.
           <code>
            decrypt_params
           </code>
           looks for the existence of a crypto key ID and encrypted parameters, and decrypts those and merges them into the normal parameters.
          </p>
          <p>
           In under 100 lines of code, we have a secure method of passing parameters over HTTP, while using SSL to protect our shared encryption keys. Figuring out this sort of solution is why I became a programmer, and it was a blast to pair on it with a co-worker. You can
           <a href="http://gist.github.com/515787">
            look at all the code, including the Javascript and Ruby encryption/decryption algorithms in this Gist on GitHub
           </a>
           .
          </p>
         </div>
         <div id="blog-newsletter-signup">
          <hr class="chevrons"/>
          <section class="section centered">
           <header class="section-header header">
            <h1>
             Get More From Viget
            </h1>
            <p class="emphasize">
             Subscribe to get our monthly newsletter and occasional special announcements.
            </p>
           </header>
           <div class="section-content section">
            <form action="http://vl.createsend.com/t/r/s/bkish/" class="form inline-form" id="blog-newsletter-form" method="post">
             <ul>
              <li>
               <label class="visuallyhidden" for="newsletter-email">
                Email Address
               </label>
               <input class="text-field required email" id="newsletter-email" name="cm-bkish-bkish" placeholder="Your email address" required="required" type="email"/>
              </li>
              <li>
               <button class="submit-button bold-button button" type="submit">
                Subscribe
               </button>
              </li>
             </ul>
            </form>
           </div>
          </section>
          <hr class="chevrons"/>
         </div>
         <div class="entry-comments">
          <div id="disqus_thread">
          </div>
          <script type="text/javascript">
           var disqus_shortname = 'viget',
														disqus_identifier = '2017';

												    /* * * DON'T EDIT BELOW THIS LINE * * */
												    (function() {
												        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
												        dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
												        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
												    })();
          </script>
          <noscript>
           Please enable JavaScript to view the
           <a href="http://disqus.com/?ref_noscript">
            comments powered by Disqus.
           </a>
          </noscript>
         </div>
        </div>
        <aside class="aside-blog-post aside col-2 col stickem">
         <section class="section-author section author vcard clear">
          <figure class="photo-frame-no-border photo-frame photo-with-flag encircle">
           <img alt="Clinton R. Dreisbach" class="photo" src="/cache/images/made/9c4507fb2f19f946/cnixon_130_130gray.jpg"/>
           <span class="flag">
            Viget Alum
           </span>
          </figure>
          <div class="author-meta">
           <span class="fn">
            Clinton R. Dreisbach
           </span>
           <span class="role">
            Former Development Director
           </span>
          </div>
         </section>
         <div class="big-screen-hide">
          <hr class="chevrons"/>
          <nav class="quick-pagination navigation">
           <ul class="clear">
            <li>
             <a class="ir arrow-prev arrow" data-track-event="Extend Post,Previous Post" href="/extend/highlights-from-emerging-languages-camp" rel="prev">
              Previous
             </a>
            </li>
            <li>
             <a class="ir arrow-next arrow" data-track-event="Extend Post,Next Post" href="/extend/coffeescript-for-ruby-bros" rel="next">
              Next
             </a>
            </li>
           </ul>
           <p>
            <b>
             Next Post
            </b>
            <a data-track-event="Extend Post,Next Post" href="/extend/coffeescript-for-ruby-bros">
             CoffeeScript for Ruby Bros
            </a>
           </p>
          </nav>
         </div>
         <hr class="chevrons"/>
         <div class="social-sharing-widget">
          <div class="widget-header clear">
           <span class="icon-facebook icon ir">
            Facebook
           </span>
           <span class="icon-twitter icon ir">
            Twitter
           </span>
           <span class="icon-googleplus icon ir">
            Google+
           </span>
          </div>
          <div class="widget-body">
           <ul class="vertical clear">
            <li>
             <script>
              (function(d, s, id) {
				  var js, fjs = d.getElementsByTagName(s)[0];
				  if (d.getElementById(id)) return;
				  js = d.createElement(s); js.id = id;
				  js.src = "http://connect.facebook.net/en_US/all.js#xfbml=1";
				  fjs.parentNode.insertBefore(js, fjs);
				}(document, 'script', 'facebook-jssdk'));
             </script>
             <div class="fb-like" data-height="21" data-href="http://viget.com/extend/secure-ajax-from-non-secure-pages" data-layout="button_count" data-send="false" data-show-faces="false" data-width="100">
             </div>
            </li>
            <li>
             <a class="twitter-share-button" href="https://twitter.com/share">
              Tweet
             </a>
             <script>
              !function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");
             </script>
            </li>
            <li>
             <g:plusone annotation="inline" size="medium" width="120">
             </g:plusone>
             <script>
              (function() {var po = document.createElement('script'); po.type = 'text/javascript'; po.async = true;po.src = 'https://apis.google.com/js/plusone.js';var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(po, s);})();
             </script>
            </li>
           </ul>
          </div>
         </div>
        </aside>
       </article>
      </div>
      <aside class="aside col-2 col">
       <section class="section-blog-navigation section-blog-module section">
        <header class="section-header header">
         <h1>
          Extend is
         </h1>
         <a class="light-rss-button rss-button button ir" data-track-event="Extend Post,RSS" href="http://feeds.feedburner.com/VigetExtend" rel="alternate" type="application/rss+xml">
          RSS
         </a>
        </header>
        <div class="section-content section">
         <p class="blog-description">
          A
          <b>
           Code &amp; Technology
          </b>
          blogour thirty foot view. Primarily written by/for Ruby, iOS, and front-end developers.
         </p>
         <form action="http://viget.com/" class="search-form form" id="search-form" method="post">
          <div class="hiddenFields">
           <input name="ACT" type="hidden" value="33"/>
           <input name="params" type="hidden" value="eyJyZXN1bHRfcGFnZSI6ImV4dGVuZFwvc2VhcmNoIn0"/>
           <input name="site_id" type="hidden" value="1"/>
          </div>
          <ul>
           <li>
            <label for="keywords">
             Search
            </label>
            <input class="text-field" id="keywords" name="keywords" type="text"/>
           </li>
           <li>
            <input name="category[]" type="hidden" value="126"/>
            <button class="ir" type="submit">
             Submit
            </button>
           </li>
          </ul>
         </form>
        </div>
       </section>
       <hr class="chevrons"/>
       <section class="section-more-blogs section-blog-module section">
        <header class="section-header header">
         <h1>
          More Viget Blogs
         </h1>
        </header>
        <div class="section-content section">
         <ul class="grouping-blog-links grouping">
          <li>
           <a data-track-event="Extend Post, More Viget Blogs Click,Advance" href="/advance">
            <img alt="Advance: Strategy &amp; Process" src="/assets/images/content/blogs-advance/logo-dark.png"/>
           </a>
          </li>
          <li>
           <a data-track-event="Extend Post, More Viget Blogs Click,Extend" href="/extend">
            <img alt="Extend: Code &amp; Technology" src="/assets/images/content/blogs-extend/logo-dark.png"/>
           </a>
          </li>
          <li>
           <a data-track-event="Extend Post, More Viget Blogs Click,Flourish" href="/flourish">
            <img alt="Flourish: Viget News &amp; Culture" src="/assets/images/content/blogs-flourish/logo-dark.png"/>
           </a>
          </li>
          <li>
           <a data-track-event="Extend Post, More Viget Blogs Click,Inspire" href="/inspire">
            <img alt="Inspire: Design &amp; Interactive" src="/assets/images/content/blogs-inspire/logo-dark.png"/>
           </a>
          </li>
         </ul>
        </div>
       </section>
       <hr class="chevrons"/>
       <section class="section-hiring section-blog-module section">
        <header class="section-header header">
         <h1>
          Were Hiring
         </h1>
        </header>
        <div class="section-content section">
         <ul class="grouping-blog-links grouping">
          <li>
           <a href="/about/careers/ruby-on-rails-developer">
            Ruby On Rails Developer
           </a>
          </li>
         </ul>
        </div>
       </section>
      </aside>
     </section>
    </div>
   </section>
  </div>
  <nav class="anchored-navigation navigation">
   <ul>
    <li>
     <a class="anchor-prev anchor" data-track-event="Extend Post,Previous Post" href="/extend/highlights-from-emerging-languages-camp" rel="prev">
      <span class="title">
       Highlights from Emerging Languages Camp
      </span>
     </a>
    </li>
    <li>
     <a class="anchor-next anchor" data-track-event="Extend Post,Next Post" href="/extend/coffeescript-for-ruby-bros" rel="next">
      <span class="title">
       CoffeeScript for Ruby Bros
      </span>
     </a>
    </li>
   </ul>
  </nav>
  <header class="global-header" id="global-header" role="banner">
   <div class="wrapper clear">
    <a class="logo ir" href="/" rel="home">
     Viget
    </a>
    <nav class="nav-primary nav">
     <ul class="clear">
      <li class="nav-item-about nav-item">
       <a data-track-event="Top Nav,About" href="/about">
        About
       </a>
      </li>
      <li class="nav-item-work nav-item">
       <a data-track-event="Top Nav,Work" href="/work">
        Work
       </a>
      </li>
      <li class="nav-item-blogs nav-item-current nav-item">
       <a data-track-event="Top Nav, Blogs" href="/blogs">
        Blogs
       </a>
      </li>
      <li class="nav-item-contact nav-item">
       <a data-track-event="Top Nav, Contact" href="/contact">
        Contact
       </a>
      </li>
     </ul>
    </nav>
    <a class="button-nav-jump-link button ir" href="#global-footer">
     Skip to navigation
    </a>
   </div>
  </header>
  <footer class="global-footer" id="global-footer">
   <nav class="nav-primary nav">
    <div class="wrapper">
     <ul class="row">
      <li class="col-2 col-offset-2 col">
       <h1>
        <a data-track-event="Footer,About,About" href="/about">
         About
        </a>
       </h1>
       <ul>
        <li>
         <a data-track-event="Footer,About,Locations" href="/about#locations">
          Locations
         </a>
        </li>
        <li>
         <a data-track-event="Footer,About,Team" href="/about#team">
          Team
         </a>
        </li>
        <li>
         <a data-track-event="Footer,About,Careers" href="/about#careers">
          Careers
         </a>
        </li>
       </ul>
      </li>
      <li class="col-2 col">
       <h1>
        <a data-track-event="Footer,Work,Work" href="/work">
         Work
        </a>
       </h1>
       <ul>
        <li>
         <a data-track-event="Footer,Work,Portfolio" href="/work#portfolio">
          Portfolio
         </a>
        </li>
        <li>
         <a data-track-event="Footer,Work,Services" href="/work#services">
          Services
         </a>
        </li>
       </ul>
      </li>
      <li class="col-2 col">
       <h1>
        <a data-track-event="Footer,Blogs,Blogs" href="/blogs">
         Blogs
        </a>
       </h1>
       <ul>
        <li>
         <a data-track-event="Footer,Blogs,Advance" href="/advance">
          Advance
         </a>
        </li>
        <li>
         <a data-track-event="Footer,Blogs,Inspire" href="/inspire">
          Inspire
         </a>
        </li>
        <li>
         <a data-track-event="Footer,Blogs,Extend" href="/extend">
          Extend
         </a>
        </li>
        <li>
         <a data-track-event="Footer,Blogs,Flourish" href="/flourish">
          Flourish
         </a>
        </li>
       </ul>
      </li>
      <li class="col-2 col">
       <h1>
        <a data-track-event="Footer,Contact,Contact" href="/contact">
         Contact
        </a>
       </h1>
       <ul>
        <li>
         <a data-track-event="Footer,Contact,Send a Message" href="/contact#send-message">
          Send a Message
         </a>
        </li>
        <li>
         <a data-track-event="Footer,Contact,Find Us" href="/contact#find-us">
          Find Us
         </a>
        </li>
       </ul>
      </li>
      <li class="col-2 col">
       <h1>
        <a data-track-event="Footer,More,More" href="/more">
         More
        </a>
       </h1>
       <ul>
        <li>
         <a data-track-event="Footer,More,Pointless Corp." href="http://www.pointlesscorp.com/" rel="external">
          Pointless Corp.
         </a>
        </li>
        <li>
         <a data-track-event="Footer,More,SpeakerRate" href="http://speakerrate.com/" rel="external">
          SpeakerRate
         </a>
        </li>
        <li>
         <a data-track-event="Footer,More,TeamViget" href="http://www.teamviget.com/" rel="external">
          Team Viget
         </a>
        </li>
        <li>
         <a data-track-event="Footer,More,Say Viget" href="http://www.sayviget.com/" rel="external">
          Say Viget
         </a>
        </li>
       </ul>
      </li>
     </ul>
    </div>
   </nav>
   <div class="chevrons">
    <div class="wrapper clear">
     <div class="row">
      <div class="social-connections col-5 col-offset-2 col">
       <p>
        Connect with us
       </p>
       <ul class="clear">
        <li>
         <a class="icon-twitter icon ir" data-track-social="Twitter,Outbound Click,Footer" href="http://twitter.com/viget" rel="external" title="@viget">
          Twitter
         </a>
        </li>
        <li>
         <a class="icon-flickr icon ir" data-track-social="Flickr,Outbound Click,Footer" href="http://www.flickr.com/photos/viget" rel="external" title="Flickr">
          Flickr
         </a>
        </li>
        <li>
         <a class="icon-vimeo icon ir" data-track-social="Vimeo,Outbound Click,Footer" href="http://vimeo.com/viget" rel="external" title="Vimeo">
          Vimeo
         </a>
        </li>
        <li>
         <a class="icon-linkedin icon ir" data-track-social="LinkedIn,Outbound Click,Footer" href="http://www.linkedin.com/company/viget-labs" rel="external" title="LinkedIn">
          LinkedIn
         </a>
        </li>
        <li>
         <a class="icon-facebook icon ir" data-track-social="Facebook,Outbound Click,Footer" href="http://www.facebook.com/vigetlabs" rel="external" title="Facebook">
          Facebook
         </a>
        </li>
        <li>
         <a class="icon-instagram icon ir" data-track-social="Instagram,Outbound Click,Footer" href="http://instagram.com/viget" rel="external" title="Instagram">
          Instagram
         </a>
        </li>
       </ul>
      </div>
      <form action="http://vl.createsend.com/t/r/s/bkish/" class="form-email-updates col-3 col" data-track-email="cm-bkish-bkish" data-track-event="Footer,Email Subscription" id="global-footer-newsletter-form" method="post">
       <ul>
        <li>
         <label class="visuallyhidden" for="cm-bkish-bkish">
          Get Email Updates
         </label>
         <input id="cm-bkish-bkish" name="cm-bkish-bkish" placeholder="Get Email Updates" required="required" type="email"/>
        </li>
        <li>
         <button class="ir" type="submit">
          Submit
         </button>
        </li>
       </ul>
      </form>
     </div>
    </div>
   </div>
   <div class="vcard">
    <div class="wrapper">
     <div class="clear">
      <span class="fn org">
       <a class="url logo ir" href="/">
        Viget
       </a>
      </span>
      <ul class="grouping-locations grouping">
       <li>
        Falls Church, VA
       </li>
       <li>
        Durham, NC
       </li>
       <li>
        Boulder, CO
       </li>
      </ul>
     </div>
     <ul class="grouping-contact grouping">
      <li>
       <a class="tel-button bold-button button tel" href="tel:+17038910670">
        703.891.0670
       </a>
      </li>
      <li>
       <a class="fax-button bold-button button fax" href="tel:+17038320341">
        703.832.0341
       </a>
      </li>
      <li>
       <a class="email-button bold-button button email" href="mailto:info@viget.com">
        info@viget.com
       </a>
      </li>
     </ul>
     <p class="note">
      Strategy, Design, &amp; Development. Vigorous since 1999.
     </p>
    </div>
   </div>
   <p role="contentinfo">
     19992015 Viget Labs, LLC.
    <a href="/terms-conditions">
     Terms &amp; Conditions
    </a>
    :
    <a href="/privacy-policy">
     Privacy Policy
    </a>
   </p>
  </footer>
  <script src="/assets/javascripts/vendor/prettify/prettify.js">
  </script>
  <script src="/assets/javascripts/dist/application.min.js?v=1420041457">
  </script>
  <!-- Disqus -->
  <script>
   var disqus_shortname = 'viget';

        (function( d, t ) {
          var g = d.createElement( t ),
            s = d.getElementsByTagName( t )[0];

          g.src = '//' + disqus_shortname + '.disqus.com/count.js';
          s.parentNode.insertBefore( g, s );
        })( document, 'script' );
  </script>
  <!-- End Disqus -->
  <script>
   window.disqus_config = function () {
						this.callbacks.onReady = [function() {
							//Sticky left column
							if($(window).width() &gt;= 960) {
								$('div[role="main"]').imagesLoaded(function() {
									var $this = $(this);

									$this.stickem({
										offset: 75
									});
								});
							}
						}];

						this.callbacks.onNewComment = [function(comment){
							//Send author email
							$.ajax({
								type : "POST",
								data : comment,
								url : "/_functions/comment-notification/2017"
							});
						}];
					};
  </script>
  <!-- KISSmetrics -->
  <script>
   var _kmq = _kmq || [],
      _kmk = _kmk || 'fe27677336118591a0ec473e209a2ca0055f635b';

    function _kms( u ) {
      setTimeout( function() {
        var d = document,
          f = d.getElementsByTagName( 'script' )[0],
          s = d.createElement('script');

        s.src = u;
        f.parentNode.insertBefore( s, f );
      }, 1 );
    }

    _kms( '//i.kissmetrics.com/i.js' );
    _kms( '//doug1izaerwt3.cloudfront.net/' + _kmk + '.1.js' );
  </script>
  <!-- End KISSmetrics -->
  <!--[if lt IE 7]&gt;
    &lt;script src='//ajax.googleapis.com/ajax/libs/chrome-frame/1.0.3/CFInstall.min.js'&gt;&lt;/script&gt;
    &lt;script&gt;
      window.attachEvent( 'onload', function() {
        CFInstall.check({ mode: 'overlay' });
      });
    &lt;/script&gt;
  &lt;![endif]-->
 </body>
</html>