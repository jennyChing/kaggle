<!DOCTYPE html>
<html>
 <head>
  <script>
   (function(){var e=window.location;/^m\..+\.com$/.test(e.host)&amp;&amp;!/iphone|ipod|android|mobile/i.test(navigator.userAgent)&amp;&amp;e.replace(e.href.replace(/m\./,""))})()
  </script>
  <meta charset="utf-8"/>
  <link href="//api-mobileweb.soundcloud.com" rel="dns-prefetch"/>
  <link href="//sb.scorecardresearch.com" rel="dns-prefetch"/>
  <link href="//eventlogger.soundcloud.com" rel="dns-prefetch"/>
  <link href="//api.soundcloud.com" rel="dns-prefetch"/>
  <link href="//i1.sndcdn.com" rel="dns-prefetch"/>
  <link href="//i2.sndcdn.com" rel="dns-prefetch"/>
  <link href="//i3.sndcdn.com" rel="dns-prefetch"/>
  <link href="//i4.sndcdn.com" rel="dns-prefetch"/>
  <link href="//w1.sndcdn.com" rel="dns-prefetch"/>
  <link href="//wis.sndcdn.com" rel="dns-prefetch"/>
  <title>
   The BK Sessions feat. The Jim Joustra Trio by Jim Joustra Music - Listen to music
  </title>
  <meta content="The BK (Brooklyn) Sessions are a combination of various studio spots featuring Jim Joustra (Guitar), Bobby Friedman (Organ), and Jack Fink (Drums). 

The group came together in August 2014 - soon af" property="description"/>
  <meta content="SoundCloud" property="twitter:app:name:iphone"/>
  <meta content="336353151" property="twitter:app:id:iphone"/>
  <meta content="SoundCloud" property="twitter:app:name:ipad"/>
  <meta content="336353151" property="twitter:app:id:ipad"/>
  <meta content="SoundCloud" property="twitter:app:name:googleplay"/>
  <meta content="com.soundcloud.android" property="twitter:app:id:googleplay"/>
  <meta content="The BK Sessions feat. The Jim Joustra Trio" property="twitter:title"/>
  <meta content="The BK (Brooklyn) Sessions are a combination of various studio spots featuring Jim Joustra (Guitar), Bobby Friedman (Organ), and Jack Fink (Drums). 

The group came together in August 2014 - soon af" property="twitter:description"/>
  <meta content="https://w.soundcloud.com/player/?url=https%3A%2F%2Fapi.soundcloud.com%2Fplaylists%2F66682251&amp;auto_play=false&amp;show_artwork=true&amp;visual=true&amp;origin=twitter" property="twitter:player"/>
  <meta content="450" property="twitter:player:height"/>
  <meta content="435" property="twitter:player:width"/>
  <meta content="https://i1.sndcdn.com/avatars-000120879492-a4b8gh-t500x500.jpg" property="twitter:image"/>
  <meta content="player" property="twitter:card"/>
  <meta content="soundcloud://playlists:66682251" property="twitter:app:url:googleplay"/>
  <meta content="soundcloud://playlists:66682251" property="twitter:app:url:iphone"/>
  <meta content="soundcloud://playlists:66682251" property="twitter:app:url:ipad"/>
  <meta content="SoundCloud" property="al:ios:app_name"/>
  <meta content="336353151" property="al:ios:app_store_id"/>
  <meta content="SoundCloud" property="al:android:app_name"/>
  <meta content="com.soundcloud.android" property="al:android:package"/>
  <meta content="soundcloud:set" property="og:type"/>
  <meta content="https://soundcloud.com/jim-joustra-compositions/sets/the-bk-sessions-feat-the-jim-1" property="og:url"/>
  <meta content="The BK Sessions feat. The Jim Joustra Trio" property="og:title"/>
  <meta content="https://i1.sndcdn.com/avatars-000120879492-a4b8gh-t500x500.jpg" property="og:image"/>
  <meta content="The BK (Brooklyn) Sessions are a combination of various studio spots featuring Jim Joustra (Guitar), Bobby Friedman (Organ), and Jack Fink (Drums). 

The group came together in August 2014 - soon af" property="og:description"/>
  <meta content="video" property="medium"/>
  <meta content="application/x-shockwave-flash" property="og:video:type"/>
  <meta content="153" property="og:video:height"/>
  <meta content="460" property="og:video:width"/>
  <meta content="http://player.soundcloud.com/player.swf?url=https%3A%2F%2Fapi.soundcloud.com%2Fplaylists%2F66682251&amp;auto_play=false&amp;show_artwork=true&amp;visual=true&amp;color=3b5998&amp;origin=facebook" property="og:video"/>
  <meta content="soundcloud://playlists:66682251" property="al:ios:url"/>
  <meta content="soundcloud://playlists:66682251" property="al:android:url"/>
  <meta content="https://soundcloud.com/jim-joustra-compositions" property="soundcloud:user"/>
  <link href="https://soundcloud.com/jim-joustra-compositions/sets/the-bk-sessions-feat-the-jim-1" rel="canonical"/>
  <link href="https://soundcloud.com/oembed?url=http%3A%2F%2Fsoundcloud.com%2Fjim-joustra-compositions%2Fsets%2Fthe-bk-sessions-feat-the-jim-1&amp;format=xml" rel="alternate" type="text/xml+oembed"/>
  <link href="https://soundcloud.com/oembed?url=http%3A%2F%2Fsoundcloud.com%2Fjim-joustra-compositions%2Fsets%2Fthe-bk-sessions-feat-the-jim-1&amp;format=json" rel="alternate" type="text/json+oembed"/>
  <link href="/jim-joustra-compositions" rel="author"/>
  <meta content="record, sounds, share, sound, audio, tracks, music, soundcloud" name="keywords"/>
  <meta content="Explore the largest community of artists, bands, podcasters and creators of music &amp; audio" name="description"/>
  <meta content="width=device-width, minimum-scale=1, maximum-scale=1, user-scalable=no" name="viewport"/>
  <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible"/>
  <!--[if IE]&gt; &lt;meta content="true" name="MSSmartTagsPreventParsing"&gt; &lt;meta content="false" http-equiv="imagetoolbar"&gt; &lt;![endif]-->
  <meta content="19507961798" property="fb:app_id"/>
  <meta content="SoundCloud" property="og:site_name"/>
  <meta content="https://m.soundcloud.com/assets/images/ldpi/loader-81295ad2.gif" id="__sc-loader" name="sc-loader"/>
  <link href="https://m.soundcloud.com/assets/images/sc-icons/favicon-9c79c761.ico" rel="shortcut icon"/>
  <link href="https://m.soundcloud.com/assets/images/sc-icons/favicon_16-9c79c761.png" rel="icon"/>
  <link href="https://m.soundcloud.com/assets/images/sc-icons/favicon_32-9c79c761.png" rel="icon" sizes="32x32"/>
  <link href="https://m.soundcloud.com/assets/images/sc-icons/favicon_64-9c79c761.png" rel="icon" sizes="64x64"/>
  <link href="https://m.soundcloud.com/assets/images/sc-icons/iphone_ios6-9c79c761.png" rel="apple-touch-icon" sizes="57x57"/>
  <link href="https://m.soundcloud.com/assets/images/sc-icons/iphone_ios6@2x-9c79c761.png" rel="apple-touch-icon" sizes="114x114"/>
  <link href="https://m.soundcloud.com/assets/images/sc-icons/iphone-9c79c761.png" rel="apple-touch-icon" sizes="60x60"/>
  <link href="https://m.soundcloud.com/assets/images/sc-icons/iphone@2x-9c79c761.png" rel="apple-touch-icon" sizes="120x120"/>
  <meta content="SoundCloud" name="application-name"/>
  <meta content="Launch SoundCloud" name="msapplication-tooltip"/>
  <meta content="#ff6600" name="msapplication-TileColor"/>
  <meta content="https://soundcloud.com" name="msapplication-starturl"/>
  <meta content="no" name="msapplication-tap-highlight"/>
  <script>
   var __sc_dpi; (function(){ var dpr = window.devicePixelRatio; __sc_dpi = dpr &gt;= 2 ? 'hdpi' : dpr &gt; 1 ? 'mdpi' : 'ldpi'; }());
  </script>
  <script>
   (function(){ var el; el = document.createElement('style'); el.innerHTML = '.errorVisual{background:url(https://m.soundcloud.com/assets/images/ldpi/errors/500-a53573d7.png) 0 0 no-repeat;background-size:448px 80px}.errorVisual.error__404{background-image:url(https://m.soundcloud.com/assets/images/ldpi/errors/404-a53573d7.png);background-size:420px 120px}'.replace(/\/ldpi\//g, '/' + __sc_dpi + '/');document.querySelector('head').appendChild(el); }());
  </script>
  <script>
   (function(){ var el = document.createElement('style'); el.innerHTML = '.sc-ir{border:0;font:0/0 a;text-shadow:none;color:transparent;background-color:transparent}.sc-hidden{display:none!important;visibility:hidden}.sc-visuallyhidden{border:0;clip:rect(0 0 0 0);height:1px;margin:-1px;overflow:hidden;padding:0;position:absolute;width:1px}.sc-visuallyhidden.sc-focusable:active,.sc-visuallyhidden.sc-focusable:focus{clip:auto;height:auto;margin:0;overflow:visible;position:static;width:auto}.sc-invisible{visibility:hidden}.sc-media,.sc-media-content,.sc-media-body{overflow:hidden}.sc-media-image,.sc-media-left{float:left;margin-right:10px}.sc-media-extra,.sc-media-right{float:right;margin-left:10px}.sc-media-image img,.sc-media-extra img,.sc-media-object{display:block}.sc-text{color:#333}.sc-text-light{color:#999}.sc-text-verylight{color:#ccc}.sc-text-link{color:#06c}.sc-border-dark{border:1px solid #e5e5e5}.sc-border-dark-top{border-top:1px solid #e5e5e5}.sc-border-dark-right{border-right:1px solid #e5e5e5}.sc-border-dark-bottom{border-bottom:1px solid #e5e5e5}.sc-border-dark-left{border-left:1px solid #e5e5e5}.sc-border-light{border:1px solid #f2f2f2}.sc-border-light-top{border-top:1px solid #f2f2f2}.sc-border-light-right{border-right:1px solid #f2f2f2}.sc-border-light-bottom{border-bottom:1px solid #f2f2f2}.sc-border-light-left{border-left:1px solid #f2f2f2}.sc-truncate{overflow:hidden;white-space:nowrap;text-overflow:ellipsis}.sc-selection-text{-webkit-user-select:text;-khtml-user-select:text;-moz-user-select:text;-o-user-select:text;user-select:text;cursor:auto}.sc-selection-disabled{-webkit-touch-callout:none;-webkit-user-select:none;-khtml-user-select:none;-moz-user-select:none;-o-user-select:none;user-select:none;cursor:default;outline:0}*,:before,:after{-webkit-tap-highlight-color:rgba(0,0,0,0);margin:0;padding:0;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box}article,aside,details,figcaption,figure,footer,header,hgroup,main,nav,section,summary{display:block}audio,canvas{display:inline-block}html{font-family:"Lucida Grande",Lucida,"Helvetica Neue",Helvetica,Arial,sans-serif;-webkit-text-size-adjust:100%;-ms-text-size-adjust:100%;height:100%}body{height:100%}a{text-decoration:none}ul,li{list-style:none}img{border:0}svg:not(:root){overflow:hidden}button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}button,input{line-height:normal}button,html input[type="button"],input[type="reset"],input[type="submit"]{-webkit-appearance:button;cursor:pointer}input[type="checkbox"],input[type="radio"]{padding:0}input[type="search"]{-webkit-appearance:none}input[type="search"]::-webkit-search-cancel-button,input[type="search"]::-webkit-search-decoration{-webkit-appearance:none}button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}textarea{overflow:auto;vertical-align:top}table{border-collapse:collapse;border-spacing:0}h1,h2,h3,h4,h5,h6{font-weight:400}.g-moving-element{will-change:transform;transform:translateZ(0)}.g-box-full{display:block;width:100%;height:100%;position:relative}.g-z-index-hidden{z-index:-1}.g-z-index-banner{z-index:1}.g-z-index-upsell{z-index:2}.g-z-index-header{z-index:3}.g-z-index-overlay{z-index:4}.g-z-index-app-loading{z-index:5!important}.g-image-fill{height:0;padding-bottom:100%}.g-background-cover{background-size:cover;background-position:50% 50%;background-repeat:none;height:100%;width:100%}.g-icon:before{float:left;content:\'\';background-repeat:no-repeat;background-position:0 0;margin-top:2px;margin-right:4px}.g-transition-fade{-webkit-transition:opacity .25s;transition:opacity .25s}.g-transition-fade-out{opacity:0}.g-transition-fade-in{opacity:1}.g-transition-translate{-webkit-transition:-webkit-transform .25s cubic-bezier(.645,.045,.355,1),opacity .25s cubic-bezier(.645,.045,.355,1);transition:transform .25s cubic-bezier(.645,.045,.355,1),opacity .25s cubic-bezier(.645,.045,.355,1)}.g-transition-slide-top-in{-webkit-transform:translateY(0);transform:translateY(0);opacity:1}.g-transition-slide-top-out{-webkit-transform:translateY(-100%);transform:translateY(-100%);opacity:0}.g-font-10{font-size:10px;line-height:12px}.g-font-12{font-size:12px;line-height:15px}.g-font-14{font-size:14px;line-height:16px}.g-font-16{font-size:16px;line-height:19px}.g-font-20{font-size:20px;line-height:22px}.g-type-shrinkwrap-inline{display:inline;background:rgba(0,0,0,.8);color:#fff;padding:1px 0;box-shadow:-6px 0 0 rgba(0,0,0,.8),6px 0 0 rgba(0,0,0,.8);-webkit-font-smoothing:antialiased}.g-type-bucket-title{padding:0 10px;line-height:55px;border-bottom:1px solid #f2f2f2;background:#fff}.g-button{display:inline-block;position:relative;height:26px;margin:0;padding:2px 10px;border:1px solid rgb(225,225,225);border-radius:4px;background-color:#fcfcfc;background-image:-webkit-linear-gradient(rgba(255,255,255,.0),rgba(235,235,235,.3) 60%,rgba(225,225,225,.6));background-image:linear-gradient(rgba(255,255,255,.0),rgba(235,235,235,.3) 60%,rgba(225,225,225,.6));background-clip:padding;cursor:pointer;overflow:hidden;color:#333;text-shadow:0 1px 0 #fff;font-size:14px;line-height:20px;white-space:nowrap;font-family:"Interstate","Lucida Grande","Lucida Sans Unicode","Lucida Sans",Garuda,Verdana,Tahoma,sans-serif;font-weight:100;text-align:center;vertical-align:baseline;-webkit-box-shadow:0 1px 2px rgba(0,0,0,.02),inset 0 1px 0 rgba(255,255,255,.7),inset -1px 0 0 rgba(255,255,255,.7),inset 0 -1px 0 rgba(255,255,255,.5),inset 1px 0 0 rgba(255,255,255,.7);box-shadow:0 1px 2px rgba(0,0,0,.02),inset 0 1px 0 rgba(255,255,255,.7),inset -1px 0 0 rgba(255,255,255,.7),inset 0 -1px 0 rgba(255,255,255,.5),inset 1px 0 0 rgba(255,255,255,.7);-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box}.g-button-nostyle,.g-button-nostyle:hover,.g-button-nostyle:focus,.g-button-nostyle:active{border:0;background:none;text-shadow:none;-webkit-box-shadow:none;box-shadow:none;-webkit-transition:none;-moz-transition:none;-o-transition:none;transition:none}.sc-button{display:inline-block;position:relative;height:26px;margin:0;padding:2px 11px 2px 10px;border:1px solid #e5e5e5;border-radius:3px;background-color:#fff;cursor:pointer;color:#333;font-size:14px;line-height:20px;overflow:hidden;white-space:nowrap;font-family:"Interstate","Lucida Grande","Lucida Sans Unicode","Lucida Sans",Garuda,Verdana,Tahoma,sans-serif;font-weight:100;text-align:center;vertical-align:baseline;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box}.sc-button-large{font-size:16px;line-height:18px;padding:10px 15px;height:40px}.sc-button-cta,.sc-button-cta:active,.sc-button-cta:hover,.sc-button-cta:focus,.sc-button-cta:visited{background-color:#f50;border-color:#f50;color:#fff}.errorPage{background:#efefef;height:100%}.errorPage__inner{height:100%;position:relative;text-align:center;overflow:hidden}.errorVisual{position:absolute;left:50%;top:96px;width:448px;height:80px;margin-left:-86px}.errorVisual.error__404{top:56px;width:420px;height:120px;margin-left:-60px}.errorMessage{padding-top:228px}.errorTitle{padding:0 10px;color:#666}.errorText{margin-top:18px;color:#666}.g-touch-padding{position:relative}.g-touch-padding:before{-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;content:\'\';position:absolute;left:0;top:0;padding:12px;margin:-12px 0 0 -12px;width:100%;height:100%}.g-native-scroll{width:100%;height:100%;position:fixed;overflow:scroll;-webkit-overflow-scrolling:touch}.g-list-wrapper{border-top:1px solid #ccc;border-bottom:1px solid #ccc}.g-list .g-list-item{border-top:1px solid #f2f2f2}.g-list .g-list-item:first-child{border-top:0}.g-list-vertical .g-list-item{float:left;margin:0 0 0 10px;border-top:0}.g-badge{position:relative}.g-badge-link{display:block;overflow:hidden;padding:15px 10px}.promoted&gt;.g-badge-link{height:111px}.g-badge-stats{overflow:hidden}.g-badge-link{background:#fff}.g-badge-link:active{background:#f2f2f2}.g-badge-info{min-height:60px}.g-badge-username{color:#999;font-weight:400;padding:0 32px 4px 0}.g-badge-title{padding:0 0 10px;color:#333}.g-badge-playing-indicator{color:#f50;font-size:12px}.g-badge-reposted-indicator{color:#999;font-size:12px}.g-badge-playing-indicator:before{width:12px;height:10px;background-image:url(https://m.soundcloud.com/assets/images/ldpi/badge/nowplaying-abecd0c3.png);background-size:100% auto}.g-badge-reposted-indicator:before{margin-top:4px;width:16px;height:8px;background-image:url(https://m.soundcloud.com/assets/images/ldpi/badge/reposted-a4945913.png);background-size:100% auto}.g-badge-timecode{position:absolute;top:17px;right:10px;color:#999;font-size:12px}.g-badge-vertical.g-badge-link{margin:0;padding:15px 0;height:auto}.g-badge-vertical .g-badge-info{margin-top:12px}.g-play-indicator{background:#f50;height:3px;position:absolute;top:0;left:0;width:100%;-webkit-transition:-webkit-transform .1s linear;transition:transform .1s linear}.g-header-artwork-info{position:absolute;z-index:1;bottom:12px;left:18px;max-width:95%;margin-right:18px}.g-header-artwork-info-content{margin:0 0 4px}.g-header-artwork-image{position:relative}.g-header-artwork-controls{position:absolute;top:50%;left:0;right:0;height:80px;margin-top:-40px}.g-header-artwork-title{font-size:18px;line-height:24px}.g-header-artwork-title a{color:#fff}.g-header-artwork-text{color:#999;font-size:14px;line-height:19px}.g-play-button{position:absolute;pointer-events:auto;border:1px solid #fff;border-radius:40px;background:rgba(0,0,0,.25) url(https://m.soundcloud.com/assets/images/ldpi/player/play_pause_button-e03e9a61.png) 2px -80px no-repeat;background-size:80px 160px;width:80px;height:80px;left:50%;margin-left:-40px;-webkit-transition:background-color .1s ease-out,opacity 2s cubic-bezier(1,.01,.81,1);transition:background-color .1s ease-out,opacity 2s cubic-bezier(1,.01,.81,1)}.g-play-button:active{background-color:rgba(0,0,0,.5)}'.replace(/\/ldpi\//g, '/' + __sc_dpi + '/');document.querySelector('head').appendChild(el); }());
  </script>
 </head>
 <body>
  <div id="app">
   <style>
    body{background:#f2f2f2}.header{height:44px;box-shadow:0 0 2px 0 rgba(0,0,0,.5);background:#fff}.header__logo{background:url(https://m.soundcloud.com/assets/images/hdpi/logo-881c7ae2.png) 0 50% no-repeat;background-size:128px 16px;width:128px;height:44px;margin:0 auto;display:block}#header__loading{position:absolute;top:14px;right:19px;margin-left:-6px;width:16px;height:16px;background:0 0 no-repeat;background-size:16px 16px}
   </style>
   <header class="header g-z-index-header" id="header">
    <div class="header__content">
     <span class="header__logo">
     </span>
     <div class="sc-hidden" id="header__loading">
     </div>
    </div>
   </header>
   <script>
    setTimeout(function(){var e=document.getElementById("header__loading");e&amp;&amp;(e.style.backgroundImage=document.getElementById("__sc-loader").content,e.className="")},5e3)
   </script>
   <noscript>
    <style>
     .errorVisual.error__javascript{top:112px;width:428px;height:64px;margin-left:-70px;background:url(https://m.soundcloud.com/assets/images/ldpi/errors/javascript-a53573d7.png) 0 0 no-repeat;background-size:428px 64px}@media (-webkit-min-device-pixel-ratio:1.5),(min-resolution:1.5dppx),(min-resolution:144dpi){.errorVisual{background-image:url(https://m.soundcloud.com/assets/images/mdpi/errors/javascript-a53573d7.png)}}@media (-webkit-min-device-pixel-ratio:2),(min-resolution:2dppx),(min-resolution:192dpi){.errorVisual{background-image:url(https://m.soundcloud.com/assets/images/hdpi/errors/javascript-a53573d7.png)}}
    </style>
    <div class="errorPage__inner">
     <div class="errorVisual error__javascript">
     </div>
     <div class="errorMessage">
      <h1 class="errorTitle g-font-20">
       JavaScript is disabled
      </h1>
      <p class="errorText g-font-14">
       To continue, go to Settings and turn it on
      </p>
     </div>
    </div>
   </noscript>
   <noscript>
   </noscript>
   <div class="errorPage__inner sc-hidden" id="error__timeout">
    <div class="errorVisual">
    </div>
    <div class="errorMessage">
     <h1 class="errorTitle g-font-20">
      Something went wrong
     </h1>
     <p class="errorText g-font-14">
      Refresh and try again
     </p>
    </div>
   </div>
   <script>
    function displayError(){var e=document.getElementById("error__timeout"),t=document.getElementById("header__loading");e&amp;&amp;t&amp;&amp;(e.className="errorPage__inner",t.className="sc-hidden")}setTimeout(displayError,15e3),window.onerror=displayError
   </script>
  </div>
  <script>
   var requirejs,require,define;(function(e){function c(e,t){return f.call(e,t)}function h(e,t){var n,r,i,s,o,a,f,l,c,h,p=t&amp;&amp;t.split("/"),d=u.map,v=d&amp;&amp;d["*"]||{};if(e&amp;&amp;e.charAt(0)===".")if(t){p=p.slice(0,p.length-1),e=p.concat(e.split("/"));for(l=0;l&lt;e.length;l+=1){h=e[l];if(h===".")e.splice(l,1),l-=1;else if(h===".."){if(l===1&amp;&amp;(e[2]===".."||e[0]===".."))break;l&gt;0&amp;&amp;(e.splice(l-1,2),l-=2)}}e=e.join("/")}else e.indexOf("./")===0&amp;&amp;(e=e.substring(2));if((p||v)&amp;&amp;d){n=e.split("/");for(l=n.length;l&gt;0;l-=1){r=n.slice(0,l).join("/");if(p)for(c=p.length;c&gt;0;c-=1){i=d[p.slice(0,c).join("/")];if(i){i=i[r];if(i){s=i,o=l;break}}}if(s)break;!a&amp;&amp;v&amp;&amp;v[r]&amp;&amp;(a=v[r],f=l)}!s&amp;&amp;a&amp;&amp;(s=a,o=f),s&amp;&amp;(n.splice(0,o,s),e=n.join("/"))}return e}function p(t,r){return function(){return n.apply(e,l.call(arguments,0).concat([t,r]))}}function d(e){return function(t){return h(t,e)}}function v(e){return function(t){s[e]=t}}function m(n){if(c(o,n)){var r=o[n];delete o[n],a[n]=!0,t.apply(e,r)}if(!c(s,n)&amp;&amp;!c(a,n))throw new Error("No "+n);return s[n]}function g(e){var t,n=e?e.indexOf("!"):-1;return n&gt;-1&amp;&amp;(t=e.substring(0,n),e=e.substring(n+1,e.length)),[t,e]}function y(e){return function(){return u&amp;&amp;u.config&amp;&amp;u.config[e]||{}}}var t,n,r,i,s={},o={},u={},a={},f=Object.prototype.hasOwnProperty,l=[].slice;r=function(e,t){var n,r=g(e),i=r[0];return e=r[1],i&amp;&amp;(i=h(i,t),n=m(i)),i?n&amp;&amp;n.normalize?e=n.normalize(e,d(t)):e=h(e,t):(e=h(e,t),r=g(e),i=r[0],e=r[1],i&amp;&amp;(n=m(i))),{f:i?i+"!"+e:e,n:e,pr:i,p:n}},i={require:function(e){return p(e)},exports:function(e){var t=s[e];return typeof t!="undefined"?t:s[e]={}},module:function(e){return{id:e,uri:"",exports:s[e],config:y(e)}}},t=function(t,n,u,f){var l,h,d,g,y,b=[],w;f=f||t;if(typeof u=="function"){n=!n.length&amp;&amp;u.length?["require","exports","module"]:n;for(y=0;y&lt;n.length;y+=1){g=r(n[y],f),h=g.f;if(h==="require")b[y]=i.require(t);else if(h==="exports")b[y]=i.exports(t),w=!0;else if(h==="module")l=b[y]=i.module(t);else if(c(s,h)||c(o,h)||c(a,h))b[y]=m(h);else{if(!g.p)throw new Error(t+" missing "+h);g.p.load(g.n,p(f,!0),v(h),{}),b[y]=s[h]}}d=u.apply(s[t],b);if(t)if(l&amp;&amp;l.exports!==e&amp;&amp;l.exports!==s[t])s[t]=l.exports;else if(d!==e||!w)s[t]=d}else t&amp;&amp;(s[t]=u)},requirejs=require=n=function(s,o,a,f,l){return typeof s=="string"?i[s]?i[s](o):m(r(s,o).f):(s.splice||(u=s,o.splice?(s=o,o=a,a=null):s=e),o=o||function(){},typeof a=="function"&amp;&amp;(a=f,f=l),t(e,s,o,a),n)},n.config=function(e){return u=e,u.deps&amp;&amp;n(u.deps,u.callback),n},define=function(e,t,n){t.splice||(n=t,t=[]),!c(s,e)&amp;&amp;!c(o,e)&amp;&amp;(o[e]=[e,t,n])},define.amd={jQuery:!0}})(),define.unordered=!0,Function.prototype.bind||(Function.prototype.bind=function(e){var t=Array.prototype.slice,n=t.call(arguments,1),r=this,i=function(){},s=function(){if(i.prototype&amp;&amp;this instanceof i){var s=r.apply(new i,n.concat(t.call(arguments)));return Object(s)===s?s:r}return r.apply(e,n.concat(t.call(arguments)))};return i.prototype=r.prototype,s.prototype=new i,s}),function(e,t){typeof module!="undefined"&amp;&amp;module.exports?module.exports=t():e.AudioManager=t()}(this,function(){var e,t,n;return function(r){function d(e,t){return h.call(e,t)}function v(e,t){var n,r,i,s,o,u,a,f,c,h,p=t&amp;&amp;t.split("/"),d=l.map,v=d&amp;&amp;d["*"]||{};if(e&amp;&amp;e.charAt(0)===".")if(t){p=p.slice(0,p.length-1),e=p.concat(e.split("/"));for(f=0;f&lt;e.length;f+=1){h=e[f];if(h===".")e.splice(f,1),f-=1;else if(h===".."){if(f===1&amp;&amp;(e[2]===".."||e[0]===".."))break;f&gt;0&amp;&amp;(e.splice(f-1,2),f-=2)}}e=e.join("/")}else e.indexOf("./")===0&amp;&amp;(e=e.substring(2));if((p||v)&amp;&amp;d){n=e.split("/");for(f=n.length;f&gt;0;f-=1){r=n.slice(0,f).join("/");if(p)for(c=p.length;c&gt;0;c-=1){i=d[p.slice(0,c).join("/")];if(i){i=i[r];if(i){s=i,o=f;break}}}if(s)break;!u&amp;&amp;v&amp;&amp;v[r]&amp;&amp;(u=v[r],a=f)}!s&amp;&amp;u&amp;&amp;(s=u,o=a),s&amp;&amp;(n.splice(0,o,s),e=n.join("/"))}return e}function m(e,t){return function(){return s.apply(r,p.call(arguments,0).concat([e,t]))}}function g(e){return function(t){return v(t,e)}}function y(e){return function(t){a[e]=t}}function b(e){if(d(f,e)){var t=f[e];delete f[e],c[e]=!0,i.apply(r,t)}if(!d(a,e)&amp;&amp;!d(c,e))throw new Error("No "+e);return a[e]}function w(e){var t,n=e?e.indexOf("!"):-1;return n&gt;-1&amp;&amp;(t=e.substring(0,n),e=e.substring(n+1,e.length)),[t,e]}function E(e){return function(){return l&amp;&amp;l.config&amp;&amp;l.config[e]||{}}}var i,s,o,u,a={},f={},l={},c={},h=Object.prototype.hasOwnProperty,p=[].slice;o=function(e,t){var n,r=w(e),i=r[0];return e=r[1],i&amp;&amp;(i=v(i,t),n=b(i)),i?n&amp;&amp;n.normalize?e=n.normalize(e,g(t)):e=v(e,t):(e=v(e,t),r=w(e),i=r[0],e=r[1],i&amp;&amp;(n=b(i))),{f:i?i+"!"+e:e,n:e,pr:i,p:n}},u={require:function(e){return m(e)},exports:function(e){var t=a[e];return typeof t!="undefined"?t:a[e]={}},module:function(e){return{id:e,uri:"",exports:a[e],config:E(e)}}},i=function(e,t,n,i){var s,l,h,p,v,g=[],w;i=i||e;if(typeof n=="function"){t=!t.length&amp;&amp;n.length?["require","exports","module"]:t;for(v=0;v&lt;t.length;v+=1){p=o(t[v],i),l=p.f;if(l==="require")g[v]=u.require(e);else if(l==="exports")g[v]=u.exports(e),w=!0;else if(l==="module")s=g[v]=u.module(e);else if(d(a,l)||d(f,l)||d(c,l))g[v]=b(l);else{if(!p.p)throw new Error(e+" missing "+l);p.p.load(p.n,m(i,!0),y(l),{}),g[v]=a[l]}}h=n.apply(a[e],g);if(e)if(s&amp;&amp;s.exports!==r&amp;&amp;s.exports!==a[e])a[e]=s.exports;else if(h!==r||!w)a[e]=h}else e&amp;&amp;(a[e]=n)},e=t=s=function(e,t,n,a,f){return typeof e=="string"?u[e]?u[e](t):b(o(e,t).f):(e.splice||(l=e,t.splice?(e=t,t=n,n=null):e=r),t=t||function(){},typeof n=="function"&amp;&amp;(n=a,a=f),a?i(r,e,t,n):setTimeout(function(){i(r,e,t,n)},4),s)},s.config=function(e){return l=e,l.deps&amp;&amp;s(l.deps,l.callback),s},n=function(e,t,n){t.splice||(n=t,t=[]),!d(a,e)&amp;&amp;!d(f,e)&amp;&amp;(f[e]=[e,t,n])},n.amd={jQuery:!0}}(),n("vendor/almond",function(){}),!function(e){function t(e,t,n){if(!e||!O[typeof e])return e;t=t&amp;&amp;typeof n=="undefined"?t:u.createCallback(t,n);var r=e.length;if(n=-1,r&amp;&amp;l(e))for(;++n&lt;r&amp;&amp;(n+="",!1!==t(e[n],n,e)););else for(n in r=typeof e=="function",e)if((!r||"prototype"!=n)&amp;&amp;!1===t(e[n],n,e))break;return e}function r(e,t,n){var r,i=e,s=i;if(!i)return s;var o=arguments,a=0,f=typeof n=="number"?2:o.length;if(3&lt;f&amp;&amp;"function"==typeof o[f-2])var c=u.createCallback(o[--f-1],o[f--],2);else 2&lt;f&amp;&amp;"function"==typeof o[f-1]&amp;&amp;(c=o[--f]);for(;++a&lt;f;)if((i=o[a])&amp;&amp;O[typeof i]){var h=i.length;if(r=-1,h&amp;&amp;l(i))for(;++r&lt;h;)r+="",s[r]=c?c(s[r],i[r]):i[r];else for(r in h=typeof i=="function",i)h&amp;&amp;"prototype"==r||!B.call(i,r)||(s[r]=c?c(s[r],i[r]):i[r])}return s}function i(e){var t,n=[];if(!e||!O[typeof e])return n;var r=e.length;if(t=-1,r&amp;&amp;l(e))for(;++t&lt;r;)t+="",n.push(t);else for(t in r=typeof e=="function",e)r&amp;&amp;"prototype"==t||!B.call(e,t)||n.push(t);return n}function s(){}function o(e){e.length=0,y.length&lt;E&amp;&amp;y.push(e)}function u(){}function a(e,t,n){function r(){var a=arguments,l=s?this:t;return i||(e=t[o]),n.length&amp;&amp;(a=a.length?(a=z.call(a),u?a.concat(n):n.concat(a)):n),this instanceof r?(l=f(e.prototype),a=e.apply(l,a),d(a)?a:l):e.apply(l,a)}var i=p(e),s=!n,o=t;if(s){var u=void 0;n=t}else if(!i)throw new TypeError;return r}function f(e){return d(e)?q(e):{}}function l(e){return F.call(e)==S}function c(e){var n=[];return t(e,function(e,t){p(e)&amp;&amp;n.push(t)}),n.sort()}function h(e,n,r,i,s,a){var f=r===w;if(typeof r=="function"&amp;&amp;!f){r=u.createCallback(r,i,2);var l=r(e,n);if(typeof l!="undefined")return!!l}if(e===n)return 0!==e||1/e==1/n;var c=typeof e,d=typeof n;if(e===e&amp;&amp;(!e||"function"!=c&amp;&amp;"object"!=c)&amp;&amp;(!n||"function"!=d&amp;&amp;"object"!=d))return!1;if(null==e||null==n)return e===n;if(d=F.call(e),c=F.call(n),d==S&amp;&amp;(d=k),c==S&amp;&amp;(c=k),d!=c)return!1;switch(d){case T:case N:return+e==+n;case C:return e!=+e?n!=+n:0==e?1/e==1/n:e==+n;case L:case A:return e==n+""}if(c=d==x,!c){if(B.call(e,"__wrapped__")||B.call(n,"__wrapped__"))return h(e.__wrapped__||e,n.__wrapped__||n,r,i,s,a);if(d!=k)return!1;var d=e.constructor,v=n.constructor;if(d!=v&amp;&amp;!(p(d)&amp;&amp;d instanceof d&amp;&amp;p(v)&amp;&amp;v instanceof v))return!1}for(v=!s,s||(s=y.pop()||[]),a||(a=y.pop()||[]),d=s.length;d--;)if(s[d]==e)return a[d]==n;var m=0,l=!0;if(s.push(e),a.push(n),c){if(d=e.length,m=n.length,l=m==e.length,!l&amp;&amp;!f)return l;for(;m--;)if(c=d,v=n[m],f)for(;c--&amp;&amp;!(l=h(e[c],v,r,i,s,a)););else if(!(l=h(e[m],v,r,i,s,a)))break;return l}return t(n,function(t,n,o){return B.call(o,n)?(m++,l=B.call(e,n)&amp;&amp;h(e[n],t,r,i,s,a)):void 0}),l&amp;&amp;!f&amp;&amp;t(e,function(e,t,n){return B.call(n,t)?l=-1&lt;--m:void 0}),v&amp;&amp;(o(s),o(a)),l}function p(e){return typeof e=="function"}function d(e){return!!e&amp;&amp;!!O[typeof e]}function v(e,t,n){if(t&amp;&amp;typeof n=="undefined"&amp;&amp;X(e)){n=-1;for(var r=e.length;++n&lt;r&amp;&amp;!1!==t(e[n],n,e););}else if(e)if(t=t&amp;&amp;typeof n=="undefined"?t:u.createCallback(t,n),r=e.length,n=-1,typeof r=="number")for(;++n&lt;r&amp;&amp;!1!==t(e[n],n,e););else for(n in r=typeof e=="function",e)if((!r||"prototype"!=n)&amp;&amp;B.call(e,n)&amp;&amp;!1===t(e[n],n,e))break;return e}function m(e,t){return W.fastBind||I&amp;&amp;2&lt;arguments.length?I.call.apply(I,arguments):a(e,t,z.call(arguments,2))}function g(e){return e}var y=[],b=0,w={},E=40,S="[object Arguments]",x="[object Array]",T="[object Boolean]",N="[object Date]",C="[object Number]",k="[object Object]",L="[object RegExp]",A="[object String]",O={"boolean":!1,"function":!0,object:!0,number:!1,string:!1,"undefined":!1},M=O[typeof global]&amp;&global;!M||M.global!==M&amp;&amp;M.window!==M||(e=M);var _=[],M=Error.prototype,D=Object.prototype,P=RegExp("^"+(D.valueOf+"").replace(/[.*+?^${}()|[\]\\]/g,"\\$&amp;").replace(/valueOf|for [^\]]+/g,".+?")+"$"),H=_.concat,B=D.hasOwnProperty,j=D.propertyIsEnumerable,F=D.toString,I=P.test(I=F.bind)&amp;&amp;I,q=P.test(q=Object.create)&amp;&amp;q,R=P.test(R=Array.isArray)&amp;&amp;R,U=P.test(U=Object.keys)&amp;&amp;U,z=_.slice;e=P.test(e.attachEvent),e=I&amp;&amp;!/\n|true/.test(I+e);var W=u.support={};W.enumErrorProps=j.call(M,"message")||j.call(M,"name"),W.enumPrototypes=!0,W.fastBind=I&amp;&amp;!e,W.nonEnumArgs=!0,q||(f=function(e){if(d(e)){s.prototype=e;var t=new s;s.prototype=null}return t||{}});var X=R||function(e){return e?typeof e=="object"&amp;&amp;F.call(e)==x:!1},V=U?function(e){return d(e)?W.enumPrototypes&amp;&amp;typeof e=="function"||W.nonEnumArgs&amp;&amp;e.length&amp;&amp;l(e)?i(e):U(e):[]}:i;p(/x/)&amp;&amp;(p=function(e){return typeof e=="function"&amp;&amp;"[object Function]"==F.call(e)}),u.assign=r,u.bind=m,u.bindAll=function(e){for(var t=1&lt;arguments.length?H.apply(_,z.call(arguments,1)):c(e),n=-1,r=t.length;++n&lt;r;){var i=t[n];e[i]=m(e[i],e)}return e},u.createCallback=function(e,t,n){if(null==e)return g;var r=typeof e;if("function"!=r){if("object"!=r)return function(t){return t[e]};var i=V(e);return function(t){for(var n=i.length,r=!1;n--&amp;&amp;(r=h(t[i[n]],e[i[n]],w)););return r}}return typeof t=="undefined"?e:1===n?function(n){return e.call(t,n)}:2===n?function(n,r){return e.call(t,n,r)}:4===n?function(n,r,i,s){return e.call(t,n,r,i,s)}:function(n,r,i){return e.call(t,n,r,i)}},u.defaults=function(e,t,n){var r,i=e,s=i;if(!i)return s;for(var o=arguments,u=0,a=typeof n=="number"?2:o.length;++u&lt;a;)if((i=o[u])&amp;&amp;O[typeof i]){var f=i.length;if(r=-1,f&amp;&amp;l(i))for(;++r&lt;f;)r+="","undefined"==typeof s[r]&amp;&amp;(s[r]=i[r]);else for(r in f=typeof i=="function",i)f&amp;&amp;"prototype"==r||!B.call(i,r)||"undefined"==typeof s[r]&amp;&amp;(s[r]=i[r])}return s},u.forEach=v,u.forIn=t,u.functions=c,u.invoke=function(e,t){var n=z.call(arguments,2),r=-1,i=typeof t=="function",s=e?e.length:0,o=Array(typeof s=="number"?s:0);return v(e,function(e){o[++r]=(i?t:e[t]).apply(e,n)}),o},u.keys=V,u.once=function(e){var t,n;return function(){return t?n:(t=!0,n=e.apply(this,arguments),e=null,n)}},u.pick=function(e,n,r){var i={};if(typeof n!="function")for(var s=-1,o=H.apply(_,z.call(arguments,1)),a=d(e)?o.length:0;++s&lt;a;){var f=o[s];f in e&amp;&amp;(i[f]=e[f])}else n=u.createCallback(n,r),t(e,function(e,t,r){n(e,t,r)&amp;&amp;(i[t]=e)});return i},u.values=function(e){for(var t=-1,n=V(e),r=n.length,i=Array(r);++t&lt;r;)i[t]=e[n[t]];return i},u.each=v,u.extend=r,u.methods=c,u.identity=g,u.isArguments=l,u.isArray=X,u.isEqual=h,u.isFunction=p,u.isObject=d,u.isString=function(e){return typeof e=="string"||F.call(e)==A},u.uniqueId=function(e){var t=++b;return(null==e?"":e)+""+t},u.VERSION="1.3.1",typeof n=="function"&amp;&amp;typeof n.amd=="object"&amp;&amp;n.amd&amp;&amp;n("underscore",[],function(){return u})}(this),n("browserutils",{supportHTML5Audio:function(){var e;try{if(window.HTMLAudioElement&amp;&amp;typeof Audio!="undefined")return e=new Audio,!0}catch(t){return!1}},supportSourceSwappingWithPreload:function(){return/Firefox/i.test(navigator.userAgent)},isMobile:function(e){var t=window.navigator.userAgent,n=["mobile","iPhone","iPad","iPod","Android","Skyfire"];return n.some(function(e){return e=new RegExp(e,"i"),e.test(t)})},isIE10Mobile:function(){return/IEmobile\/10\.0/gi.test(navigator.userAgent)},canPlayType:function(e){var t=document.createElement("audio");return!t||!t.canPlayType?!1:t.canPlayType(e).match(/maybe|probably/i)?!0:!1},isNativeHlsSupported:function(){var e=navigator.userAgent,t=["iPhone","iPad","iPod"],n,r,i;return n=function(t){return t.test(e)},r=!n(/chrome/i)&amp;&amp;!n(/opera/i)&amp;&amp;n(/safari/i),i=t.some(function(e){return n(new RegExp(e,"i"))}),i||r},isMSESupported:function(){return!!window.MediaSource||!!window.WebKitMediaSource},isMSESupportMPEG:function(){var e=window.MediaSource||window.WebKitMediaSource;return e?e.isTypeSupported("audio/mpeg"):!1}}),n("errors",{FLASH_HLS_PLAYLIST_NOT_FOUND:"HLS_PLAYLIST_NOT_FOUND",FLASH_HLS_PLAYLIST_SECURITY_ERROR:"HLS_SECURITY_ERROR",FLASH_HLS_NOT_VALID_PLAYLIST:"HLS_NOT_VALID_PLAYLIST",FLASH_HLS_NO_TS_IN_PLAYLIST:"HLS_NO_TS_IN_PLAYLIST",FLASH_HLS_NO_PLAYLIST_IN_MANIFEST:"HLS_NO_PLAYLIST_IN_MANIFEST",FLASH_HLS_TS_IS_CORRUPT:"HLS_TS_IS_CORRUPT",FLASH_HLS_FLV_TAG_CORRUPT:"HLS_FLV_TAG_CORRUPT",FLASH_HTTP_FILE_NOT_FOUND:"HTTP_FILE_NOT_FOUND",FLASH_RTMP_CONNECT_FAILED:"RTMP_CONNECT_FAILED",FLASH_RTMP_CONNECT_CLOSED:"RTMP_CONNECT_CLOSED",FLASH_RTMP_CANNOT_PLAY_STREAM:"RTMP_CANNOT_PLAY_STREAM",FLASH_PROXY_CANT_LOAD_FLASH:"CANT_LOAD_FLASH",FLASH_PROXY_FLASH_BLOCKED:"FLASH_PROXY_FLASH_BLOCKED",HTML5_AUDIO_ABORTED:"HTML5_AUDIO_ABORTED",HTML5_AUDIO_NETWORK:"HTML5_AUDIO_NETWORK",HTML5_AUDIO_DECODE:"HTML5_AUDIO_DECODE",HTML5_AUDIO_SRC_NOT_SUPPORTED:"HTML5_AUDIO_SRC_NOT_SUPPORTED",HTML5_AUDIO_ENDED_EARLY:"HTML5_AUDIO_ENDED_EARLY",HTML5_AUDIO_OVERRUN:"HTML5_AUDIO_OVERRUN",MSE_NOT_SUPPORTED:"MSE_NOT_SUPPORTED",MSE_MP3_NOT_SUPPORTED:"MSE_MP3_NOT_SUPPORTED",MSE_HLS_NOT_VALID_PLAYLIST:"MSE_HLS_NOT_VALID_PLAYLIST",MSE_HLS_PLAYLIST_NOT_FOUND:"MSE_HLS_PLAYLIST_NOT_FOUND",MSE_HLS_SEGMENT_NOT_FOUND:"MSE_HLS_SEGMENT_NOT_FOUND"}),n("vendor/events",["require","exports","module","underscore"],function(e,t,n){var r=e("underscore"),i=[],s=i.push,o=i.slice,u=i.splice,a=/\s+/,f=function(e,t,n,r){if(!n)return!0;if(typeof n=="object")for(var i in n)e[t].apply(e,[i,n[i]].concat(r));else{if(!a.test(n))return!0;var s=n.split(a);for(var o=0,u=s.length;o&lt;u;o++)e[t].apply(e,[s[o]].concat(r))}},l=function(e,t){var n,r=-1,i=e.length;switch(t.length){case 0:while(++r&lt;i)n=e[r],n.callback.call(n.ctx);return;case 1:while(++r&lt;i)(n=e[r]).callback.call(n.ctx,t[0]);return;case 2:while(++r&lt;i)(n=e[r]).callback.call(n.ctx,t[0],t[1]);return;case 3:while(++r&lt;i)(n=e[r]).callback.call(n.ctx,t[0],t[1],t[2]);return;default:while(++r&lt;i)(n=e[r]).callback.apply(n.ctx,t)}},c={on:function(e,t,n){if(!f(this,"on",e,[t,n])||!t)return this;this._events||(this._events={});var r=this._events[e]||(this._events[e]=[]);return r.push({callback:t,context:n,ctx:n||this}),this},once:function(e,t,n){if(!f(this,"once",e,[t,n])||!t)return this;var i=this,s=r.once(function(){i.off(e,s),t.apply(this,arguments)});return s._callback=t,this.on(e,s,n)},off:function(e,t,n){var i,s,o,u,a,l,c,h;if(!this._events||!f(this,"off",e,[t,n]))return this;if(!e&amp;&amp;!t&amp;&amp;!n)return this._events={},this;u=e?[e]:r.keys(this._events);for(a=0,l=u.length;a&lt;l;a++){e=u[a];if(o=this._events[e]){this._events[e]=i=[];if(t||n)for(c=0,h=o.length;c&lt;h;c++)s=o[c],(t&amp;&amp;t!==s.callback&amp;&amp;t!==s.callback._callback||n&amp;&amp;n!==s.context)&amp;&amp;i.push(s);i.length||delete this._events[e]}}return this},trigger:function(e,t){if(!this._events)return this;var t=o.call(arguments,1);if(!f(this,"trigger",e,t))return this;var n=this._events[e],r=this._events.all;return n&amp;&amp;l(n,t),r&amp;&amp;l(r,arguments),this},stopListening:function(e,t,n){var r=this._listeners;if(!r)return this;var i=!t&amp;&amp;!n;typeof t=="object"&amp;&amp;(n=this),e&amp;&amp;((r={})[e._listenerId]=e);for(var s in r)r[s].off(t,n,this),i&amp;&amp;delete this._listeners[s];return this}},h={listenTo:"on",listenToOnce:"once"};r.each(h,function(e,t){c[t]=function(t,n,i){var s=this._listeners||(this._listeners={}),o=t._listenerId||(t._listenerId=r.uniqueId("l"));return s[o]=t,typeof n=="object"&amp;&amp;(i=this),t[e](n,i,this),this}}),c.bind=c.on,c.unbind=c.off,n.exports=c}),n("states",{PLAYING:"playing",LOADING:"loading",SEEKING:"seeking",PAUSED:"paused",ERROR:"error",IDLE:"idle",INITIALIZE:"initialize",ENDED:"ended",DEAD:"dead"}),n("logger",["require","exports","module"],function(e,t,n){var r;n.exports=r=function(e,t,n){this.enabled=n.debug,this.type=e,this.id=t},r.prototype.log=function(e){if(!this.enabled)return;window.console.log("#"+this.type+" "+this.id+"# "+e)}}),n("html5audioplayer",["require","exports","module","underscore","vendor/events","states","errors","logger","browserutils"],function(e,t,n){var r,i=e("underscore"),s=e("vendor/events"),o=e("states"),u=e("errors"),a=e("logger"),f=e("browserutils");n.exports=r=function(e,t){this._id=e.id,this._descriptor=e,this._isLoaded=!1,this._settings=t,this._bufferingTimeout=null,this._currentPosition=0,this._loadedPosition=0,this._prevCurrentPosition=0,this._prevCheckTime=0,this._positionUpdateTimer=0,this._playRequested=!1,this._startFromPosition=0,e.duration&amp;&amp;(this._duration=e.duration),i.bindAll(this,"_onPositionChange","_onHtml5AudioStateChange","_onLoaded","_onLoadedMetadata","_onBuffering"),this._init(),this._toggleEventListeners(!0),this._descriptor.preload&amp;&amp;this._preload(),e.autoPlay?this.play():this._setState(o.IDLE)},i.extend(r.prototype,s),r.prototype.getId=function(){return this._id},r.prototype.getType=function(){return"HTML5 audio"},r.prototype.play=function(e){if(this._isInOneOfStates(o.ERROR,o.DEAD))return;if(this._isInOneOfStates(o.PAUSED,o.ENDED)){this.resume();return}this._logger.log("play"),this._startFromPosition=e||0,this._setState(o.LOADING),this._playRequested=!0,this._isLoaded?this._playAfterLoaded():(this._preload(),this.once("loaded",this._playAfterLoaded))},r.prototype.pause=function(){this._playRequested=!1;if(this._isInOneOfStates(o.ERROR,o.DEAD))return;this._logger.log("pause"),this._html5Audio.pause(),clearTimeout(this._bufferingTimeout),clearInterval(this._positionUpdateTimer)},r.prototype.seek=function(e){var t=!1,n=e/1e3,r=this._html5Audio.seekable,i;if(this._isInOneOfStates(o.ERROR,o.DEAD))return;if(!this._isLoaded){this.once("loaded",function(){this.seek(e)});return}if(f.isIE10Mobile)t=!0;else for(i=0;i&lt;r.length;i++)if(n&lt;=r.end(i)&amp;&amp;n&gt;=r.start(i)){t=!0;break}if(!t)return;this._logger.log("seek"),this._setState(o.SEEKING),this._html5Audio.currentTime=n,this._currentPosition=e,clearTimeout(this._bufferingTimeout)},r.prototype.resume=function(){if(this._isInOneOfStates(o.ERROR,o.DEAD))return;this._logger.log("resume"),this.getState()===o.PAUSED?(this._setState(o.LOADING),this._html5Audio.play(this._html5Audio.currentTime)):this.getState()===o.ENDED&amp;&amp;(this._setState(o.LOADING),this._html5Audio.play(0)),clearInterval(this._positionUpdateTimer),this._positionUpdateTimer=setInterval(this._onPositionChange,this._settings.updateInterval)},r.prototype.setVolume=function(e){if(!this._html5Audio)return;this._html5Audio.volume=e},r.prototype.getVolume=function(){return this._html5Audio?this._html5Audio.volume:1},r.prototype.setMute=function(e){if(!this._html5Audio)return;this._html5Audio.muted=e},r.prototype.getMute=function(){return this._html5Audio?this._html5Audio.muted:!1},r.prototype.getState=function(){return this._state},r.prototype.getCurrentPosition=function(){return this._currentPosition},r.prototype.getLoadedPosition=function(){return this._loadedPosition},r.prototype.getDuration=function(){return this._duration},r.prototype.kill=function(){if(this._state===o.DEAD)return;clearInterval(this._positionUpdateTimer),clearTimeout(this._bufferingTimeout),this._playRequested=!1,this._toggleEventListeners(!1),this._html5Audio.pause(),this._html5Audio.src=null,delete this._html5Audio,this._setState(o.DEAD)},r.prototype.getErrorMessage=function(){return this._errorMessage},r.prototype.getErrorID=function(){return this._errorID},r.prototype._init=function(){this._html5Audio=new Audio,this._html5Audio.mozAudioChannelType="content",this._html5Audio.id=this._settings.audioObjectID+"_"+this._descriptor.id,this._html5Audio.preload="none",this._logger=new a(this.getType(),this._id,this._settings)},r.prototype._preload=function(){this._html5Audio.preload!=="auto"&amp;&amp;(this._logger.log("setting up preload"),this._html5Audio.preload="auto",this._html5Audio.type=this._descriptor.mimeType,this._html5Audio.src=this._descriptor.src,this._html5Audio.load())},r.prototype._playAfterLoaded=function(){if(!this._playRequested)return;this._trySeekToStartPosition(),this._html5Audio.play(),clearInterval(this._positionUpdateTimer),this._positionUpdateTimer=setInterval(this._onPositionChange,this._settings.updateInterval)},r.prototype._setState=function(e){if(this._state===e)return;this._logger.log('state changed "'+e+'"'),this._logger.log("_currentPosition = "+this._currentPosition+", _loadedPosition = "+this._loadedPosition),this._state=e,this.trigger("stateChange",e,this)},r.prototype._isInOneOfStates=function(){for(var e in arguments)if(arguments[e]===this._state)return!0;return!1},r.prototype._toggleEventListeners=function(e){if(!this._html5Audio)return;var t=e?"addEventListener":"removeEventListener";["ended","play","playing","pause","seeking","waiting","seeked","error"].forEach(function(e){this._html5Audio[t](e,this._onHtml5AudioStateChange)},this),this._html5Audio[t]("loadeddata",this._onLoaded),this._html5Audio[t]("loadedmetadata",this._onLoadedMetadata)},r.prototype._updatePositions=function(){this._currentPosition=this._html5Audio.currentTime*1e3,this._html5Audio.seekable.length&gt;0&amp;&amp;(this._loadedPosition=this._html5Audio.seekable.end(0)*1e3)},r.prototype._trySeekToStartPosition=function(){var e;if(this._startFromPosition&gt;0){this._logger.log("seek to start position="+this._startFromPosition),e=this._startFromPosition/1e3,this._html5Audio.currentTime=e;if(this._html5Audio.currentTime===e)return this._startFromPosition=0,!0}return!1},r.prototype._onBuffering=function(){this._setState(o.LOADING)},r.prototype._onLoaded=function(e){this._logger.log('html5 audio event (loaded handler) "'+e.type+'"');if(this._duration===undefined||this._duration===0)this._duration=this._html5Audio.duration*1e3;this._isLoaded=!0,this.trigger("loaded",this)},r.prototype._onLoadedMetadata=function(e){this._logger.log('html5 audio event (loadedmetadata handler) "'+e.type+'"'),this.trigger("loadedmetadata",this)},r.prototype._onPositionChange=function(e){this._updatePositions();var t=this._currentPosition-this._prevCurrentPosition,n,r,i;this.trigger("positionChange",this.getCurrentPosition(),this._loadedPosition,this._duration,this);if(!this._isInOneOfStates(o.PLAYING,o.LOADING)){this._state===o.SEEKING&amp;&amp;t&gt;0&amp;&amp;this._setState(o.PLAYING);return}this._duration!==0&amp;&amp;(this._currentPosition&gt;this._duration||this._currentPosition&gt;this._loadedPosition&amp;&amp;!f.isIE10Mobile)&amp;&amp;this._onHtml5AudioStateChange({type:"ended"}),n=(new Date).valueOf(),r=n-this._prevCheckTime;if(r===0)return;i=t/r,i&gt;.7?(clearTimeout(this._bufferingTimeout),this._setState(o.PLAYING),this._bufferingTimeout=null):this._state===o.PLAYING&amp;&amp;this._bufferingTimeout==null&amp;&amp;(this._bufferingTimeout=setTimeout(this._onBuffering,this._settings.bufferingDelay)),this._prevCurrentPosition=this._currentPosition,this._prevCheckTime=n},r.prototype._onHtml5AudioStateChange=function(e){this._logger.log('html5 audio event (state change handler) "'+e.type+'"'),clearTimeout(this._bufferingTimeout);switch(e.type){case"playing":if(this._trySeekToStartPosition())return;this._updatePositions(),this._setState(o.PLAYING);break;case"pause":this._setState(o.PAUSED);break;case"ended":this._currentPosition=this._loadedPosition=this._duration,this.trigger("positionChange",this.getCurrentPosition(),this._loadedPosition,this._duration,this),clearInterval(this._positionUpdateTimer),this._setState(o.ENDED);break;case"waiting":if(this.getState()===o.SEEKING)break;this._setState(o.LOADING);break;case"seeking":this._setState(o.SEEKING);break;case"seeked":this._updatePositions(),this._html5Audio.paused?this._setState(o.PAUSED):this._setState(o.PLAYING);break;case"error":this._error(this._html5AudioErrorCodeToErrorId(),!0)}},r.prototype._html5AudioErrorCodeToErrorId=function(){return{1:u.HTML5_AUDIO_ABORTED,2:u.HTML5_AUDIO_NETWORK,3:u.HTML5_AUDIO_DECODE,4:u.HTML5_AUDIO_SRC_NOT_SUPPORTED}[this._html5Audio.error.code]},r.prototype._error=function(e,t){var n="error: ";t&amp;&amp;(n="error (native): "),this._errorID=e,this._errorMessage=this._getErrorMessage(this._errorID),this._logger.log(n+this._errorID+" "+this._errorMessage),this._setState(o.ERROR),this._toggleEventListeners(!1)},r.prototype._getErrorMessage=function(e){var t={};return t[u.HTML5_AUDIO_ABORTED]="The fetching process was aborted by the user.",t[u.HTML5_AUDIO_NETWORK]="A network connection lost.",t[u.HTML5_AUDIO_DECODE]="An error occurred while decoding the media resource.",t[u.HTML5_AUDIO_SRC_NOT_SUPPORTED]="The media resource is not suitable.",t[u.HTML5_AUDIO_ENDED_EARLY]="Audio playback ended before the indicated duration of the track.",t[u.HTML5_AUDIO_OVERRUN]="Audio playback continued past end of the track.",t[e]}}),n("hlsaudioplayer",["require","exports","module","underscore","errors","vendor/events","html5audioplayer","logger","states"],function(e,t,n){var r,i=e("underscore"),s=e("errors"),o=e("vendor/events"),u=e("html5audioplayer"),a=e("logger"),f=e("states"),l=1;n.exports=r=function(e,t){u.apply(this,arguments),this._seekPosition=0},i.extend(r.prototype,u.prototype),r.prototype.getType=function(){return"HTML5 HLS audio"},r.prototype.seek=function(e){u.prototype.seek.apply(this,arguments),this._isInOneOfStates(f.LOADING,f.SEEKING)&amp;&amp;(this._seekPosition=e)},r.prototype.getCurrentPosition=function(){if(this._isInOneOfStates(f.LOADING)&amp;&amp;this._seekPosition&gt;0)return this._seekPosition;if(this._isInOneOfStates(f.PLAYING,f.SEEKING)){if(this._seekPosition&gt;=this._currentPosition)return this._seekPosition;this._seekPosition=0}return u.prototype.getCurrentPosition.apply(this,arguments)},r.prototype._onStateChange=function(e){this._logger.log('hls html5 audio event "'+e.type+'"'),clearTimeout(this._bufferingTimeout);switch(e.type){case"playing":if(this._trySeekToStartPosition())return;this.updatePositions(),this._setState(f.PLAYING);break;case"pause":this._setState(f.PAUSED);break;case"ended":if(this._currentPosition+l&lt;this._duration){this._errorID=s.HTML5_AUDIO_ENDED_EARLY,this._errorMessage=this._getErrorMessage(this._errorID),this._logger.log("hls html5 audio error: "+this._errorID+" "+this._errorMessage),this._setState(f.ERROR),this.toggleEventListeners(!1);break}this._currentPosition=this._loadedPosition=this._duration,this.trigger("positionChange",this._currentPosition,this._loadedPosition,this._duration,this),this._setState(f.ENDED),clearInterval(this._positionUpdateTimer);break;case"waiting":if(this.getState()===f.SEEKING)break;this._setState(f.LOADING);break;case"seeking":this._setState(f.SEEKING);break;case"seeked":this.updatePositions(),this._html5Audio.paused&amp;&amp;this._setState(f.PAUSED);break;case"error":this._errorID={1:s.HTML5_AUDIO_ABORTED,2:s.HTML5_AUDIO_NETWORK,3:s.HTML5_AUDIO_DECODE,4:s.HTML5_AUDIO_SRC_NOT_SUPPORTED}[this._html5Audio.error.code],this._errorMessage=this._getErrorMessage(this._errorID),this._logger.log("hls html5 audio error: "+this._errorID+" "+this._errorMessage),this._setState(f.ERROR),this.toggleEventListeners(!1)}}}),n("singleaudioplayer",["require","exports","module","underscore","browserutils","errors","vendor/events","html5audioplayer","logger","states"],function(e,t,n){var r,i=e("underscore"),s=e("browserutils"),o=e("errors"),u=e("vendor/events"),a=e("html5audioplayer"),f=e("logger"),l=e("states"),c={};n.exports=r=function(e,t){a.apply(this,arguments)},i.extend(r.prototype,a.prototype),r.prototype._init=function(){if(!r._html5Audio){var e=new Audio;e.mozAudioChannelType="content",e.id=this._settings.audioObjectID+"_Single",e.preload="none",r._html5Audio=e,this._preloadAudio=e,this._addGlobalListeners()}this._html5Audio=r._html5Audio,this._playRequested=!1,this._logger=new f(this.getType(),this._id,this._settings)},r.prototype._toggleEventListeners=function(e){e?c[this._id]=this:delete c[this._id]},r.prototype._addGlobalListeners=function(){var e=r._html5Audio,t=function(t,n){var r=c[e._playerId];Object.keys(c).forEach(function(e){var t=c[e];t!==r&amp;&amp;t._isInOneOfStates(l.PLAYING,l.LOADING,l.SEEKING)&amp;&amp;t.pause()}),r&amp;&amp;r[t](n)},n=t.bind(null,"_onHtml5AudioStateChange"),i=t.bind(null,"_onLoaded"),s=t.bind(null,"_onLoadedMetadata");["ended","play","playing","pause","seeking","waiting","seeked","error"].forEach(function(t){e.addEventListener(t,n)}),e.addEventListener("loadeddata",i),e.addEventListener("loadedmetadata",s)},r.prototype.getType=function(){return"HTML5 single audio"},r.prototype.play=function(e){this._playRequested=!0;if(this._html5Audio._playerId===this._descriptor.id&amp;&amp;this._isInOneOfStates(l.PAUSED,l.ENDED)){a.prototype.resume.apply(this,arguments);return}this._isInOneOfStates(l.PAUSED)&amp;&amp;(e=this._currentPosition),this._startFromPosition=e||0,this._html5Audio._playerId=this._descriptor.id,this._toggleEventListeners(!0),this._setState(l.LOADING);var t=function(){if(!this._playRequested)return;this._logger.log("play after loaded"),this._trySeekToStartPosition(),this._html5Audio.play(),clearInterval(this._positionUpdateTimer),this._positionUpdateTimer=setInterval(this._onPositionChange,this._settings.updateInterval)};this._html5Audio.readyState&gt;0&amp;&amp;this._descriptor.src===this._html5Audio.src?t.apply(this):(this.once("loaded",t),this._html5Audio.type=this._descriptor.mimeType,this._html5Audio.src=this._descriptor.src,this._html5Audio.preload="auto",this._html5Audio.load())},r.prototype.pause=function(){this._playRequested=!1;if(this._isInOneOfStates(l.ERROR,l.DEAD))return;this._logger.log("pause"),this._html5Audio._playerId===this._descriptor.id?this._html5Audio.pause():(this._toggleEventListeners(!1),this._setState(l.PAUSED)),clearTimeout(this._bufferingTimeout),clearInterval(this._positionUpdateTimer)},r.prototype.seek=function(e){if(this._html5Audio._playerId!==this._descriptor.id){this._currentPosition=e,this.trigger("positionChange",this._currentPosition,this._loadedPosition,this._duration,this);return}a.prototype.seek.apply(this,arguments)},r.prototype.kill=function(){if(this._state===l.DEAD)return;this._playRequested=!1,clearInterval(this._positionUpdateTimer),clearTimeout(this._bufferingTimeout),this._toggleEventListeners(!1),this._setState(l.DEAD)},r.prototype.resume=function(){if(this._isInOneOfStates(l.ERROR,l.DEAD))return;if(this._html5Audio._playerId!==this._descriptor.id){this.play(this._currentPosition);return}a.prototype.resume.apply(this,arguments)},r.prototype.preload=function(){!this._preloadAudio&amp;&amp;s.supportSourceSwappingWithPreload()&amp;&amp;(this._preloadAudio=new Audio,this._preloadAudio.preload="none");var e=this._preloadAudio;e&amp;&amp;e.preload!=="auto"&amp;&amp;(this._logger.log("preload"),e.preload="auto",e._playerId=this._id,e.type=this._descriptor.mimeType,e.src=this._descriptor.src,e.load())}}),n("hlssingleaudioplayer",["require","exports","module","underscore","errors","vendor/events","hlsaudioplayer","logger","singleaudioplayer","states"],function(e,t,n){var r,i=e("underscore"),s=e("errors"),o=e("vendor/events"),u=e("hlsaudioplayer"),a=e("logger"),f=e("singleaudioplayer"),l=e("states");n.exports=r=function(e,t){f.apply(this,arguments)},i.extend(r.prototype,f.prototype),i.extend(r.prototype,i.pick(u.prototype,"_seekPosition","getCurrentPosition","_onStateChange")),r.prototype.seek=function(e){f.prototype.seek.apply(this,arguments),this._isInOneOfStates(l.LOADING,l.SEEKING)&amp;&amp;(this._seekPosition=e)},r.prototype.getType=function(){return"HTML5 HLS single audio"}}),n("mimetypes",{AAC:"audio/aac",M3U8:"application/x-mpegURL",MP4:"audio/mp4",MPEG:"audio/mpeg",OGG:"audio/ogg",WAV:"audio/wav",WEBM:"audio/webm",getTypeByExtension:function(e){var t={mp1:this.MPEG,mp2:this.MPEG,mp3:this.MPEG,mpeg:this.MPEG,mpg:this.MPEG,aac:this.AAC,mp4:this.MP4,ogg:this.OGG,oga:this.OGG,opus:this.OGG,webm:this.WEBM,wav:this.WAV,m3u8:this.M3U8};return t[e]||null}}),n("factory",["require","exports","module","browserutils","hlssingleaudioplayer","mimetypes","singleaudioplayer"],function(e,t,n){var r,i=e("browserutils"),s=e("hlssingleaudioplayer"),o=e("mimetypes"),u=e("singleaudioplayer");n.exports=r=function(){},r.createAudioPlayer=function(e,t){var n,a,f,l;a=e.src.split(":")[0];if(a==="rtmp"||a==="rtmpt")return null;n=r.getMimeType(e);if(n===o.M3U8){if(!i.isNativeHlsSupported())return null;l=new s(e,t)}else{if(!i.supportHTML5Audio()||!i.canPlayType(n))return null;l=new u(e,t)}return l},r.getMimeType=function(e){if(e.mimeType)return e.mimeType;var t=e.src.split("?")[0];return t=t.substring(t.lastIndexOf(".")+1,t.length),o.getTypeByExtension(t)}}),n("audiomanager",["require","exports","module","underscore","factory","states","errors","browserutils"],function(e,t,n){var r,i=e("underscore"),s=e("factory"),o=e("states"),u=e("errors"),a=e("browserutils");n.exports=r=function(e){e=e||{},this._players={},this._volume=1,this._mute=!1,this._settings=i.defaults(e,r.defaults)},r.States=o,r.Errors=u,r.BrowserUtils=a,r.defaults={flashAudioPath:"flashAudio.swf",flashLoadTimeout:2e3,flashObjectID:"flashAudioObject",audioObjectID:"html5AudioObject",updateInterval:300,bufferTime:8e3,bufferingDelay:800,debug:!1},r.prototype.getAudioPlayer=function(e){return this._players[e]},r.prototype.hasAudioPlayer=function(e){return this._players[e]!==undefined},r.prototype.removeAudioPlayer=function(e){this.hasAudioPlayer(e)&amp;&amp;delete this._players[e]},r.prototype.setVolume=function(e){e=Math.min(1,e),this._volume=Math.max(0,e);for(var t in this._players)this._players.hasOwnProperty(t)&amp;&amp;this._players[t].setVolume(this._volume)},r.prototype.getVolume=function(){return this._volume},r.prototype.setMute=function(e){this._muted=e;for(var t in this._players)this._players.hasOwnProperty(t)&amp;&amp;this._players[t].setMute(this._muted)},r.prototype.getMute=function(){return this._muted},r.prototype.createAudioPlayer=function(e){var t,n,r;e.id||(e.id=Math.floor(Math.random()*1e10).toString()+(new Date).getTime().toString());if(!e.src)throw new Error("AudioManager: You need to pass a valid src");return this._players[e.id]||(this._players[e.id]=s.createAudioPlayer(e,this._settings)),this._players[e.id].setVolume(this._volume),this._players[e.id].setMute(this._muted),this._players[e.id].on("stateChange",this._onStateChange,this),this._players[e.id]},r.prototype._onStateChange=function(e,t){t.getState()===o.DEAD&amp;&amp;this.removeAudioPlayer(t.getId())}}),t(["audiomanager"]),t("audiomanager")}),function(){var e=!1;this.Class=function(){},Class.extend=function(t){function u(){if(!e&amp;&amp;this.initialize)return this.initialize.apply(this,arguments)}var n,r,i,s;e=!0;var o=new this;e=!1,Object.prototype.toString.call(t)!=="[object Array]"?s=[t]:s=t;for(r=0,i=s.length;r&lt;i;++r){t=s[r];for(n in t)o[n]=t[n]}return u.prototype=o,u.prototype.constructor=u,u.extend=arguments.callee,u}}(),
define("application",["require","exports","module","$","underscore","api-wrapper","views/app","lib/backbone","config","lib/connect","lib/helpers/client-environment-helper","lib/cookies","lib/event-bus","lib/deferred-loader","lib/persistent-store","lib/play-manager","lib/pointer-events","collections/related-sounds","router","shared/config/route-builders","shared/config/routes","lib/tracking/tracking-core","lib/url","models/user","lib/console-box"],function(e,t,n){function k(){var e,t;e=new y,e.setRoutes(w,b),t=new o({el:"#app"}),a.set("router",e).set("me",L()).set("appView",t.render()),u.history.start({pushState:!0}),E.initialize()}function L(){var e=new x;return e.on("change",function(){T.set("me",i.extend({lastFetchTime:e.lastFetchTime},e.attributes))}),e}function A(e){if(!f.isLoggedIn())return h.once("connect:login",A),r.Deferred().reject();var t=a.get("me"),n=T.get("me"),i=arguments[1],s;return t.baseUrl="me",e===undefined&amp;&amp;(e=2),i||(i=r.Deferred().done(function(){x.instances.add(t),h.trigger("connect:hasUserData")})),n?(s=n.lastFetchTime||Date.now(),delete n.lastFetchTime,t.lastFetchTime=s,t.set(n),i.resolve()):t.fetch().done(i.resolve).fail(function(t){t.status===401?(f.logout(),i.reject(t)):e?A(e-1,i):i.reject(t)}),i}function O(){var e=S.getQueryParam(N),t,n=!1;e!==undefined&amp;&amp;e&amp;&amp;(c.set(N,e),n=!0),n&amp;&amp;(t={_:Date.now()},t[N]=null,window.location=S.modify(window.location.href,{query:t}))}function M(){var e=document.createElement("iframe");e.className="sc-visuallyhidden",e.src="/"+l.dpi+".html",document.body.appendChild(e)}var r=e("$"),i=e("underscore"),s=e("api-wrapper"),o=e("views/app"),u=e("lib/backbone"),a=e("config"),f=e("lib/connect"),l=e("lib/helpers/client-environment-helper").device,c=e("lib/cookies"),h=e("lib/event-bus"),p=e("lib/deferred-loader"),d=e("lib/persistent-store"),v=e("lib/play-manager"),m=e("lib/pointer-events"),g=e("collections/related-sounds"),y=e("router"),b=e("shared/config/route-builders"),w=e("shared/config/routes"),E=e("lib/tracking/tracking-core"),S=e("lib/url"),x=e("models/user"),T=new d("auth"),N="stage",C=n.exports={start:function(t,n){O(),m.init(),M(),v.setFallbackSource(g,function(e){return y.getRoute("listen",e)}),s.init(),n&amp;&amp;p.setPackageMap(n),A().always(k)}};window.debugMessage=function(){}}),
define("$",["require","exports","module","underscore","vendor/underscore.deferred/underscore.deferred","domify","lib/dollar/dollar-ajax","lib/dollar/dollar-attrs","lib/dollar/dollar-events","lib/dollar/dollar-manipulation","lib/dollar/dollar-matches","lib/dollar/dollar-traversal"],function(e,t,n){var r=e("underscore"),i=e("vendor/underscore.deferred/underscore.deferred"),s=e("domify"),o=e("lib/dollar/dollar-ajax"),u=e("lib/dollar/dollar-attrs"),a=e("lib/dollar/dollar-events"),f=e("lib/dollar/dollar-manipulation"),l=e("lib/dollar/dollar-matches"),c=e("lib/dollar/dollar-traversal"),h=n.exports=function p(e,t){if(this instanceof h){var n;return t=t||document,e instanceof p||e instanceof Array?n=e:e instanceof HTMLElement||e===window||e===document?n=[e]:e instanceof HTMLCollection||e instanceof NodeList?n=r.toArray(e):typeof e=="string"&amp;&amp;e.charAt(0)==="&lt;"?n=r.toArray([s(e)[0]]):typeof e=="string"?n=r.toArray(t.querySelectorAll(e)):n=[],[].forEach.call(n,function(e,t){this[t]=e},this),this.length=n.length,this.splice=Array.prototype.splice,this}return new h(e,t)};h.prototype.each=function(e,t){for(var n=0;n&lt;this.length;n++)e.call(t||this[n],this[n],n);return this},r.extend(h.prototype,u,a.prototypeMethods,f,c),h.Event=a.Event,h.matches=l,h.noop=function(){},h.ajax=o,["get","post","getJSON"].forEach(function(e){h[e]=o[e]}),h.getScripts=window.__sc_getScripts,delete window.__sc_getScripts,h.Deferred=i.Deferred,h.when=i.when,h.Callbacks=i.Callbacks}),
define("underscore",["require","exports","module","vendor/underscore"],function(e,t,n){var r=e("vendor/underscore");r.mixin({proxy:function(e,t){Array.prototype.slice.call(arguments,2).forEach(function(n){if(typeof e[n]!="function")throw new Error("Proxy source has no method named "+n);t[n]=e[n].bind(e)})},constant:function(e){return function(){return e}},deepExtend:function(e){var t=Array.prototype.slice;return r.each(t.call(arguments,1),function(t){if(!t)return;for(var n in t)r.isArray(e[n])&amp;&amp;r.isArray(t[n])?e[n]=r.union(e[n],t[n]):r.isObject(e[n])&amp;&amp;r.isObject(t[n])?e[n]=r.deepExtend({},e[n],t[n]):e[n]=t[n]}),e}}),n.exports=r}),
define("api-wrapper",["require","exports","module","$","config","lib/connect","lib/url"],function(e,t,n){function p(e){var t=i.get("client_id"),n=i.get("api_host"),r=new RegExp(i.get("bff_api_host")),u;return a.test(e.url)||(e.url=n+e.url.replace(f,""),u=!0),r.test(e.url)&amp;&amp;(u=!0),u=u||e.url.substr(0,n.length)===n,u&amp;&amp;(s.isLoggedIn()&amp;&amp;d(e.url)&amp;&amp;(e.headers={Authorization:"OAuth "+s.getAuthToken()}),e.crossDomain=!0,e.url=o.modify(e.url,{scheme:"https",query:{client_id:t,format:"json"}})),e}function d(e){return!!e.match(l)}var r=e("$"),i=e("config"),s=e("lib/connect"),o=e("lib/url"),u=r.ajax,a=/^https?|^_/,f=/^https?:\/\/.+?\//,l=new RegExp(["me","me/","i1/me/","tracks/[0-9]+/plays"].join("|")),c={likes:"favorites",groups:"groups",people:"users",sound:"track",sounds:"tracks"},h=n.exports={EDGE:"e1/",init:function(){r.ajax=function(e){return u(p(e))}},toAPIResource:function(e){return c[e]||e}}}),
define("views/app",["require","exports","module","$","underscore","lib/helpers/client-environment-helper","config","lib/event-bus","lib/layouts/fullheight","lib/views/loading","lib/play-manager","lib/support","lib/view","lib/helpers/viewport-helper","views/app.css","views/app.tmpl"],function(e,t,n){function y(e){if(e.defaultPrevented||e.target.target)return;e.originalEvent.preventDefault(),o.get("router").navigate(e.currentTarget.getAttribute("href"),!0)}function b(e){var t=this.getElement("loading");this.$el.toggleClass("show-throbber",e),e?(this._loadingView=new l({size:"fullscreen"}),this.addSubview(this._loadingView,"loading"),t.addClass("g-z-index-app-loading"),t[0].appendChild(this._loadingView.render().el)):this.addDeferred(i.delay(function(){this._loadingView._dispose(),this.removeSubview(this._loadingView),t.removeClass("g-z-index-app-loading")}.bind(this),m))}var r=e("$"),i=e("underscore"),s=e("lib/helpers/client-environment-helper").browser,o=e("config"),u=e("lib/helpers/client-environment-helper").device,a=e("lib/event-bus"),f=e("lib/layouts/fullheight"),l=e("lib/views/loading"),c=e("lib/helpers/client-environment-helper").os,h=e("lib/play-manager"),p=e("lib/support"),d=e("lib/view"),v=e("lib/helpers/viewport-helper"),m=500,g=n.exports=d.extend({css:e("views/app.css"),className:"app",template:e("views/app.tmpl"),states:{"display-mini-player":"app__displayMiniPlayer","hide-upsell":"app__hideUpsell","show-throbber":b},element2selector:{loading:".app__loading",content:"#content"},setup:function(){r(document).delegate('a[href^="/"]',"click",y),v.hideAddressBar(),a.on("layout:changing",this.onLayoutChanging,this).on("layout:change",this.onLayoutChange,this).on("upsell:hide upsell:slide",this.hideUpsellBanner,this).on("exception",this.onException,this)},renderDecorate:function(){p.nativeScroll&amp;&amp;(this.nativeScrollEl=this.$("#content"),v.enableNativeScroll(this.nativeScrollEl))},preventDefault:function(){return!1},onLayoutChanging:function(){this.toggleState("show-throbber",!0)},onLayoutChange:function(e){this.toggleState("show-throbber",!1),this.setAppHeight(e),this.toggleMiniPlayer(e)},hideUpsellBanner:function(){this.toggleState("hide-upsell",!0)},setAppHeight:function(e){var t=e&amp;&amp;e.layout instanceof f,n={iPhone4Safari:!c.iOS7&amp;&amp;u.iPhone4&amp;&amp;s.safari,iPhone5Safari:!c.iOS7&amp;&amp;u.iPhone5&amp;&amp;s.safari};t?i.each(n,function(e,n){e&amp;&amp;this.$el.addClass(n,t)},this):i.each(n,function(e,t){this.$el.removeClass(t)},this),v.hideAddressBar(e)},toggleMiniPlayer:function(e){this.toggleState("display-mini-player",e.layoutName!=="listen"&amp;&amp;h.hasCurrentSound())},onException:function(e){e.fatal&amp;&amp;o.get("router").apply("error",{resource_id:e.id}),this.toggleState("show-throbber",!1),window.console.error(e.get("message")||e.get("title"))}})}),
define("lib/backbone",["require","exports","module","backbone","$","underscore","lib/mixin"],function(e,t,n){var r=e("backbone"),i=e("$"),s=e("underscore"),o=r.Collection,u=e("lib/mixin"),a=r.Model,f=o.prototype,l=a.prototype;n.exports=r,r.$=i,function(){function e(e,t){return function(){delete e._requests[t]}}function t(t){return function(o){var u;o=o?s.clone(o):{},o=s.extend({_url:o.url||s.result(this,"url"),jqAjax:!1,saveRequest:!1,onlyIfNeverFetched:!1},o),this instanceof r.Collection&amp;&amp;!this.lastFetchTime&amp;&amp;!o.hasOwnProperty("reset")?(o.reset=!0,o.add=!0):this.lastFetchTime&amp;&amp;!o.hasOwnProperty("remove")&amp;&amp;(o.remove=!1),this._requests||(this._requests={}),u=this._requests[o._url];if(!u){if(o.onlyIfNeverFetched&amp;&amp;this.lastFetchTime)return i.Deferred().resolve({next_href:this.next_href});u=this._requests[o._url]=o.jqAjax?i.ajax(o):t.call(this,o),u[o.saveRequest?"fail":"always"](e(this,o._url))}else o.success&amp;&amp;u.done(o.success.bind(o,this)),o.error&amp;&amp;u.fail(o.error);return u}}l.fetch=t(l.fetch),f.fetch=t(f.fetch)}(),r.Model.extend=r.Collection.extend=r.View.extend=function(e){return function(){var t=s.toArray(arguments),n=0,r,i;return r=t.filter(function(e,t){if(e instanceof u)return n=t+1,!0}),i=e.apply(this,t.slice(n)),r.forEach(function(e){e.applyTo(i.prototype)}),i}}(r.View.extend)}),
define("config",["require","exports","module","lib/mixins/observing","underscore","lib/store","lib/url"],function(e,t,n){function a(){var e=c()?"fdb756191db4f1620b04ace185508237":l()?"c8ce5cbca9160b790311f06638a61037":window.console.error("Unknown host: %o","https://m.soundcloud.com");return e}function f(){var e=c()?66152:l()?65097:null;return e}function l(){return!0}function c(){return!1}var r=e("lib/mixins/observing"),i=e("underscore"),s=e("lib/store"),o=e("lib/url"),u=n.exports=new s;r.applyTo(u),i.each({app_root:o.parse("https://m.soundcloud.com").directory||"/",api_host:"https://api.soundcloud.com/",bff_api_host:"https://api-mobileweb.soundcloud.com/",appView:null,client_id:a(),client_application_id:f(),eventlogger_tracking_url:"https://eventlogger.soundcloud.com",me:null,restoreToSound:null,playHistoryLength:50,promotedContentServer:"https://promoted.soundcloud.com",promotedContentAccessToken:"mobileweb",oauth_token:null,router:null,availablePlayManagerSource:null,wisHost:"https://wis.sndcdn.com"},function(e,t){u.set(t,e,{silent:!0})}),u.finalize()}),
define("lib/connect",["require","exports","module","$","underscore","lib/backbone","config","lib/event-bus","lib/url","lib/persistent-store"],function(e,t,n){function b(e,t,n){var r=window.screenX+(window.outerWidth-t)/2,i=window.screenY+(window.outerHeight-n)/2;return window.open(e,"connectWithSoundCloud",["location=1","width="+t,"height="+n,"top="+i,"left="+r,"toolbar=no","scrollbars=yes"].join(","))}var r=e("$"),i=e("underscore"),s=e("lib/backbone"),o=e("config"),u=e("lib/event-bus"),a=e("lib/url"),f=e("lib/persistent-store"),l=150,c=o.get("app_root")+"callback.html",h="oauth_token",p="non-expiring",d=new f("anonymous-user"),v=new f("auth"),m,g;v.on(h,function(e){y.setAuthToken(e.current)});var y=n.exports=i.extend({},s.Events,{setAuthToken:function(e){v.set(h,e)},getAuthToken:function(){return v.get(h)},isLoggedIn:function(){return!!this.getAuthToken()},login:function(){var e;return g?m&amp;&amp;!m.closed&amp;&amp;m.focus&amp;&amp;m.focus():(g=r.Deferred().fail(function(){g=null}),this.isLoggedIn()?g.resolve():(e=a.stringify({host:o.get("api_host").replace("api.",""),path:["connect"],query:{client_id:o.get("client_id"),response_type:"token",scope:p,display:"next",redirect_uri:location.protocol+"//"+location.host+c}}),m=b(e,450,500),function t(){(!m||m.closed)&amp;&amp;!y.isLoggedIn()?g.reject():m.closed?u.once("connect:hasUserData",g.resolve).trigger("connect:login","login"):setTimeout(t,l)}())),g},logout:function(){v.reset(),u.trigger("connect:logout","logout")},currentUserId:function(){return o.get("me").id},getUserIdentifier:function(){var e;return y.isLoggedIn()?e=y.currentUserId():(e=d.get("id"),e||(e=Math.floor(Math.random()*1e3),d.set("id",e))),e}})}),
define("lib/helpers/client-environment-helper",["require","exports","module"],function(e,t,n){var r={},i={},s={},o=navigator.userAgent.toLowerCase(),u=window.devicePixelRatio,a;a=function(e){return e.test(o)},i.ie10=a(/iemobile\/10\.0/),r.devicePixelRatio=u,r.dpi=u&gt;=2||i.ie10?"hdpi":u&gt;1?"mdpi":"ldpi",r.iOS=a(/iphone|ipod/),r.android=a(/android/),r.blackberry=a(/bb10/),r.iPhone4=r.iOS&amp;&amp;screen.availWidth===320&amp;&amp;screen.availHeight===460,r.iPhone5=r.iOS&amp;&amp;r.highDPI&amp;&amp;screen.availWidth===320&amp;&amp;screen.availHeight===548,r.playstation=a(/playstation/),r.amazon=!r.playstation&amp;&amp;a(/silk|kindle|amazon/),r.firefoxOS=!r.android&amp;&amp;window.navigator.mozApps,r.hasNativeApp=r.iOS||r.android||r.blackberry||r.amazon,r.brand=r.iOS?"iOS":r.amazon?"amazon":r.firefoxOS?"firefoxOS":r.android?"android":r.blackberry?"blackberry":"",i.backingStoreRatio=function(){var e=document.createElement("canvas"),t=e.getContext&amp;&amp;e.getContext("2d");if(t)return t.backingStorePixelRatio||t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||1}(),i.chrome=a(/chrome|crios\//),i.safari=!i.chrome&amp;&amp;a(/Version\/.+ Mobile\/.+ Safari\//i),i.firefox=a(/mobile.* firefox/),s.iOS7=r.iOS&amp;&amp;a(/os 7_(.*) like mac os x/),t.device=r,t.browser=i,t.os=s}),
define("lib/cookies",["require","exports","module"],function(e,t,n){var r=window.location.hostname.replace(/.*\.(.+\..+)/,"$1"),i="."+r,s=864e5,o=6e4,u,a,f=n.exports={get:function(e){return a||(a={},document.cookie.split(/\s*;\s*/).forEach(function(e){var t=e.split("=");a[t[0]]=t[1]})),a[e]},set:function(e,t,n){var r=Date.now(),a=null;n&amp;&amp;n.days?a=n.days*s:n&amp;&amp;n.minutes&amp;&amp;(a=n.minutes*o),document.cookie=[e+"="+t,a?"expires="+(new Date(r+a)).toGMTString():"","path=/","domain="+i].filter(Boolean).join(";"),u()},unset:function(e){f.set(e,"",-1),u()}};u=function(){a=null}}),
define("lib/event-bus",["require","exports","module","underscore","lib/backbone","config","lib/persistent-store"],function(e,t,n){var r=e("underscore"),i=e("lib/backbone"),s=e("config"),o=e("lib/persistent-store"),u=new o("broadcast"),a=s.get("app_id"),f,l,c;u.on("broadcast",function(e){var t=e.current;t&amp;&amp;t.appId!==a&amp;&amp;c.call(h,t)});var h=n.exports=r.extend({},i.Events,{broadcast:function(e,t){var n,r;return typeof e=="string"?(n=[].slice.call(arguments,1),t=e,e={}):n=[].slice.call(arguments,2),r=l(t,n),u.set("broadcast",r),e.excludeThis||c.call(this,r),this}});l=function(e,t){return{type:e,timestamp:Date.now(),appId:a,args:t}},c=function(e){this.trigger.apply(this,["broadcast:"+e.type].concat(e.args||[]))}}),
define("lib/deferred-loader",["require","exports","module","underscore","$"],function(e,t,n){var r=e("underscore"),i=e("$"),s={},o=n.exports={setPackageMap:function(e){e._prefix&amp;&amp;r.each(e,function(t,n){n.charAt(0)!=="_"&amp;&amp;(e[n]=e._prefix+t)}),this.packageMap=e},loadLayout:function(t){var n=this.packageMap,r=n&amp;&amp;n[t],u,a=s[t],f,l;return a?a:r?(u=i.Deferred(),f=function(){u.resolve(e(t))},l=document.createElement("script"),l.src=r,l.onerror=u.reject,l.addEventListener&amp;&amp;l.addEventListener("load",f,!1),document.getElementsByTagName("head")[0].appendChild(l),a=s[t]=u.promise(),a):o.load(t)},load:function(t){var n=i.Deferred();return r.isArray(t)||(t=[t]),e(t,n.resolve),n},get:function(t){return e(t)}}}),
define("lib/persistent-store",["require","exports","module","lib/store","lib/mixins/persistent","lib/mixins/observing"],function(e,t,n){var r=e("lib/store"),i=e("lib/mixins/persistent"),s=e("lib/mixins/observing"),o=n.exports=r.extend();i.applyTo(o.prototype),s.applyTo(o.prototype)}),
define("lib/play-manager",["require","exports","module","underscore","lib/backbone","lib/collection","config","lib/futures"],function(e,t,n){function c(e,t){if(e&amp;&amp;e!==this.getCurrentSound())return;t.seek!=null&amp;&amp;e.seek(t.seek),e.play(t),e.playlist&amp;&amp;e===this.source&amp;&amp;(x.call(this,e.playlist,t&amp;&amp;t.restoreUrl),N.call(this,0))}function h(){var e=o.get("router").getLayoutInfo();return{args:e.args,layoutName:e.layoutName,url:window.location.href.replace(/^https?:\/\/[^\/]+\//,"")}}function p(){var e=this.source;e&amp;&amp;(this.sourceIsCollection=e instanceof s,this.sourceIsCollection&amp;&amp;(this.listenTo(e,"add",d).listenTo(e,"remove",v).listenTo(e,"reset",m),e.isPopulated()||e.fetch()),e.hold())}function d(e,t){var n=t.indexOf(e);n&lt;=this.sourceCursor&amp;&amp;N.call(this,this.sourceCursor+1)}function v(e,t,n){this.sourceCursor&amp;&amp;n.index&lt;=this.sourceCursor&amp;&amp;N.call(this,this.sourceCursor-1)}function m(){N.call(this,-1)}function g(e){e.sound.release()}function y(e){e.sound.hold()}function b(e,t){t[e]("finish",w,this)}function w(e){var t=e.sound;this.playNext({userInitiated:!1}),t.playlist&amp;&amp;t===t.playlist.getLastSound()?t.playlist.seek(0):t.seek(0)}function E(){if(this.FallbackSource){var e=this.getCurrentSound(),t;if(e&amp;&amp;e.isPublic()){t=new this.FallbackSource(null,{resource_id:e.id,resource_type:e.resource_type});if(this.source!==t)return x.call(this,t,this.fallbackRestoreFn(e)),!0;t.release()}}return x.call(this,null),!1}function S(e,t){return t instanceof s?e&gt;-1?(t.audibleAt||t.at).call(t,e):undefined:e===0?t:undefined}function x(e,t,n){var r=this.source;if(r!==e){if(e&amp;&amp;!e.isAudioSource&amp;&amp;!1)throw new Error("The source of play manager needs to implement `AudioSource` interface.");return this.source=e,this.restoreUrl=t,p.call(this),N.call(this,-1),r&amp;&amp;(this.stopListening(r),r.release()),(!n||!n.silent)&amp;&amp;this.trigger("change:source",this.source),this._autoplay&amp;&amp;!this._autoplayTimeout&amp;&amp;(this._autoplayTimeout=setTimeout(function(){this._autoplay=!1,this._autoplayTimeout=null,this.playCurrent({userInitiated:!1})}.bind(this),400)),!0}return!1}function T(e,t,n){var r=e||u.defer(),i=t==null?f:t,s,o;if(r.state()!=="pending")return;this._fetchDeferred&amp;&amp;this._fetchDeferred!==r&amp;&amp;this._fetchDeferred.reject(),this._fetchDeferred||(this._fetchDeferred=r,r.always(function(){this._fetchDeferred=null}.bind(this)));if(this.historyCursor&lt;this.history.length-1)r.resolve(this.history[this.historyCursor+1].sound,{historyCursor:this.historyCursor+1});else if(this.source&amp;&amp;this.sourceIsCollection){o=-1;while(!s&amp;&amp;this.sourceCursor+ ++o&lt;this.source.length)s=this.sourceCursor+o&gt;-1&amp;&amp;S(this.sourceCursor+o,this.source),s=s&amp;&amp;(o===0?s.getNextSound():s.getFirstSound());s?r.resolve(s,{sourceCursor:this.sourceCursor+o,initialFallback:!!n}):!this.source.isFullyPopulated()&amp;&amp;i?this.source.fetch({add:!0,remove:!1}).fail(r.reject).done(T.bind(this,r,i-1)):E.call(this)?T.call(this,r,i,!0):r.resolve(undefined)}else this.source?(s=this.sourceCursor===-1?this.source.getFirstSound():this.source.getNextSound(),s?r.resolve(s,{sourceCursor:0}):(E.call(this),T.call(this,r,i,!0))):r.reject();return r}function N(e){typeof e=="number"?this.sourceCursor=e:this.sourceIsCollection?this.sourceCursor=this.indexOfSoundInSource(e,this.source):this.sourceCursor=0}function C(e,t){var n=this.getCurrentSound(),r=this.historyCursor,i;if(r===e)return;n&amp;&amp;b.call(this,"off",n),this.historyCursor=e,i=this.getCurrentSound(),i&amp;&amp;b.call(this,"on",i),(!t||!t.silent)&amp;&amp;this.trigger("change:currentSound",{isGoingForward:e&gt;r,prev:n,current:i})}function k(e,t,n){var r=n.getSounds(),i=r.indexOf(e),s=r.indexOf(t),o=i&lt;s,u=o?0:s+1,a=i+1;o&amp;&amp;this.clearHistory(),r.slice(u,a).forEach(function(e){this.addToHistory(e,n)},this)}function L(e,t,n,i){if(t instanceof L)return t;this.sound=e,this.layoutInfo=r.clone(n),this.sourceInfo=t&amp;&amp;t.getSourceInfo(),this.restoreUrl=i}var r=e("underscore"),i=e("lib/backbone"),s=e("lib/collection"),o=e("config"),u=e("lib/futures"),a=3,f=3,l=n.exports=r.extend({},i.Events,{history:[],historyCursor:-1,source:null,sourceCursor:-1,initialSourcePriority:-Infinity,layoutInfo:{},restoreUrl:null,FallbackSource:null,_fetchDeferred:null,_sessionPlays:0,_autoplay:!1,_autoplayTimeout:null,setInitialSource:function(e,t,n){t=t||0,this.sourceCursor===-1&amp;&amp;t&gt;this.initialSourcePriority&amp;&amp;(this.initialSourcePriority=t,this.saveLayout(),x.call(this,e,n))},unsetInitialSource:function(e){this.sourceCursor===-1&amp;&amp;this.source===e&amp;&amp;(x.call(this,null),this.initialSourcePriority=-Infinity)},indexOfSoundInSource:function(e,t){var n=-1;return t instanceof s?(t.any(function(r,i){var s=S(i,t);if(s&amp;&amp;s.getSoundIndex(e)&gt;-1)return n=i,!0}),n):t.getSoundIndex(e)},hasPrevSound:function(){return this.historyCursor&gt;0},hasNextSound:function(){var e=this.source,t=this.getCurrentSound();return!!(this.historyCursor&lt;this.history.length-1||e&amp;&amp;this.sourceIsCollection&amp;&amp;(!e.isFullyPopulated()||e.length&amp;&amp;this.sourceCursor&lt;e.length-1)||e&amp;&amp;!this.sourceIsCollection&amp;&amp;(this.sourceCursor&lt;0?e.getFirstSound():e.getNextSound())||t&amp;&amp;t.isPublic()&amp;&amp;this.FallbackSource)},hasCurrentSound:function(){return!!this.getCurrentSound()||!!this.hasNextSound()},getCurrentSound:function(){var e=this.history[this.historyCursor];return e&amp;&amp;e.sound},getPrevSound:function(){return this.getSoundFromHistory(this.historyCursor-1)},getSoundFromHistory:function(e){var t=this.history[e];return t&amp;&amp;t.sound},addToHistory:function(e,t,n){var r,i=e!==this.getCurrentSound(),s,u,a;r=this.historyCursor+(i?1:0),s=o.get("playHistoryLength"),a=new L(e,t,this.layoutInfo,this.restoreUrl),this.history.splice(r).forEach(g),this.history.push(a),y(a),u=Math.max(0,this.history.length-s),u&amp;&amp;(this.history.splice(0,u).forEach(g),this.historyCursor-=u),C.call(this,this.history.length-1,n)},backfillHistoryFromPlaylist:function(e,t){var n=t.getSoundIndex(e),r=t.soundsCollection,i,s,o;if(n&gt;0)for(s=0,o=n;s&lt;=o;s++)i=r.at(s),i&amp;&amp;this.addToHistory(i,t,{silent:!0});N.call(this,l.history.length-1)},reset:function(){var e=this.getCurrentSound();e&amp;&amp;e.pause(),this.clearHistory(),this._sessionPlays=0,this.layoutInfo={},this._fetchDeferred&amp;&amp;this._fetchDeferred.reject(),x.call(this,null),this.FallbackSource=this.fallbackRestoreFn=this.restoreUrl=null,this.initialSourcePriority=-Infinity},clearHistory:function(){this.history.forEach(function(e){e.sound.release()}),C.call(this,-1),this.history=[]},enableAutoplay:function(){this.source?this.playCurrent({userInitiated:!1}):this._autoplay=!0},play:function(e,t){t=t||{};var n=t.keepSource?this.source:t.source||e.playlist||e,r=e.getCurrentSound(),i=this.getCurrentSound(),s=i!==r,o;o=x.call(this,n,t.restoreUrl,{silent:!0}),N.call(this,r),s&amp;&amp;this.pauseCurrent(t),(o||s)&amp;&amp;k.call(this,r,i,n),o&amp;&amp;this.trigger("change:source",n),this.playCurrent(t)},playSource:function(e,t){t=t||{},x.call(this,e,t.restoreUrl)?this.playNext(t):this._fetchDeferred||this.playCurrent(t)},toggle:function(e,t){e.isPlaying()?this.pause(e,t):this.play(e,t)},pause:function(e,t){e.pause(t)},playCurrent:function(e){var t=this.getCurrentSound();t?(e=e||{},c.call(this,t,e)):(l.saveLayout(),l.playNext(e))},pauseCurrent:function(e){var t=this.getCurrentSound();t&amp;&amp;t.pause(e)},toggleCurrent:function(e){var t=this.getCurrentSound();t?t.toggle(e):this.playCurrent(e)},playNext:function(e){return e=r.extend({seek:0},e),this.pauseCurrent(),T.call(this).done(function(t,n){var r;t&amp;&amp;(n.historyCursor!=null?C.call(this,n.historyCursor):(n.sourceCursor!=null&amp;&amp;(N.call(this,n.sourceCursor),r=this.source,this.sourceIsCollection&amp;&amp;n.sourceCursor&gt;=this.source.length-a&amp;&amp;!this.source.isFullyPopulated()&amp;&amp;this.source.fetch({add:!0,remove:!1})),this.addToHistory(t,r)),this.playCurrent(e),n.initialFallback&amp;&amp;this.trigger("fallback"))}.bind(this))},playPrev:function(e){e=r.extend({seek:0},e),this.getPrevSound()&amp;&amp;(this.pauseCurrent(),C.call(this,this.historyCursor-1),this.playCurrent(e))},fetchNextSound:T,setFallbackSource:function(e,t){this.FallbackSource=e,this.fallbackRestoreFn=t},restoreState:function(){var e=this.getCurrentRestoreUrl(),t=this.getCurrentSound(),n,r=o.get("router");e?(n=t.playlist||t,r.navigate(e,{trigger:!0}),o.set("restoreToSound",n.resource_type+n.resource_id)):t&amp;&amp;r.navigateToRoute("listen",[t],{trigger:!0})},getCurrentRestoreUrl:function(){var e=this.history[this.historyCursor];return e&amp;&amp;e.restoreUrl||""},getCurrentMetadata:function(){return this.history[this.historyCursor]},saveLayout:function(){this.layoutInfo=h()}})}),
define("lib/pointer-events",["require","exports","module","underscore","lib/support"],function(e,t,n){function s(){if(i.pointerEvents)return;o("mouseup MSPointerUp touchend",u("pointerup")),o("mousedown MSPointerDown touchstart",u("pointerdown")),o("mousemove MSPointerMove touchmove",u("pointermove")),o("mouseout MSPointerLeave touchleave",u("pointerleave"))}function o(e,t){e.split(" ").forEach(function(e){document.body.addEventListener(e,t)})}function u(e){return function(t){a(t,e)}}function a(e,t){var n,r;n=document.createEvent("CustomEvent"),n.initCustomEvent(t,!0,!0,{}),n.maskedEvent=e,r=f(e),n.x=r.x,n.y=r.y,e.target.dispatchEvent(n)}function f(e){var t=e.type,n,r;return t.indexOf("touch")===0?(n=e.changedTouches[0].pageX,r=e.changedTouches[0].pageY):t.indexOf("mouse")===0?(n=e.clientX+window.pageXOffset,r=e.clientY+window.pageYOffset):(n=e.x,r=e.y),{x:n,y:r}}var r=e("underscore"),i=e("lib/support");n.exports={init:r.once(s)}}),
define("collections/related-sounds",["require","exports","module","lib/mixins/audio-source","lib/collection","config","models/sound","lib/url"],function(e,t,n){function l(e){return e.resource_type=e.kind==="playlist"?"playlist":"sound",e}var r=e("lib/mixins/audio-source"),i=e("lib/collection"),s=e("config"),o=e("models/sound"),u=e("lib/url"),a=null,f=n.exports=i.extend(r,{model:o,defaults:{resource_id:null,resource_type:null},getSourceInfo:function(){return{type:"recommender",version:this.audioSourceVersion,resourceId:this.options.resource_id,resourceType:this.options.resource_type}},getSounds:function(){return this.models},parse:function(e){return this.audioSourceVersion=e.version||"no_version",e.collection.map(l)},baseUrl:function(){var e=s.get("me").id||null;return!e&amp;&amp;!a&amp;&amp;(a=Math.floor(Math.random()*1e8)),u.stringify({path:["tracks",this.options.resource_id,"related"],query:{user_id:e,anon_user_id:e?null:a}})}},{hashFn:function(e,t){return t.resource_id}})}),
define("router",["require","exports","module","underscore","lib/backbone","config","lib/event-bus","lib/deferred-loader","lib/tracking/tracking-bus"],function(e,t,n){function h(e,t){var n,r;this.currentLayout&amp;&amp;e!==this.currentLayout&amp;&amp;this.currentLayout.dispose(),this.currentLayout=e,n=this._currentLayoutInfo=e.getChangeEventData(t),r=s.get("appView").$("#content")[0],e.render(),r.firstElementChild!==e.el&amp;&amp;(r.innerHTML="",r.appendChild(e.el)),a.pageview(n.layoutName),o.trigger("layout:change",n)}var r=e("underscore"),i=e("lib/backbone"),s=e("config"),o=e("lib/event-bus"),u=e("lib/deferred-loader"),a=e("lib/tracking/tracking-bus"),f,l,c=n.exports=i.Router.extend({currentLayout:null,_currentLayoutInfo:null,setRoutes:function(e,t){f=e,l=t,e.forEach(function(e){this.route(e.route,e.name,e.handler)}.bind(this))},navigateToRoute:function(e,t,n){var r=[e],i;t&amp;&amp;t.length&amp;&amp;(r=r.concat(t)),i=c.getRoute.apply(c,r),this.navigate(i,n)},apply:function(e,t){o.trigger("layout:changing");var n="layouts/"+e,r;r=function(){delete this.setupDeferred}.bind(this),this.setupDeferred&amp;&amp;this.setupDeferred.fail(),this.setupDeferred=u.loadLayout(n).fail(r).done(function(n){var i=this.currentLayout instanceof n?this.currentLayout:new n;i.setArgs(t),this.setupDeferred=i.setup(t).done(h.bind(this,i,e,t)).always(r)}.bind(this))},getLayoutInfo:function(){return this._currentLayoutInfo},getRouteInfo:function(e){return r.find(f,function(t){return t.name===e})},goToSoundPage:function(e){e&amp;&amp;this.navigate(c.getRoute("listen",e),{trigger:!0})}},{getRoute:function(e){var t,n;t=r.find(f,function(t){return t.name===e});if(!!t&amp;&amp;!!(n=l[e]))return n.apply(this,[].slice.call(arguments,1))}})}),
define("shared/config/route-builders",["require","exports","module","underscore","shared/lib/url"],function(e,t,n){function o(e){return r.isFunction(e.toJSON)?e.toJSON():e}function u(e){return e.replace(/^https?:.+?\w\//,"/")}function a(e){return e==="sets"||e==="sounds"||e==="tracks"}var r=e("underscore"),i=e("shared/lib/url"),s=n.exports={listen:function(e){e=o(e.track||e);var t={},n=e._playlist;return e.user&amp;&amp;e.user.permalink&amp;&amp;e.permalink?t.path="/"+e.user.permalink+"/"+e.permalink+(e.secret_token?"/"+e.secret_token:""):e.permalink_url&amp;&amp;(t.path=u(e.permalink_url)),n&amp;&amp;n.permalink_url&amp;&amp;(t.query={"in":u(n.permalink_url).substr(1)}),i.stringify(t)},playlist:function(e){return e=o(e),e.user?"/"+e.user.permalink+"/sets/"+e.permalink+(e.secret_token?"/"+e.secret_token:""):u(e.permalink_url)},user:function(e,t){return t=a(t)?"posts":t,e=o(e),"/"+e.permalink+(t?"/"+t:"")},root:function(){return"/"},search:function(e,t){return"/"+i.stringify({path:["search",e],query:{q:t}})},mobile:function(e){return"/mobile"+(e?"/"+e:"")},emailUnsubscribedPage:function(){return"/pages/unsubscribed"},peopleDirectory:function(e){return"/people/directory"+(e?"/"+e:"")},pages:function(e){return"/"+e},pagesPages:function(e){return"/pages/"+e},pagesWithVersions:function(e){return"/pages/"+e},pressPages:function(e){return"/pages/"+e},upload:function(){return"/upload"}}}),
define("shared/config/routes",["require","exports","module"],function(e,t,n){function o(e){return r||(r={alphanum:"[a-zA-Z0-9_-]+",user:"[a-zA-Z0-9_-]{1,255}",sound:"[a-zA-Z0-9_-]{1,255}",playlist:"[a-zA-Z0-9_-]{1,255}",id:"[0-9]+",secretToken:"s-[a-zA-Z0-9]{5}",group:"[a-zA-Z0-9_-]{1,255}",exploreCategory:"[^/]+",tag:".+",conversationId:"[0-9]+:(?:[0-9]+|system)",code:"\\w+",planName:"pro(?:-unlimited)?",metric:"\\w+",date:"[^/]+"},i=new RegExp(":("+Object.keys(r).join("|")+")","g")),i.lastIndex=0,new RegExp("^"+e.replace(i,u)+"(?:\\?([\\s\\S]*))?"+"$")}function u(e,t){return"("+r[t]+")"}function a(e){return e.forEach(function(e){var t=e.redirect;typeof e.route=="string"&amp;&amp;(e.route=o(e.route)),t&amp;&amp;(e.handler=function(){var e=typeof t=="string"?t:t.apply(this,arguments);return this.navigate(l(e,this.getQueryString()),{replace:!0,trigger:!0})}),e.requiresLogin&amp;&amp;(e.handler=f(e.handler))}),e}function f(e){return function(){return this.isLoggedIn()?e.apply(this,arguments):this.unauthenticated()}}function l(e,t){return t?e.indexOf("?")&gt;-1?e+"&amp;"+t:e+t:e}var r,i,s=n.exports=a([{name:"404",route:/(.*)/,handler:function(e){var t=e.replace(/[,.)]+$/,"");return e!==t?this.navigate("/"+t,{trigger:!0,replace:!0}):this.apply("error",{type:"404"})}},{name:"listen",route:":user/:sound(?:/:secretToken)?",handler:function(e,t,n,r,i){return this.apply("listen",{userPermalink:e,soundPermalink:t,secretToken:n,forUser:r,commentId:parseInt(i,10)||undefined})}},{name:"playlist",route:":user/sets/:playlist(?:/:secretToken)?",handler:function(e,t,n,r){return this.apply("playlist",{userPermalink:e,playlistPermalink:t,secretToken:n,forUser:r})}},{name:"user",route:":user/?(?:likes|followers|following|comments|sets|groups|info|tracks)?",handler:function(e){return this.apply("user-profile",{userPermalink:e})}},{name:"root",route:"",handler:function(){return this.apply("home")}},{name:"passwordResetSuccess",route:"signin/reset/success",handler:function(){return this.apply("password-reset-success")}},{name:"peopleDirectory",route:"people/directory(?:/(:alphanum))?",handler:function(e){return e=e||"A",this.apply("people-directory",{subpage:e})}},{name:"search",route:"search(?:/(sounds|tracks|sets|playlists|people|groups))?",handler:function(e){return e==="sets"&amp;&amp;(e="playlists"),e==="sounds"&amp;&amp;(e="tracks"),this.apply("search",{category:e})}},{name:"searchDeprecated",route:"(tracks|people|groups)/search",redirect:function(e){return e==="tracks"&amp;&amp;(e="sounds"),"/search/"+e}},{name:"mobile",route:"mobile",handler:function(){return this.apply("mobile-apps")}},{name:"messages",route:"messages(?:/:conversationId)?",handler:function(){return this.apply("messages")}},{name:"upload",route:"upload",handler:function(){return this.apply("upload")}},{name:"emailUnsubscribedPage",route:/^pages\/unsubscribed$/,handler:function(){return this.apply("unsubscribed")}},{name:"streamDeprecated",route:"dashboard(?:/.*)?",redirect:"/"},{name:"youUnused",route:"you(?:/.*)?",redirect:"/"},{name:"streamUnused",route:"stream(?:/.*)?",redirect:"/"},{name:"premium",route:"pro",handler:function(){return this.apply("premium")}},{name:"premiumDeprecated",route:"premium",redirect:function(){return"/pro"}},{name:"pages",route:"(terms-of-use(?:-pro)?|community-guidelines|imprint)",handler:function(e){return this.apply("static-page",{pageName:e})}},{name:"pagesPages",route:"pages/(copyright(?:/report)?|contact|competition|dmca_policy|model-withdrawal-form)/?",handler:function(e){return this.apply("static-page",{pageName:"pages/"+e})}},{name:"pagesWithVersions",route:"((?:terms-of-use-pro|(:?pages/(?:privacy|cookies)))(?:/[0-9]{2}-[0-9]{4})?)/?",handler:function(e){return this.apply("static-page",{pageName:e})}},{name:"pressPages",route:"(press(?:/:alphanum)*)",handler:function(e){return this.apply("static-page",{pageName:e})}}])}),
define("lib/tracking/tracking-core",["require","exports","module","$","underscore","lib/tracking/comscore","config","lib/tracking/helpers/core","vendor/event-logger/event-logger","lib/tracking/tracking-bus","lib/tracking/types/actions","lib/tracking/types/impressions","lib/tracking/types/pageviews"],function(e,t,n){function d(e){var t=u.getContext(e),n=u.getIdentifier(e),r=u.getUserId();a.click(r,t,n)}function v(e){var t=u.getUserId(),n=u.getContext(e);a.pageview(t,n,[])}function m(e){var t=u.getAudioContext(),n=u.getUserId();a.audio({level:t,action:e.verb,id:e.id,user:n,duration:e.duration,trigger:e.trigger,protocol:"http",source:e.source,sourceVersion:e.sourceVersion})}function g(e){var t=u.getImpressionEvent(e),n=u.getLevel(),r=u.getUserId();a.impression(r,n,t)}function y(e){var t=u.getLevel(),n=u.getUserId();a.appLoad(n,{latency:e,level:t})}function b(){a.initialize({id:o.get("client_application_id"),trackingUrl:o.get("eventlogger_tracking_url")})}function w(e,t){return e[i.indexOf(e,t)]}var r=e("$"),i=e("underscore"),s=e("lib/tracking/comscore"),o=e("config"),u=e("lib/tracking/helpers/core"),a=e("vendor/event-logger/event-logger"),f=e("lib/tracking/tracking-bus"),l=e("lib/tracking/types/actions"),c=e("lib/tracking/types/impressions"),h=e("lib/tracking/types/pageviews"),p=n.exports={initialize:function(){b(),f.on("all",function(e){var t=i.rest(arguments),n=p[e];if(!i.isFunction(n))return;p[e].apply(p,t)}),s.init()},destroy:function(){f.off(),s.destroy()},action:function(e,t,n){var r=l[e],s=r&amp;&amp;r.identifiers,o;o=w(s,t),o&amp;&amp;this.whenRequestAllowed().done(function(){d(i.defaults({identifier:t},n))})},audio:function(e,t,n,r,i,s){this.whenRequestAllowed().done(function(){m({verb:e,id:t,duration:n,trigger:r,source:i,sourceVersion:s})})},saveAudioContext:function(){u.saveAudioContext()},pageview:function(e){var t;t=i.clone(i.find(h,function(t,n){var r=n.split(" ");return i.contains(r,e)})||h.default),typeof t.chapter=="function"&amp;&amp;(t.chapter=t.chapter()),this.whenRequestAllowed().done(function(){v(t)})},impression:function(e,t){i.contains(c,e)&amp;&amp;this.whenRequestAllowed().done(function(){g({identifier:e,contextData:t})})},appLoad:function(e){y(e)},whenRequestAllowed:function(){return r.Deferred().resolve()}}}),
define("lib/url",["require","exports","module","underscore","lib/backbone","lib/support"],function(e,t,n){var r=e("underscore"),i=e("lib/backbone"),s=e("lib/support"),o=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,u=["---","scheme","authority","userInfo","user","password","host","port","relative","path","directory","file","query","fragment"],a,f=n.exports={parse:function(e,t){var n=o.exec(e),r,i,s={};t||(t=u);for(r=1;r&lt;u.length;++r){i=u[r];if(t.indexOf(i)!==-1)if(n[r]||i==="query")switch(i){case"port":s[i]=parseInt(n[r],10);break;case"path":s[i]=n[r].split("/").map(decodeURIComponent).join("/");break;case"query":s[i]=f.parseQueryString(n[r]);break;default:s[i]=n[r]}}return s},joinPath:function(e){return e.filter(Boolean).join("/")},parseQueryString:function(e){var t={};return e&amp;&amp;e.replace(/([^?=&amp;]+)(?:=([^&amp;]*))?/g,function(e,n,r){n=decodeURIComponent(n),r=decodeURIComponent(r||"");switch(typeof t[n]){case"object":t[n].push(r);break;case"undefined":t[n]=r;break;default:t[n]=[t[n],r]}}),t},getQueryParams:function(){var e,t;return function(n){var r=n||(s.pushState?window.location.search:window.location.hash.replace(/^[^?]*/,""));return r!==e&amp;&amp;(e=r,t=f.parseQueryString(r)),t}}(),stringify:function(e,t){var n=[],i,s;return t&amp;&amp;(s=f.parse(t),e.query&amp;&amp;s.query&amp;&amp;(r.extend(s.query,e.query),delete e.query),e=r.extend({},s,e)),e.scheme&amp;&amp;n.push(e.scheme+"://"),e.user&amp;&amp;(n.push(e.user),e.password&amp;&amp;n.push(":"+e.password),n.push("@")),e.host&amp;&amp;n.push(e.host),e.port&amp;&amp;n.push(":"+e.port),e.path&amp;&amp;(typeof e.path=="string"?n.push(e.path.split("/").join("/")):n.push(f.joinPath(e.path))),i=a(e.query),i&amp;&amp;n.push("?"+i),e.fragment&amp;&amp;n.push("#"+e.fragment),n.join("")},modify:function(e,t){var n=f.parse(e);return r.isFunction(t)?n=t.call(null,n):typeof t=="object"&amp;&amp;(t.query&amp;&amp;(r.extend(n.query,t.query),delete t.query),r.extend(n,t)),f.stringify(n)},getQueryParam:function(e){return f.parseQueryString(window.location.search)[e]},currentPath:function(){return i.history?"/"+i.history.getFragment(null,null,!0):""}};a=function(e){var t,n,r,i,s,o=[];if(e)for(t in e)if(e.hasOwnProperty(t)){i=e[t];if(i!==null&amp;&amp;i!==s)if(typeof i=="object"){r=i.length;for(n=0;n&lt;r;++n)o.push(encodeURIComponent(t)+"="+encodeURIComponent(i[n]).replace(/%2F/g,"/"))}else o.push(encodeURIComponent(t)+"="+encodeURIComponent(i).replace(/%2F/g,"/"))}return o.join("&amp;")}}),
define("models/user",["require","exports","module","lib/model","lib/url","lib/mixins/urn"],function(e,t,n){var r=e("lib/model"),i=e("lib/url"),s=e("lib/mixins/urn"),o=n.exports=r.extend(s,{resource_type:"user",urnPrefix:"soundcloud:users",baseUrl:function(){var e=this.id;if(e)return i.stringify({path:["users",e]});if(this.get("permalink")==="you")return i.stringify({path:"me"})}},{resolve:function(e){return r._resolve(this,e,function(t){return t.get("permalink")===e})}})}),
define("lib/console-box",["require","exports","module","css","lib/console-box.css"],function(e,t,n){function u(t){var n;i||(r.insert(e("lib/console-box.css")),i=document.createElement("div"),i.className="consoleBox",i.addEventListener("click",f),document.body.appendChild(i)),s!==t?(s=t,o=0,n=a(t),i.insertBefore(n,i.firstChild)):i.firstChild.innerText=t+" ("+ ++o+")"}function a(e){var t=document.createElement("p");return t.className="consoleBox__message",t.innerText=e,t}function f(){if(i)while(i.firstChild)i.removeChild(i.firstChild)}var r=e("css"),i,s,o;n.exports={log:u}}),
define("vendor/underscore.deferred/underscore.deferred",["require","exports","module"],function(e,t,n){(function(e){function y(e){var t=g[e]={};return l(e.split(/\s+/),function(e){t[e]=!0}),t}var t={},r=Array.prototype,i=Object.prototype,s=i.hasOwnProperty,o=i.toString,u=r.forEach,a=r.indexOf,f=r.slice,l=function(e,n,r){var i,o,a;if(!e)return;if(u&amp;&amp;e.forEach===u)e.forEach(n,r);else if(e.length===+e.length){for(o=0,a=e.length;o&lt;a;o++)if(o in e&amp;&amp;n.call(r,e[o],o,e)===t)return}else for(i in e)if(s.call(e,i)&amp;&amp;n.call(r,e[i],i,e)===t)return},c=function(e){return!!(e&amp;&amp;e.constructor&amp;&amp;e.call&amp;&amp;e.apply)},h=function(e){return l(f.call(arguments,1),function(t){var n;for(n in t)t[n]!==void 0&amp;&amp;(e[n]=t[n])}),e},p=function(e,t,n){var r;if(t){if(a)return a.call(t,e,n);r=t.length,n=n?n&lt;0?Math.max(0,r+n):n:0;for(;n&lt;r;n++)if(n in t&amp;&amp;t[n]===e)return n}return-1},d={};l("Boolean Number String Function Array Date RegExp Object".split(" "),function(e,t){d["[object "+e+"]"]=e.toLowerCase()});var v=function(e){return e==null?String(e):d[o.call(e)]||"object"},m={},g={};m.Callbacks=function(e){e=typeof e=="string"?g[e]||y(e):h({},e);var t,n,r,i,s,o,u=[],a=!e.once&amp;&amp;[],f=function(l){t=e.memory&amp;&amp;l,n=!0,o=i||0,i=0,s=u.length,r=!0;for(;u&amp;&amp;o&lt;s;o++)if(u[o].apply(l[0],l[1])===!1&amp;&amp;e.stopOnFalse){t=!1;break}r=!1,u&amp;&amp;(a?a.length&amp;&amp;f(a.shift()):t?u=[]:c.disable())},c={add:function(){if(u){var n=u.length;(function o(t){l(t,function(t){var n=v(t);n==="function"?(!e.unique||!c.has(t))&amp;&amp;u.push(t):t&amp;&amp;t.length&amp;&amp;n!=="string"&amp;&amp;o(t)})})(arguments),r?s=u.length:t&amp;&amp;(i=n,f(t))}return this},remove:function(){return u&amp;&amp;l(arguments,function(e){var t;while((t=p(e,u,t))&gt;-1)u.splice(t,1),r&amp;&amp;(t&lt;=s&amp;&amp;s--,t&lt;=o&amp;&amp;o--)}),this},has:function(e){return p(e,u)&gt;-1},empty:function(){return u=[],this},disable:function(){return u=a=t=undefined,this},disabled:function(){return!u},lock:function(){return a=undefined,t||c.disable(),this},locked:function(){return!a},fireWith:function(e,t){return t=t||[],t=[e,t.slice?t.slice():t],u&amp;&amp;(!n||a)&amp;&amp;(r?a.push(t):f(t)),this},fire:function(){return c.fireWith(this,arguments),this},fired:function(){return!!n}};return c},m.Deferred=function(e){var t=[["resolve","done",m.Callbacks("once memory"),"resolved"],["reject","fail",m.Callbacks("once memory"),"rejected"],["notify","progress",m.Callbacks("memory")]],n="pending",r={state:function(){return n},always:function(){return i.done(arguments).fail(arguments),this},then:function(){var e=arguments;return m.Deferred(function(n){l(t,function(t,r){var s=t[0],o=e[r];i[t[1]](c(o)?function(){var e;try{e=o.apply(this,arguments)}catch(t){n.reject(t);return}e&amp;&amp;c(e.promise)?e.promise().done(n.resolve).fail(n.reject).progress(n.notify):n[s!=="notify"?"resolveWith":s+"With"](this===i?n:this,[e])}:n[s])}),e=null}).promise()},promise:function(e){return e!=null?h(e,r):r}},i={};return r.pipe=r.then,l(t,function(e,s){var o=e[2],u=e[3];r[e[1]]=o.add,u&amp;&amp;o.add(function(){n=u},t[s^1][2].disable,t[2][2].lock),i[e[0]]=o.fire,i[e[0]+"With"]=o.fireWith}),r.promise(i),e&amp;&amp;e.call(i,i),i},m.when=function(e){var t=0,n=v(e)==="array"&amp;&amp;arguments.length===1?e:f.call(arguments),r=n.length,i=r!==1||e&amp;&amp;c(e.promise)?r:0,s=i===1?e:m.Deferred(),o=function(e,t,n){return function(r){t[e]=this,n[e]=arguments.length&gt;1?f.call(arguments):r,n===u?s.notifyWith(t,n):--i||s.resolveWith(t,n)}},u,a,l;if(r&gt;1){u=new Array(r),a=new Array(r),l=new Array(r);for(;t&lt;r;t++)n[t]&amp;&amp;c(n[t].promise)?n[t].promise().done(o(t,l,n)).fail(s.reject).progress(o(t,a,u)):--i}return i||s.resolveWith(l,n),s.promise()},typeof n!="undefined"&amp;&amp;n.exports?n.exports=m:typeof e._!="undefined"?e._.mixin(m):e._=m})(this)}),
define("domify",["require","exports","module"],function(e,t,n){function i(e){if("string"!=typeof e)throw new TypeError("String expected");var t=/&lt;([\w:]+)/.exec(e);if(!t)throw new Error("No elements were generated.");var n=t[1];if(n=="body"){var i=document.createElement("html");return i.innerHTML=e,[i.removeChild(i.lastChild)]}var o=r[n]||r._default,u=o[0],a=o[1],f=o[2],i=document.createElement("div");i.innerHTML=a+e+f;while(u--)i=i.lastChild;return s(i.children)}function s(e){var t=[];while(e.length)t.push(e[0].parentNode.removeChild(e[0]));return t}n.exports=i;var r={option:[1,'&lt;select multiple="multiple"&gt;',"&lt;/select&gt;"],optgroup:[1,'&lt;select multiple="multiple"&gt;',"&lt;/select&gt;"],legend:[1,"&lt;fieldset&gt;","&lt;/fieldset&gt;"],thead:[1,"&lt;table&gt;","&lt;/table&gt;"],tbody:[1,"&lt;table&gt;","&lt;/table&gt;"],tfoot:[1,"&lt;table&gt;","&lt;/table&gt;"],colgroup:[1,"&lt;table&gt;","&lt;/table&gt;"],caption:[1,"&lt;table&gt;","&lt;/table&gt;"],tr:[2,"&lt;table&gt;&lt;tbody&gt;","&lt;/tbody&gt;&lt;/table&gt;"],td:[3,"&lt;table&gt;&lt;tbody&gt;&lt;tr&gt;","&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;"],th:[3,"&lt;table&gt;&lt;tbody&gt;&lt;tr&gt;","&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;"],col:[2,"&lt;table&gt;&lt;tbody&gt;&lt;/tbody&gt;&lt;colgroup&gt;","&lt;/colgroup&gt;&lt;/table&gt;"],_default:[0,"",""]}}),
define("lib/dollar/dollar-ajax",["require","exports","module","underscore","ajax","vendor/underscore.deferred/underscore.deferred"],function(e,t,n){var r=e("underscore"),i=e("ajax"),s=e("vendor/underscore.deferred/underscore.deferred"),o=n.exports=function(e){var t=s.Deferred();return e.success&amp;&amp;t.done(e.success),e.error&amp;&amp;t.fail(e.error),e=r.extend({},e,{success:function(e,n,r){t.resolve.call(r,e,n,r)},error:function(e,n,r){t.reject.call(e,r,e.status,e)}}),i(e),t};["get","post","getJSON"].forEach(function(e){o[e]=function(t,n,r,i){var s;return typeof n=="function"&amp;&amp;(i=i||r,r=n,n=null),s=o({type:e==="post"?"POST":"GET",url:t,data:n,dataType:e==="getJSON"?"json":i}),typeof r=="function"&amp;&amp;s.done(r),s}})}),
define("lib/dollar/dollar-attrs",["require","exports","module","underscore","classes"],function(e,t,n){var r=e("underscore"),i=e("classes"),s=n.exports={attr:function(e,t){var n;return this.each(function(){typeof e=="object"?r.each(e,function(e,t){this.setAttribute(t,e)}.bind(this)):t?this.setAttribute(e,t):n=this.getAttribute(e)}),n||this},classList:function(){var e;return this.each(function(){e=(new i(this)).array()}),e},hasClass:function(e){return[].every.call(this,function(t){return(new i(t)).has(e)})}};["add","remove"].forEach(function(e){s[e+"Class"]=function(t){return this.each(function(){return(new i(this))[e](t)})}}),s.toggleClass=function(e,t){var n="toggle";return arguments.length&gt;1&amp;&amp;(n=t?"add":"remove"),this.each(function(){return(new i(this))[n](e)})}}),
define("lib/dollar/dollar-events",["require","exports","module","underscore","vendor/zepto-events"],function(e,t,n){var r=e("underscore"),i=e("vendor/zepto-events");t.Event=i.Event,t.prototypeMethods={bind:function(e,t){return this.each(function(){i.add(this,e,t)})},unbind:function(e,t){return this.each(function(){i.remove(this,e,t)})},one:function(e,t){return this.each(function(n){i.add(this,e,t,null,function(e,t){return function(){var r=e.apply(n,arguments);return i.remove(n,t,e),r}})})},delegate:function(e,t,n){var s=this.constructor;return this.each(function(o){i.add(o,t,n,e,function(t){return function(n){var u,a=s(n.target).closest(e,o)[0];if(a)return u=r.extend(i.createProxy(n),{currentTarget:a,liveFired:o}),t.apply(a,[u].concat([].slice.call(arguments,1)))}})})},undelegate:function(e,t,n){return this.each(function(){i.remove(this,t,n,e)})},on:function(e,t,n){return!t||typeof t=="function"?this.bind(e,t||n):this.delegate(t,e,n)},off:function(e,t,n){return!t||typeof t=="function"?this.unbind(e,t||n):this.undelegate(t,e,n)},trigger:function(e,t){var n=this.constructor;if(typeof e=="string"||typeof e=="object")e=n.Event(e);return e.data=t,this.each(function(){"dispatchEvent"in this&amp;&amp;this.dispatchEvent(e)})}}}),
define("lib/dollar/dollar-manipulation",["require","exports","module"],function(e,t,n){n.exports={remove:function(){return this.each(function(){this.parentNode&amp;&amp;this.parentNode.removeChild(this)})},html:function(e){return this.each(function(){if(e)return this.innerHTML=e,this.innerHTML;e=this.innerHTML}),e}}}),
define("lib/dollar/dollar-matches",["require","exports","module"],function(e,t,n){n.exports=function(e,t){var n;if(!e||e.nodeType!==1)return!1;n=e.webkitMatchesSelector||e.mozMatchesSelector||e.oMatchesSelector||e.msMatchesSelector||e.matchesSelector;if(n)return n.call(e,t)}}),
define("lib/dollar/dollar-traversal",["require","exports","module","underscore","lib/dollar/dollar-matches"],function(e,t,n){function o(e){return e!=null&amp;&amp;e.nodeType===e.DOCUMENT_NODE}var r=e("underscore"),i=e("lib/dollar/dollar-matches"),s=n.exports={find:function(e){var t;return this.each(function(n){t=new this.constructor(e,n)},this),t},closest:function(e,t){var n=this[0],r=!1,s=this.constructor;typeof e=="object"&amp;&amp;(r=s(e));while(n&amp;&amp;!(r?[].indexOf.call(r,n)&gt;=0:i(n,e)))n=n!==t&amp;&amp;!o(n)&amp;&amp;n.parentNode;return s(n)},children:function(e){var t=[];return this.each(function(n){var i=n.children;if(!i.length)return;e?(new this.constructor(e,n)).each(function(e){e.parentNode===n&amp;&amp;t.push(e)}):t.push(r.toArray(i))},this),new this.constructor(r.flatten(t))},index:function(){var e=-1,t=this[0],n;if(t&amp;&amp;t.parentNode){n=t.previousElementSibling,e=0;while(n)n=n.previousElementSibling,e++}return e}}}),
define("vendor/underscore",["require","exports","module"],function(e,t,n){(function(){function x(e){function t(t,n,r,i,s,o){for(;s&gt;=0&amp;&amp;s&lt;o;s+=e){var u=i?i[s]:s;r=n(r,t[u],u,t)}return r}return function(n,r,i,s){r=g(r,s,4);var o=!S(n)&amp;&amp;m.keys(n),u=(o||n).length,a=e&gt;0?0:u-1;return arguments.length&lt;3&amp;&amp;(i=n[o?o[a]:a],a+=e),t(n,r,i,o,a,u)}}function C(e){return function(t,n,r){n=y(n,r);var i=t!=null&amp;&amp;t.length,s=e&gt;0?0:i-1;for(;s&gt;=0&amp;&amp;s&lt;i;s+=e)if(n(t[s],s,t))return s;return-1}}function O(e,t){var n=A.length,r=e.constructor,i=m.isFunction(r)&amp;&amp;r.prototype||s,o="constructor";m.has(e,o)&amp;&amp;!m.contains(t,o)&amp;&amp;t.push(o);while(n--)o=A[n],o in e&amp;&amp;e[o]!==i[o]&amp;&amp;!m.contains(t,o)&amp;&amp;t.push(o)}var e=this,r=e._,i=Array.prototype,s=Object.prototype,o=Function.prototype,u=i.push,a=i.slice,f=s.toString,l=s.hasOwnProperty,c=Array.isArray,h=Object.keys,p=o.bind,d=Object.create,v=function(){},m=function(e){if(e instanceof m)return e;if(!(this instanceof m))return new m(e);this._wrapped=e};typeof t!="undefined"?(typeof n!="undefined"&amp;&amp;n.exports&amp;&amp;(t=n.exports=m),t._=m):e._=m,m.VERSION="1.8.2";var g=function(e,t,n){if(t===void 0)return e;switch(n==null?3:n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,i){return e.call(t,n,r,i)};case 4:return function(n,r,i,s){return e.call(t,n,r,i,s)}}return function(){return e.apply(t,arguments)}},y=function(e,t,n){return e==null?m.identity:m.isFunction(e)?g(e,t,n):m.isObject(e)?m.matcher(e):m.property(e)};m.iteratee=function(e,t){return y(e,t,Infinity)};var b=function(e,t){return function(n){var r=arguments.length;if(r&lt;2||n==null)return n;for(var i=1;i&lt;r;i++){var s=arguments[i],o=e(s),u=o.length;for(var a=0;a&lt;u;a++){var f=o[a];if(!t||n[f]===void 0)n[f]=s[f]}}return n}},w=function(e){if(!m.isObject(e))return{};if(d)return d(e);v.prototype=e;var t=new v;return v.prototype=null,t},E=Math.pow(2,53)-1,S=function(e){var t=e!=null&amp;&amp;e.length;return typeof t=="number"&amp;&amp;t&gt;=0&amp;&amp;t&lt;=E};m.each=m.forEach=function(e,t,n){t=g(t,n);var r,i;if(S(e))for(r=0,i=e.length;r&lt;i;r++)t(e[r],r,e);else{var s=m.keys(e);for(r=0,i=s.length;r&lt;i;r++)t(e[s[r]],s[r],e)}return e},m.map=m.collect=function(e,t,n){t=y(t,n);var r=!S(e)&amp;&amp;m.keys(e),i=(r||e).length,s=Array(i);for(var o=0;o&lt;i;o++){var u=r?r[o]:o;s[o]=t(e[u],u,e)}return s},m.reduce=m.foldl=m.inject=x(1),m.reduceRight=m.foldr=x(-1),m.find=m.detect=function(e,t,n){var r;S(e)?r=m.findIndex(e,t,n):r=m.findKey(e,t,n);if(r!==void 0&amp;&amp;r!==-1)return e[r]},m.filter=m.select=function(e,t,n){var r=[];return t=y(t,n),m.each(e,function(e,n,i){t(e,n,i)&amp;&amp;r.push(e)}),r},m.reject=function(e,t,n){return m.filter(e,m.negate(y(t)),n)},m.every=m.all=function(e,t,n){t=y(t,n);var r=!S(e)&amp;&amp;m.keys(e),i=(r||e).length;for(var s=0;s&lt;i;s++){var o=r?r[s]:s;if(!t(e[o],o,e))return!1}return!0},m.some=m.any=function(e,t,n){t=y(t,n);var r=!S(e)&amp;&amp;m.keys(e),i=(r||e).length;for(var s=0;s&lt;i;s++){var o=r?r[s]:s;if(t(e[o],o,e))return!0}return!1},m.contains=m.includes=m.include=function(e,t,n,r){S(e)||(e=m.values(e));if(typeof n!="number"||r)n=0;return m.indexOf(e,t,n)&gt;=0},m.invoke=function(e,t){var n=a.call(arguments,2),r=m.isFunction(t);return m.map(e,function(e){var i=r?t:e[t];return i==null?i:i.apply(e,n)})},m.pluck=function(e,t){return m.map(e,m.property(t))},m.where=function(e,t){return m.filter(e,m.matcher(t))},m.findWhere=function(e,t){return m.find(e,m.matcher(t))},m.max=function(e,t,n){var r=-Infinity,i=-Infinity,s,o;if(t==null&amp;&amp;e!=null){e=S(e)?e:m.values(e);for(var u=0,a=e.length;u&lt;a;u++)s=e[u],s&gt;r&amp;&amp;(r=s)}else t=y(t,n),m.each(e,function(e,n,s){o=t(e,n,s);if(o&gt;i||o===-Infinity&amp;&amp;r===-Infinity)r=e,i=o});return r},m.min=function(e,t,n){var r=Infinity,i=Infinity,s,o;if(t==null&amp;&amp;e!=null){e=S(e)?e:m.values(e);for(var u=0,a=e.length;u&lt;a;u++)s=e[u],s&lt;r&amp;&amp;(r=s)}else t=y(t,n),m.each(e,function(e,n,s){o=t(e,n,s);if(o&lt;i||o===Infinity&amp;&amp;r===Infinity)r=e,i=o});return r},m.shuffle=function(e){var t=S(e)?e:m.values(e),n=t.length,r=Array(n);for(var i=0,s;i&lt;n;i++)s=m.random(0,i),s!==i&amp;&amp;(r[i]=r[s]),r[s]=t[i];return r},m.sample=function(e,t,n){return t==null||n?(S(e)||(e=m.values(e)),e[m.random(e.length-1)]):m.shuffle(e).slice(0,Math.max(0,t))},m.sortBy=function(e,t,n){return t=y(t,n),m.pluck(m.map(e,function(e,n,r){return{value:e,index:n,criteria:t(e,n,r)}}).sort(function(e,t){var n=e.criteria,r=t.criteria;if(n!==r){if(n&gt;r||n===void 0)return 1;if(n&lt;r||r===void 0)return-1}return e.index-t.index}),"value")};var T=function(e){return function(t,n,r){var i={};return n=y(n,r),m.each(t,function(r,s){var o=n(r,s,t);e(i,r,o)}),i}};m.groupBy=T(function(e,t,n){m.has(e,n)?e[n].push(t):e[n]=[t]}),m.indexBy=T(function(e,t,n){e[n]=t}),m.countBy=T(function(e,t,n){m.has(e,n)?e[n]++:e[n]=1}),m.toArray=function(e){return e?m.isArray(e)?a.call(e):S(e)?m.map(e,m.identity):m.values(e):[]},m.size=function(e){return e==null?0:S(e)?e.length:m.keys(e).length},m.partition=function(e,t,n){t=y(t,n);var r=[],i=[];return m.each(e,function(e,n,s){(t(e,n,s)?r:i).push(e)}),[r,i]},m.first=m.head=m.take=function(e,t,n){return e==null?void 0:t==null||n?e[0]:m.initial(e,e.length-t)},m.initial=function(e,t,n){return a.call(e,0,Math.max(0,e.length-(t==null||n?1:t)))},m.last=function(e,t,n){return e==null?void 0:t==null||n?e[e.length-1]:m.rest(e,Math.max(0,e.length-t))},m.rest=m.tail=m.drop=function(e,t,n){return a.call(e,t==null||n?1:t)},m.compact=function(e){return m.filter(e,m.identity)};var N=function(e,t,n,r){var i=[],s=0;for(var o=r||0,u=e&amp;&amp;e.length;o&lt;u;o++){var a=e[o];if(S(a)&amp;&amp;(m.isArray(a)||m.isArguments(a))){t||(a=N(a,t,n));var f=0,l=a.length;i.length+=l;while(f&lt;l)i[s++]=a[f++]}else n||(i[s++]=a)}return i};m.flatten=function(e,t){return N(e,t,!1)},m.without=function(e){return m.difference(e,a.call(arguments,1))},m.uniq=m.unique=function(e,t,n,r){if(e==null)return[];m.isBoolean(t)||(r=n,n=t,t=!1),n!=null&amp;&amp;(n=y(n,r));var i=[],s=[];for(var o=0,u=e.length;o&lt;u;o++){var a=e[o],f=n?n(a,o,e):a;t?((!o||s!==f)&amp;&amp;i.push(a),s=f):n?m.contains(s,f)||(s.push(f),i.push(a)):m.contains(i,a)||i.push(a)}return i},m.union=function(){return m.uniq(N(arguments,!0,!0))},m.intersection=function(e){if(e==null)return[];var t=[],n=arguments.length;for(var r=0,i=e.length;r&lt;i;r++){var s=e[r];if(m.contains(t,s))continue;for(var o=1;o&lt;n;o++)if(!m.contains(arguments[o],s))break;o===n&amp;&amp;t.push(s)}return t},m.difference=function(e){var t=N(arguments,!0,!0,1);return m.filter(e,function(e){return!m.contains(t,e)})},m.zip=function(){return m.unzip(arguments)},m.unzip=function(e){var t=e&amp;&amp;m.max(e,"length").length||0,n=Array(t);for(var r=0;r&lt;t;r++)n[r]=m.pluck(e,r);return n},m.object=function(e,t){var n={};for(var r=0,i=e&amp;&amp;e.length;r&lt;i;r++)t?n[e[r]]=t[r]:n[e[r][0]]=e[r][1];return n},m.indexOf=function(e,t,n){var r=0,i=e&amp;&amp;e.length;if(typeof n=="number")r=n&lt;0?Math.max(0,i+n):n;else if(n&amp;&amp;i)return r=m.sortedIndex(e,t),e[r]===t?r:-1;if(t!==t){var s=m.findIndex(a.call(e,r),m.isNaN);return s&gt;=0?s+r:-1}for(;r&lt;i;r++)if(e[r]===t)return r;return-1},m.lastIndexOf=function(e,t,n){var r=e?e.length:0;typeof n=="number"&amp;&amp;(r=n&lt;0?r+n+1:Math.min(r,n+1));if(t!==t)return m.findLastIndex(a.call(e,0,r),m.isNaN);while(--r&gt;=0)if(e[r]===t)return r;return-1},m.findIndex=C(1),m.findLastIndex=C(-1),m.sortedIndex=function(e,t,n,r){n=y(n,r,1);var i=n(t),s=0,o=e.length;while(s&lt;o){var u=Math.floor((s+o)/2);n(e[u])&lt;i?s=u+1:o=u}return s},m.range=function(e,t,n){t==null&amp;&amp;(t=e||0,e=0),n=n||1;var r=Math.max(Math.ceil((t-e)/n),0),i=Array(r);for(var s=0;s&lt;r;s++,e+=n)i[s]=e;return i};var k=function(e,t,n,r,i){if(r instanceof t){var s=w(e.prototype),o=e.apply(s,i);return m.isObject(o)?o:s}return e.apply(n,i)};m.bind=function(e,t){if(p&amp;&amp;e.bind===p)return p.apply(e,a.call(arguments,1));if(!m.isFunction(e))throw new TypeError("Bind must be called on a function");var n=a.call(arguments,2),r=function(){return k(e,r,t,this,n.concat(a.call(arguments)))};return r},m.partial=function(e){var t=a.call(arguments,1),n=function(){var r=0,i=t.length,s=Array(i);for(var o=0;o&lt;i;o++)s[o]=t[o]===m?arguments[r++]:t[o];while(r&lt;arguments.length)s.push(arguments[r++]);return k(e,n,this,this,s)};return n},m.bindAll=function(e){var t,n=arguments.length,r;if(n&lt;=1)throw new Error("bindAll must be passed function names");for(t=1;t&lt;n;t++)r=arguments[t],e[r]=m.bind(e[r],e);return e},m.memoize=function(e,t){var n=function(r){var i=n.cache,s=""+(t?t.apply(this,arguments):r);return m.has(i,s)||(i[s]=e.apply(this,arguments)),i[s]};return n.cache={},n},m.delay=function(e,t){var n=a.call(arguments,2);return setTimeout(function(){return e.apply(null,n)},t)},m.defer=m.partial(m.delay,m,1),m.throttle=function(e,t,n){var r,i,s,o=null,u=0;n||(n={});var a=function(){u=n.leading===!1?0:m.now(),o=null,s=e.apply(r,i),o||(r=i=null)};return function(){var f=m.now();!u&amp;&amp;n.leading===!1&amp;&amp;(u=f);var l=t-(f-u);return r=this,i=arguments,l&lt;=0||l&gt;t?(o&amp;&amp;(clearTimeout(o),o=null),u=f,s=e.apply(r,i),o||(r=i=null)):!o&amp;&amp;n.trailing!==!1&amp;&amp;(o=setTimeout(a,l)),s}},m.debounce=function(e,t,n){var r,i,s,o,u,a=function(){var f=m.now()-o;f&lt;t&amp;&amp;f&gt;=0?r=setTimeout(a,t-f):(r=null,n||(u=e.apply(s,i),r||(s=i=null)))};return function(){s=this,i=arguments,o=m.now();var f=n&amp;&amp;!r;return r||(r=setTimeout(a,t)),f&amp;&amp;(u=e.apply(s,i),s=i=null),u}},m.wrap=function(e,t){return m.partial(t,e)},m.negate=function(e){return function(){return!e.apply(this,arguments)}},m.compose=function(){var e=arguments,t=e.length-1;return function(){var n=t,r=e[t].apply(this,arguments);while(n--)r=e[n].call(this,r);return r}},m.after=function(e,t){return function(){if(--e&lt;1)return t.apply(this,arguments)}},m.before=function(e,t){var n;return function(){return--e&gt;0&amp;&amp;(n=t.apply(this,arguments)),e&lt;=1&amp;&amp;(t=null),n}},m.once=m.partial(m.before,2);var L=!{toString:null}.propertyIsEnumerable("toString"),A=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"];m.keys=function(e){if(!m.isObject(e))return[];if(h)return h(e);var t=[];for(var n in e)m.has(e,n)&amp;&amp;t.push(n);return L&amp;&amp;O(e,t),t},m.allKeys=function(e){if(!m.isObject(e))return[];var t=[];for(var n in e)t.push(n);return L&amp;&amp;O(e,t),t},m.values=function(e){var t=m.keys(e),n=t.length,r=Array(n);for(var i=0;i&lt;n;i++)r[i]=e[t[i]];return r},m.mapObject=function(e,t,n){t=y(t,n);var r=m.keys(e),i=r.length,s={},o;for(var u=0;u&lt;i;u++)o=r[u],s[o]=t(e[o],o,e);return s},m.pairs=function(e){var t=m.keys(e),n=t.length,r=Array(n);for(var i=0;i&lt;n;i++)r[i]=[t[i],e[t[i]]];return r},m.invert=function(e){var t={},n=m.keys(e);for(var r=0,i=n.length;r&lt;i;r++)t[e[n[r]]]=n[r];return t},m.functions=m.methods=function(e){var t=[];for(var n in e)m.isFunction(e[n])&amp;&amp;t.push(n);return t.sort()},m.extend=b(m.allKeys),m.extendOwn=m.assign=b(m.keys),m.findKey=function(e,t,n){t=y(t,n);var r=m.keys(e),i;for(var s=0,o=r.length;s&lt;o;s++){i=r[s];if(t(e[i],i,e))return i}},m.pick=function(e,t,n){var r={},i=e,s,o;if(i==null)return r;m.isFunction(t)?(o=m.allKeys(i),s=g(t,n)):(o=N(arguments,!1,!1,1),s=function(e,t,n){return t in n},i=Object(i));for(var u=0,a=o.length;u&lt;a;u++){var f=o[u],l=i[f];s(l,f,i)&amp;&amp;(r[f]=l)}return r},m.omit=function(e,t,n){if(m.isFunction(t))t=m.negate(t);else{var r=m.map(N(arguments,!1,!1,1),String);t=function(e,t){return!m.contains(r,t)}}return m.pick(e,t,n)},m.defaults=b(m.allKeys,!0),m.create=function(e,t){var n=w(e);return t&amp;&amp;m.extendOwn(n,t),n},m.clone=function(e){return m.isObject(e)?m.isArray(e)?e.slice():m.extend({},e):e},m.tap=function(e,t){return t(e),e},m.isMatch=function(e,t){var n=m.keys(t),r=n.length;if(e==null)return!r;var i=Object(e);for(var s=0;s&lt;r;s++){var o=n[s];if(t[o]!==i[o]||!(o in i))return!1}return!0};var M=function(e,t,n,r){if(e===t)return e!==0||1/e===1/t;if(e==null||t==null)return e===t;e instanceof m&amp;&amp;(e=e._wrapped),t instanceof m&amp;&amp;(t=t._wrapped);var i=f.call(e);if(i!==f.call(t))return!1;switch(i){case"[object RegExp]":case"[object String]":return""+e==""+t;case"[object Number]":if(+e!==+e)return+t!==+t;return+e===0?1/+e===1/t:+e===+t;case"[object Date]":case"[object Boolean]":return+e===+t}var s=i==="[object Array]";if(!s){if(typeof e!="object"||typeof t!="object")return!1;var o=e.constructor,u=t.constructor;if(o!==u&amp;&amp;!(m.isFunction(o)&amp;&amp;o instanceof o&amp;&amp;m.isFunction(u)&amp;&amp;u instanceof u)&amp;&amp;"constructor"in e&amp;&amp;"constructor"in t)return!1}n=n||[],r=r||[];var a=n.length;while(a--)if(n[a]===e)return r[a]===t;n.push(e),r.push(t);if(s){a=e.length;if(a!==t.length)return!1;while(a--)if(!M(e[a],t[a],n,r))return!1}else{var l=m.keys(e),c;a=l.length;if(m.keys(t).length!==a)return!1;while(a--){c=l[a];if(!m.has(t,c)||!M(e[c],t[c],n,r))return!1}}return n.pop(),r.pop(),!0};m.isEqual=function(e,t){return M(e,t)},m.isEmpty=function(e){return e==null?!0:S(e)&amp;&amp;(m.isArray(e)||m.isString(e)||m.isArguments(e))?e.length===0:m.keys(e).length===0},m.isElement=function(e){return!!e&amp;&amp;e.nodeType===1},m.isArray=c||function(e){return f.call(e)==="[object Array]"},m.isObject=function(e){var t=typeof e;return t==="function"||t==="object"&amp;&amp;!!e},m.each(["Arguments","Function","String","Number","Date","RegExp","Error"],function(e){m["is"+e]=function(t){return f.call(t)==="[object "+e+"]"}}),m.isArguments(arguments)||(m.isArguments=function(e){return m.has(e,"callee")}),typeof /./!="function"&amp;&amp;typeof Int8Array!="object"&amp;&amp;(m.isFunction=function(e){return typeof e=="function"||!1}),m.isFinite=function(e){return isFinite(e)&amp;&amp;!isNaN(parseFloat(e))},m.isNaN=function(e){return m.isNumber(e)&amp;&amp;e!==+e},m.isBoolean=function(e){return e===!0||e===!1||f.call(e)==="[object Boolean]"},m.isNull=function(e){return e===null},m.isUndefined=function(e){return e===void 0},m.has=function(e,t){return e!=null&amp;&amp;l.call(e,t)},m.noConflict=function(){return e._=r,this},m.identity=function(e){return e},m.constant=function(e){return function(){return e}},m.noop=function(){},m.property=function(e){return function(t){return t==null?void 0:t[e]}},m.propertyOf=function(e){return e==null?function(){}:function(t){return e[t]}},m.matcher=m.matches=function(e){return e=m.extendOwn({},e),function(t){return m.isMatch(t,e)}},m.times=function(e,t,n){var r=Array(Math.max(0,e));t=g(t,n,1);for(var i=0;i&lt;e;i++)r[i]=t(i);return r},m.random=function(e,t){return t==null&amp;&amp;(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))},m.now=Date.now||function(){return(new Date).getTime()};var _={"&amp;":"&amp;","&lt;":"&lt;","&gt;":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},D=m.invert(_),P=function(e){var t=function(t){return e[t]},n="(?:"+m.keys(e).join("|")+")",r=RegExp(n),i=RegExp(n,"g");return function(e){return e=e==null?"":""+e,r.test(e)?e.replace(i,t):e}};m.escape=P(_),m.unescape=P(D),m.result=function(e,t,n){var r=e==null?void 0:e[t];return r===void 0&amp;&amp;(r=n),m.isFunction(r)?r.call(e):r};var H=0;m.uniqueId=function(e){var t=++H+"";return e?e+t:t},m.templateSettings={evaluate:/&lt;%([\s\S]+?)%&gt;/g,interpolate:/&lt;%=([\s\S]+?)%&gt;/g,escape:/&lt;%-([\s\S]+?)%&gt;/g};var B=/(.)^/,j={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},F=/\\|'|\r|\n|\u2028|\u2029/g,I=function(e){return"\\"+j[e]};m.template=function(e,t,n){!t&amp;&amp;n&amp;&amp;(t=n),t=m.defaults({},t,m.templateSettings);var r=RegExp([(t.escape||B).source,(t.interpolate||B).source,(t.evaluate||B).source].join("|")+"|$","g"),i=0,s="__p+='";e.replace(r,function(t,n,r,o,u){return s+=e.slice(i,u).replace(F,I),i=u+t.length,n?s+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'":r?s+="'+\n((__t=("+r+"))==null?'':__t)+\n'":o&amp;&amp;(s+="';\n"+o+"\n__p+='"),t}),s+="';\n",t.variable||(s="with(obj||{}){\n"+s+"}\n"),s="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+s+"return __p;\n";try{var o=new Function(t.variable||"obj","_",s)}catch(u){throw u.source=s,u}var a=function(e){return o.call(this,e,m)},f=t.variable||"obj";return a.source="function("+f+"){\n"+s+"}",a},m.chain=function(e){var t=m(e);return t._chain=!0,t};var q=function(e,t){return e._chain?m(t).chain():t};m.mixin=function(e){m.each(m.functions(e),function(t){var n=m[t]=e[t];m.prototype[t]=function(){var e=[this._wrapped];return u.apply(e,arguments),q(this,n.apply(m,e))}})},m.mixin(m),m.each(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var t=i[e];m.prototype[e]=function(){var n=this._wrapped;return t.apply(n,arguments),(e==="shift"||e==="splice")&amp;&amp;n.length===0&amp;&amp;delete n[0],q(this,n)}}),m.each(["concat","join","slice"],function(e){var t=i[e];m.prototype[e]=function(){return q(this,t.apply(this._wrapped,arguments))}}),m.prototype.value=function(){return this._wrapped},m.prototype.valueOf=m.prototype.toJSON=m.prototype.value,m.prototype.toString=function(){return""+this._wrapped}}).call(this)}),
define("lib/layouts/fullheight",["require","exports","module","lib/layout","lib/layouts/fullheight.css","lib/layouts/fullheight.tmpl"],function(e,t,n){var r=e("lib/layout"),i=n.exports=r.extend({css:e("lib/layouts/fullheight.css"),template:e("lib/layouts/fullheight.tmpl")})}),
define("lib/views/loading",["require","exports","module","lib/view","lib/views/loading.css"],function(e,t,n){var r=e("lib/view"),i=n.exports=r.extend({css:e("lib/views/loading.css"),className:"loadingThrobber",defaults:{size:"regular"},setup:function(e){this.$el.addClass(e.size)},template:function(){return""}})}),
define("lib/support",["require","exports","module","underscore","lib/helpers/client-environment-helper"],function(e,t,n){var r=e("underscore"),i=e("lib/helpers/client-environment-helper").browser,s,o,u=n.exports={};o=function(e){try{if(e.getItem){var t=Date.now();return e.setItem(t,t),e.removeItem(t),!0}}catch(n){}return!1},s={sessionStorage:function(){try{return typeof sessionStorage!="undefined"&amp;&amp;o(sessionStorage)}catch(e){return!1}},localStorage:function(){try{return typeof localStorage!="undefined"&amp;&amp;o(localStorage)}catch(e){return!1}},touch:function(){return s.pointerEvents()||s.touchEvents()},touchEvents:function(){return"ontouchstart"in window},pointerEvents:function(){return!!window.PointerEvent},orientationChange:function(){return"onorientationchange"in window},autoPlay:function(){return i.firefox},pushState:function(){return window.history&amp;&amp;window.history.pushState},nativeScroll:function(){var e=document.createElement("div"),t;return e.style.webkitOverflowScrolling="touch",document.body.appendChild(e),t=!!window.getComputedStyle(e).webkitOverflowScrolling,document.body.removeChild(e),t},typedArrays:function(){return!!window.hasOwnProperty("Uint8Array")}},r.each(s,function(e,t){u[t]=!!e()}),s=null}),
define("lib/view",["require","exports","module","$","underscore","lib/backbone","css","lib/event-bubble","lib/views/mixins/stateful","lib/template"],function(e,t,n){function c(e,t){var n=this;while(n&amp;&amp;!t.isPropagationStopped())n.trigger(e,t),n=n._parentView}function h(e,t){return i.defaults(t,e.prototype.defaults),e===l?t:h(e.__super__.constructor,t)}function p(e,t){var n,r;t=t||this.model,n=e?t.on:t.off,r=this.getObservedAttributes(t),r.forEach(function(e){n.call(t,"change:"+e,this.onModelChange,this)}.bind(this))}function d(e,t){var n;t=t||this.collection,n=e?"on":"off",t[n]("reset",this.onCollectionReset,this)[n]("add",this.onAdd,this)[n]("remove",this.onRemove,this)[n]("add remove reset",this.onCollectionChange,this)}var r=e("$"),i=e("underscore"),s=e("lib/backbone"),o=e("css"),u=e("lib/event-bubble"),a=e("lib/views/mixins/stateful"),f=e("lib/template"),l=n.exports=s.View.extend(a,{ModelClass:null,requiredAttributes:null,observedAttributes:null,css:null,template:r.noop,LoadingView:null,loadingViewArgs:null,loadingTemplate:function(){return""},element2selector:null,_element2selector_cache:null,defaults:null,bubbleEvents:null,disposed:!1,subviews:null,_subviews_keys:null,_lastEventId:null,constructorArguments:null,_whenInsertedDefer:null,_deferreds:null,initialize:function(e){var t;e=this.options=h(this.constructor,e||{}),this.constructorArguments=i.clone(e),e.resource_id&amp;&amp;this.ModelClass&amp;&amp;(this.model=t=this.getModel(e.resource_id,e.resource_type)),this._deferreds=[],this.subviews=[],this._subviews_keys=[],this.resetElementCache(),this._setupBubbleListeners(),this._setup.call(this,e),t&amp;&amp;this.model!==t&amp;&amp;t.release(),this.model?this.setupModelListeners():this.collection&amp;&amp;this.setupCollectionListeners()},_setup:function(){this.setup.apply(this,arguments)},setup:r.noop,_dispose:function(){if(this.disposed)return;this._teardown(),this.dispose(),this.disposed=!0;while(this._deferreds.length)typeof this._deferreds[0]=="number"?clearTimeout(this._deferreds.shift()):this._deferreds[0].reject("viewDisposed");this.off(),this.stopListening(),this.model&amp;&amp;(this.teardownModelListeners(),this.model.release()),this.collection&amp;&amp;(this.teardownCollectionListeners(),this.collection.release()),this.$el.remove(),delete this.el,delete this.$el,delete this.model,delete this.collection,this.constructorArguments=null},dispose:r.noop,_teardown:function(){this.disposeSubviews(),this._whenInsertedDefer&amp;&amp;(this._whenInsertedDefer.reject(),this._whenInsertedDefer=null),this.teardown(),this.resetElementCache()},teardown:r.noop,disposeSubviews:function(){while(this.subviews.length)this.subviews.pop()._dispose();this.subviews=[],this._subviews_keys=[]},getModel:function(e,t){var n,r,i,s,o;return s={id:e,resource_type:t},i=this.ModelClass.getClass?this.ModelClass.getClass(s):this.ModelClass,n=i.hashFn(s),r=i.instances.get(n),r?r.hold():(o={id:e},t&amp;&amp;(o.resource_type=t),r=new i(o)),r},setupModelListeners:function(e){p.call(this,!0,e)},teardownModelListeners:function(e){p.call(this,!1,e)},setupCollectionListeners:function(e){d.call(this,!0,e)},teardownCollectionListeners:function(e){d.call(this,!1,e)},_setupBubbleListeners:function(){var e,t,n;for(t in this.bubbleEvents)if(this.bubbleEvents.hasOwnProperty(t)){e=this.bubbleEvents[t],n=typeof e;if(n!=="string"&amp;&amp;n!=="function")throw"Incorrect bubble event handler: "+e+". Bubble event handlers must be either string and "+"represent a method of the view, or a function that will be bound to views context";this.on(t,n==="function"?e:this[e],this)}},getRequiredAttributes:function(e){var t=this.requiredAttributes;return e||(e=this.model),t&amp;&amp;!Array.isArray(t)&amp;&amp;(t=t[e.resource_type]),t||[]},getObservedAttributes:function(e){var t=this.observedAttributes,n;return e||(e=this.model),n=this.getRequiredAttributes(e),t&amp;&amp;!Array.isArray(t)&amp;&amp;(t=t[e.resource_type]),t?t.concat(n):n},addDeferred:function(e){return typeof e=="number"?this._deferreds.push(e):e.state()==="pending"&amp;&amp;(e.always(function(){var t=this._deferreds.indexOf(e);t&gt;-1&amp;&amp;this._deferreds.splice(t,1)}.bind(this)),this._deferreds.push(e)),e},addSubview:function(e,t){return e._parentView=this,this.subviews.push(e),this._subviews_keys.push(t),t&amp;&amp;(this.subviews[t]=e),e},removeSubview:function(e){for(var t=this.subviews.length;t--;)if(this.subviews[t]===e){this._subviews_keys[t]&amp;&amp;(e._parentView=null,delete this.subviews[this._subviews_keys[t]]),this.subviews.splice(t,1),this._subviews_keys.splice(t,1);return}},getAncestorSubviews:function(){var e=[];return this.subviews.forEach(function(t){e.push(t),e=e.concat(t.getAncestorSubviews())}),e},getElement:function(e){var t;return this._element2selector_cache[e]===t&amp;&amp;(this._element2selector_cache[e]=this.$(this.element2selector[e])),this._element2selector_cache[e]},resetElementCache:function(){this._element2selector_cache={}},render:function(){var e=this.hasData(),t=this.getTemplate(e),n=this.model||this.collection,r=this._getTemplateData(e||!n);return t&amp;&amp;(f.render(t.bind(this),r,this.el),f.subviews(this)),this.css&amp;&amp;o.insert(this.css),e?this.renderDecorate():(!t&amp;&amp;this.LoadingView&amp;&amp;this.el.appendChild(this.addSubview(new this.LoadingView(i.result(this,"loadingViewArgs")),"loading").render().el),this.fetchData(n)),this},renderDecorate:r.noop,rerender:function(){this.disposed||(this._teardown(),this.render())},getTemplate:function(e){return e||!this.LoadingView&amp;&amp;!this.loadingTemplate?this.template:this.LoadingView?null:this.loadingTemplate},_getTemplateData:function(e){var t={};return this.model?t=this.getModelData():this.collection&amp;&amp;(t=this.getCollectionData()),t._options=i.clone(this.options),e&amp;&amp;(t=this.getTemplateData(t)||t),t},getTemplateData:r.noop,getCollectionData:function(){return this.collection.toJSON()},getModelData:function(){return this.model.toJSON()},bubble:function(e,t){var n=new u(t);return c.call(this,e,n),n},getContextData:function(){return this.bubble("contextrequest").data},fetchData:function(e){return e.fetch({attrs:this.getObservedAttributes(e)})},hasData:function(e){return e=e||this.model||this.collection,e?e.hasDataForView(this):!0},removeLoader:function(){var e=this.subviews.loading;e&amp;&amp;(e._dispose(),this.removeSubview(e))},isEquivalentTo:function(e,t){var n=t||{};return this.constructor===e&amp;&amp;i.isEqual(h(e,n),this.constructorArguments)},whenInserted:function(e){var t=this._whenInsertedDefer,n,i;return t||(e=e||document.body,i=function(r){r.closest(e).length!==0?t.resolve():n=setTimeout(i,100)}.bind(null,this.$el),this._whenInsertedDefer=t=r.Deferred(),t.fail(function(){clearTimeout(n)}),i()),t},onModelChange:function(e,t,n,r){this._lastEventId!==r&amp;&amp;(this._lastEventId=r,this.rerender())},onCollectionReset:function(){this.rerender()},onCollectionChange:function(){this.disposed||this.trigger("update:collection",this.collection.size())},onAdd:r.noop,onRemove:r.noop})}),
define("lib/helpers/viewport-helper",["require","exports","module","$","underscore","lib/support"],function(e,t,n){function l(){return window.pageYOffset||document.compatMode==="CSS1Compat"&amp;&amp;document.documentElement.scrollTop||document.body&amp;&amp;document.body.scrollTop||0}var r=e("$"),i=e("underscore"),s=e("lib/support"),o=300,u,a,f=n.exports={hideAddressBar:function(e){var t=e&amp;&amp;e.layoutName==="listen",n=l();s.nativeScroll?i.delay(function(){a[0].scrollTop=0},100):!document.location.hash&amp;&amp;(n&lt;20||t)&amp;&amp;i.defer(function(){window.scrollTo(0,Number(n===1))})},enableNativeScroll:function(e){a=e,e.addClass("g-native-scroll"),setInterval(function(){u!==e[0].scrollTop&amp;&amp;(u=e[0].scrollTop,r(document).trigger("scroll"))},o)}}}),
define("views/app.css",["require","exports","module","css"],function(e,t,n,r){n.exports=r.stringToStyleElement(r.transform("#app{background:#f2f2f2}#app,#app&gt;#content,#app&gt;#content&gt;div{height:100%}.app__header{position:fixed;top:0;left:0;height:44px;width:100%}.app__miniPlayer{display:none;height:54px;position:fixed;bottom:0;left:0;width:100%}.app__displayMiniPlayer .app__miniPlayer{display:block}#content{padding-top:98px;opacity:1;-webkit-transition:padding .2s linear,opacity .5s linear;transition:padding .2s linear,opacity .5s linear}.app__hideUpsell #content{padding-top:44px}.app__upsell{position:absolute;padding-top:44px;width:100%}.app__displayMiniPlayer #content{padding-bottom:57px}.app__loading{-webkit-transition:opacity .5s linear;transition:opacity .5s linear;opacity:0;position:absolute;padding-top:44px;top:0;left:0;width:100%;height:100%;overflow:hidden}.show-throbber .app__loading{opacity:1}.show-throbber #content{opacity:0}#app.iPhone4Safari{height:416px}#app.iPhone5Safari{height:506px}")),data=null}),
define("views/app.tmpl",["vendor/handlebars-runtime","views/header/header","views/banner/upsell","views/play-controls/play-controls"],function(){return require("vendor/handlebars-runtime").template(function(e,t,n,r,i){this.compilerInfo=[4,"&gt;= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o=this.escapeExpression;return s+='&lt;div class="app__header g-z-index-header"&gt; '+o(n.$view.call(t,"views/header/header",{hash:{},data:i}))+'\n&lt;/div&gt; &lt;div class="app__upsell g-z-index-upsell"&gt; '+o(n.$view.call(t,"views/banner/upsell",{hash:{},data:i}))+'\n&lt;/div&gt; &lt;div class="app__loading g-z-index-hidden"&gt;&lt;/div&gt; &lt;main id="content" class="l-container" role="main"&gt;&lt;/main&gt; &lt;div class="app__miniPlayer g-z-index-header"&gt; '+o(n.$view.call(t,"views/play-controls/play-controls",{hash:{},data:i}))+"\n&lt;/div&gt; ",s})}),function(e,t){if(typeof define=="function"&amp;&amp;define.amd)
define("backbone",["underscore","$","exports"],function(n,r,i){e.Backbone=t(e,i,n,r)});else if(typeof exports!="undefined"){var n=require("underscore");t(e,exports,n)}else e.Backbone=t(e,{},e._,e.jQuery||e.Zepto||e.ender||e.$)}(this,function(e,t,n,r){var i=e.Backbone,s=[],o=s.push,u=s.slice,a=s.splice;t.VERSION="1.1.2",t.$=r,t.noConflict=function(){return e.Backbone=i,this},t.emulateHTTP=!1,t.emulateJSON=!1;var f=t.Events={on:function(e,t,n){if(!c(this,"on",e,[t,n])||!t)return this;this._events||(this._events={});var r=this._events[e]||(this._events[e]=[]);return r.push({callback:t,context:n,ctx:n||this}),this},once:function(e,t,r){if(!c(this,"once",e,[t,r])||!t)return this;var i=this,s=n.once(function(){i.off(e,s),t.apply(this,arguments)});return s._callback=t,this.on(e,s,r)},off:function(e,t,r){var i,s,o,u,a,f,l,h;if(!this._events||!c(this,"off",e,[t,r]))return this;if(!e&amp;&amp;!t&amp;&amp;!r)return this._events=void 0,this;u=e?[e]:n.keys(this._events);for(a=0,f=u.length;a&lt;f;a++){e=u[a];if(o=this._events[e]){this._events[e]=i=[];if(t||r)for(l=0,h=o.length;l&lt;h;l++)s=o[l],(t&amp;&amp;t!==s.callback&amp;&amp;t!==s.callback._callback||r&amp;&amp;r!==s.context)&amp;&amp;i.push(s);i.length||delete this._events[e]}}return this},trigger:function(e){if(!this._events)return this;var t=u.call(arguments,1);if(!c(this,"trigger",e,t))return this;var n=this._events[e],r=this._events.all;return n&amp;&amp;h(n,t),r&amp;&amp;h(r,arguments),this},stopListening:function(e,t,r){var i=this._listeningTo;if(!i)return this;var s=!t&amp;&amp;!r;!r&amp;&amp;typeof t=="object"&amp;&amp;(r=this),e&amp;&amp;((i={})[e._listenId]=e);for(var o in i)e=i[o],e.off(t,r,this),(s||n.isEmpty(e._events))&amp;&amp;delete this._listeningTo[o];return this}},l=/\s+/,c=function(e,t,n,r){if(!n)return!0;if(typeof n=="object"){for(var i in n)e[t].apply(e,[i,n[i]].concat(r));return!1}if(l.test(n)){var s=n.split(l);for(var o=0,u=s.length;o&lt;u;o++)e[t].apply(e,[s[o]].concat(r));return!1}return!0},h=function(e,t){var n,r=-1,i=e.length,s=t[0],o=t[1],u=t[2];switch(t.length){case 0:while(++r&lt;i)(n=e[r]).callback.call(n.ctx);return;case 1:while(++r&lt;i)(n=e[r]).callback.call(n.ctx,s);return;case 2:while(++r&lt;i)(n=e[r]).callback.call(n.ctx,s,o);return;case 3:while(++r&lt;i)(n=e[r]).callback.call(n.ctx,s,o,u);return;default:while(++r&lt;i)(n=e[r]).callback.apply(n.ctx,t);return}},p={listenTo:"on",listenToOnce:"once"};n.each(p,function(e,t){f[t]=function(t,r,i){var s=this._listeningTo||(this._listeningTo={}),o=t._listenId||(t._listenId=n.uniqueId("l"));return s[o]=t,!i&amp;&amp;typeof r=="object"&amp;&amp;(i=this),t[e](r,i,this),this}}),f.bind=f.on,f.unbind=f.off,n.extend(t,f);var d=t.Model=function(e,t){var r=e||{};t||(t={}),this.cid=n.uniqueId("c"),this.attributes={},t.collection&amp;&amp;(this.collection=t.collection),t.parse&amp;&amp;(r=this.parse(r,t)||{}),r=n.defaults({},r,n.result(this,"defaults")),this.set(r,t),this.changed={},this.initialize.apply(this,arguments)};n.extend(d.prototype,f,{changed:null,validationError:null,idAttribute:"id",initialize:function(){},toJSON:function(e){return n.clone(this.attributes)},sync:function(){return t.sync.apply(this,arguments)},get:function(e){return this.attributes[e]},escape:function(e){return n.escape(this.get(e))},has:function(e){return this.get(e)!=null},set:function(e,t,r){var i,s,o,u,a,f,l,c;if(e==null)return this;typeof e=="object"?(s=e,r=t):(s={})[e]=t,r||(r={});if(!this._validate(s,r))return!1;o=r.unset,a=r.silent,u=[],f=this._changing,this._changing=!0,f||(this._previousAttributes=n.clone(this.attributes),this.changed={}),c=this.attributes,l=this._previousAttributes,this.idAttribute in s&amp;&amp;(this.id=s[this.idAttribute]);for(i in s)t=s[i],n.isEqual(c[i],t)||u.push(i),n.isEqual(l[i],t)?delete this.changed[i]:this.changed[i]=t,o?delete c[i]:c[i]=t;if(!a){u.length&amp;&amp;(this._pending=r);for(var h=0,p=u.length;h&lt;p;h++)this.trigger("change:"+u[h],this,c[u[h]],r)}if(f)return this;if(!a)while(this._pending)r=this._pending,this._pending=!1,this.trigger("change",this,r);return this._pending=!1,this._changing=!1,this},unset:function(e,t){return this.set(e,void 0,n.extend({},t,{unset:!0}))},clear:function(e){var t={};for(var r in this.attributes)t[r]=void 0;return this.set(t,n.extend({},e,{unset:!0}))},hasChanged:function(e){return e==null?!n.isEmpty(this.changed):n.has(this.changed,e)},changedAttributes:function(e){if(!e)return this.hasChanged()?n.clone(this.changed):!1;var t,r=!1,i=this._changing?this._previousAttributes:this.attributes;for(var s in e){if(n.isEqual(i[s],t=e[s]))continue;(r||(r={}))[s]=t}return r},previous:function(e){return e==null||!this._previousAttributes?null:this._previousAttributes[e]},previousAttributes:function(){return n.clone(this._previousAttributes)},fetch:function(e){e=e?n.clone(e):{},e.parse===void 0&amp;&amp;(e.parse=!0);var t=this,r=e.success;return e.success=function(n){t.lastFetchTime=Date.now();if(!t.set(t.parse(n,e),e))return!1;r&amp;&amp;r(t,n,e),t.trigger("sync",t,n,e)},I(this,e),this.sync("read",this,e)},save:function(e,t,r){var i,s,o,u=this.attributes;e==null||typeof e=="object"?(i=e,r=t):(i={})[e]=t,r=n.extend({validate:!0},r);if(i&amp;&amp;!r.wait){if(!this.set(i,r))return!1}else if(!this._validate(i,r))return!1;i&amp;&amp;r.wait&amp;&amp;(this.attributes=n.extend({},u,i)),r.parse===void 0&amp;&amp;(r.parse=!0);var a=this,f=r.success;return r.success=function(e){a.attributes=u;var t=a.parse(e,r);r.wait&amp;&amp;(t=n.extend(i||{},t));if(n.isObject(t)&amp;&amp;!a.set(t,r))return!1;f&amp;&amp;f(a,e,r),a.trigger("sync",a,e,r)},I(this,r),s=this.isNew()?"create":r.patch?"patch":"update",s==="patch"&amp;&amp;(r.attrs=i),o=this.sync(s,this,r),i&amp;&amp;r.wait&amp;&amp;(this.attributes=u),o},destroy:function(e){e=e?n.clone(e):{};var t=this,r=e.success,i=function(){t.trigger("destroy",t,t.collection,e)};e.success=function(n){(e.wait||t.isNew())&amp;&amp;i(),r&amp;&amp;r(t,n,e),t.isNew()||t.trigger("sync",t,n,e)};if(this.isNew())return e.success(),!1;I(this,e);var s=this.sync("delete",this,e);return e.wait||i(),s},url:function(){var e=n.result(this,"urlRoot")||n.result(this.collection,"url")||F();return this.isNew()?e:e.replace(/([^\/])$/,"$1/")+encodeURIComponent(this.id)},parse:function(e,t){return e},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(e){return this._validate({},n.extend(e||{},{validate:!0}))},_validate:function(e,t){if(!t.validate||!this.validate)return!0;e=n.extend({},this.attributes,e);var r=this.validationError=this.validate(e,t)||null;return r?(this.trigger("invalid",this,r,n.extend(t,{validationError:r})),!1):!0}});var v=["keys","values","pairs","invert","pick","omit"];n.each(v,function(e){d.prototype[e]=function(){var t=u.call(arguments);return t.unshift(this.attributes),n[e].apply(n,t)}});var m=t.Collection=function(e,t){t||(t={}),t.model&amp;&amp;(this.model=t.model),t.comparator!==void 0&amp;&amp;(this.comparator=t.comparator),this._reset(),this.initialize.apply(this,arguments),e&amp;&amp;this.reset(e,n.extend({silent:!0},t))},g={add:!0,remove:!0,merge:!0},y={add:!0,remove:!1};n.extend(m.prototype,f,{model:d,initialize:function(){},toJSON:function(e){return this.map(function(t){return t.toJSON(e)})},sync:function(){return t.sync.apply(this,arguments)},add:function(e,t){return this.set(e,n.extend({merge:!1},t,y))},remove:function(e,t){var r=!n.isArray(e);e=r?[e]:n.clone(e),t||(t={});var i,s,o,u;for(i=0,s=e.length;i&lt;s;i++){u=e[i]=this.get(e[i]);if(!u)continue;delete this._byId[u.id],delete this._byId[u.cid],o=this.indexOf(u),this.models.splice(o,1),this.length--,t.silent||(t.index=o,u.trigger("remove",u,this,t)),this._removeReference(u,t)}return r?e[0]:e},set:function(e,t){t=n.defaults({},t,g),t.parse&amp;&amp;(e=this.parse(e,t));var r=!n.isArray(e);e=r?e?[e]:[]:n.clone(e);var i,s,o,u,a,f,l,c=t.at,h=this.model,p=this.comparator&amp;&amp;c==null&amp;&amp;t.sort!==!1,v=n.isString(this.comparator)?this.comparator:null,m=[],y=[],b={},w=t.add,E=t.merge,S=t.remove,x=!p&amp;&amp;w&amp;&amp;S?[]:!1;for(i=0,s=e.length;i&lt;s;i++){a=e[i]||{},a instanceof d?o=u=a:o=a[h.prototype.idAttribute||"id"];if(f=this.get(o))S&amp;&amp;(b[f.cid]=!0),E&amp;&amp;(a=a===u?u.attributes:a,t.parse&amp;&amp;(a=f.parse(a,t)),f.set(a,t),p&amp;&amp;!l&amp;&amp;f.hasChanged(v)&amp;&amp;(l=!0)),e[i]=f;else if(w){u=e[i]=this._prepareModel(a,t);if(!u)continue;m.push(u),this._addReference(u,t)}u=f||u,x&amp;&amp;(u.isNew()||!b[u.id])&amp;&amp;x.push(u),b[u.id]=!0}if(S){for(i=0,s=this.length;i&lt;s;++i)b[(u=this.models[i]).cid]||y.push(u);y.length&amp;&amp;this.remove(y,t)}if(m.length||x&amp;&amp;x.length){p&amp;&amp;(l=!0),this.length+=m.length;if(c!=null)for(i=0,s=m.length;i&lt;s;i++)this.models.splice(c+i,0,m[i]);else{x&amp;&amp;(this.models.length=0);var T=x||m;for(i=0,s=T.length;i&lt;s;i++)this.models.push(T[i])}}l&amp;&amp;this.sort({silent:!0});if(!t.silent){for(i=0,s=m.length;i&lt;s;i++)(u=m[i]).trigger("add",u,this,t);(l||x&amp;&amp;x.length)&amp;&amp;this.trigger("sort",this,t)}return r?e[0]:e},reset:function(e,t){t||(t={});for(var r=0,i=this.models.length;r&lt;i;r++)this._removeReference(this.models[r],t);return t.previousModels=this.models,this._reset(),e=this.add(e,n.extend({silent:!0},t)),t.silent||this.trigger("reset",this,t),e},push:function(e,t){return this.add(e,n.extend({at:this.length},t))},pop:function(e){var t=this.at(this.length-1);return this.remove(t,e),t},unshift:function(e,t){return this.add(e,n.extend({at:0},t))},shift:function(e){var t=this.at(0);return this.remove(t,e),t},slice:function(){return u.apply(this.models,arguments)},get:function(e){return e==null?void 0:this._byId[e]||this._byId[e.id]||this._byId[e.cid]},at:function(e){return this.models[e]},where:function(e,t){return n.isEmpty(e)?t?void 0:[]:this[t?"find":"filter"](function(t){for(var n in e)if(e[n]!==t.get(n))return!1;return!0})},findWhere:function(e){return this.where(e,!0)},sort:function(e){if(!this.comparator)throw new Error("Cannot sort a set without a comparator");return e||(e={}),n.isString(this.comparator)||this.comparator.length===1?this.models=this.sortBy(this.comparator,this):this.models.sort(n.bind(this.comparator,this)),e.silent||this.trigger("sort",this,e),this},pluck:function(e){return n.invoke(this.models,"get",e)},fetch:function(e){e=e?n.clone(e):{},e.parse===void 0&amp;&amp;(e.parse=!0);var t=e.success,r=this;return e.success=function(n){r.lastFetchTime=Date.now();var i=e.reset?"reset":"set";r[i](n,e),t&amp;&amp;t(r,n,e),r.trigger("sync",r,n,e)},I(this,e),this.sync("read",this,e)},create:function(e,t){t=t?n.clone(t):{};if(!(e=this._prepareModel(e,t)))return!1;t.wait||this.add(e,t);var r=this,i=t.success;return t.success=function(e,n){t.wait&amp;&amp;r.add(e,t),i&amp;&amp;i(e,n,t)},e.save(null,t),e},parse:function(e,t){return e},clone:function(){return new this.constructor(this.models)},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(e,t){if(e instanceof d)return e;t=t?n.clone(t):{},t.collection=this;var r=new this.model(e,t);return r.validationError?(this.trigger("invalid",this,r.validationError,t),!1):r},_addReference:function(e,t){this._byId[e.cid]=e,e.id!=null&amp;&amp;(this._byId[e.id]=e),e.collection||(e.collection=this),e.on("all",this._onModelEvent,this)},_removeReference:function(e,t){this===e.collection&amp;&amp;delete e.collection,e.off("all",this._onModelEvent,this)},_onModelEvent:function(e,t,n,r){if((e==="add"||e==="remove")&amp;&amp;n!==this)return;e==="destroy"&amp;&amp;this.remove(t,r),t&amp;&amp;e==="change:"+t.idAttribute&amp;&amp;(delete this._byId[t.previous(t.idAttribute)],t.id!=null&amp;&amp;(this._byId[t.id]=t)),this.trigger.apply(this,arguments)}});var b=["forEach","each","map","collect","reduce","foldl","inject","reduceRight","foldr","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","toArray","size","first","head","take","initial","rest","tail","drop","last","without","difference","indexOf","shuffle","lastIndexOf","isEmpty","chain","sample"];n.each(b,function(e){m.prototype[e]=function(){var t=u.call(arguments);return t.unshift(this.models),n[e].apply(n,t)}});var w=["groupBy","countBy","sortBy","indexBy"];n.each(w,function(e){m.prototype[e]=function(t,r){var i=n.isFunction(t)?t:function(e){return e.get(t)};return n[e](this.models,i,r)}});var E=t.View=function(e){this.cid=n.uniqueId("view"),e||(e={}),n.extend(this,n.pick(e,x)),this._ensureElement(),this.initialize.apply(this,arguments),this.delegateEvents()},S=/^(\S+)\s*(.*)$/,x=["model","collection","el","id","attributes","className","tagName","events"];n.extend(E.prototype,f,{tagName:"div",$:function(e){return this.$el.find(e)},initialize:function(){},render:function(){return this},remove:function(){return this.$el.remove(),this.stopListening(),this},setElement:function(e,n){return this.$el&amp;&amp;this.undelegateEvents(),this.$el=e instanceof t.$?e:t.$(e),this.el=this.$el[0],n!==!1&amp;&amp;this.delegateEvents(),this},delegateEvents:function(e){if(!e&amp;&amp;!(e=n.result(this,"events")))return this;this.undelegateEvents();for(var t in e){var r=e[t];n.isFunction(r)||(r=this[e[t]]);if(!r)continue;var i=t.match(S),s=i[1],o=i[2];r=n.bind(r,this),s+=".delegateEvents"+this.cid,o===""?this.$el.on(s,r):this.$el.on(s,o,r)}return this},undelegateEvents:function(){return this.$el.off(".delegateEvents"+this.cid),this},_ensureElement:function(){if(!this.el){var e=n.extend({},n.result(this,"attributes"));this.id&amp;&amp;(e.id=n.result(this,"id")),this.className&amp;&amp;(e["class"]=n.result(this,"className"));var r=t.$("&lt;"+n.result(this,"tagName")+"&gt;").attr(e);this.setElement(r,!1)}else this.setElement(n.result(this,"el"),!1)}}),t.sync=function(e,r,i){var s=N[e];n.defaults(i||(i={}),{emulateHTTP:t.emulateHTTP,emulateJSON:t.emulateJSON});var o={type:s,dataType:"json"};i.url||(o.url=n.result(r,"url")||F()),i.data==null&amp;&amp;r&amp;&amp;(e==="create"||e==="update"||e==="patch")&amp;&amp;(o.contentType="application/json",o.data=JSON.stringify(i.attrs||r.toJSON(i))),i.emulateJSON&amp;&amp;(o.contentType="application/x-www-form-urlencoded",o.data=o.data?{model:o.data}:{});if(i.emulateHTTP&amp;&amp;(s==="PUT"||s==="DELETE"||s==="PATCH")){o.type="POST",i.emulateJSON&amp;&amp;(o.data._method=s);var u=i.beforeSend;i.beforeSend=function(e){e.setRequestHeader("X-HTTP-Method-Override",s);if(u)return u.apply(this,arguments)}}o.type!=="GET"&amp;&amp;!i.emulateJSON&amp;&amp;(o.processData=!1),o.type==="PATCH"&amp;&amp;T&amp;&amp;(o.xhr=function(){return new ActiveXObject("Microsoft.XMLHTTP")});var a=i.xhr=t.ajax(n.extend(o,i));return r.trigger("request",r,a,i),a};var T=typeof window!="undefined"&amp;&amp;!!window.ActiveXObject&amp;&amp;(!window.XMLHttpRequest||!(new XMLHttpRequest).dispatchEvent),N={create:"POST",update:"PUT",patch:"PATCH","delete":"DELETE",read:"GET"};t.ajax=function(){return t.$.ajax.apply(t.$,arguments)};var C=t.Router=function(e){e||(e={}),e.routes&amp;&amp;(this.routes=e.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},k=/\((.*?)\)/g,L=/(\(\?)?:\w+/g,A=/\*\w+/g,O=/[\-{}\[\]+?.,\\\^$|#\s]/g;n.extend(C.prototype,f,{initialize:function(){},route:function(e,r,i){n.isRegExp(e)||(e=this._routeToRegExp(e)),n.isFunction(r)&amp;&amp;(i=r,r=""),i||(i=this[r]);var s=this;return t.history.route(e,function(n){var o=s._extractParameters(e,n);s.execute(i,o),s.trigger.apply(s,["route:"+r].concat(o)),s.trigger("route",r,o),t.history.trigger("route",s,r,o)}),this},execute:function(e,t){e&amp;&amp;e.apply(this,t)},navigate:function(e,n){return t.history.navigate(e,n),this},_bindRoutes:function(){if(!this.routes)return;this.routes=n.result(this,"routes");var e,t=n.keys(this.routes);while((e=t.pop())!=null)this.route(e,this.routes[e])},_routeToRegExp:function(e){return e=e.replace(O,"\\$&amp;").replace(k,"(?:$1)?").replace(L,function(e,t){return t?e:"([^/?]+)"}).replace(A,"([^?]*?)"),new RegExp("^"+e+"(?:\\?([\\s\\S]*))?$")},_extractParameters:function(e,t){var r=e.exec(t).slice(1);return n.map(r,function(e,t){return t===r.length-1?e||null:e?decodeURIComponent(e):null})}});var M=t.History=function(){this.handlers=[],n.bindAll(this,"checkUrl"),typeof window!="undefined"&amp;&amp;(this.location=window.location,this.history=window.history)},_=/^[#\/]|\s+$/g,D=/^\/+|\/+$/g,P=/msie [\w.]+/,H=/\/$/,B=/#.*$/;M.started=!1,n.extend(M.prototype,f,{interval:50,atRoot:function(){return this.location.pathname.replace(/[^\/]$/,"$&amp;/")===this.root},getHash:function(e){var t=(e||this).location.href.match(/#(.*)$/);return t?t[1]:""},getFragment:function(e,t){if(e==null)if(this._hasPushState||!this._wantsHashChange||t){e=decodeURI(this.location.pathname+this.location.search);var n=this.root.replace(H,"");e.indexOf(n)||(e=e.slice(n.length))}else e=this.getHash();return e.replace(_,"")},start:function(e){if(M.started)throw new Error("Backbone.history has already been started");M.started=!0,this.options=n.extend({root:"/"},this.options,e),this.root=this.options.root,this._wantsHashChange=this.options.hashChange!==!1,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.options.pushState&amp;&amp;this.history&amp;&amp;this.history.pushState);var r=this.getFragment(),i=document.documentMode,s=P.exec(navigator.userAgent.toLowerCase())&amp;&amp;(!i||i&lt;=7);this.root=("/"+this.root+"/").replace(D,"/");if(s&amp;&amp;this._wantsHashChange){var o=t.$('&lt;iframe src="javascript:0" tabindex="-1"&gt;');this.iframe=o.hide().appendTo("body")[0].contentWindow,this.navigate(r)}this._hasPushState?t.$(window).on("popstate",this.checkUrl):this._wantsHashChange&amp;&amp;"onhashchange"in window&amp;&amp;!s?t.$(window).on("hashchange",this.checkUrl):this._wantsHashChange&amp;&amp;(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this.fragment=r;var u=this.location;if(this._wantsHashChange&amp;&amp;this._wantsPushState){if(!this._hasPushState&amp;&amp;!this.atRoot())return this.fragment=this.getFragment(null,!0),this.location.replace(this.root+"#"+this.fragment),!0;this._hasPushState&amp;&amp;this.atRoot()&amp;&amp;u.hash&amp;&amp;(this.fragment=this.getHash().replace(_,""),this.history.replaceState({},document.title,this.root+this.fragment))}if(!this.options.silent)return this.loadUrl()},stop:function(){t.$(window).off("popstate",this.checkUrl).off("hashchange",this.checkUrl),this._checkUrlInterval&amp;&amp;clearInterval(this._checkUrlInterval),M.started=!1},route:function(e,t){this.handlers.unshift({route:e,callback:t})},checkUrl:function(e){var t=this.getFragment();t===this.fragment&amp;&amp;this.iframe&amp;&amp;(t=this.getFragment(this.getHash(this.iframe)));if(t===this.fragment)return!1;this.iframe&amp;&amp;this.navigate(t),this.loadUrl()},loadUrl:function(e){return e=this.fragment=this.getFragment(e),n.any(this.handlers,function(t){if(t.route.test(e))return t.callback(e),!0})},navigate:function(e,t){if(!M.started)return!1;if(!t||t===!0)t={trigger:!!t};var n=this.root+(e=this.getFragment(e||""));e=e.replace(B,"");if(this.fragment===e)return;this.fragment=e,e===""&amp;&amp;n!=="/"&amp;&amp;(n=n.slice(0,-1));if(this._hasPushState)this.history[t.replace?"replaceState":"pushState"]({},document.title,n);else{if(!this._wantsHashChange)return this.location.assign(n);this._updateHash(this.location,e,t.replace),this.iframe&amp;&amp;e!==this.getFragment(this.getHash(this.iframe))&amp;&amp;(t.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,e,t.replace))}if(t.trigger)return this.loadUrl(e)},_updateHash:function(e,t,n){if(n){var r=e.href.replace(/(javascript:|#).*$/,"");e.replace(r+"#"+t)}else e.hash="#"+t}}),t.history=new M;var j=function(e,t){var r=this,i;e&amp;&amp;n.has(e,"constructor")?i=e.constructor:i=function(){return r.apply(this,arguments)},n.extend(i,r,t);var s=function(){this.constructor=i};return s.prototype=r.prototype,i.prototype=new s,e&amp;&amp;n.extend(i.prototype,e),i.__super__=r.prototype,i};d.extend=m.extend=C.extend=E.extend=M.extend=j;var F=function(){throw new Error('A "url" property or function must be specified')},I=function(e,t){var n=t.error;t.error=function(r){n&amp;&amp;n(e,r,t),e.trigger("error",e,r,t)}};return t}),
define("lib/mixin",["require","exports","module","underscore"],function(e,t,n){function o(e,t){this.applyTo=function(n){e.applyTo(n,t)}}var r=e("underscore"),i=["before","after","around","requires","override","defaults","applyTo"],s=n.exports=Class.extend({initialize:function(e){this.properties=e},applyTo:function(e){var t=this.properties;this.requires(e,t.requires),this.extend(e,t),this.defaults(e,t.defaults),this.override(e,t.override),this.before(e,t.before),this.after(e,t.after),this.around(e,t.around),t.applyTo&amp;&amp;t.applyTo.apply(this,arguments)},before:function(e,t){r.each(t,function(t,n){var i=e[n];e[n]=function(){return t.apply(this,arguments),i.apply(this,arguments)}})},after:function(e,t){r.each(t,function(t,n){var i=e[n];e[n]=function(){var e=i.apply(this,arguments);return t.apply(this,arguments),e}})},around:function(e,t){r.each(t,function(t,n){var i=e[n],s=Array.prototype.slice;e[n]=function(){var e=s.apply(arguments);return e.unshift(i.bind(this)),t.apply(this,e)}})},override:function(e,t){r.extend(e,t)},defaults:function(e,t){r.each(t,function(t,n){e.hasOwnProperty(n)||(e[n]=t)})},extend:function(e,t){r.each(t,function(t,n){i.indexOf(n)&lt;0&amp;&amp;(e[n]=t)})},requires:function(e,t){},withOptions:function(e){return new o(this,e)}});o.prototype=s.prototype}),
define("lib/mixins/observing",["require","exports","module","underscore","lib/backbone","lib/mixin"],function(e,t,n){var r=e("underscore"),i=e("lib/backbone"),s=e("lib/mixin"),o=n.exports=new s(r.extend({around:{set:function(e,t,n,r){var i=r&amp;&amp;r.silent,s,o;return i||(o=this.get(t)),s=e(t,n,r),!i&amp;&amp;o!==n&amp;&amp;this.trigger(t,{prev:o,current:n}),s},unset:function(e,t,n){var r=n&amp;&amp;n.silent,i,s;return r||(s=this.get(t)),i=e(t,n),!r&amp;&amp;s!==undefined&amp;&amp;this.trigger(t,{prev:s,current:undefined}),i}},before:{reset:function(e){(!e||!e.silent)&amp;&amp;this.each(function(e,t){this.trigger(t,{prev:this.get(t),current:undefined})},this)}}},i.Events))}),
define("lib/store",["require","exports","module","underscore"],function(e,t,n){var r=e("underscore"),i={};["each","forEach","map","find","detect","filter","select","reduce","reject","every","all","any","some","include","contains"].forEach(function(e){i[e]=function(){var t=[this._store];return t.push.apply(t,arguments),r[e].apply(r,t)}});var s=n.exports=Class.extend([i,{initialize:function(e){this._store={},this.length=0,this._final=!1,this.maxLength=e&amp;&amp;e.maxLength||!1,this.maxLength&amp;&amp;(this._keys=[])},maxLength:0,get:function(e){return this._store[e]},set:function(e,t){return this.has(e)?this.maxLength&amp;&amp;this._keys.splice(this._keys.indexOf(e),1):(++this.length,this.maxLength&amp;&amp;this.length&gt;this.maxLength&amp;&amp;this.unset(this._keys[0])),this.maxLength&amp;&amp;this._keys.push(e),this._store[e]=t,this},unset:function(e){var t;return this.has(e)&amp;&amp;(--this.length,this._final?this._store[e]=t:(delete this._store[e],this.maxLength&amp;&amp;this._keys.splice(this._keys.indexOf(e),1))),this},reset:function(){return this._store={},this.maxLength&amp;&amp;(this._keys=[]),this._final=!1,this.length=0,this},has:function(e){return this._store.hasOwnProperty(e)},keys:function(){return Object.keys(this._store)},finalize:function(){this._final=!0}}])}),
define("lib/mixins/persistent",["require","exports","module","underscore","lib/mixin","lib/support"],function(e,t,n){function v(e){var t,n,i,s,o,u,l;o={dontPersist:!0};if(!e.key){r.each(r.values(p.local).concat(r.values(p.session)),function(e){e.reset(o)});return}a.lastIndex=0,t=a.exec(e.key),t&amp;&amp;(i=t[1],n=t[2],i&amp;&amp;n&amp;&amp;(s=p[i][n],s&amp;&amp;(l=f(s),u=Object.keys(l),r.each(l,function(e,t){s.set(t,e,o)}),r.difference(s.keys(),u).forEach(function(e){s.unset(e,o)}))))}var r=e("underscore"),i=e("lib/mixin"),s=e("lib/support"),o="MW",u="::",a=new RegExp("^"+o+u+"(\\S+?)"+u+"(\\S+)"),f,l,c,h,p={local:{},session:{}},d=n.exports=new i({storage:null,keyName:null,type:null,namespace:null,around:{initialize:function(e,t,n){n=n||"local";if(p[n][t])return p[n][t];p[n][t]=this,e(),this.type=n,this.namespace=t,this.storage=c(n,t),this.keyName=l(n,t),this._store=f(this),this.length=r.keys(this._store).length}},after:{set:function(e,t,n){var r=!n||!n.dontPersist,i;r&amp;&amp;(i=h(this),i||this.unset(e))},unset:function(e,t){(!t||!t.dontPersist)&amp;&amp;h(this)},reset:function(e){(!e||!e.dontPersist)&amp;&amp;h(this)}},dispose:function(){this.storage.removeItem(this.keyName),this.reset({dontPersist:!0}),delete p[this.type][this.namespace]},write:function(){h(this)}});l=function(e,t){return[o,e,t].join(u)},h=function(e){var t=e.storage;if(t)try{return t.setItem(e.keyName,JSON.stringify(e._store)),!0}catch(n){return!1}},c=function(e){var t;return e==="local"&amp;&amp;s.localStorage?t=window.localStorage:e==="session"&amp;&amp;s.sessionStorage&amp;&amp;(t=window.sessionStorage),t},f=function(e){var t={},n=e.storage;return n&amp;&amp;(t=JSON.parse(n.getItem(e.keyName)||"{}")),t},window.addEventListener("storage",v,!1)}),
define("lib/collection",["require","exports","module","underscore","$","lib/backbone","lib/single","lib/url"],function(e,t,n){var r,i=e("underscore"),s=e("$"),o=e("lib/backbone"),u=e("lib/single"),a=e("lib/url"),f={},l,c;r=o.Collection.extend({next_href:null,lastFetchTime:null,model:f,defaults:{offset:0,limit:10,secret_token:null},initialize:function(e,t){this.options=c(this.constructor,t||{}),this.setup(t)},setup:s.noop,_prepareModel:function(e){var t=e instanceof o.Model;return e=o.Collection.prototype._prepareModel.apply(this,arguments),e&amp;&amp;e.hold(this._usageCount()-(t?0:1)),e},_removeReference:function(e){return e.release(this._usageCount()),o.Collection.prototype._removeReference.apply(this,arguments)},fetch:function(e){var t=e&amp;&amp;e.url||i.result(this,"url");return t?this._requests&amp;&amp;this._requests[t]||o.Collection.prototype.fetch.call(this,e).done(function(e){this.next_href=e.next_href||!1}.bind(this)):s.Deferred().done(e&amp;&amp;e.success).resolve({})},bulkFetch:function(e){var t=arguments[1],n=arguments[2],r,i;if(!t){this._requests=this._requests||{};if(this._requests.bulk)return this._requests.bulk;this._requests.bulk=t=s.Deferred(),t.always(function(){delete this._requests.bulk}.bind(this)),n=this.length,r=this.options.limit,this.next_href||(this.options.limit=e-this.length),t.always(function(){this.options.limit=r,l.call(this,{limit:r})}.bind(this))}return this.length&lt;e&amp;&amp;this.url()?(this.lastFetchTime?i={add:!0}:i={},i.silent=!0,l.call(this,{limit:e-this.length}),this.fetch(i).done(function(){this.bulkFetch(e,t,n)}.bind(this)).fail(t.reject)):(n?this.rest(n).forEach(function(e){this.trigger("add",e,this)},this):this.trigger("reset",this,{}),t.resolve()),t},url:function(){if(this.next_href!==null)return this.next_href;var e=a.parse(i.result(this,"baseUrl"));return i.extend(e.query,{limit:this.options.limit,offset:Math.max(this.options.offset,this.length),linked_partitioning:1}),this.options.secret_token&amp;&amp;(e.query.secret_token=this.options.secret_token),a.stringify(e)},parse:function(e){return e.collection},empty:function(){this.next_href=null,this.lastFetchTime=null,this.options.offset&amp;&amp;(this.options.offset=0),this.reset(null,{silent:!0})},hasDataForView:function(){return this.isPopulated()},isPopulated:function(){return!!this.lastFetchTime||!!this.length},isPrivate:function(){return!!this.options.secret_token},isFullyPopulated:function(){return this.next_href===!1},setLimit:function(e){this.options.limit=e,this.next_href&amp;&amp;(this.next_href=a.modify(this.next_href,{query:{limit:e}}))},indexOfEquivalentModel:function(e,t){var n=-1;return(t||this.models).some(function(t,r){if(e.equivalentTo(t))return n=r,!0}),n},compareModels:function(e,t){return e===t||e.equivalentTo(t)}}),n.exports=u.applyTo(r,{hashFn:function(e,t){return t&amp;&amp;t.resource_id||null},onHold:function(e,t,n){e.length&amp;&amp;e.at(0).hold&amp;&amp;e.invoke("hold",n)},onRelease:function(e,t,n){e.length&amp;&amp;e.at(0).release&amp;&amp;e.invoke("release",n)}}),c=function(e,t){return i.defaults(t,e.prototype.defaults),e===r?t:c(e.__super__.constructor,t)},l=function(e){if(this.next_href){var t=a.parse(this.next_href);i.extend(t.query,e),this.next_href=a.stringify(t)}}}),
define("lib/futures",["require","exports","module","$","underscore"],function(e,t,n){var r,i=e("$"),s=e("underscore");n.exports=r={defer:function(e){var t=i.Deferred(),n=t.promise();return s.isFunction(e)?(e.call(n,t.resolve,t.reject),n):(s.isObject(e)&amp;&amp;s.isFunction(e.then)&amp;&amp;e.then(t.resolve,t.reject),t)},settled:function(e){return i.whenAll(e)},all:function(e){return i.when.apply(i,e)},resolve:function(e){return i.Deferred().resolve(e)},reject:function(e){return i.Deferred().reject(e)},promisify:function(e){return function(){var t=i.Deferred();return e.apply(null,s.toArray(arguments).concat(function(e,n){e?t.reject(e):t.resolve(n)})),t.promise()}},call:function(e){var t=i.Deferred(),n=s.tail(arguments,1);try{t.resolve(e.apply(null,n))}catch(r){t.reject(r)}return t.promise()},mapEither:function(e,t){return t.then(e,e)},sequential:function(e){return e.reduce(function(e,t){function n(){return t().then(r.reject)}return e.then(t,n)},i.Deferred().resolve())},delay:function(e){var t=r.defer();return window.setTimeout(t.resolve.bind(t),e),t}}}),
define("lib/mixins/audio-source",["require","exports","module","lib/mixin"],function(e,t,n){var r=e("lib/mixin"),i=n.exports=new r({requires:["getSourceInfo","getSounds"],defaults:{isAudioSource:!0}})}),
define("models/sound",["require","exports","module","underscore","models/audible-interface","lib/mobi-audio","lib/model","lib/url","lib/mixins/urn"],function(e,t,n){var r=e("underscore"),i=e("models/audible-interface"),s=e("lib/mobi-audio"),o=e("lib/model"),u=e("lib/url"),a=e("lib/mixins/urn"),f=function(){return this},l=r.constant(1),c=r.constant(0),h=r.constant(undefined),p=n.exports=i.extend(a,{resource_type:"sound",urnPrefix:"soundcloud:tracks",audio:null,setup:function(e,t){i.prototype.setup.apply(this,arguments);var n=!!t&amp;&amp;!!t.suppressGlobalEvents;this.audio=new s(this,n),this.set("playable",!0),r.proxy(this.audio,this,"seek","isPaused","isPlaying","isLoading","loadProgress","currentTime","initAudio")},play:function(e){if(this.playlist){var t=this.playlist.isPaused();this.playlist.seek(this.timeOffset+this.currentTime()),t&amp;&amp;this.playlist.play(e)}else this.audio.play(e)},pause:function(e){this.playlist?this.playlist.pause(e):this.audio.pause(e)},toggle:function(e){this[this.isPlaying()?"pause":"play"](e)},baseUrl:function(){return u.stringify({path:["tracks",this.id]})},parse:function(e){return i.prototype.parse.apply(this,arguments),e.playback_count||(e.playback_count=0),e.waveform_url&amp;&amp;(e.waveform_url=e.waveform_url.replace("wis.","w1.").replace(".json",".png")),e},extractSecretToken:function(e){return u.parse(e.stream_url).query.secret_token},getSounds:function(){return[this]},getSoundAt:f,getCurrentSound:f,getFirstSound:f,getLastSound:f,getNumSounds:l,getPrevSound:h,getNextSound:h,getSoundIndexAt:c,getRelativeTrackLength:l,getSoundIndex:function(e){return e===this?0:-1},isPlayable:function(){return this.get("playable")!==!1},toJSON:function(){var e=o.prototype.toJSON.apply(this,arguments);return e._playlist={},this.playlist&amp;&amp;r.each(["id","permalink","permalink_url","secret_token","user_id"],function(t){e._playlist[t]=this.get(t)}.bind(this.playlist)),e},streamsUrl:function(){var e,t;return e={path:["i1","tracks",this.id,"streams"]},t=this.getSecretToken(),t&amp;&amp;(e.query={secret_token:t}),u.stringify(e)},registerUrl:function(){return u.stringify({path:["tracks",this.id,"plays"],query:{secret_token:this.get("secret_token")}})}},{hashFn:function(e){var t=e.resource_id;return t?typeof t=="object"?[t.playlist_id,t.sound_id].join("_"):t:e.id||null},resolve:function(e,t,n){return o._resolve(this,[e,t,n],function(n){var r=n.get("user");return r&amp;&amp;n.get("permalink")===t&amp;&amp;r.permalink===e})},onCleanup:function(e){e.audio.dispose()}})}),
define("lib/tracking/tracking-bus",["require","exports","module","underscore","lib/backbone"],function(e,t,n){var r=e("underscore"),i=e("lib/backbone"),s=["show","hide","cancel","submit","focus","blur","hover","navigate"],o=["play","pause","finish"],u=n.exports=r.extend({},i.Events,{action:function(e,t,n){var i=r.contains(s,e);if(i&amp;&amp;t)return this.trigger("action",e,t,n)},audio:function(e,t,n,i,s,u){var a=r.contains(o,e),f=r.toArray(arguments);f.unshift("audio");if(a&amp;&amp;t&amp;&amp;n&amp;&amp;i)return this.trigger.apply(this,f)},saveAudioContext:function(){return this.trigger("saveAudioContext")},impression:function(e,t){return this.trigger("impression",e,t)},pageview:function(e){return this.trigger("pageview",e)},appLoad:function(e){return this.trigger("appLoad",e)}})}),
define("shared/lib/url",["require","exports","module","underscore"],function(e,t,n){function a(e){return e.split("/").map(f).join("/")}function f(e){return encodeURI(e).replace(/#/g,"%23").replace(/\?/g,"%3F")}var r=e("underscore"),i=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:\/@]*)(?::([^:\/@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,s=["---","scheme","authority","userInfo","user","password","host","port","relative","path","directory","file","query","fragment"],o,u=n.exports={parse:function(e,t){var n=i.exec(e),r,o,a={};t||(t=s);for(r=1;r&lt;s.length;++r){o=s[r];if(t.indexOf(o)!==-1)if(n[r]||o==="query")switch(o){case"port":a[o]=parseInt(n[r],10);break;case"path":a[o]=n[r].split("/").map(decodeURIComponent).join("/");break;case"query":a[o]=u.parseQueryString(n[r]);break;default:a[o]=n[r]}}return a},joinPath:function(e){return e.filter(Boolean).join("/")},parseQueryString:function(e){var t={};return e&amp;&amp;e.replace(/([^?=&amp;]+)(?:=([^&amp;]*))?/g,function(e,n,r){n=decodeURIComponent(n),r=decodeURIComponent((r||"").replace(/\+/g," "));switch(typeof t[n]){case"object":t[n].push(r);break;case"undefined":t[n]=r;break;default:t[n]=[t[n],r]}}),t},param:function(e,t){t=t||{};var n=[],i=function(e,t){n[n.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)},s=function(e,n){r.isArray(n)?n.forEach(function(n,r){s(e+"["+(typeof n=="object"&amp;&amp;t.jquerySerialize?r:"")+"]",n)}):r.isObject(n)?r.each(n,function(t,n){s(e+"["+n+"]",t)}):i(e,n)};return r.each(e,function(e,t){s(t,e)}),n.join("&amp;").replace(/%20/g,"+")},stringify:function(e,t){var n=[],i,s;return t&amp;&amp;(s=u.parse(t),e.query&amp;&amp;s.query&amp;&amp;(r.assign(s.query,e.query),delete e.query),e=r.assign({},s,e)),e.scheme&amp;&amp;n.push(e.scheme+"://"),e.user&amp;&amp;(n.push(e.user),e.password&amp;&amp;n.push(":"+e.password),n.push("@")),e.host&amp;&amp;n.push(e.host),e.port&amp;&amp;n.push(":"+e.port),e.path&amp;&amp;(typeof e.path=="string"?n.push(a(e.path)):n.push(a(u.joinPath(e.path)))),i=o(e.query),i&amp;&amp;n.push("?"+i),e.fragment&amp;&amp;n.push("#"+e.fragment),n.join("")},modify:function(e,t){var n=u.parse(e);return r.isFunction(t)?n=t.call(null,n):typeof t=="object"&amp;&amp;(t.query&amp;&amp;(r.assign(n.query,t.query),delete t.query),r.assign(n,t)),u.stringify(n)},normalize:function(e){var t=r.defaults(u.parse(e),{scheme:"http"});return u.stringify(t)}};o=function(e){var t,n,r,i,s,o=[];if(e)for(t in e)if(e.hasOwnProperty(t)){i=e[t];if(i!==null&amp;&amp;i!==s)if(typeof i=="object"){r=i.length;for(n=0;n&lt;r;++n)o.push(encodeURIComponent(t)+"="+encodeURIComponent(i[n]).replace(/%2F/g,"/"))}else o.push(encodeURIComponent(t)+"="+encodeURIComponent(i).replace(/%2F/g,"/"))}return o.join("&amp;")}}),
define("lib/tracking/comscore",["require","exports","module","$"],function(e,t,n){var r=e("$"),i="comScore-beacon",s="16601931",o=n.exports={init:function(){var e=document.createElement("script");return window._comscore=window._comscore||[{c1:"2",c2:s}],e.async=!0,e.src=(document.location.protocol==="https:"?"https://sb":"http://b")+".scorecardresearch.com/beacon.js",e.id=i,e.addEventListener("load",function(){this.destroy()}.bind(this)),document.body.appendChild(e),e},destroy:function(){var e=document.getElementById(i);return e?(r(e).remove(),!0):!1}}}),
define("lib/tracking/helpers/core",["require","exports","module","underscore","config"],function(e,t,n){var r=e("underscore"),i=e("config"),s,o={listen:"tracks"},u={search:"category"},a={suggestions:{args:{category:"suggestions"},layoutName:"search"}},f=n.exports={getUserId:function(){return i.get("me").id},getLevel:function(e){var t=i.get("router").getLayoutInfo().layoutName;return e&amp;&amp;e.level||o[t]||t},getChapter:function(e){var t=i.get("router").getLayoutInfo(),n=t.layoutName,s=u[n]||"subpage",o=t.args&amp;&amp;t.args[s]||e.chapter||"main";return r.compact([o])},getContext:function(e){return[this.getLevel(e),this.getChapter(e)].join(":")},getAudioContext:function(){var e,t,n,r;return s?(e=s.layoutName,t=o[e]||e,n=u[e]||"subpage",r=s.args&amp;&amp;s.args[n]||"main"):(t="tracks",r="main"),[t,r].join(":")},saveAudioContext:function(e){var t=i.get("router").getLayoutInfo(),n=a[e];s=r.extend(n||r.pick(t,"args","layoutName"),{url:window.location.href.replace(/^https?:\/\/[^\/]+\//,"")})},getImpressionEvent:function(e){return{context:this.getImpressionContext(e),urn:this.getURN(e.contextData)}},getImpressionContext:function(e){return e&amp;&amp;e.contextData&amp;&amp;e.contextData.context||{campaign:e.identifier}},getURN:function(e){var t=e.kind,n=e.id,r=t==="user"?"users":t==="track"?"tracks":undefined;return t&amp;&amp;r&amp;&amp;n?"soundcloud:"+r+":"+n:null},getIdentifier:function(e){return[e.identifier||""]}}}),
define("vendor/event-logger/event-logger",["require","exports","module"],function(e,t,n){(function(){function d(e){var t="."+window.location.hostname.replace(/.*\.(.+\..+)/,"$1"),n=new Date,r;n.setTime(n.getTime()+31536e7),r="; expires="+n.toGMTString(),document.cookie=f+"="+e+r+"; path=/; domain="+t}function v(){var e=document.cookie.split(f+"=");return e.length&gt;1&amp;&amp;e[1].split(";")[0]}function m(){return Math.floor(Math.random()*1e6)}function g(e){var t={},n;for(n in e)e.hasOwnProperty(n)&amp;&amp;(t[n]=e[n]);return t}function y(e,t){var n=g(e),r;for(r in t)t.hasOwnProperty(r)&amp;&amp;(n[r]=t[r]);return n}function b(e){return e=typeof e=="object"?e:{},e.context=e.context||{},e.context.scope=e.context.scope||[],e}function w(e,n){var r,a,f,l;a=[],r=u+e+"?",r+=["anonymous_id="+encodeURIComponent(t),"client_id="+o,"ts="+Date.now(),"url="+window.location.href.split("/").map(encodeURIComponent).join("/")].join("&amp;"),s&amp;&amp;Object.keys(s).forEach(function(e){a.push("exp_"+e+"="+s[e])}),i&amp;&amp;a.push("origin="+i),document.referrer.length&gt;0&amp;&amp;a.push("referrer="+encodeURIComponent(document.referrer));for(f in n)n.hasOwnProperty(f)&amp;&amp;n[f]!=null&amp;&amp;a.push(encodeURIComponent(f)+"="+encodeURIComponent(n[f]));return r+="&amp;"+a.join("&amp;"),l=new Image,l.onload=E.bind(null,l),l.onerror=S.bind(null,l,h),l.src=r,r}function E(e){e.onload=e.onerror=null}function S(e,t){var n=e.src;e.onload=e.onerror=null,e.src=p,setTimeout(function(){e.src=n},t)}function x(e,t){var n=0,r=t.length;for(;n&lt;r;n++)if(e[t[n]]===undefined)return!0;return!1}function T(e){return e?"soundcloud:users:"+e:t}function N(){}function C(e,t){t&amp;&amp;(e.page_params=[t.qid,t.position].join(";"))}var e,t,r,i,s,o,u,a,f="sc_anonymous_id",l=3e4,c=1e3,h=3e4,p="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==";a=function(){throw new Error("EventLogger must be initialized")},e={_anonymousId:null,initialize:function(n){if(r)return;if(!n.id)throw new Error("EventLogger: You need to pass an id");i=n.origin,t=this._anonymousId=e.getAnonymousId(),this.checkpointIntervals={},o=n.id,u=n.trackingUrl||"https://eventlogger.soundcloud.com",r=!0,a=N},setExperiments:function(e){s=e},getAnonymousId:function(){var e=v();if(!e||e==="undefined")e=[m(),m(),m(),m()].join("-"),d(e);return e},pageview:function(e,t,n){a();var r=T(e);return w("/pageview",{user:r,level:t,chapter:n.join("::")})},impression:function(e,t,n){a(),n=b(n);var r={ad_urn:n.ad_urn,campaign:n.context.campaign,context:n.context.scope.join(":"),external_media:n.external_media,impression_name:n.impression_name,impression_object:n.impression_object,level:t,monetization_type:n.monetization_type,monetized_object:n.monetized_object,promoted_by:n.promoted_by,urn:n.urn,user:T(e)};w("/impression",y(r,n.params))},click:function(e,t,n,r){a(),r=b(r);var i={ad_urn:r.ad_urn,campaign:r.context.campaign,chapter:n.join("::"),context:r.context.scope.join(":"),external_media:r.external_media,level:t,monetization_type:r.monetization_type,monetized_object:r.monetized_object,promoted_by:r.promoted_by,urn:r.urn,user:T(e),click_name:r.click_name,click_object:r.click_object,click_target:r.click_target,page_name:r.page_name,page_urn:r.page_urn};return C(i,r.context.searchTracking),w("/click",y(i,r.params))},audio:function(e){a();if(x(e,["level","action","id","duration"]))throw new Error("EventLogger  Audio : One or multiple mandatory arguments are missing");var t=e.id,n="soundcloud:sounds:"+t,r=Math.floor(e.duration*1e3),i=this.checkpointIntervals,s=typeof e.checkpointInterval=="number"&amp;&amp;e.checkpointInterval&gt;=c?e.checkpointInterval:null,o,u,f,h;return o={action:e.action,ad_urn:e.ad_urn,context:e.context,duration:r,level:e.level,monetization_type:e.monetization_type,monetized_object:e.monetized_object,policy:e.policy,promoted_by:e.promoted_by,protocol:e.protocol,set_id:e.setId,set_position:e.setPosition,sound:n,source:e.source,source_version:e.sourceVersion,trigger:e.trigger,user:T(e.user)},C(o,e.searchTracking),u=w("/audio",o),clearInterval(i[t]),e.action==="play"?(f=Date.now(),h=g(o),h.action="checkpoint",i[t]=setInterval(function(){Date.now()&lt;f+r?w("/audio",h):clearInterval(i[t])},s||l)):delete i[t],u},audioPerformance:function(e){a();if(x(e,["type","latency","protocol","playertype","host"]))throw new Error("EventLogger  AudioPerformance : One or multiple mandatory arguments are missing");var t={type:e.type,latency:e.latency,protocol:e.protocol,player_type:e.playertype,host:e.host};return w("/audio_performance",t)},appLoad:function(e,t){a();var n={latency:t.latency,user:T(e),level:t.level};return w("/appload",n)},performRequestWithUser:function(e,t,n){return w(t,y({user:T(e)},n))}},typeof n!="undefined"&amp;&amp;n.exports?n.exports=e:(window.SC=window.SC||{},window.SC.EventLogger=e)})()}),
define("lib/tracking/types/actions",["require","exports","module"],function(e,t,n){n.exports={navigate:{identifiers:["home","sign-in","user","track","playlist"]},submit:{identifiers:["search:submit","signin_deeplink_button:signin","download_app_button:download","download_app_badge:download","locale_used:pt_BR","locale_switched:pt_BR","locale_switched:en"]},show:{identifiers:["search:prompt"]}}}),
define("lib/tracking/types/impressions",["require","exports","module"],function(e,t,n){var r=n.exports=["searchItem","download_app_interstitial"]}),
define("lib/tracking/types/pageviews",["require","exports","module","config"],function(e,t,n){function i(e){return r.get("router").getLayoutInfo().args[e]}function s(e){return e=e||"subpage",[i(e)||"main"]}var r=e("config");n.exports={"default":{chapter:["default",window.location],level:"default"},listen:{chapter:s,level:"tracks"},search:{chapter:s.bind(s,"category"),level:"search"},"static-page":{chapter:s.bind(s,"pageName"),level:"static-page"},messages:{chapter:s,level:"messages"},error:{chapter:s,level:"error-page"},playlist:{chapter:s,level:"playlist"},premium:{chapter:s,level:"premium"},user:{chapter:s,level:"profile"},"people-directory":{chapter:s,level:"people-directory"}}}),
define("lib/model",["require","exports","module","$","underscore","api-wrapper","lib/backbone","config","lib/connect","lib/mixins/models/data-dns-prefetcher","lib/single","lib/url"],function(e,t,n){var r,i=e("$"),s=e("underscore"),o=e("api-wrapper"),u=e("lib/backbone"),a=e("config"),f=e("lib/connect"),l=e("lib/mixins/models/data-dns-prefetcher"),c=e("lib/single"),h=e("lib/url"),p=Array.prototype.slice;r=u.Model.extend(l,{resource_type:null,lastFetchTime:null,_submodels:null,submodelMap:null,initialize:function(){this._submodels=[],s.each(this.submodelMap,function(e,t){this.on("change:"+t,this.createSubmodel.bind(this,e,t))},this),this.setup.apply(this,arguments),s.each(this.submodelMap,function(e,t){this.get(t)&amp;&amp;this.createSubmodel(e,t)},this)},setup:i.noop,createSubmodel:function(e,t){this.addSubmodel(new e(this.get(t)))},addSubmodel:function(){p.call(arguments).forEach(function(e){this._submodels.indexOf(e)===-1?this._submodels.push(e):e.release()}.bind(this))},getAttributesToBeSaved:function(){var e=this.toJSON(),t={};return t[o.toAPIResource(this.resource_type)]=e,t},save:function(e,t){return u.Model.prototype.save.call(this,e,s.extend({url:this.saveUrl(),data:i.param(this.getAttributesToBeSaved())},t)).done(function(e){this.set(e),this.updateResourceId()}.bind(this))},saveUrl:function(){var e=s.result(this,"baseUrl");return this.isNew()&amp;&amp;(e=e.split("/").slice(0,-1).join("/")),e},destroy:function(e){return u.Model.prototype.destroy.call(this,s.extend({url:this.destroyUrl()},e))},destroyUrl:function(){return s.result(this,"baseUrl")},baseUrl:function(){throw new Error("baseUrl should be defined for every model")},url:function(e){var t=this.getSecretToken(),n=s.result(this,e||"baseUrl");return t?h.modify(n,{query:{secret_token:t}}):n},getSecretToken:function(){return this.get("secret_token")},signedUrl:function(e){var t=this.get(e),n;return t?(n={scheme:"http",query:{client_id:a.get("client_id")}},f.isLoggedIn()&amp;&amp;(n.scheme="https",n.query.oauth_token=f.getAuthToken()),this.get("secret_token")&amp;&amp;(n.query.secret_token=this.get("secret_token")),h.modify(t,n)):null},equivalentTo:function(e){return this===e||this.id&amp;&amp;this.id===e.id},toJSON:function(){var e=u.Model.prototype.toJSON.apply(this,arguments);return e._resource_id=this.resource_id,e._resource_type=this.resource_type,e},parse:function(e){var t;return typeof this.baseUrl=="string"&amp;&amp;(t=h.parse(this.baseUrl).query.secret_token),t||(t=this.extractSecretToken(e)),t&amp;&amp;(e.secret_token=t),e},extractSecretToken:i.noop,toString:function(){return this.resource_type?this.resource_type+" ("+(this.isNew()?"new":this.resource_id)+")"+": "+(this.attributes.permalink||this.attributes.title||this.attributes.name):Object.prototype.toString.call(this)},hasDataForView:function(e){return e.getRequiredAttributes(this).every(Object.prototype.hasOwnProperty,this.attributes)},updateResourceId:function(){var e=this.constructor.hashFn(this.attributes),t=this.resource_id;e&amp;&amp;(this.resource_id=e,this.constructor.instances.changeKey(t,e))}},{_resolve:function(e,t,n){var r=e.instances.find(n),s=i.Deferred(),o;return r?s.resolve(r):(o=h.stringify({path:"resolve",query:{url:h.stringify({scheme:document.location.protocol.replace(/:/,""),host:a.get("api_host").replace(/^https?:\/\/api\./,""),path:t}),"_status_code_map[302]":200,_status_format:"json"}}),i.ajax({dataType:"json",url:o}).done(function(t){r=e.getNewInstance({}),r.baseUrl=t.location,r.fetch().done(function(){e.instances.add(r),r.release(),s.resolve(r)}).fail(s.reject)}).fail(s.reject)),s}}),n.exports=c.applyTo(r,{hashFn:function(e){return e&amp;&amp;e.id||null},onCleanup:function(e){e._submodels&amp;&amp;e._submodels.length&amp;&amp;(s.invoke(e._submodels,"release"),e._submodels.length=0)},prepareArgs:function(e,t){return t=t||{},e=e||{},t.parse&amp;&amp;(e=this.parse(e)),[e,t]},prepareInstance:function(e,t){return t=t||{},t.collection&amp;&amp;(this.lastFetchTime=Date.now()),s.isEmpty(e)||this.set(e),delete this.attributes.resource_id,this},getIncrementValue:function(e,t){var n=t&amp;&amp;t.collection;return n?n.constructor.instances.countFor(n.resource_id):1}})}),
define("lib/mixins/urn",["require","exports","module","lib/mixin"],function(e,t,n){var r=e("lib/mixin"),i=n.exports=new r({requires:["urnPrefix"],getUrn:function(){var e=this.id||this.resource_id;return this.urnPrefix&amp;&amp;e?this.urnPrefix+":"+e:undefined}})}),
define("css",["require","exports","module","underscore","lib/lingua","lib/helpers/client-environment-helper"],function(e,t,n){var r=e("underscore"),i=e("lib/lingua"),s=e("lib/helpers/client-environment-helper").device,o=document.getElementsByTagName("head")[0],u=n.exports={insert:function(e){r.isArray(e)||(e=[e]),e.forEach(function(e){if(e.parentNode)return;o.appendChild(e)})},stringToStyleElement:function(e){var t=document.createElement("style");return t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e)),t},transformDPI:function(e){return e.replace(/\/ldpi\//g,"/"+s.dpi+"/")},transformLocale:function(e){return e.replace(/\/en\//g,"/"+i.getLocale()+"/")},transform:function(e){return this.transformLocale(this.transformDPI(e))}}}),
define("lib/console-box.css",["require","exports","module","css"],function(e,t,n,r){n.exports=r.stringToStyleElement(r.transform('.consoleBox{display:block;height:30%;width:100%;z-index:9999;position:absolute;top:0;left:0;right:0;padding:3px;font-family:"Monaco","Courier New",monospace;font-size:11px;box-sizing:border-box;background-color:#002240;overflow-x:hidden;overflow-y:auto}.consoleBox__message{white-space:nowrap;color:#FF9D00}')),data=null}),
define("ajax",["require","exports","module","type-of"],function(require,exports,module){function triggerAndReturn(e,t,n){return!0}function triggerGlobal(e,t,n,r){if(e.global)return triggerAndReturn(t||document,n,r)}function ajaxStart(e){e.global&amp;&amp;ajax.active++===0&amp;&amp;triggerGlobal(e,null,"ajaxStart")}function ajaxStop(e){e.global&amp;&amp;!--ajax.active&amp;&amp;triggerGlobal(e,null,"ajaxStop")}function ajaxBeforeSend(e,t){var n=t.context;if(t.beforeSend.call(n,e,t)===!1||triggerGlobal(t,n,"ajaxBeforeSend",[e,t])===!1)return!1;triggerGlobal(t,n,"ajaxSend",[e,t])}function ajaxSuccess(e,t,n){var r=n.context,i="success";n.success.call(r,e,i,t),triggerGlobal(n,r,"ajaxSuccess",[t,n,e]),ajaxComplete(i,t,n)}function ajaxError(e,t,n,r){var i=r.context;r.error.call(i,n,t,e),triggerGlobal(r,i,"ajaxError",[n,r,e]),ajaxComplete(t,n,r)}function ajaxComplete(e,t,n){var r=n.context;n.complete.call(r,t,e),triggerGlobal(n,r,"ajaxComplete",[t,n]),ajaxStop(n)}function empty(){}function mimeToDataType(e){return e&amp;&amp;(e==htmlType?"html":e==jsonType?"json":scriptTypeRE.test(e)?"script":xmlTypeRE.test(e)&amp;&amp;"xml")||"text"}function appendQuery(e,t){return(e+"&amp;"+t).replace(/[&amp;?]{1,2}/,"?")}function serializeData(e){type(e.data)==="object"&amp;&amp;(e.data=param(e.data)),e.data&amp;&amp;(!e.type||e.type.toUpperCase()=="GET")&amp;&amp;(e.url=appendQuery(e.url,e.data))}function serialize(e,t,n,r){var i=type(t)==="array";for(var s in t){var o=t[s];r&amp;&amp;(s=n?r:r+"["+(i?"":s)+"]"),!r&amp;&amp;i?e.add(o.name,o.value):(n?type(o)==="array":type(o)==="object")?serialize(e,o,n,s):e.add(s,o)}}function param(e,t){var n=[];return n.add=function(e,t){this.push(escape(e)+"="+escape(t))},serialize(n,e,t),n.join("&amp;").replace("%20","+")}function extend(e){var t=Array.prototype.slice;return t.call(arguments,1).forEach(function(t){for(key in t)t[key]!==undefined&amp;&amp;(e[key]=t[key])}),e}var type;try{type=require("type-of")}catch(ex){var r=require;type=r("type")}var jsonpID=0,document=window.document,key,name,rscript=/&lt;script\b[^&lt;]*(?:(?!&lt;\/script&gt;)&lt;[^&lt;]*)*&lt;\/script&gt;/gi,scriptTypeRE=/^(?:text|application)\/javascript/i,xmlTypeRE=/^(?:text|application)\/xml/i,jsonType="application/json",htmlType="text/html",blankRE=/^\s*$/,ajax=module.exports=function(options){var settings=extend({},options||{});for(key in ajax.settings)settings[key]===undefined&amp;&amp;(settings[key]=ajax.settings[key]);ajaxStart(settings),settings.crossDomain||(settings.crossDomain=/^([\w-]+:)?\/\/([^\/]+)/.test(settings.url)&amp;&amp;RegExp.$2!=window.location.host);var dataType=settings.dataType,hasPlaceholder=/=\?/.test(settings.url);if(dataType=="jsonp"||hasPlaceholder)return hasPlaceholder||(settings.url=appendQuery(settings.url,"callback=?")),ajax.JSONP(settings);settings.url||(settings.url=window.location.toString()),serializeData(settings);var mime=settings.accepts[dataType],baseHeaders={},protocol=/^([\w-]+:)\/\//.test(settings.url)?RegExp.$1:window.location.protocol,xhr=settings.xhr(),abortTimeout;settings.crossDomain||(baseHeaders["X-Requested-With"]="XMLHttpRequest"),mime&amp;&amp;(baseHeaders.Accept=mime,mime.indexOf(",")&gt;-1&amp;&amp;(mime=mime.split(",",2)[0]),xhr.overrideMimeType&amp;&amp;xhr.overrideMimeType(mime));if(settings.contentType||settings.data&amp;&amp;settings.type.toUpperCase()!="GET")baseHeaders["Content-Type"]=settings.contentType||"application/x-www-form-urlencoded";settings.headers=extend(baseHeaders,settings.headers||{}),xhr.onreadystatechange=function(){if(xhr.readyState==4){clearTimeout(abortTimeout);var result,error=!1;if(xhr.status&gt;=200&amp;&amp;xhr.status&lt;300||xhr.status==304||xhr.status==0&amp;&amp;protocol=="file:"){dataType=dataType||mimeToDataType(xhr.getResponseHeader("content-type")),result=xhr.responseText;try{dataType=="script"?(1,eval)(result):dataType=="xml"?result=xhr.responseXML:dataType=="json"&amp;&amp;(result=blankRE.test(result)?null:JSON.parse(result))}catch(e){error=e}error?ajaxError(error,"parsererror",xhr,settings):ajaxSuccess(result,xhr,settings)}else ajaxError(null,"error",xhr,settings)}};var async="async"in settings?settings.async:!0;xhr.open(settings.type,settings.url,async);for(name in settings.headers)xhr.setRequestHeader(name,settings.headers[name]);return ajaxBeforeSend(xhr,settings)===!1?(xhr.abort(),!1):(settings.timeout&gt;0&amp;&amp;(abortTimeout=setTimeout(function(){xhr.onreadystatechange=empty,xhr.abort(),ajaxError(null,"timeout",xhr,settings)},settings.timeout)),xhr.send(settings.data?settings.data:null),xhr)};ajax.active=0,ajax.JSONP=function(e){if("type"in e){var t="jsonp"+ ++jsonpID,n=document.createElement("script"),r=function(){t in window&amp;&amp;(window[t]=empty),ajaxComplete("abort",i,e)},i={abort:r},s,o=document.getElementsByTagName("head")[0]||document.documentElement;return e.error&amp;&amp;(n.onerror=function(){i.abort(),e.error()}),window[t]=function(n){clearTimeout(s),delete window[t],ajaxSuccess(n,i,e)},serializeData(e),n.src=e.url.replace(/=\?/,"="+t),o.insertBefore(n,o.firstChild),e.timeout&gt;0&amp;&amp;(s=setTimeout(function(){i.abort(),ajaxComplete("timeout",i,e)},e.timeout)),i}return ajax(e)},ajax.settings={type:"GET",beforeSend:empty,success:empty,error:empty,complete:empty,context:null,global:!0,xhr:function(){return new window.XMLHttpRequest},accepts:{script:"text/javascript, application/javascript",json:jsonType,xml:"application/xml, text/xml",html:htmlType,text:"text/plain"},crossDomain:!1,timeout:0},ajax.get=function(e,t){return ajax({url:e,success:t})},ajax.post=function(e,t,n,r){return type(t)==="function"&amp;&amp;(r=r||n,n=t,t=null),ajax({type:"POST",url:e,data:t,success:n,dataType:r})},ajax.getJSON=function(e,t){return ajax({url:e,success:t,dataType:"json"})};var escape=encodeURIComponent}),
define("classes",["require","exports","module","indexof"],function(e,t,n){function s(e){this.el=e,this.list=e.classList}var r=e("indexof"),i=/\s+/;n.exports=function(e){return new s(e)},s.prototype.add=function(e){if(this.list)return this.list.add(e),this;var t=this.array(),n=r(t,e);return~n||t.push(e),this.el.className=t.join(" "),this},s.prototype.remove=function(e){if(this.list)return this.list.remove(e),this;var t=this.array(),n=r(t,e);return~n&amp;&amp;t.splice(n,1),this.el.className=t.join(" "),this},s.prototype.toggle=function(e){return this.list?(this.list.toggle(e),this):(this.has(e)?this.remove(e):this.add(e),this)},s.prototype.array=function(){var e=this.el.className.split(i);return""===e[0]&amp;&amp;e.pop(),e},s.prototype.has=s.prototype.contains=function(e){return this.list?this.list.contains(e):!!~r(this.array(),e)}}),
define("vendor/zepto-events",["require","exports","module"],function(e,t,n){function a(e){return e._zid||(e._zid=i++)}function f(e,t,n,i){t=l(t);if(t.ns)var s=c(t.ns);return(r[a(e)]||[]).filter(function(e){return e&amp;&amp;(!t.e||e.e==t.e)&amp;&amp;(!t.ns||s.test(e.ns))&amp;&amp;(!n||a(e.fn)===a(n))&amp;&amp;(!i||e.sel==i)})}function l(e){var t=(""+e).split(".");return{e:t[0],ns:t.slice(1).sort().join(" ")}}function c(e){return new RegExp("(?:^| )"+e.replace(" "," .* ?")+"(?: |$)")}function h(e,t,n){typeof e!="string"?u.each(e,n):e.split(/\s/).forEach(function(e){n(e,t)})}function p(e,t){return e.del&amp;&amp;(e.e=="focus"||e.e=="blur")||!!t}function d(e){return o[e]||e}var r={},i=1,s={},o={mouseenter:"mouseover",mouseleave:"mouseout"},u={};u.each=function(e){return[].every.call(this,function(t,n){return e.call(t,n,t)!==!1}),this},s.click=s.mousedown=s.mouseup=s.mousemove="MouseEvents",t.add=add=function(e,t,n,i,s,u){var f=a(e),c=r[f]||(r[f]=[]);h(t,n,function(t,n){var r=l(t);r.fn=n,r.sel=i,r.e in o&amp;&amp;(n=function(e){var t=e.relatedTarget;if(!t||t!==this&amp;&amp;!this.contains(t))return r.fn.apply(this,arguments)}),r.del=s&amp;&amp;s(n,t);var a=r.del||n;r.proxy=function(t){var n=a.apply(e,[t].concat(t.data));return n===!1&amp;&amp;(t.preventDefault(),t.stopPropagation()),n},r.i=c.length,c.push(r),e.addEventListener(d(r.e),r.proxy,p(r,u))})},t.remove=remove=function(e,t,n,i,s){var o=a(e);h(t||"",n,function(t,n){f(e,t,n,i).forEach(function(t){delete r[o][t.i],e.removeEventListener(d(t.e),t.proxy,p(t,s))})})};var v=function(){return!0},m=function(){return!1},g=/^([A-Z]|layer[XY]$)/,y={preventDefault:"isDefaultPrevented",stopImmediatePropagation:"isImmediatePropagationStopped",stopPropagation:"isPropagationStopped"};t.createProxy=createProxy=function(e){var t,n={originalEvent:e};for(t in e)!g.test(t)&amp;&amp;e[t]!==undefined&amp;&amp;(n[t]=e[t]);return u.each(y,function(t,r){n[t]=function(){return this[r]=v,e[t].apply(e,arguments)},n[r]=m}),n},t.Event=Event=function(e,t){typeof e!="string"&amp;&amp;(t=e,e=t.type);var n=document.createEvent(s[e]||"Events"),r=!0;if(t)for(var i in t)i=="bubbles"?r=!!t[i]:n[i]=t[i];return n.initEvent(e,r,!0,null,null,null,null,null,null,null,null,null,null,null,null),n.isDefaultPrevented=function(){return this.defaultPrevented},n}}),
define("lib/layout",["require","exports","module","underscore","$","lib/backbone","css","lib/helpers/title-helper","lib/lingua","lib/deferred-loader","lib/mixins/layouts/performance-measuring","lib/template"],function(e,t,n){var r=e("underscore"),i=e("$"),s=e("lib/backbone"),o=e("css"),u=e("lib/helpers/title-helper"),a=e("lib/lingua"),f=e("lib/deferred-loader"),l=e("lib/mixins/layouts/performance-measuring"),c=e("lib/template"),h,p,d;h="l-footer",p="views/footer/footer",d=a.t("Enjoy the full SoundCloud experience with our app.",null,{comment:"Default page title"});var v=n.exports=s.View.extend({css:null,template:null,views:null,_currentViews:null,_viewPaths:null,slots:null,includeFooter:".l-main",footerClassName:"",getPageUrn:function(){return""},initialize:function(){this.views={},this._currentViews={}},setArgs:function(e){this.args=e||{}},setup:function(){var e=i.Deferred();return r.defer(e.resolve),e},dispose:function(){r.invoke(this._currentViews,"_dispose"),r.invoke(this.views,"_dispose"),this.$el.remove(),delete this.slots,delete this.views,delete this._viewPaths,delete this._currentViews},render:function(){var e,t;return this.includeFooter&amp;&amp;(e=this.views[h]),this.css&amp;&amp;o.insert(this.css),this.el.innerHTML===""&amp;&amp;(c.render(this.template,{},this.el),this.slots={},r.each(this.views,function(e,t){this.slots[t]=this.$("."+t)[0]},this)),r.each(this.views,function(e,t){this._currentViews[t]!==e&amp;&amp;(this._currentViews[t]&amp;&amp;this._currentViews[t]._dispose(),e.render(),t!==h&amp;&amp;this.slots[t].appendChild(e.el),this._currentViews[t]=e)},this),t=this.$(this.includeFooter)[0],t&amp;&amp;e&amp;&amp;(this.footerClassName&amp;&amp;(e.el.className+=" "+this.footerClassName),t.appendChild(e.el)),this},setViews:function(e){this.includeFooter&amp;&amp;(e[h]=[p,{upsellText:this.getUpsellText()}]);var t=Object.keys(e),n=r.pluck(e,0),s=i.Deferred();return f.load(n).done(function(){this._viewPaths={},r.each(arguments,function(r,i){var s=t[i],o=e[s][1];if(!this._currentViews[s]||!this._currentViews[s].isEquivalentTo(r,o))this.views[s]=new r(o);this._viewPaths[s]=n[i]},this)}.bind(this)).done(s.resolve).fail(s.reject),s},getChangeEventData:function(e){var t={};return r.each(this._viewPaths,function(e,n){t[e]=this.views[n].constructorArguments},this),{layout:this,layoutName:e,views:t,args:this.args}},setTitle:function(e){u.set(e)},getUpsellText:function(){return d},t:a.t,tp:a.tp});l.applyTo(v.prototype),u.initialize()}),
define("lib/layouts/fullheight.css",["require","exports","module","css"],function(e,t,n,r){n.exports=r.stringToStyleElement(r.transform(".l-fullheight{height:100%;background:#000}.l-fullheight&gt;.l-main{height:100%}")),data=null}),
define("lib/layouts/fullheight.tmpl",["vendor/handlebars-runtime"],function(){return require("vendor/handlebars-runtime").template(function(e,t,n,r,i){return this.compilerInfo=[4,"&gt;= 1.0.0"],n=this.merge(n,e.helpers),i=i||{},'&lt;div class="l-fullheight"&gt; &lt;div class="l-main"&gt; &lt;/div&gt; &lt;div class="l-footnote"&gt; &lt;/div&gt;\n&lt;/div&gt;\n'})}),
define("lib/views/loading.css",["require","exports","module","css"],function(e,t,n,r){n.exports=r.stringToStyleElement(r.transform(".loadingThrobber{background:transparent url(https://m.soundcloud.com/assets/images/ldpi/loader-81295ad2.gif) 50% 50% no-repeat;background-size:32px 32px;clear:both;text-align:center;height:40px;width:100%;padding:100px}.loadingThrobber.small{height:20px;background-size:16px}.loadingThrobber.fullscreen{top:44px;left:0;right:0;bottom:0;position:fixed;background-color:#f2f2f2;height:100%}")),data=null}),
define("lib/event-bubble",["require","exports","module"],function(e,t,n){var r=n.exports=Class.extend({_propagate:!0,data:null,initialize:function(e){this.data=e||{}},stopPropagation:function(){this._propagate=!1},isPropagationStopped:function(){return!this._propagate}})}),
define("lib/views/mixins/stateful",["require","exports","module","underscore","lib/mixin"],function(e,t,n){var r=e("underscore"),i=e("lib/mixin"),s=n.exports=new i({states:null,_states:null,toggleState:function(e,t){var n,i;return this.disposed?this:(this.states||(this.states={}),this.states[e]||(this.states[e]=e),this._states=this._states||{},this._states[e]=this._states[e]||!1,t=typeof t!="undefined"?!!t:!this._states[e],this._states[e]===t?this:(this._states[e]=t,n=this.states[e],typeof n=="string"?(i=n,this.$el[t?"addClass":"removeClass"](i)):r.isFunction(n)?n.call(this,t):n&amp;&amp;n[t?"setup":"teardown"].call(this),this.trigger("state:"+e,t),this))},getState:function(e){return!!this._states&amp;&amp;!!this._states[e]}})}),
define("lib/template",["require","exports","module","underscore","vendor/handlebars-runtime","lib/subview-plugin","lib/template-helpers"],function(e,t,n){var r=e("underscore"),i=e("vendor/handlebars-runtime"),s=e("lib/subview-plugin"),o=e("lib/template-helpers");r.each(o,function(e,t){i.registerHelper(t,e)});var u=n.exports={render:function(e,t,n){var r=e(t||{});n&amp;&amp;(n.innerHTML=r)},subviews:function(e){s.replacePlaceholders(e)}}}),
define("vendor/handlebars-runtime",["require","exports","module"],function(e,t,n){var r=function(){var e=function(){"use strict";function t(e){this.string=e}var e;return t.prototype.toString=function(){return""+this.string},e=t,e}(),t=function(e){"use strict";function o(e){return r[e]||"&amp;"}function u(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&amp;&amp;(e[n]=t[n])}function c(e){return e instanceof n?e.toString():!e&amp;&amp;e!==0?"":(e=""+e,s.test(e)?e.replace(i,o):e)}function h(e){return!e&amp;&amp;e!==0?!0:l(e)&amp;&amp;e.length===0?!0:!1}var t={},n=e,r={"&amp;":"&amp;","&lt;":"&lt;","&gt;":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},i=/[&amp;&lt;&gt;"'`]/g,s=/[&amp;&lt;&gt;"'`]/;t.extend=u;var a=Object.prototype.toString;t.toString=a;var f=function(e){return typeof e=="function"};f(/x/)&amp;&amp;(f=function(e){return typeof e=="function"&amp;&amp;a.call(e)==="[object Function]"});var f;t.isFunction=f;var l=Array.isArray||function(e){return e&amp;&amp;typeof e=="object"?a.call(e)==="[object Array]":!1};return t.isArray=l,t.escapeExpression=c,t.isEmpty=h,t}(e),n=function(){"use strict";function n(e,n){var r;n&amp;&amp;n.firstLine&amp;&amp;(r=n.firstLine,e+=" - "+r+":"+n.firstColumn);var i=Error.prototype.constructor.call(this,e);for(var s=0;s&lt;t.length;s++)this[t[s]]=i[t[s]];r&amp;&amp;(this.lineNumber=r,this.column=n.firstColumn)}var e,t=["description","fileName","lineNumber","message","name","number","stack"];return n.prototype=new Error,e=n,e}(),r=function(e,t){"use strict";function h(e,t){this.helpers=e||{},this.partials=t||{},p(this)}function p(e){e.registerHelper("helperMissing",function(e){if(arguments.length===2)return undefined;throw new i("Missing helper: '"+e+"'")}),e.registerHelper("blockHelperMissing",function(t,n){var r=n.inverse||function(){},i=n.fn;return f(t)&amp;&amp;(t=t.call(this)),t===!0?i(this):t===!1||t==null?r(this):a(t)?t.length&gt;0?e.helpers.each(t,n):r(this):i(t)}),e.registerHelper("each",function(e,t){var n=t.fn,r=t.inverse,i=0,s="",o;f(e)&amp;&amp;(e=e.call(this)),t.data&amp;&amp;(o=m(t.data));if(e&amp;&amp;typeof e=="object")if(a(e))for(var u=e.length;i&lt;u;i++)o&amp;&amp;(o.index=i,o.first=i===0,o.last=i===e.length-1),s+=n(e[i],{data:o});else for(var l in e)e.hasOwnProperty(l)&amp;&amp;(o&amp;&amp;(o.key=l,o.index=i,o.first=i===0),s+=n(e[l],{data:o}),i++);return i===0&amp;&amp;(s=r(this)),s}),e.registerHelper("if",function(e,t){return f(e)&amp;&amp;(e=e.call(this)),!t.hash.includeZero&amp;&amp;!e||r.isEmpty(e)?t.inverse(this):t.fn(this)}),e.registerHelper("unless",function(t,n){return e.helpers["if"].call(this,t,{fn:n.inverse,inverse:n.fn,hash:n.hash})}),e.registerHelper("with",function(e,t){f(e)&amp;&amp;(e=e.call(this));if(!r.isEmpty(e))return t.fn(e)}),e.registerHelper("log",function(t,n){var r=n.data&amp;&amp;n.data.level!=null?parseInt(n.data.level,10):1;e.log(r,t)})}function v(e,t){d.log(e,t)}var n={},r=e,i=t,s="1.3.0";n.VERSION=s;var o=4;n.COMPILER_REVISION=o;var u={1:"&lt;= 1.0.rc.2",2:"== 1.0.0-rc.3",3:"== 1.0.0-rc.4",4:"&gt;= 1.0.0"};n.REVISION_CHANGES=u;var a=r.isArray,f=r.isFunction,l=r.toString,c="[object Object]";n.HandlebarsEnvironment=h,h.prototype={constructor:h,logger:d,log:v,registerHelper:function(e,t,n){if(l.call(e)===c){if(n||t)throw new i("Arg not supported with multiple helpers");r.extend(this.helpers,e)}else n&amp;&amp;(t.not=n),this.helpers[e]=t},registerPartial:function(e,t){l.call(e)===c?r.extend(this.partials,e):this.partials[e]=t}};var d={methodMap:{0:"debug",1:"info",2:"warn",3:"error"},DEBUG:0,INFO:1,WARN:2,ERROR:3,level:3,log:function(e,t){if(d.level&lt;=e){var n=d.methodMap[e];typeof console!="undefined"&amp;&amp;console[n]&amp;&amp;console[n].call(console,t)}}};n.logger=d,n.log=v;var m=function(e){var t={};return r.extend(t,e),t};return n.createFrame=m,n}(t,n),i=function(e,t,n){"use strict";function a(e){var t=e&amp;&amp;e[0]||1,n=o;if(t!==n){if(t&lt;n){var r=u[n],i=u[t];throw new s("Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version ("+r+") or downgrade your runtime to an older version ("+i+").")}throw new s("Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version ("+e[1]+").")}}function f(e,t){if(!t)throw new s("No environment passed to template");var n=function(e,n,r,i,o,u){var a=t.VM.invokePartial.apply(this,arguments);if(a!=null)return a;if(t.compile){var f={helpers:i,partials:o,data:u};return o[n]=t.compile(e,{data:u!==undefined},t),o[n](r,f)}throw new s("The partial "+n+" could not be compiled when running in runtime-only mode")},r={escapeExpression:i.escapeExpression,invokePartial:n,programs:[],program:function(e,t,n){var r=this.programs[e];return n?r=c(e,t,n):r||(r=this.programs[e]=c(e,t)),r},merge:function(e,t){var n=e||t;return e&amp;&amp;t&amp;&amp;e!==t&amp;&amp;(n={},i.extend(n,t),i.extend(n,e)),n},programWithDepth:t.VM.programWithDepth,noop:t.VM.noop,compilerInfo:null};return function(n,i){i=i||{};var s=i.partial?i:t,o,u;i.partial||(o=i.helpers,u=i.partials);var a=e.call(r,s,n,o,u,i.data);return i.partial||t.VM.checkRevision(r.compilerInfo),a}}function l(e,t,n){var r=Array.prototype.slice.call(arguments,3),i=function(e,i){return i=i||{},t.apply(this,[e,i.data||n].concat(r))};return i.program=e,i.depth=r.length,i}function c(e,t,n){var r=function(e,r){return r=r||{},t(e,r.data||n)};return r.program=e,r.depth=0,r}function h(e,t,n,r,i,o){var u={partial:!0,helpers:r,partials:i,data:o};if(e===undefined)throw new s("The partial "+t+" could not be found");if(e instanceof Function)return e(n,u)}function p(){return""}var r={},i=e,s=t,o=n.COMPILER_REVISION,u=n.REVISION_CHANGES;return r.checkRevision=a,r.template=f,r.programWithDepth=l,r.program=c,r.invokePartial=h,r.noop=p,r}(t,n,r),s=function(e,t,n,r,i){"use strict";var s,o=e,u=t,a=n,f=r,l=i,c=function(){var e=new o.HandlebarsEnvironment;return f.extend(e,o),e.SafeString=u,e.Exception=a,e.Utils=f,e.VM=l,e.template=function(t){return l.template(t,e)},e},h=c();return h.create=c,s=h,s}(r,e,n,t,i);return s}();n.exports=r}),
define("views/header/header",["require","exports","module","lib/tracking/tracking-bus","lib/view","views/header/header.css","views/header/header.tmpl"],function(e,t,n){function o(){var e=this.subviews.searchBox;e&amp;&amp;e.toggleState("open")}function u(){r.action("navigate","home")}var r=e("lib/tracking/tracking-bus"),i=e("lib/view"),s=n.exports=i.extend({tagName:"header",className:"header sc-selection-disabled",attributes:{id:"header",role:"banner"},events:{"click .header__logo":u},bubbleEvents:{"searchButton:click":o},css:e("views/header/header.css"),template:e("views/header/header.tmpl"),renderDecorate:function(){}})}),
define("views/banner/upsell",["require","exports","module","underscore","lib/helpers/client-environment-helper","lib/event-bus","lib/helpers/firefoxos-helper","lib/native-links","lib/lingua","lib/persistent-store","lib/tracking/tracking-bus","lib/views/mixins/update-on-layout-change","lib/view","views/banner/upsell.css","views/banner/upsell.tmpl"],function(e,t,n){function m(e){l.action("submit","download_app_button:download"),i.firefoxOS?(e.originalEvent.preventDefault(),o.installApp.call(this,g.bind(this))):y()&amp;&amp;g.call(this)}function g(){this.toggleState("slide",!0)}function y(){var e=window.location.pathname==="/signin/reset/success";return e||!u.useNativeDeeplinks()&amp;&amp;(!i.hasNativeApp||!!p.get("disabled"))}var r=e("underscore"),i=e("lib/helpers/client-environment-helper").device,s=e("lib/event-bus"),o=e("lib/helpers/firefoxos-helper"),u=e("lib/native-links"),a=e("lib/lingua"),f=e("lib/persistent-store"),l=e("lib/tracking/tracking-bus"),c=e("lib/views/mixins/update-on-layout-change"),h=e("lib/view"),p=new f("upsell-banner"),d=200,v=n.exports=h.extend(c,{className:"upsellBanner",css:e("views/banner/upsell.css"),template:e("views/banner/upsell.tmpl"),events:{"click .upsellBanner__button":m,"click .upsellBanner__close":g},element2selector:{"upsell-button":".upsellBanner__button"},states:{hide:function(e){this.$el.toggleClass("sc-hidden",e),e&amp;&amp;s.trigger("upsell:hide")},slide:function(){p.set("disabled",!0),this.$el.addClass("slideOut"),this.addDeferred(r.delay(function(){this.toggleState("hide",!0)}.bind(this),d)),s.trigger("upsell:slide")}},setup:function(){this.toggleState("hide",y()),i.firefoxOS&amp;&amp;o.isAppInstalled().fail(this.toggleState.bind(this,"hide",!1))},renderDecorate:function(){u.useNativeDeeplinks()||(this.getElement("upsell-button")[0].target="_blank")},getTemplateData:function(e,t){var n,r;return t&amp;&amp;u.useNativeDeeplinks()&amp;&amp;i.iOS?(n=u.getIOSDeepLink(t),r=a.t("Listen on SoundCloud iOS",null,{comment:"Upsell text when viewed on ios device"})):(n=u.getUpsellLink(),r=a.t("Download our free app",null,{comment:"Upsell text when viewed on non-ios devices"})),e.url=n,e.text=r,e}})}),
define("views/play-controls/play-controls",["require","exports","module","lib/event-bus","lib/play-manager","lib/view","views/play-controls/play-controls.css","views/play-controls/play-controls.tmpl"],function(e,t,n){function u(){i.toggleCurrent({userInitiated:!0})}function a(e){f.call(this,e.sound)}function f(e){this.toggleState("playing",e.isPlaying());if(this.currentSound===e)return;this.currentSound=e,this.rerender()}var r=e("lib/event-bus"),i=e("lib/play-manager"),s=e("lib/view"),o=n.exports=s.extend({className:"playControls",css:e("views/play-controls/play-controls.css"),template:e("views/play-controls/play-controls.tmpl"),states:{playing:"playing"},setup:function(){this.listenTo(r,"audio:play audio:pause",a)},events:{"click .playControls__playPause":u},currentSound:null,getTemplateData:function(){return{sound:this.currentSound&amp;&amp;this.currentSound.toJSON()}}})}),
define("lib/single",["require","exports","module","$","underscore","backbone","lib/gc-store"],function(e,t,n){var r=e("$"),i=e("underscore"),s=e("backbone"),o=e("lib/gc-store"),u=r.noop,a=0,f=6e4,l;n.exports={applyTo:function c(e,t){t=i.extend({neverRelease:!1,cleanupInstantly:!1,hashFn:function(){return null},prepareArgs:function(){return arguments},prepareInstance:function(){return this},getIncrementValue:function(){return 1},onHold:u,onRelease:u,onCleanup:null,GC_INTERVAL:f},t,e),delete t.prototype;var n,r=e.extend||s.Model.extend,h=t.neverRelease,p,d,v,m,g,y;return n=new o({autoCleanup:t.cleanupInstantly,onCleanup:t.onCleanup,onIncrement:t.onHold,onDecrement:t.onRelease}),h?v=m=g=u:(g=function(){n.cleanup(),d=n.length?setTimeout(g,t.GC_INTERVAL):null},v=function(e){n.increment(this.resource_id,e)},m=function(e){n.decrement(this.resource_id,e)}),y={hold:v,release:m,_usageCount:function(){return n.countFor(this.resource_id)},constructor:function(){var r=p.prepareArgs.apply(this,arguments),i=p.hashFn.apply(this,r)||"f-"+ ++a,s=p.neverRelease?1:p.getIncrementValue.apply(null,r),o=n.get(i);if(o)return this.constructor.neverRelease||o.hold(s),p.prepareInstance.apply(o,r),o;o=this,!d&amp;&amp;!p.cleanupInstantly&amp;&amp;(d=setTimeout(g,t.GC_INTERVAL)),n.set(i,o),o.constructor.neverRelease||o.hold(s-1),o.resource_id=i,l(e).apply(o,r),p.prepareInstance.apply(o,r)}},p=r.call(e,y,t),i.extend(p,{__constructor__:l(e),reset:function(){n.reset(),d&amp;&amp;(clearTimeout(d),d=null)},extend:function(t){var n,s;return t=t||{},i.isArray(t)&amp;&amp;(t=i.extend.apply(null,[{}].concat(t))),t.hasOwnProperty("constructor")||(t.constructor=l(e)),n=r.apply(p,arguments),n.extend=r,s=c(n,p),s.__super__&amp;&amp;(s.__super__=s.__super__.constructor.__super__),s},instances:function(){return n.add=function(e){var t=p.hashFn(e.attributes);e.resource_id=t,t&amp;&amp;this.set(t,e)},n}(),getNewInstance:function(){function r(){return l(e).apply(this,t)}var t=arguments,n;return r.prototype=p.prototype,n=new r,n}})}},l=function(e){return e.__constructor__||e}}),
define("models/audible-interface",["require","exports","module","lib/mixins/audio-source","lib/helpers/datetime-helper","lib/model","lib/play-manager"],function(e,t,n){var r=e("lib/mixins/audio-source"),i=e("lib/helpers/datetime-helper"),s=e("lib/model"),o=e("lib/play-manager"),u=n.exports=s.extend(r,{setup:function(){this.listenTo(this,"destroy",this.pause)},getSourceInfo:function(){return{type:"single",resourceId:this.resource_id,resourceType:this.resource_type}},getSounds:function(){throw new Error("AudibleInterface::getSounds() method is not implemented.")},initAudio:function(){var e=this.getCurrentSound();e&amp;&amp;e.audio.initAudio()},isNowPlaying:function(){return o.getCurrentSound()===this},isPrivate:function(){return this.get("sharing")==="private"},isPublic:function(){return!this.isPrivate()},toggle:function(e){this[this.isPlaying()?"pause":"play"](e)},isPaused:function(){return!this.isPlaying()},seekRelative:function(e){this.seek(this.currentTime()+e)},duration:function(){return this.get("duration")},progress:function(){return this.currentTime()/this.duration()},timecode:function(){return i.timecode(this.currentTime())}})}),
define("lib/mobi-audio",["require","exports","module","underscore","lib/audiomanager","lib/integrations/promoted","lib/event-bus","vendor/event-logger/event-logger","vendor/scaudio/scaudio","lib/tracking/tracking-bus"],function(e,t,n){function p(e,t,n){var r=d(t),i;r&amp;&amp;(i={sound:e},e.trigger(r,i),this.triggerGlobalEvents&amp;&amp;o.trigger("audio:"+r,i),v(r,e,n));switch(t){case c.STREAMS:case c.NO_STREAMS:e.set("playable",!!this.streamInfo);break;case c.REGISTERED:s.trackEvent("play","context"),e.set("playback_count",e.get("playback_count")+1)}}function d(e){var t;switch(e){case c.PLAY:t="play-intent";break;case c.PLAY_START:t="play";break;case c.PAUSE:t="pause";break;case c.FINISH:t="finish";break;case c.SEEKED:t="seeked";break;case c.TIME:t="position"}return t}function v(e,t,n){if(l.indexOf(e)===-1)return;n=n||{};var r=t.id,i=t.duration()/1e3,s=n.userInitiated?"manual":"auto",o=t.getSourceInfo().type;f.audio(e,r,i,s,o)}var r=e("underscore"),i=e("lib/audiomanager"),s=e("lib/integrations/promoted"),o=e("lib/event-bus"),u=e("vendor/event-logger/event-logger"),a=e("vendor/scaudio/scaudio"),f=e("lib/tracking/tracking-bus"),l=["play","pause","finish"],c=a.Events,h=n.exports=a.extend({constructor:function(e,t){r.isUndefined(t)&amp;&amp;(t=!1),this.triggerGlobalEvents=!t;var n={soundId:e.resource_id,duration:e.duration.bind(e),registerEndpoint:e.registerUrl.bind(e),streamUrlsEndpoint:e.streamsUrl.bind(e),protocols:[a.Protocols.HTTP],asyncFetch:!1,debug:!1};a.prototype.constructor.call(this,i,n),this.on("all",p.bind(this,e),this)},logAudioPerformance:function(e){u.audioPerformance(e)}})}),
define("lib/mixins/models/data-dns-prefetcher",["require","exports","module","underscore","lib/helpers/dns-helper","lib/mixin"],function(e,t,n){var r=e("underscore"),i=e("lib/helpers/dns-helper"),s=e("lib/mixin"),o=n.exports=new s({before:{parse:function(e){i.lookup(r.compact(r.flatten([e.avatar_url,e.artwork_url,e.waveform_url,r.values(e.streams)])))}}})}),
define("lib/lingua",["require","exports","module","vendor/i18n/i18n","lib/persistent-store","lib/tracking/tracking-bus","config/locales/locale-pt_BR"],function(e,t,n){function h(e){var t=!1;return e.split("").map(function(e){return e==="&lt;"||e==="&gt;"?(t=e==="&lt;",e):t||!e.match(/[a-z]/i)?e:"*"}).join("")}function p(e){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var t=new RegExp("[\\?&amp;]"+e+"=([^&amp;#]*)"),n=t.exec(location.search);return n===null?"":decodeURIComponent(n[1].replace(/\+/g," "))}var r=e("vendor/i18n/i18n"),i=e("lib/persistent-store"),s=e("lib/tracking/tracking-bus"),o,u,a="locale",f=new i(a),l={en:{},pt_BR:e("config/locales/locale-pt_BR"),asterisk:{}},c=n.exports={defaultLocale:"en",locales:{en:"en",pt_BR:"pt_BR"},initialize:function(e){u=l[e]?e:this.defaultLocale,o=o||new r,o.setLocale(u),o.extend(l[u])},initializeFromUserSettings:function(){var e=p(a),t=f.get(a),n=e||t,r=this.getBrowserPrimaryLocale();this.initialize(n||r),!n&amp;&amp;r===this.locales.pt_BR&amp;&amp;s.action("submit","locale_used:pt_BR"),this.saveLocaleToUserSettings(),this.numberHelper=o.number,this.dateTimeHelper=o.dateTime},getBrowserPrimaryLocale:function(){var e=window.navigator,t=e.languages,n=e.userLanguage||t&amp;&amp;t[0]||e.language||"";n=n.replace(/-/g,"_").toLowerCase();switch(n){case"pt_br":n=this.locales.pt_BR;break;default:n=this.defaultLocale}return n},saveLocaleToUserSettings:function(e){f.set(a,e||u)},getLocale:function(){return u},t:function(e,t,n){var r=o.t(e,t,n);return u==="asterisk"?h(r):r},tp:function(e,t,n,r,i){var s=o.tp(e,t,n,r,i);return u==="asterisk"?h(s):s}}}),
define("type-of",["require","exports","module"],function(e,t,n){var r=Object.prototype.toString;n.exports=function(e){switch(r.call(e)){case"[object Date]":return"date";case"[object RegExp]":return"regexp";case"[object Arguments]":return"arguments";case"[object Array]":return"array";case"[object Error]":return"error"}return e===null?"null":e===undefined?"undefined":e!==e?"nan":e&amp;&amp;e.nodeType===1?"element":(e=e.valueOf?e.valueOf():Object.prototype.valueOf.apply(e),typeof e)}}),
define("indexof",["require","exports","module"],function(e,t,n){var r=[].indexOf;n.exports=function(e,t){if(r)return e.indexOf(t);for(var n=0;n&lt;e.length;++n)if(e[n]===t)return n;return-1}}),
define("lib/helpers/title-helper",["require","exports","module","lib/event-bus","lib/play-manager"],function(e,t,n){function c(e){e=e.sound||e,e.isPaused()&amp;&amp;a()}function h(e){u(e.sound||e)}var r=e("lib/event-bus"),i=e("lib/play-manager"),s="SoundCloud - Hear the worlds sounds",o,u,a,f=!1,l=n.exports={initialize:function(){f||(f=!0,r.on("audio:play",h).on("audio:pause",c))},deinitialize:function(){f&amp;&amp;(f=!1,r.off("audio:play",h).off("audio:pause",c))},set:function(e){o=e;var t=i.getCurrentSound(),n=!t||!t.isPlaying();n&amp;&amp;a()},update:function(){var e=i.getCurrentSound();e&amp;&amp;e.isPlaying()&amp;&amp;u(e)},_setTitle:function(e){document.title=e}};a=function(){l._setTitle((o?o+" on ":"")+s)},u=function(e){var t=e.getCurrentSound();t.has("title")&amp;&amp;t.has("user")?l._setTitle(["",t.get("title"),"by",t.get("user").username].join(" ")):t.fetch().done(function(){l._setTitle(["",t.get("title"),"by",t.get("user").username].join(" "))})}}),
define("lib/mixins/layouts/performance-measuring",["require","exports","module","lib/tracking/tracking-bus","lib/mixin"],function(e,t,n){function c(e,t,n){function o(){clearTimeout(i),clearTimeout(r)}function u(){e()&amp;&amp;(o(),n())}var r=setTimeout(o,t),i=setInterval(u,s);u()}var r=e("lib/tracking/tracking-bus"),i=e("lib/mixin"),s=50,o=15e3,u=window.performance&amp;&amp;window.performance.timing,a="fetchStart",f=!0,l=n.exports=u?new i({defaults:{performanceSelector:null},after:{render:function(){var e,t,n;if(!f)return;f=!1;if(e=this.performanceSelector)t=function(){return this.$(e).length}.bind(this),n=function(){var e=Date.now()-u[a];r.appLoad(e)},c(t,o,n)}}}):new i({})}),
define("views/footer/footer",["require","exports","module","lib/helpers/client-environment-helper","lib/event-bus","lib/helpers/firefoxos-helper","lib/views/loading","lib/lingua","lib/tracking/tracking-bus","lib/view","views/footer/footer.tmpl","views/footer/footer.css"],function(e,t,n){function h(e){(e.originalEvent||e).preventDefault();var t=u.getLocale()==="en"?"pt_BR":"en",n=new o({size:"fullscreen"});a.action("submit","locale_switched:"+t),u.saveLocaleToUserSettings(t),this.el.appendChild(n.render().el),setTimeout(function(){window.location.reload()},500)}var r=e("lib/helpers/client-environment-helper").device,i=e("lib/event-bus"),s=e("lib/helpers/firefoxos-helper"),o=e("lib/views/loading"),u=e("lib/lingua"),a=e("lib/tracking/tracking-bus"),f=e("lib/view"),l={en:"Switch to English",pt_BR:"Trocar para Portugus"},c=n.exports=f.extend({className:"footer",tagName:"footer",template:e("views/footer/footer.tmpl"),css:e("views/footer/footer.css"),defaults:{upsellText:""},states:{show:"show"},events:{"click .footerSwitchLink":h},setup:function(){this.listenTo(i,"layout:change",this.onLayoutChange),r.firefoxOS&amp;&amp;(this._upsellFirefoxOS=!1,s.isAppInstalled().fail(function(){this._upsellFirefoxOS=!0,this.rerender()}.bind(this)))},dispose:function(){this.stopListening(i,"layout:change",this.onLayoutChange)},onLayoutChange:function(){this.toggleState("show")},getTemplateData:function(e){var t=u.getLocale(),n=u.getBrowserPrimaryLocale();return e.shouldUpsell=r.hasNativeApp||this._upsellFirefoxOS,t==="pt_BR"?e.localeSwitchLink=l.en:n==="pt_BR"&amp;&amp;(e.localeSwitchLink=l.pt_BR),e}})}),
define("lib/subview-plugin",["require","exports","module","underscore","vendor/handlebars-runtime"],function(e,t,n){function u(t,n){var r=t.getAttribute("data-id"),i=s[r],o,u,a;i.__path?(u=e(i.__path),delete i.__path):(u=i.__class,delete i.__class),delete s[r],i.key&amp;&amp;(a=i.key,delete i.key),o=n.addSubview(new u(i),a),o.render(),t.parentNode.replaceChild(o.el,t)}function a(t,n){var u,a;return typeof t=="string"?(n.hash.__path=t,a=e(t)):(n.hash.__class=t,a=t),n.hash.args&amp;&amp;(r.isFunction(n.hash.args)&amp;&amp;(n.hash.args=n.hash.args(this)),n.hash=r.extend({},n.hash.args,n.hash)),delete n.hash.args,n.fn&amp;&amp;(n.hash.blockContent=new i.SafeString(n.fn(this))),n.hash.className&amp;&amp;(n.hash.className=[a.prototype.className,n.hash.className].filter(Boolean).join(" ")),u=o++,s[u]=n.hash,'&lt;view data-id="'+u+'"&gt;&lt;/view&gt;'}function f(e){e.$("view").each(function(){u(this,e)})}var r=e("underscore"),i=e("vendor/handlebars-runtime"),s={},o=0;t.handlebarHelper=a,t.replacePlaceholders=f}),
define("lib/template-helpers",["require","exports","module","underscore","lib/helpers/a11y-helper","lib/helpers/count-helper","vendor/handlebars-runtime","lib/helpers/i18n-helper","lib/helpers/image-helper","lib/lingua","router","lib/subview-plugin"],function(e,t,n){function p(e,t,n,r){return new o.SafeString(f.tp(t,n,e,r.hash,r.hash._comment))}function d(e,t){return new o.SafeString(f.tp(u.cleanBlockText(t.fn()),u.cleanBlockText(t.inverse()),e,t.hash,t.hash._comment))}function v(e,t){return new o.SafeString(f.t(e,t.hash,t.hash._comment))}function m(e){return new o.SafeString(f.t(u.cleanBlockText(e.fn()),e.hash,e.hash._comment))}var r=e("underscore"),i=e("lib/helpers/a11y-helper"),s=e("lib/helpers/count-helper"),o=e("vendor/handlebars-runtime"),u=e("lib/helpers/i18n-helper"),a=e("lib/helpers/image-helper"),f=e("lib/lingua"),l=e("router"),c=e("lib/subview-plugin"),h=n.exports={$a11y:function(e){return new o.SafeString(i.getAccessibleMarkup(e.hash))},$count:function(e,t){return s.render(e,t.hash)},$debug:function(){return""},$view:function(){return new o.SafeString(c.handlebarHelper.apply(this,arguments))},$image:function(e,t){return new o.SafeString(a.markup(e,t.hash))},$route:function(){var e=r.toArray(arguments).slice(0,-1);return l.getRoute.apply(l,e)},$t:function(){var e=arguments.length;if(e===2)return v.apply(this,arguments);if(e===1)return m.apply(this,arguments);throw new Error("Invalid signature to t helper, expected 1 or 2 arguments, got "+e)},$tp:function(){var e=arguments.length;if(e===4)return p.apply(null,arguments);if(e===2)return d.apply(null,arguments);throw new Error("Invalid signature to tp helper, expected 4 or 2 arguments, got: "+e)}}}),
define("views/header/header.css",["require","exports","module","css"],function(e,t,n,r){n.exports=r.stringToStyleElement(r.transform(".header{height:44px;box-shadow:0 0 2px 0 rgba(0,0,0,.5);background:#fff}.header__logo{background:url(https://m.soundcloud.com/assets/images/ldpi/logo-881c7ae2.png) 0 50% no-repeat;background-size:128px 16px;width:128px;height:44px;margin:0 auto;display:block}")),data=null}),
define("views/header/header.tmpl",["vendor/handlebars-runtime","views/header/search-button","views/search/search-box"],function(){return require("vendor/handlebars-runtime").template(function(e,t,n,r,i){this.compilerInfo=[4,"&gt;= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o=this.escapeExpression;return s+='&lt;a class="header__logo" href="'+o(n.$route.call(t,"root",{hash:{},data:i}))+'"&gt; '+o(n.$a11y.call(t,{hash:{screenreader:n.$t.call(t,"SoundCloud homepage",{hash:{},data:i})},data:i}))+"\n&lt;/a&gt; "+o(n.$view.call(t,"views/header/search-button",{hash:{key:"searchButton"},data:i}))+"\n"+o(n.$view.call(t,"views/search/search-box",{hash:{key:"searchBox"},data:i}))+"\n",s})}),
define("lib/helpers/firefoxos-helper",["require","exports","module","$"],function(e,t,n){var r=e("$"),i="https://m.soundcloud.com/manifest.webapp",s=n.exports={isAppInstalled:function(){var e=new r.Deferred,t=navigator.mozApps.checkInstalled(i);return t.onsuccess=function(){t.result?e.resolve(!0):e.reject(!1)},e},installApp:function(e){navigator.mozApps.install(i).onsuccess=e}}}),
define("lib/native-links",["require","exports","module","lib/helpers/client-environment-helper"],function(e,t,n){function y(){return r.iOS}function b(){return r.iOS?s:r.android?o:w()}function w(){return r.iOS?c:r.android?h:r.blackberry?v:r.amazon?m:r.firefoxOS?g:""}function E(e){var t="";return r.iOS?t=p:r.android&amp;&amp;(t=d),C(t,N(e))}function S(e){return C(a,N(e))}function x(e){return C(u,N(e))}function T(){var e="";switch(r.brand){case"iOS":e=C(u,f);break;case"android":e=C(a,l)}return e}function N(e){var t="",n=e.layout.getPageUrn();switch(r.brand){case"iOS":t=k(n);break;case"android":t=n}return t}function C(e,t){return e&amp;&amp;(e+="?deep_link="+(t||(r.android?"soundcloud://stream":"soundcloud:stream"))),e}function k(e){var t=e.split(":"),n=t[2],r=t[1],i="";switch(r){case"tracks":i="soundcloud://sounds:"+n;break;case"users":i="soundcloud://users:"+n;break;case"playlists":i="soundcloud://sets:"+n}return i}var r=e("lib/helpers/client-environment-helper").device,i="market://details?id=com.soundcloud.android&amp;referrer=utm_source%3Dsoundcloud%26Dutm_medium%3Dmobileweb",s="https://app.adjust.io/12ozk8?redirect=https%3A%2F%2Fitunes.apple.com%2Fus%2Fapp%2Fsoundcloud-music-audio%2Fid336353151%3Fmt%3D8%26uo%3D4%26at%3D11lPIB",o=i+"%26utm_campaign%3Ddownload_button_header",u="https://app.adjust.io/wua7pf",a="https://app.adjust.io/n8gynn",f="soundcloud:signin",l="soundcloud://signin",c="https://app.adjust.io/7rfiwt?redirect=https%3A%2F%2Fitunes.apple.com%2Fus%2Fapp%2Fsoundcloud-music-audio%2Fid336353151%3Fmt%3D8%26uo%3D4%26at%3D11lPIB",h=i+"%26utm_campaign%3Ddownload_button_footer",p="https://app.adjust.io/y4c1r7",d="https://app.adjust.io/padgq5",v="appworld://content/41097895",m="amzn://apps/android?asin=B004HXIZVC",g="https://marketplace.firefox.com/app/soundcloud";n.exports={getStoreLink:w,getStoreDeepLink:E,getUpsellLink:b,getAndroidDeepLink:S,getIOSDeepLink:x,getSigninDeepLink:T,useNativeDeeplinks:y}}),
define("lib/views/mixins/update-on-layout-change",["require","exports","module","config","lib/event-bus","lib/mixin"],function(e,t,n){function u(e){var t=e?"on":"off";i[t]("layout:change",a,this)}function a(){this.rerender()}var r=e("config"),i=e("lib/event-bus"),s=e("lib/mixin"),o=n.exports=new s({before:{setup:function(){u.call(this,!0)},dispose:function(){u.call(this,!1)}},around:{getTemplateData:function(e,t){var n=r.get("router").getLayoutInfo();return e.call(this,t,n)}}})}),
define("views/banner/upsell.css",["require","exports","module","css"],function(e,t,n,r){n.exports=r.stringToStyleElement(r.transform(".upsellBanner{background:#333;height:60px;position:relative;overflow:hidden;-webkit-transition:-webkit-transform .2s linear;transition:transform .2s linear}.upsellBanner.slideOut{-webkit-transform:translate3d(0,-54px,0);transform:translate3d(0,-54px,0)}.upsellBanner__button{position:absolute;left:10px;top:10px;float:left}.upsellBanner__close,.upsellBanner__close:hover,.upsellBanner__close:active,.upsellBanner__close:focus{margin-top:2px;background:url(https://m.soundcloud.com/assets/images/ldpi/interstitial/dismiss_button-9bb8d964.png) 0 0 no-repeat;width:29px;height:29px;background-size:29px 29px;position:absolute;right:10px;top:14px}")),data=null}),
define("views/banner/upsell.tmpl",["vendor/handlebars-runtime"],function(){return require("vendor/handlebars-runtime").template(function(e,t,n,r,i){this.compilerInfo=[4,"&gt;= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u="function",a=this.escapeExpression;return s+='&lt;a href="'+a((o=t&amp;&amp;t.url,typeof o===u?o.apply(t):o))+'" class="upsellBanner__button sc-button sc-button-large sc-button-cta g-touch-padding"&gt;'+a((o=t&amp;&amp;t.text,typeof o===u?o.apply(t):o))+'&lt;/a&gt;\n&lt;button class="upsellBanner__close g-button-nostyle g-touch-padding"&gt;'+a(n.$a11y.call(t,{hash:{screenreader:n.$t.call(t,"Close banner",{hash:{},data:i})},data:i}))+"&lt;/button&gt;\n",s})}),
define("views/play-controls/play-controls.css",["require","exports","module","css"],function(e,t,n,r){n.exports=r.stringToStyleElement(r.transform(".playControls{height:54px}.playControls__content{position:relative;padding:7px 10px;overflow:hidden;background:#333}.playControls__nowPlaying{margin:0 45px 0 0;display:block}.playControls__artwork{float:left;margin:0 10px 0 0}.playControls__username,.playControls__title{display:block}.playControls__username{font-size:12px;color:#999;line-height:19px}.playControls__title{font-size:14px;color:#fff;line-height:19px}.playControls__playPause{float:right;height:40px;width:40px;background:rgba(0,0,0,.25) url(https://m.soundcloud.com/assets/images/ldpi/player/mini_play_pause_button-6b8e48e4.png) 1px -38px no-repeat;background-size:100% auto;border:1px solid #fff;border-radius:40px;-webkit-transition:background-color .1s ease-in;transition:background-color .1s ease-in}.playControls.playing .playControls__playPause{background-position:0 0}.playControls__playPause:active{background-color:rgba(0,0,0,.5)}.playControls.playing .playControls__playIndicator{-webkit-transform:translate3d(0,-3px,0);transform:translate3d(0,-3px,0)}")),data=null}),
define("views/play-controls/play-controls.tmpl",["vendor/handlebars-runtime"],function(){return require("vendor/handlebars-runtime").template(function(e,t,n,r,i){function l(e,t){var r="",i;return r+='\n&lt;div class="playControls__content g-z-index-overlay"&gt; &lt;a role="button" class="playControls__playPause g-touch-padding sc-selection-disabled"&gt;'+u(n.$a11y.call(e,{hash:{screenreader:n.$t.call(e,"Play or pause track",{hash:{_comment:"Help text on a play button"},data:t})},data:t}))+'&lt;/a&gt; &lt;a class="playControls__nowPlaying" href="'+u(n.$route.call(e,"listen",e&amp;&amp;e.sound,{hash:{},data:t}))+'"&gt; '+u(n.$image.call(e,e&amp;&amp;e.sound,{hash:{size:40,"class":"playControls__artwork"},data:t}))+' &lt;span class="playControls__username sc-truncate"&gt;'+u((i=(i=(i=e&amp;&amp;e.sound,i==null||i===!1?i:i.user),i==null||i===!1?i:i.username),typeof i===a?i.apply(e):i))+'&lt;/span&gt; &lt;span class="playControls__title sc-truncate"&gt;'+u((i=(i=e&amp;&amp;e.sound,i==null||i===!1?i:i.title),typeof i===a?i.apply(e):i))+'&lt;/span&gt; &lt;/a&gt;\n&lt;/div&gt;\n&lt;div class="playControls__playIndicator g-z-index-banner g-play-indicator"&gt;&lt;/div&gt;\n',r}this.compilerInfo=[4,"&gt;= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u=this.escapeExpression,a="function",f=this;o=n["if"].call(t,t&amp;&amp;t.sound,{hash:{},inverse:f.noop,fn:f.program(1,l,i),data:i});if(o||o===0)s+=o;return s+="\n",s})}),
define("lib/gc-store",["require","exports","module","lib/store","lib/mixins/usage-counting"],function(e,t,n){var r=e("lib/store"),i=e("lib/mixins/usage-counting"),s=n.exports=r.extend();i.applyTo(s.prototype)}),
define("lib/helpers/datetime-helper",["require","exports","module","underscore","lib/lingua"],function(e,t,n){var r=e("underscore"),i=e("lib/lingua"),s=1e3,o=6e4,u=36e5,a={inWords:!1},f=n.exports={timecode:function(e,t){var n,f;return t=t||{},t=r.defaults(t,a),isNaN(e)?e:(n=[],f={h:Math.floor(e/u),m:Math.floor(e/o%60),s:Math.floor(e/s%60)},t.inWords?(f.h&gt;0&amp;&amp;n.push(i.tp("1 hour","%d hours",f.h)),f.m&gt;0&amp;&amp;n.push(i.tp("1 minute","%d minutes",f.m)),(f.s&gt;0||f.m===0&amp;&amp;f.h===0)&amp;&amp;n.push(i.tp("1 second","%d seconds",f.s)),n.join(" ")):(f.h&gt;0&amp;&amp;n.push(f.h),n.push(f.m&lt;10&amp;&amp;f.h&gt;0?"0"+f.m:f.m,f.s&lt;10?"0"+f.s:f.s),n.join(":")))}}}),
define("lib/audiomanager",["require","exports","module","vendor/audiomanager/audiomanager_mobile"],function(e,t,n){var r=e("vendor/audiomanager/audiomanager_mobile"),i=n.exports=new r({debug:!1});i.Errors=r.Errors,i.States=r.States}),
define("lib/integrations/promoted",["require","exports","module","underscore","config","lib/persistent-store","lib/url"],function(e,t,n){function h(e){var t=new Image;t.src=e}var r=e("underscore"),i=e("config"),s=e("lib/persistent-store"),o=e("lib/url"),u=new s("promoted-session","session"),a=new s("promoted-persistent"),f={impression:"impression",play:"sound_play",soundClickThrough:"sound_click",userClickThrough:"profile_click"},l={search:"/promoted/search/mobileweb"},c=n.exports={getAdUrl:function(e,t){return o.modify(i.get("promotedContentServer"),{path:l[e],query:r.extend({user_id:a.get("user_id"),session_id:u.get("session_id"),geo_id:u.get("geo_id"),access_token:i.get("promotedContentAccessToken"),user_urn:i.get("me").getUrn()},t)})},trackEvent:function(e,t){c.getTrackingUrls(e,t).forEach(h)},parseResponse:function(e){var t=r.first(e.promoted)||{};return t.session_id&amp;&amp;t.geo_id&amp;&amp;t.user_id?(u.set("session_id",t.session_id),u.set("geo_id",decodeURIComponent(t.geo_id)),a.set("user_id",t.user_id),t):{}},getTrackingUrls:function(e,t){var n=t&amp;&amp;t.tracking&amp;&amp;t.tracking[f[e]]||[];return r.isArray(n)?n:[n]}}}),
define("vendor/scaudio/scaudio",["require","exports","module"],function(e,t,n){(function(e,t){typeof n!="undefined"&amp;&amp;n.exports?n.exports=t():e.SCAudio=t()})(this,function(){var e,t,n;return function(r){function v(e,t){return h.call(e,t)}function m(e,t){var n,r,i,s,o,u,a,f,c,h,p,v=t&amp;&amp;t.split("/"),m=l.map,g=m&amp;&amp;m["*"]||{};if(e&amp;&amp;e.charAt(0)===".")if(t){v=v.slice(0,v.length-1),e=e.split("/"),o=e.length-1,l.nodeIdCompat&amp;&amp;d.test(e[o])&amp;&amp;(e[o]=e[o].replace(d,"")),e=v.concat(e);for(c=0;c&lt;e.length;c+=1){p=e[c];if(p===".")e.splice(c,1),c-=1;else if(p===".."){if(c===1&amp;&amp;(e[2]===".."||e[0]===".."))break;c&gt;0&amp;&amp;(e.splice(c-1,2),c-=2)}}e=e.join("/")}else e.indexOf("./")===0&amp;&amp;(e=e.substring(2));if((v||g)&amp;&amp;m){n=e.split("/");for(c=n.length;c&gt;0;c-=1){r=n.slice(0,c).join("/");if(v)for(h=v.length;h&gt;0;h-=1){i=m[v.slice(0,h).join("/")];if(i){i=i[r];if(i){s=i,u=c;break}}}if(s)break;!a&amp;&amp;g&amp;&amp;g[r]&amp;&amp;(a=g[r],f=c)}!s&amp;&amp;a&amp;&amp;(s=a,u=f),s&amp;&amp;(n.splice(0,u,s),e=n.join("/"))}return e}function g(e,t){return function(){return s.apply(r,p.call(arguments,0).concat([e,t]))}}function y(e){return function(t){return m(t,e)}}function b(e){return function(t){a[e]=t}}function w(e){if(v(f,e)){var t=f[e];delete f[e],c[e]=!0,i.apply(r,t)}if(!v(a,e)&amp;&amp;!v(c,e))throw new Error("No "+e);return a[e]}function E(e){var t,n=e?e.indexOf("!"):-1;return n&gt;-1&amp;&amp;(t=e.substring(0,n),e=e.substring(n+1,e.length)),[t,e]}function S(e){return function(){return l&amp;&amp;l.config&amp;&amp;l.config[e]||{}}}var i,s,o,u,a={},f={},l={},c={},h=Object.prototype.hasOwnProperty,p=[].slice,d=/\.js$/;o=function(e,t){var n,r=E(e),i=r[0];return e=r[1],i&amp;&amp;(i=m(i,t),n=w(i)),i?n&amp;&amp;n.normalize?e=n.normalize(e,y(t)):e=m(e,t):(e=m(e,t),r=E(e),i=r[0],e=r[1],i&amp;&amp;(n=w(i))),{f:i?i+"!"+e:e,n:e,pr:i,p:n}},u={require:function(e){return g(e)},exports:function(e){var t=a[e];return typeof t!="undefined"?t:a[e]={}},module:function(e){return{id:e,uri:"",exports:a[e],config:S(e)}}},i=function(e,t,n,i){var s,l,h,p,d,m=[],y=typeof n,E;i=i||e;if(y==="undefined"||y==="function"){t=!t.length&amp;&amp;n.length?["require","exports","module"]:t;for(d=0;d&lt;t.length;d+=1){p=o(t[d],i),l=p.f;if(l==="require")m[d]=u.require(e);else if(l==="exports")m[d]=u.exports(e),E=!0;else if(l==="module")s=m[d]=u.module(e);else if(v(a,l)||v(f,l)||v(c,l))m[d]=w(l);else{if(!p.p)throw new Error(e+" missing "+l);p.p.load(p.n,g(i,!0),b(l),{}),m[d]=a[l]}}h=n?n.apply(a[e],m):undefined;if(e)if(s&amp;&amp;s.exports!==r&amp;&amp;s.exports!==a[e])a[e]=s.exports;else if(h!==r||!E)a[e]=h}else e&amp;&amp;(a[e]=n)},e=t=s=function(e,t,n,a,f){if(typeof e=="string")return u[e]?u[e](t):w(o(e,t).f);if(!e.splice){l=e,l.deps&amp;&amp;s(l.deps,l.callback);if(!t)return;t.splice?(e=t,t=n,n=null):e=r}return t=t||function(){},typeof n=="function"&amp;&amp;(n=a,a=f),a?i(r,e,t,n):setTimeout(function(){i(r,e,t,n)},4),s},s.config=function(e){return s(e)},e._defined=a,n=function(e,t,n){t.splice||(n=t,t=[]),!v(a,e)&amp;&amp;!v(f,e)&amp;&amp;(f[e]=[e,t,n])},n.amd={jQuery:!0}}(),n("../vendor/almond/almond",function(){}),n("browser",["require","exports","module"],function(e,t,n){function s(e){return e.test(window.navigator.userAgent.toLowerCase())}function o(){return!a()&amp;&amp;s(/safari/)}function u(){return o()&amp;&amp;s(/version\/7\.1/)}function a(){return s(/chrome/)}function f(){try{return window.hasOwnProperty("Audio")&amp;&amp;!!(new window.Audio).canPlayType("audio/mpeg")}catch(e){return!1}}function l(){try{var e=o()&amp;&amp;s(/version\/5\.0/),t=window.hasOwnProperty("Audio")&amp;&amp;(!!(new window.Audio).canPlayType('audio/x-mpegURL; codecs="mp3"')||!!(new window.Audio).canPlayType('vnd.apple.mpegURL; codecs="mp3"'));return!e&amp;&amp;t}catch(n){return!1}}function c(){return p(h())&gt;=i}function h(){var e,t,n,r;if(typeof window.ActiveXObject!="undefined")try{r=new window.ActiveXObject("ShockwaveFlash.ShockwaveFlash"),r&amp;&amp;(e=r.GetVariable("$version"))}catch(i){}else window.navigator&amp;&amp;window.navigator.plugins&amp;&amp;window.navigator.plugins.length&gt;0&amp;&amp;(n="application/x-shockwave-flash",t=window.navigator.mimeTypes,t&amp;&amp;t[n]&amp;&amp;t[n].enabledPlugin&amp;&amp;t[n].enabledPlugin.description&amp;&amp;(e=t[n].enabledPlugin.description));return e}function p(e){if(!e)return 0;var t=e.match(/\d\S+/)[0].replace(/,/g,".").split(".");return parseFloat([t[0],t[1]].join("."))||0}var r,i=9;r=n.exports={isSafari:o,isSafari71:u,isChrome:a,supportsHLSAudio:l,supportsHTML5Audio:f,supportsFlash:c}}),n("utils",["require","exports","module"],function(e,t,n){var r=n.exports={extend:function(e){var t=Array.prototype.slice.call(arguments,1);return t.forEach(function(t){if(t)for(var n in t)t.hasOwnProperty(n)&amp;&amp;(e[n]=t[n])}),e},each:function(e,t,n){Object.keys(e).forEach(function(r){t.call(n||null,e[r],r)})},find:function(e,t,n){var r;return e.some(function(e){if(t.call(n,e))return r=e,!0}),r},has:function(e,t){return Object.keys(e).indexOf(t)&gt;-1},inherits:function(e,t){var n=this,i;e&amp;&amp;r.has(e,"constructor")?i=e.constructor:i=function(){return n.apply(this,arguments)},r.extend(i,n,t);var s=function(){this.constructor=i};return s.prototype=n.prototype,i.prototype=new s,e&amp;&amp;r.extend(i.prototype,e),i.__super__=n.prototype,i},without:function(e,t){var n=e.indexOf(t);n&gt;-1&amp;&amp;e.splice(n,1)},result:function(e){var t=e;return r.isFunction(t)&amp;&amp;(t=e()),t},isFunction:function(e){return typeof e=="function"},after:function(e,t){return function(){if(--e&lt;1)return t.apply(this,arguments)}},isNull:function(e){return e===null}}}),n("protocols",["require","exports","module"],function(e,t,n){var r=n.exports={HTTP:"http",RTMP:"rtmp",HLS:"hls"}}),n("stream-urls",["require","exports","module","protocols","utils"],function(e,t,n){function a(e,t){if(!e)return!1;var n=e.issuedAt+f(e.protocol,e.duration);return l(e.protocol)?Date.now()+e.duration-(t||0)&lt;n:Date.now()&lt;n}function f(e,t){var n=l(e);return u+(n?s.result(t):0)}function l(e){return e===i.HTTP||e===i.HLS}function c(e,t){function m(e,t){return Math.abs(t-r)-Math.abs(e-r)}function g(e){return e*-1}var n={},r=t.maxBitrate,i=t.protocols,o=t.extensions,u,a,f,l,c,h,p,d,v;s.each(e,function(e,t){var r=t.split("_"),i=r[0],s=r[1],o=r[2];n[i]=n[i]||{},n[i][s]=n[i][s]||{},n[i][s][o]=e});for(c=0,h=i.length;c&lt;h;++c){l=i[c];for(d=0,v=o.length;d&lt;v;++d){p=o[d];if(n[l]&amp;&amp;n[l][p])return u=Object.keys(n[l][p]).map(Number).sort(g),a=r===Infinity,f=r===-Infinity,a||f?r=u[a?"pop":"shift"]():r=u.sort(m).pop(),{url:n[l][p][r],bitrate:r,protocol:l,extension:p,issuedAt:Date.now(),duration:s.result(t.duration)}}}return null}var r,i=e("protocols"),s=e("utils"),o=.9,u=Math.floor(12e4*o);r=n.exports={choosePreferredStream:c,streamValidForPlayingFrom:a}}),n("events",["require","exports","module"],function(e,t,n){var r=n.exports={CREATED:"created",STATE_CHANGE:"state-change",DESTROYED:"destroyed",PLAY:"play",PLAY_START:"play-start",PLAY_RESUME:"play-resume",METADATA:"metadata",PAUSE:"pause",FINISH:"finish",RESET:"reset",SEEK:"seek",SEEKED:"seeked",GEO_BLOCKED:"geo_blocked",BUFFERRING_START:"buffering_start",BUFFERRING_END:"buffering_end",FLASH_NOT_LOADED:"flash_not_loaded",FLASH_BLOCK:"flash_blocked",FLASH_UNBLOCK:"flash_unblocked",AUDIO_ERROR:"audio_error",TIME:"time",NO_STREAMS:"no_streams",STREAMS:"streams",NO_PROTOCOL:"no_protocol",NO_CONNECTION:"no_connection",REGISTERED:"registered"}}),n("audio-logger",["require","exports","module","events"],function(e,t,n){function s(e){this.listenTime+=e.from-this.currentTime,this.currentTime=e.to}function o(e){this.listenTime+=e.position-this.currentTime,this.currentTime=e.position}function u(e){this.currentTime=e.position}var r,i=e("events");r=n.exports=function(e){this.scAudio=e,this.listenTime=0,this.currentTime=0,this.scAudio.on(i.SEEK,s,this).on(i.PLAY_START,u,this).on(i.PAUSE,o,this)},r.prototype={constructor:r,getListenTime:function(){return this.listenTime+this.scAudio.currentTime()-this.currentTime}}}),n("observable",["require","exports","module"],function(e,t,n){function i(e,t,n,i){if(!n)return!0;if(typeof n=="object")for(var s in n)n.hasOwnProperty(s)&amp;&amp;e[t].apply(e,[s,n[s]].concat(i));else{if(!r.test(n))return!0;var o=n.split(r);for(var u=0,a=o.length;u&lt;a;u++)e[t].apply(e,[o[u]].concat(i))}}function s(e,t){var n,r=-1,i=e.length;switch(t.length){case 0:while(++r&lt;i)n=e[r],n.callback.call(n.ctx);return;case 1:while(++r&lt;i)(n=e[r]).callback.call(n.ctx,t[0]);return;case 2:while(++r&lt;i)(n=e[r]).callback.call(n.ctx,t[0],t[1]);return;case 3:while(++r&lt;i)(n=e[r]).callback.call(n.ctx,t[0],t[1],t[2]);return;default:while(++r&lt;i)(n=e[r]).callback.apply(n.ctx,t)}}var r=/\s+/;n.exports={on:function(e,t,n){if(!i(this,"on",e,[t,n])||!t)return this;this._events||(this._events={});var r=this._events[e]||(this._events[e]=[]);return r.push({callback:t,context:n,ctx:n||this}),this},off:function(e,t,n){var r,s,o,u,a,f,l,c;if(!this._events||!i(this,"off",e,[t,n]))return this;if(!e&amp;&amp;!t&amp;&amp;!n)return this._events={},this;u=e?[e]:Object.keys(this._events);for(a=0,f=u.length;a&lt;f;a++){e=u[a];if(o=this._events[e]){this._events[e]=r=[];if(t||n)for(l=0,c=o.length;l&lt;c;l++)s=o[l],(t&amp;&amp;t!==s.callback&amp;&amp;t!==s.callback._callback||n&amp;&amp;n!==s.context)&amp;&amp;r.push(s);r.length||delete this._events[e]}}return this},trigger:function(e){if(!this._events)return this;var t=Array.prototype.slice.call(arguments,1);if(!i(this,"trigger",e,t))return this;var n=this._events[e],r=this._events.all;return n&amp;&amp;s(n,t),r&amp;&amp;s(r,arguments),this}}}),n("url",["require","exports","module"],function(e,t,n){var r=n.exports={getUrlParams:function(e){var t={},n=e.indexOf("?");return n&gt;-1&amp;&amp;e.substr(n+1).split("&amp;").forEach(function(e){var n=e.split("=");t[n[0]]=n[1]}),t},getUrlHost:function(e){var t=e.split("//"),n;return t[0]===e?n=t[0].split("/")[0]:n=t[1]?t[1].split("/")[0]:"",n}}}),n("audio-perf-monitor",["require","exports","module","events","observable","url","utils"],function(e,t,n){function a(e){return"AudioPerfMonitor ("+this.scAudio.getId()+") : "+e}function f(){if(!this.scAudio.controller){this.printWarning("Cant initialize when controller is null");return}if(this.controller){this.printWarning(a.call(this,"Setup was called while it was already initialized (returned with a no-op)"));return}this.scAudio.options.debug&amp;&amp;window.console.info(a.call(this,"Initialized for instance %s"),this.scAudio.getId()),this.controller=this.scAudio.controller,this.protocol=this.scAudio.streamInfo.protocol,this.host=o.getUrlHost(this.scAudio.streamInfo.url)}function l(){if(!this.controller){this.printWarning(a.call(this,"Reset was called while it was already de-initialized (returned with a no-op)"));return}this.scAudio.options.debug&amp;&amp;window.console.info(a.call(this,"Reset for instance %s"),this.scAudio.getId()),this.controller=null,this.protocol=null,this.host=null,this.timeToPlayMeasured=!1}function c(e){var t=this.scAudio.getAudioManagerStates();e===t.LOADING?this.timeToPlayMeasured&amp;&amp;y.call(this):u.isNull(this.bufferingStartTime)||b.call(this)}function h(){this.metadataLoadStartTime=Date.now()}function p(){if(u.isNull(this.metadataLoadStartTime)){this.printWarning(a.call(this,"onMetadataEnd was called without onMetadataStart being called before."));return}this.log({type:"metadata",latency:Date.now()-this.metadataLoadStartTime}),this.metadataLoadStartTime=null}function d(){this.playClickTime=Date.now()}function v(){if(this.timeToPlayMeasured)return;if(u.isNull(this.playClickTime)){this.printWarning(a.call(this,"onPlayResume was called without onPlayStart being called before."));return}this.log({type:"play",latency:Date.now()-this.playClickTime}),this.playClickTime=null,this.timeToPlayMeasured=!0}function m(){if(this.scAudio.isPaused())return;this.seekStartTime=Date.now()}function g(){if(this.scAudio.isPaused())return;if(u.isNull(this.seekStartTime)){this.printWarning(a.call(this,"onSeekEnd was called without onSeekStart being called before."));return}this.log({type:"seek",latency:Date.now()-this.seekStartTime}),this.seekStartTime=null}function y(){if(this.bufferingStartTime)return;this.bufferingStartTime=Date.now()}function b(){if(u.isNull(this.bufferingStartTime)){this.printWarning(a.call(this,"onBufferingEnd was called without onBufferingStart being called before."));return}w.call(this),this.bufferingStartTime=null}function w(){u.isNull(this.bufferingStartTime)||(u.isNull(this.bufferingTimeAccumulated)&amp;&amp;(this.bufferingTimeAccumulated=0),this.bufferingTimeAccumulated+=Date.now()-this.bufferingStartTime)}function E(){w.call(this);if(u.isNull(this.bufferingTimeAccumulated))return;this.log({type:"buffer",latency:this.bufferingTimeAccumulated}),this.bufferingStartTime=this.bufferingTimeAccumulated=null}var r,i=e("events"),s=e("observable"),o=e("url"),u=e("utils");r=n.exports=function(e,t){this.scAudio=e,this.logFn=t,this.controller=null,this.reset(),e.on(i.CREATED,f,this).on(i.RESET,l,this).on(i.DESTROYED,l,this).on(i.SEEK,m,this).on(i.SEEKED,g,this).on(i.PLAY,d,this).on(i.PLAY_START,h,this).on(i.PLAY_RESUME,v,this).on(i.PAUSE,E,this).on(i.FINISH,E,this).on(i.STATE_CHANGE,c,this).on(i.METADATA,p,this)},u.extend(r.prototype,s,{constructor:r,log:function(e){if(!this.controller){this.printWarning(a.call(this,"Monitor log was called while controller is null (returned with a no-op)"));return}u.extend(e,{protocol:this.protocol,host:this.host,playertype:this.controller.getType()}),this.scAudio.options.debug&amp;&amp;window.console.info(a.call(this,"%s latency: %d protocol: %s host: %s playertype: %s"),e.type,e.latency,e.protocol,e.host,e.playertype),this.logFn(e)},reset:function(){this.bufferingStartTime=this.bufferingTimeAccumulated=this.playClickTime=this.seekStartTime=this.metadataLoadStartTime=null,this.timeToPlayMeasured=!1},printWarning:function(e){this.scAudio.options.debug&amp;&amp;window.console.warn(e)}})}),n("extensions",["require","exports","module"],function(e,t,n){var r=n.exports={AAC:"aac",MP3:"mp3",OGG:"ogg",OPUS:"opus",WAV:"wav"}}),n("protocol-selector",["require","exports","module","protocols","browser"],function(e,t,n){function a(e){var t=!1;switch(e){case i.RTMP:t=s.supportsFlash();break;case i.HTTP:t=s.supportsHTML5Audio()||s.supportsFlash();break;case i.HLS:t=(o&amp;&amp;s.isSafari()||!o)&amp;&amp;(s.supportsHLSAudio()||u&amp;&amp;s.supportsFlash())}return t}var r,i=e("protocols"),s=e("browser"),o=!0,u=!1;r=n.exports={isProtocolSupported:a}}),n("scaudio",["require","exports","module","browser","utils","stream-urls","audio-logger","audio-perf-monitor","events","extensions","observable","protocols","protocol-selector"],function(e,t,n){function C(e){var t=this.options,n;return n={id:this.getId(),src:e.url,duration:s.result(t.duration),mimeType:e.mimeType,forceSingle:t.useSinglePlayer},d.createAudioPlayer(n)}function k(e,t){var n=t?"on":"off";e[n]("stateChange",W,this)[n]("positionChange",A,this)[n]("loadedmetadata",L,this)}function L(){this.trigger(f.METADATA)}function A(){this._prevPosition!==this.currentTime()&amp;&amp;(this.trigger(f.TIME),this._prevPosition=this.currentTime())}function O(){this._initAudioDefer&amp;&amp;(this._initAudioDefer.reject(),this._initAudioDefer=null,this.streamInfo=null)}function M(){O.call(this),this.controller&amp;&amp;(this._storedPosition=this.currentTime(),this.controller.kill(),this.controller=null,this.trigger(f.RESET))}function _(){this._registerPlays=!0,this.pause(),this.trigger(f.FINISH)}function D(){var e=$.Deferred();return this.streamInfo?e.resolve(this.streamInfo):P.call(this).done(function(t){var n=o.choosePreferredStream(t,this.options);n?e.resolve(n):(this.trigger(f.NO_PROTOCOL),this.options.debug&amp;&amp;window.console.warn(J("SCAudio (%s): Could not match a protocol of given media descriptor to one of the supported protocols ("+this.options.protocols+"), aborting attempt to play."),this.getId()),e.reject())}.bind(this)).fail(function(t){this.options.debug&amp;&amp;window.console.warn(J("Stream request failed with status: %d"),t.status),H.call(this,t),B.call(this,t),e.reject()}.bind(this)),e}function P(){if(this.options.streamUrls&amp;&amp;!this._usedPrefetchUrls){this._usedPrefetchUrls=!0;var e=typeof this.options.streamUrls=="function"?this.options.streamUrls():this.options.streamUrls;return $.Deferred().resolve(e)}return $.ajax({async:this.options.asyncFetch,dataType:"json",timeout:this.options.asyncFetch?b:y,url:s.result(this.options.streamUrlsEndpoint)})}function H(e){var t=e.status&gt;=400&amp;&amp;(e.responseText||"").indexOf("geo_blocked")!==-1;t&amp;&amp;this.trigger(f.GEO_BLOCKED)}function B(e){e.status===0&amp;&amp;this.trigger(f.NO_CONNECTION)}function j(e){return this._initAudioDefer&amp;&amp;this._initAudioDefer.state()==="resolved"&amp;&amp;o.streamValidForPlayingFrom(this.streamInfo,e)}function F(e){e&amp;&amp;!this._bufferingTimeout?this._bufferingTimeout=setTimeout(function(){this._isBuffering=!0,this.trigger(f.BUFFERRING_START)}.bind(this),w):e||(this._bufferingTimeout&amp;&amp;(clearTimeout(this._bufferingTimeout),this._bufferingTimeout=null),this._isBuffering&amp;&amp;(this._isBuffering=!1,this.trigger(f.BUFFERRING_END)))}function I(){this.off(f.TIME,this.seekTimeEventHandler),this.trigger(f.SEEKED),this.seekTimeEventHandler=null}function q(){this._errorRecoveryFlagsResetTimeout=setTimeout(function(){this._errorRecoveryTime=null,this._errorRecoveryCounts=0},T)}function R(){this._errorRecoveryFlagsResetTimeout&amp;&amp;clearTimeout(this._errorRecoveryFlagsResetTimeout)}function U(){var e,t=Date.now(),n=this.isPlaying(),r=d.Errors,i=function(){R.call(this);if(this._errorRecoveryTime&amp;&amp;this._errorRecoveryTime+S&gt;t&amp;&amp;this._errorRecoveryCounts&gt;x){this.trigger(f.AUDIO_ERROR,this);return}this._errorRecoveryTime=Date.now(),this._errorRecoveryCounts++,M.call(this),n&amp;&amp;this.play({seek:this.currentTime()})};if(!this.controller){this.options.debug&amp;&amp;window.console.error(J("SCAudio: controller is null, aborting error handler ("+this.getId()+")."),this),i.call(this);return}e=this.controller.getErrorID();switch(e){case r.FLASH_PROXY_CANT_LOAD_FLASH:this.trigger(f.FLASH_NOT_LOADED);break;case r.FLASH_PROXY_FLASH_BLOCKED:this.trigger(f.FLASH_BLOCK);break;case r.FLASH_RTMP_CONNECT_FAILED:s.without(this.options.protocols,h.RTMP);case r.FLASH_RTMP_CANNOT_PLAY_STREAM:case r.FLASH_RTMP_CONNECT_CLOSED:case r.HTML5_AUDIO_NETWORK:case r.HTML5_AUDIO_ABORTED:case r.HTML5_AUDIO_DECODE:case r.HTML5_AUDIO_SRC_NOT_SUPPORTED:case r.HTML5_AUDIO_ENDED_EARLY:i.call(this);break;case r.HTML5_AUDIO_OVERRUN:_.call(this);break;default:throw new Error("SCAudio: Unhandled audio error code: "+e)}this.options.debug&amp;&amp;typeof this.controller.getErrorMessage!="undefined"&amp;&amp;window.console.error(J("SCAudio error ("+this.getId+"): "+this.controller.getErrorMessage()),this)}function z(e){this.options.debug&amp;&amp;V.call(this,e);switch(e){case f.PAUSE:this._isPlaying=!1,this._isPlayActionQueued=!1;break;case f.PLAY:this._isPlaying=!1,this._isPlayActionQueued=!0;break;case f.PLAY_START:this._isPlaying=!0,this._isPlayActionQueued=!1,this._registerPlays&amp;&amp;this.registerPlay();break;case f.BUFFERRING_START:case f.SEEK:this._isPlaying&amp;&amp;(this._isPlaying=!1,this._isPlayActionQueued=!0);break;case f.BUFFERRING_END:case f.SEEKED:this._isPlayActionQueued&amp;&amp;(this._isPlaying=!0,this._isPlayActionQueued=!1)}}function W(e){var t=d.States,n=d.Errors;switch(e){case t.IDLE:this._initAudioDefer&amp;&amp;this._initAudioDefer.resolve(),this.controller.getErrorID()===n.FLASH_PROXY_FLASH_BLOCKED&amp;&amp;this.trigger(f.FLASH_UNBLOCK);break;case t.PAUSED:F.call(this,!1),this.seekTimeEventHandler&amp;&amp;this.isPaused()&amp;&amp;I.call(this);break;case t.PLAYING:F.call(this,!1),q.call(this),this.trigger(f.PLAY_RESUME);break;case t.LOADING:case t.SEEKING:F.call(this,!0);break;case t.ENDED:_.call(this);break;case t.ERROR:F.call(this,!1),U.call(this)}this.trigger(f.STATE_CHANGE,e)}function X(){i.isSafari71()&amp;&amp;(this.options.protocols=[h.HTTP,h.HLS,h.RTMP]),this.options.protocols=this.options.protocols.filter(p.isProtocolSupported)}function V(e){var t=window.console.log,n;e!==f.TIME?(n=[J("SCAudio event ("+this.getId()+"):")],n.push.apply(n,arguments),t.apply(window.console,n),this._loggedTime=!1):this._loggedTime||(t.call(window.console,J("SCAudio time (%s): %d ms"),this.getId(),this.currentTime()),this._loggedTime=!0)}function J(e){return(new Date).toString()+" | "+e}var r,i=e("browser"),s=e("utils"),o=e("stream-urls"),u=e("audio-logger"),a=e("audio-perf-monitor"),f=e("events"),l=e("extensions"),c=e("observable"),h=e("protocols"),p=e("protocol-selector"),d,v={},m={muted:!1,volume:1},g={soundId:v,duration:v,registerEndpoint:v,streamUrlsEndpoint:v,resourceId:!1,debug:!1,asyncFetch:!0,useSinglePlayer:!0,protocols:[h.HLS,h.RTMP,h.HTTP],extensions:[l.MP3],maxBitrate:Infinity},y=6e3,b=6e3,w=400,E=6e4,S=6e3,x=3,T=3e4,N=[];r=n.exports=function(e,t){arguments.length===1?t=e:r.setAudioManager(e);if(!d)throw new Error("SCAudio: AudioManager instance must be set with `SCAudio.setAudioManager()` or passed via the constructor");this.options=s.extend({},g,t);var n=Object.keys(this.options).filter(function(e){return this.options[e]===v},this);if(n.length)throw new Error("SCAudio: pass into constructor the following options: "+n.join(", "));X.call(this),this.controller=null,this.streamInfo=null,this._registerPlays=!0,this._registerCounts=this._errorRecoveryCounts=0,this._isPlayActionQueued=this._usedPrefetchUrls=this._isPlaying=this._isBuffering=!1,this._initAudioDefer=this._expirationTimeout=this._bufferingTimeout=this._errorRecoveryTime=this._errorRecoveryFlagsResetTimeout=this._storedPosition=this._prevPosition=null,t.debug&amp;&amp;(this._loggedTime=!1),this.on("all",z,this),this.audioPerfMonitor=new a(this,this.logAudioPerformance.bind(this)),this.audioLogger=new u(this)},s.extend(r.prototype,c,{constructor:r,initAudio:function(){return this._initAudioDefer||(this._initAudioDefer=$.Deferred(),D.call(this).done(function(e){var t=!0;this.streamInfo&amp;&amp;(t=!1),this.streamInfo=e,t&amp;&amp;this.trigger(f.STREAMS),this.controller=C.call(this,e),k.call(this,this.controller,!0),W.call(this,this.controller.getState())}.bind(this)).fail(function(){this.trigger(f.NO_STREAMS)}.bind(this)),this._initAudioDefer.done(function(){this.trigger(f.CREATED)}.bind(this))),this._initAudioDefer},registerPlay:function(){var e=this.options.soundId,t=!1;return N.indexOf(e)===-1&amp;&amp;(N.push(e),setTimeout(function(){var t=N.indexOf(e);t&gt;-1&amp;&amp;N.splice(t,1)},E),$.ajax({type:"POST",dataType:"json",statusCode:{429:$.noop},url:s.result(this.options.registerEndpoint)}),this._registerCounts++,this._registerPlays=!1,this.trigger(f.REGISTERED),t=!0),t},toggle:function(){this[this.isPaused()?"play":"pause"]()},play:function(e){var t=e&amp;&amp;e.seek!=null?e.seek:this.currentTime();e=s.extend({},e,{position:t}),this.trigger(f.PLAY,e),j.call(this,t)||M.call(this),this.initAudio().done(function(){this._isPlayActionQueued&amp;&amp;(this._storedPosition=null,this.trigger(f.PLAY_START,e),this.controller.play(t))}.bind(this)),F.call(this,!0)},pause:function(e){if(this.isPaused())return;e=s.extend({},e,{position:this.currentTime()}),this.trigger(f.PAUSE,e),this.controller&amp;&amp;this.controller.pause(),F.call(this,!1)},getListenTime:function(){return this.audioLogger?this.audioLogger.getListenTime():0},dispose:function(){this.audioLogger=null,this.audioPerfMonitor=null,this.off(),s.without(N,this.options.soundId),clearTimeout(this._bufferingTimeout),O.call(this),this.controller&amp;&amp;(this.controller.kill(),this.controller=null),delete this.controller,this.trigger(f.DESTROYED)},seek:function(e){if(!this.controller)return;if(e&gt;=s.result(this.options.duration)){_.call(this);return}this.seekTimeEventHandler&amp;&amp;this.off(f.TIME,this.seekTimeEventHandler),this.seekTimeEventHandler=s.after(2,function(){I.call(this)}.bind(this)),this.on(f.TIME,this.seekTimeEventHandler),this.trigger(f.SEEK,{from:this.currentTime(),to:e});if(this.isPlaying()&amp;&amp;!j.call(this,e)){M.call(this),this.play({seek:e});return}this.controller.seek(e)},seekRelative:function(e){this.controller&amp;&amp;this.seek(this.currentTime()+e)},currentTime:function(){return this._storedPosition?this._storedPosition:this.controller?this.controller.getCurrentPosition():0},loadProgress:function(){var e=0;return this.controller&amp;&amp;(e=this.controller.getLoadedPosition()/this.controller.getDuration(),e=e&gt;=.99?1:e),e},buffered:function(){return this.controller&amp;&amp;this.controller.getDuration()||0},isPaused:function(){return!this.isPlaying()},isBuffering:function(){return this._isBuffering},isPlaying:function(){return this._isPlayActionQueued||this._isPlaying},isLoading:function(){return!!this.controller&amp;&amp;this.controller.getState()===d.States.LOADING},toggleMute:function(e){r.toggleMute(e)},isMuted:function(){return r.isMuted()},setVolume:function(e){r.setVolume(e)},getVolume:function(){return r.getVolume()},logAudioPerformance:function(){},getAudioManagerStates:function(){return d.States},getId:function(){return this.options.resourceId||this.options.soundId}}),s.extend(r,{extend:s.inherits,getSettings:function(){return m},setSettings:function(e){s.extend(m,e)},setAudioManager:function(e){d=e,e&amp;&amp;(r.AudioManagerStates=e.States,this.toggleMute(m.muted),this.setVolume(m.volume))},toggleMute:function(e){m.muted=e===undefined?!m.muted:!!e,d&amp;&amp;d.setVolume(m.muted?0:1)},isMuted:function(){return m.muted},setVolume:function(e){m.volume=e===undefined?1:e,d&amp;&amp;d.setVolume(m.volume)},getVolume:function(){return m.volume},Extensions:l,Protocols:h,Events:f,BUFFER_DELAY:w,PLAY_REGISTRATION_TIMEOUT:E})}),t("scaudio")})}),
define("lib/helpers/dns-helper",["require","exports","module","lib/url"],function(e,t,n){var r=e("lib/url"),i=[],s=n.exports={lookup:function(e){var t=document.createDocumentFragment(),n;e=typeof e=="string"?[e]:e,e.length&amp;&amp;(e.forEach(function(e){n=r.parse(e).host;if(n&amp;&amp;i.indexOf(n)===-1){i.push(n);var s=document.createElement("link");s.rel="dns-prefetch",s.href="//"+n,t.appendChild(s)}}),t.childNodes.length&amp;&amp;document.head.appendChild(t))}}}),
define("vendor/i18n/i18n",["require","exports","module","./lib/datetime","./lib/number","./locales/en","./locales/pt_BR"],function(e,t,n){function h(e){this.phrases={},this.setLocale(e)}function p(){l=c[this.locale]||c[f],this.number=new i(l),this.dateTime=new r(l,this.number)}function d(e,t){return t?e.replace(u,function(e,n,r,i){var s=t[n||r||i];return r?a(s):s}):e}function v(e,t){return c[e].pluralForm(t)}function m(e){return Array.isArray(e)?e[0]:e.toString()}function g(e){var t,n;for(var r=1,i=arguments.length;r&lt;i;r++){t=arguments[r];for(n in t)Object.prototype.hasOwnProperty.call(t,n)&amp;&amp;(e[n]=t[n])}return e}function y(e){for(var t=1,n=arguments.length;t&lt;n;t++){var r=arguments[t];for(var i in r)e[i]===void 0&amp;&amp;(e[i]=r[i])}return e}var r=e("./lib/datetime"),i=e("./lib/number"),s="sclocale";n.exports=h;var o="[a-zA-Z0-9_]+",u=new RegExp("\\[\\[\\[("+o+")\\]\\]\\]|"+"\\[\\[("+o+")\\]\\]|"+"(%d)","g"),a,f="en",l,c={en:e("./locales/en"),pt_BR:e("./locales/pt_BR")};h.prototype.getLocaleCookieName=function(){return s},h.prototype.setLocale=function(e){this.locale=e,p.call(this)},h.prototype.setPhrases=function(e){this.phrases=e||{}},h.prototype.extend=function(e){g(this.phrases,e)},h.prototype.t=function(e,t,n,r){var i=(n?n+"::":"")+e,s=this.phrases[i]||this.phrases[e]||e;return d.call(this,m(s),t)},h.prototype.tp=function(e,t,n,r,i,s){var o=(i?i+"::":"")+e,u=this.phrases[o]||this.phrases[e],a=this.number.format(n);return u=u?u[v(this.locale,n)]:v("en",n)?t:e,d.call(this,m(u),y({"%d":a},r))},a=function(){function r(t){return e[t]||"&amp;"}var e={"&amp;":"&amp;","&lt;":"&lt;","&gt;":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},t=/[&amp;&lt;&gt;"'`]/g,n=/[&amp;&lt;&gt;"'`]/;return function(e){return!e&amp;&amp;e!==0?"":(e=""+e,n.test(e)?e.replace(t,r):e)}}()}),
define("config/locales/locale-pt_BR",["require","exports","module"],function(e,t,n){n.exports={"Something went wrong":"Ocorreu um erro","Take this track with you and enjoy the full SoundCloud experience with our free app.":"Ande por a com esta faixa e aproveite a experincia completa da SoundCloud com o nosso aplicativo grtis.","[[soundTitle]] by [[authorName]]":"[[soundTitle]] de [[authorName]]",Messages:"Mensagens","Take this playlist with you and enjoy the full SoundCloud experience with our free app.":"Obtenha esta faixa e aproveite uma experincia completa do SoundCloud com o nosso aplicativo grtis.","[[playlistTitle]] by [[authorName]]":"[[playlistTitle]] de [[authorName]]","Search tracks":"Procurar faixas","Search playlists":"Procurar playlists","Search people":"Procurar pessoas","Search groups":"Procurar grupos","Search [[category]]":"Procurar [[category]]","Unsubscribed successfully":"Inscrio cancelada com sucesso","Be the first to hear what [[username]] posts next with our free app.":"Seja o primeiro a ouvir o que [[username]] postar com o nosso aplicativo grtis.","[[username]]s stream":"Stream de [[username]]","1 hour":["1 hora","%d horas"],"1 minute":["1 minuto","%d minutos"],"1 second":["1 segundo","%d segundos"],"Enjoy the full SoundCloud experience with our app.":"Aproveite uma experincia completa da SoundCloud com o nosso aplicativo.","1 track":["1 faixa","%d faixas"],"1 play":["1 reproduo","%d reprodues"],"1 follower":["1 seguidor","%d seguidores"],"Download on the App Store":"Baixar na App Store","Get it on Google Play":"Baixar no Google Play","Get it at BlackBerry World":"Baixar no BlackBerry World","Available at Amazon":"Disponvel na Amazon","Get it in the Firefox Marketplace":"Baixar no Firefox Marketplace","Listen on SoundCloud Android":"Oua no app SoundCloud Android","Listen on SoundCloud iOS":"Oua no app SoundCloud iOS","Download our free app":"Baixe nosso aplicativo grtis","Close banner":"Fechar banner",Retry:"Tentar novamente","Sorry, something went wrong.":"Desculpe, ocorreu um erro.",Legal:"Legal",Privacy:"Privacidade",Cookies:"Cookies",Imprint:"Marca","SoundCloud homepage":"Pgina inicial da SoundCloud","Hear the world's sounds":"Oua os sons do mundo","Trending tracks on SoundCloud":"Faixas mais tocadas no SoundCloud","Messages are only&lt;br&gt; supported on desktop browsers.":"Mensagens so suportadas apenas&lt;br&gt; em navegadores desktop.","Pages may not display correctly &lt;br&gt;in mobile browsers.":"As pginas podem no ser exibidas corretamente &lt;br&gt;em navegadores mveis.","Go to Messages":"Ir para Mensagens","Find More. Play More.&lt;br&gt;Hear More.":"Encontre Mais. Toque Mais. &lt;br&gt;Oua Mais.","Download our app&lt;br&gt;for iPhone and iPad.":"Baixe nosso aplicativo &lt;br&gt;para iPhone e iPad.","Not got our app for&lt;br&gt;Android yet?":"Ainda no tem nosso aplicativo&lt;br&gt;para Android?","What are you waiting for?":"O que est esperando?","You have unsubscribed":"Voc cancelou sua inscrio","We're sorry to see you go":"Sentimos muito em v-lo ir","Review your email subscriptions at":"Rever suas inscries por email em","Play or pause track":"Tocar ou pausar faixa",All:"Todos",Tracks:"Faixas",Playlists:"Playlists",People:"Pessoas","Sorry, nothing matches your search":"Desculpe, no encontramos resultados para sua pesquisa",Cancel:"Cancelar","Search SoundCloud":"Procurar SoundCloud","Find people, tracks and playlists":"Ache pessoas, faixas e playlists","Reposted by [[username]]":"Republicado por [[username]]","Now Playing":"Tocando agora","Previous track":"Faixa anterior","Next track":"Prxima Faixa","We're sorry, track not available on mobile":"Desculpe, faixa no disponvel para dispositivo mvel",Spotlight:"Spotlight",Track:["Faixa","Faixas"],"Show more tracks":"Mostrar mais faixas",Playlist:["Playlist","Playlist"],"Show more playlists":"Mostrar mais playlists",Like:["Curtida","Curtidas"],"Show more likes":"Mostrar mais curtidas","Listen on our free app":"Oua no nosso app gratuito","Terms of use":"Termos de utilizao","Privacy policy":"Poltica de privacidade","Cookies policy":"Poltica de cookies","Company information":"Informaes sobre a empresa","Were sorry, there seems to be a problem here":"Desculpe, mas houve um problema","Please try refreshing the page":"Por favor tente atualizar a pgina","We cant find this page":"No conseguimos encontrar esta pgina","We cant find this sound":"No conseguimos encontrar esta faixa","We cant find this playlist":"No conseguimos encontrar esta playlist","We cant find this user":"No conseguimos encontrar este usurio"}}),
define("views/footer/footer.tmpl",["vendor/handlebars-runtime","views/app-buttons/app-buttons"],function(){return require("vendor/handlebars-runtime").template(function(e,t,n,r,i){function l(e,t){var r="",i;return r+=' &lt;div class="footer__appButtonContainer"&gt; &lt;p class="footer__appButtonText"&gt; '+a((i=(i=e&amp;&amp;e._options,i==null||i===!1?i:i.upsellText),typeof i===u?i.apply(e):i))+" &lt;/p&gt; "+a(n.$view.call(e,"views/app-buttons/app-buttons",{hash:{},data:t}))+" &lt;/div&gt;\n",r}function c(e,t){var n="",r;return n+=' &lt;br&gt;&lt;a role="button" class="footerSwitchLink" title="'+a((r=e&amp;&amp;e.localeSwitchLink,typeof r===u?r.apply(e):r))+'"&gt;'+a((r=e&amp;&amp;e.localeSwitchLink,typeof r===u?r.apply(e):r))+"&lt;/a&gt; ",n}this.compilerInfo=[4,"&gt;= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u="function",a=this.escapeExpression,f=this;o=n["if"].call(t,t&amp;&amp;t.shouldUpsell,{hash:{},inverse:f.noop,fn:f.program(1,l,i),data:i});if(o||o===0)s+=o;s+=' &lt;div class="footer__links g-font-12"&gt; &lt;a href="'+a(n.$route.call(t,"pages","terms-of-use",{hash:{},data:i}))+'" title="'+a(n.$t.call(t,"Terms of use",{hash:{},data:i}))+'"&gt;'+a(n.$t.call(t,"Legal",{hash:{},data:i}))+'&lt;/a&gt;&nbsp;- &lt;a href="'+a(n.$route.call(t,"pagesPages","privacy",{hash:{},data:i}))+'" title="'+a(n.$t.call(t,"Privacy policy",{hash:{},data:i}))+'"&gt;'+a(n.$t.call(t,"Privacy",{hash:{},data:i}))+'&lt;/a&gt;&nbsp;- &lt;a href="'+a(n.$route.call(t,"pagesPages","cookies",{hash:{},data:i}))+'" title="'+a(n.$t.call(t,"Cookies policy",{hash:{},data:i}))+'"&gt;'+a(n.$t.call(t,"Cookies",{hash:{},data:i}))+'&lt;/a&gt;&nbsp;- &lt;a href="'+a(n.$route.call(t,"pages","imprint",{hash:{},data:i}))+'" title="'+a(n.$t.call(t,"Company information",{hash:{},data:i}))+'"&gt;'+a(n.$t.call(t,"Imprint",{hash:{},data:i}))+'&lt;/a&gt;&nbsp;- &lt;a href="'+a(n.$route.call(t,"peopleDirectory",{hash:{},data:i}))+'" title="'+a(n.$t.call(t,"People Directory",{hash:{},data:i}))+'"&gt;'+a(n.$t.call(t,"Directory",{hash:{},data:i}))+"&lt;/a&gt; ",o=n["if"].call(t,t&amp;&amp;t.localeSwitchLink,{hash:{},inverse:f.noop,fn:f.program(3,c,i),data:i});if(o||o===0)s+=o;return s+="\n&lt;/div&gt;\n",s})}),
define("views/footer/footer.css",["require","exports","module","css"],function(e,t,n,r){n.exports=r.stringToStyleElement(r.transform(".footer{text-align:center;margin:28px 0 0;padding:0 0 18px;display:none}.footer.show{display:block}.app__displayMiniPlayer .footer{padding:0 0 78px}.footer__links,.footer__links a{color:#999}.footer__appButtonContainer{margin:0 25px 28px}.footer__appButtonText{color:#333;font-size:16px;text-align:center;margin:0 0 18px}.footerSwitchLink{font-weight:700}")),data=null}),
define("lib/helpers/a11y-helper",["require","exports","module","vendor/handlebars-runtime"],function(e,t,n){var r=e("vendor/handlebars-runtime"),i=n.exports={getAccessibleMarkup:function(e){return'&lt;span class="sc-visuallyhidden"&gt;'+r.Utils.escapeExpression(e.screenreader)+"&lt;/span&gt;"+(e.visible?'&lt;span aria-hidden="true"&gt;'+r.Utils.escapeExpression(e.visible)+"&lt;/span&gt;":"")}}}),
define("lib/helpers/count-helper",["require","exports","module","underscore","lib/lingua"],function(e,t,n){var r=e("underscore"),i=e("lib/lingua"),s;s={max:null,suffix:"+"};var o=n.exports={render:function(e,t){return t=t||{},r.defaults(t,s),t.max=t.max||e,e&gt;t.max?t.max+t.suffix:i.numberHelper.format(e)}}}),
define("lib/helpers/i18n-helper",["require","exports","module"],function(e,t,n){var r=/\r?\n/g,i=/\s+/g;n.exports={cleanBlockText:function(e){return e.trim().replace(r," ").replace(i," ")}}}),
define("lib/helpers/image-helper",["require","exports","module","$","underscore","lib/helpers/client-environment-helper","vendor/experiments/experiments","lib/helpers/name-helper","lib/support"],function(e,t,n){function y(e){var t,n,r;return c.lastIndex=0,t=e.replace(c,function(e,t,s,o){return i.find(d,function(e,t){if(e[1]===o)return n=t,!0}),r=t,s}),r?{index:n,key:parseInt(t,10),type:r}:null}function b(e,t){var n=i.find(d,function(e){return e[0]&gt;=t})||i.last(d);return n[1]==="t20x20"&amp;&amp;e==="artworks"?"tiny":n[1]}function w(e){c.lastIndex=0;var t=c.exec(e),n;return t&amp;&amp;(n=t[3].charCodeAt(0)%4+1,n!==1&amp;&amp;(e=e.replace("//i1.","//i"+n+"."))),e}function E(e){var t=y(e);t&amp;&amp;(p[t.type]||(p[t.type]={}),p[t.type][t.key]=p[t.type][t.key]|1&lt;&lt;t.index)}function S(e){var t=[];return e.background&amp;&amp;(delete e.alt,delete e.width),e.classList.length&amp;&amp;(e.class=e.classList.join(" ")),i.each(e,function(e,n){i.indexOf(v,n)!==-1&amp;&amp;t.push(n+'="'+e+'"')}),t.join(" ")}function x(e){e.classList.push("image__defer","g-transition-fade-out"),e["data-src"]=e.src,delete e.src}function T(e){e.classList.push("g-transition-fade g-transition-fade-out"),e.onload="(function() { this.classList.remove('g-transition-fade-out'); }.bind(this)())"}var r=e("$"),i=e("underscore"),s=e("lib/helpers/client-environment-helper").device,o=e("vendor/experiments/experiments"),u=e("lib/helpers/name-helper"),a=e("lib/support"),f,l=/default_avatar/,c=/^.*\/([a-z0-9]+)-0*([a-z0-9]+)-([a-z0-9]+)-([a-z0-9]+)\.jpg.*$/i,h=/\/images\/default\/.*?x[0-9]+(?:-[a-z0-9]+)?\.png$/,p={},d=[[20,"t20x20"],[50,"t50x50"],[120,"t120x120"],[200,"t200x200"],[500,"t500x500"]];o.get("mweb_listening","hocuspocus")==="hocuspocus"&amp;&amp;(s.dpi==="hdpi"?d=[[60,"t120x120"],[120,"t240x240"],[500,"t500x500"]]:d=[[60,"t60x60"],[120,"t120x120"],[500,"t500x500"]]);var v=["alt","class","height","src","title","width","data-src","onload"],m={cloud:{40:"https://m.soundcloud.com/assets/images/default/cloudx40-397e0b30.png",50:"https://m.soundcloud.com/assets/images/default/cloudx50-397e0b30.png",60:"https://m.soundcloud.com/assets/images/default/cloudx80-397e0b30.png",80:"https://m.soundcloud.com/assets/images/default/cloudx80-397e0b30.png",120:"https://m.soundcloud.com/assets/images/default/cloudx120-397e0b30.png",200:"https://m.soundcloud.com/assets/images/default/cloudx200-397e0b30.png"},group:{40:"https://m.soundcloud.com/assets/images/default/groupx40-397e0b30.png",50:"https://m.soundcloud.com/assets/images/default/groupx50-397e0b30.png",60:"https://m.soundcloud.com/assets/images/default/groupx80-397e0b30.png",80:"https://m.soundcloud.com/assets/images/default/groupx80-397e0b30.png",120:"https://m.soundcloud.com/assets/images/default/groupx120-397e0b30.png",200:"https://m.soundcloud.com/assets/images/default/groupx200-397e0b30.png"},user:{40:"https://m.soundcloud.com/assets/images/default/userx40-397e0b30.png",50:"https://m.soundcloud.com/assets/images/default/userx50-397e0b30.png",60:"https://m.soundcloud.com/assets/images/default/userx80-397e0b30.png",80:"https://m.soundcloud.com/assets/images/default/userx80-397e0b30.png",120:"https://m.soundcloud.com/assets/images/default/userx120-397e0b30.png",200:"https://m.soundcloud.com/assets/images/default/userx200-397e0b30.png"}},g=n.exports={load:function(e){var t=new Image,n=r.Deferred();return a.corsImg&amp;&amp;(t.crossOrigin=location.host,e+="?xd=true"),r(t).on("load",function(){n.resolve(this)}).on("error",function(){n.reject(this)}),t.src=e,n},markup:function(e,t){return t.size==="fill"&amp;&amp;(t.fill=!0,t.size="100%"),i.defaults(t,{src:g.urlFrom(e,t.size),width:t.size,height:t.size,alt:g.getAltText(e)}),E(t.src),t.classList=t.class?t.class.split(" "):[],t.fill&amp;&amp;delete t.height,t.defer&amp;&amp;x(t),t.fade&amp;&amp;T(t),g.getMarkup(t)},getMarkup:function(e){var t;return e.fill?e.fill&amp;&amp;(t='&lt;div class="g-image-fill"&gt;&lt;img '+S(e)+"&gt;&lt;/div&gt;"):t="&lt;img "+S(e)+"&gt;",t},getAltText:function(e){return e.username?u.get(e,!0)+" avatar":u.get(e)},getPlaceholderUrl:function(e,t){var n,r,s,o,u;s=y(g.setFormat(e,t));if(s){n=s.key,p[s.type]||(p[s.type]={});if(p[s.type][n]){r=i.find(d,function(e,n){return u=n,t&lt;=e[0]});while(u&gt;=0){if(p[s.type][n]&amp;Math.pow(2,u)){o=d[u];break}--u}}if(r&amp;&amp;o===r)return!1;if(o)return g.setFormat(e,o[0])}return null},urlFrom:function(e,t){var n=e&amp;&amp;(e.artwork_url||e.avatar_url||e.user&amp;&amp;e.user.avatar_url)||"";return g.isDefaultImage(n)?g.getDefaultImage(e.kind,t):(n=w(n),t?g.setFormat(n,t):n)},isDefaultImage:function(e){return!e||l.test(e)},getDefaultImage:function(e,t){return(m[e]||m.cloud)[f(t)]},setFormat:function(e,t){if(h.test(e))return e.replace(/[0-9]+((?:-[a-z0-9]+)?\.png)$/,f(t)+"$1");c.lastIndex=0;var n=c.exec(e);if(n){var r=n[1],i=n[4],s=b(r,t);return s?e.replace(i,s):e}return e},fadeInBackground:function(e,t){return g.load(e).done(function(){t.style.backgroundImage="url("+e+" )",t.classList.remove("g-transition-fade-out")})}};f=function(){var e=Object.keys(m.cloud),t;return e.sort(function(e,t){return e-t}),t=i.last(e),i.memoize(function(n){var r,i;for(r=0;i=e[r];++r)if(i&gt;=n)return i;return t})}()}),
define("views/header/search-button",["require","exports","module","lib/tracking/tracking-bus","lib/view","views/header/search-button.css"],function(e,t,n){function o(){this.bubble("searchButton:click"),r.action("show","search:prompt")}var r=e("lib/tracking/tracking-bus"),i=e("lib/view"),s=n.exports=i.extend({template:function(){return"Search"},tagName:"button",css:e("views/header/search-button.css"),className:"searchButton g-touch-padding g-button-nostyle",states:{initiate:"initiate"},events:{click:o},renderDecorate:function(){this.whenInserted().done(function(){this.toggleState("initiate")}.bind(this))}})}),
define("views/search/search-box",["require","exports","module","config","lib/event-bus","lib/views/mixins/form","views/search/suggestions-overlay","views/search/suggestions-list","lib/tracking/tracking-bus","lib/view","lib/url","views/search/search-box.tmpl","views/search/search-box.css"],function(e,t,n){function h(){this.toggleState("open",!1),g.call(this)}function p(){var e=this.getElement("input")[0];e.value="",e.setAttribute("value",""),e.focus()}function d(){var e=this.getElement("input")[0].value,t;this.toggleState("filled",!!e.length),t=this.getState("filled"),t?m.call(this,e):!t&amp;&amp;this.suggestionsOverlay&amp;&amp;g.call(this)}function v(){return l.parse(window.location.href).path.indexOf("search")===1}function m(e){if(v())return;var t=!0;this.suggestionsOverlay&amp;&amp;(this.suggestionsOverlay.close(),t=!1,delete this.suggestionsOverlay),this.suggestionsOverlay=new o({Subview:u,subviewArgs:{query:e,maxDisplay:10},showHeader:!0,animate:t}),this.suggestionsOverlay.open()}function g(){this.suggestionsOverlay&amp;&amp;(this.suggestionsOverlay.close(),delete this.suggestionsOverlay)}var r=e("config"),i=e("lib/event-bus"),s=e("lib/views/mixins/form"),o=e("views/search/suggestions-overlay"),u=e("views/search/suggestions-list"),a=e("lib/tracking/tracking-bus"),f=e("lib/view"),l=e("lib/url"),c=n.exports=f.extend(s,{template:e("views/search/search-box.tmpl"),css:e("views/search/search-box.css"),className:"searchBox g-z-index-overlay",events:{"click .searchBox__searchCancel":h,"click .searchBox__searchEmpty":p,"keyup .searchBox__searchInput":d,"focus .searchBox__searchInput":d},element2selector:{input:".searchBox__searchInput"},states:{open:function(e){this.$el.toggleClass("open",e),e&amp;&amp;this.getElement("input")[0].focus()}},setup:function(){this.listenTo(i,"layout:change",this.rerender),this.listenTo(i,"suggestion-item:click",this.rerender)},dispose:function(){this.stopListening()},renderDecorate:function(){this.toggleState("open",v()),d.call(this)},onSubmit:function(){var e=this.getElement("input")[0],t=e.value.trim(),n=r.get("router"),i;g.call(this),t.length&amp;&amp;(a.action("submit","search:submit"),e.blur(),i=n.getLayoutInfo().args.category||"",n.navigateToRoute("search",[i,t],{trigger:!0}))},onReset:function(){this.getElement("input")[0].focus()},getTemplateData:function(e){var t=l.parse(window.location.href),n=t.query.q;e.needsCancel=!v(),e.q=n}})}),
define("lib/mixins/usage-counting",["require","exports","module","lib/mixin"],function(e,t,n){var r=e("lib/mixin"),i=n.exports=new r({onCleanup:null,onIncrement:null,onDecrement:null,after:{initialize:function(e){this._counts={},this._needsGC=!1,e=e||{},this._autoCleanup=!!e.autoCleanup,this.onCleanup=e.onCleanup,this.onIncrement=e.onIncrement,this.onDecrement=e.onDecrement},reset:function(){this._counts={},this._needsGC=!1},set:function(e,t){this._counts[e]||(this._counts[e]=1,this.onIncrement&amp;&amp;this.onIncrement(t,e,1))},unset:function(e){delete this._counts[e]}},before:{reset:function(){this.onCleanup&amp;&amp;this.forEach(this.onCleanup)}},countFor:function(e){return this._counts[e]||0},increment:function(e,t){return this.has(e)&amp;&amp;(t=typeof t=="number"?t:1,t&gt;0?(this._counts[e]=(this._counts[e]||0)+t,this.onIncrement&amp;&amp;this.onIncrement(this.get(e),e,t)):t&lt;0&amp;&amp;this.decrement(e,-t)),this},decrement:function(e,t){return this.has(e)&amp;&amp;(t=typeof t=="number"?t:1,t&gt;0?(this._counts[e]=(this._counts[e]||1)-t,this.onDecrement&amp;&amp;this.onDecrement(this.get(e),e,t),this._counts[e]&lt;=0&amp;&amp;(this._needsGC=!0,this._autoCleanup&amp;&amp;this.cleanup())):t&lt;0&amp;&amp;this.increment(e,-t)),this},cleanup:function(){var e,t=this.onCleanup;if(this._needsGC){for(e in this._counts)this._counts.hasOwnProperty(e)&amp;&amp;this._counts[e]===0&amp;&amp;(t&amp;&amp;t(this.get(e),e),this.unset(e));this._needsGC=!1}},changeKey:function(e,t){if(e===t)return;var n=this.get(e),r=this.countFor(e);this.unset(e),this.set(t,n),this.increment(t,r-1)}})}),
define("vendor/audiomanager/audiomanager_mobile",["require","exports","module"],function(e,t,n){(function(e,t){typeof n!="undefined"&amp;&amp;n.exports?n.exports=t():e.AudioManager=t()})(this,function(){var e,t,n;return function(r){function d(e,t){return h.call(e,t)}function v(e,t){var n,r,i,s,o,u,a,f,c,h,p=t&amp;&amp;t.split("/"),d=l.map,v=d&amp;&amp;d["*"]||{};if(e&amp;&amp;e.charAt(0)===".")if(t){p=p.slice(0,p.length-1),e=p.concat(e.split("/"));for(f=0;f&lt;e.length;f+=1){h=e[f];if(h===".")e.splice(f,1),f-=1;else if(h===".."){if(f===1&amp;&amp;(e[2]===".."||e[0]===".."))break;f&gt;0&amp;&amp;(e.splice(f-1,2),f-=2)}}e=e.join("/")}else e.indexOf("./")===0&amp;&amp;(e=e.substring(2));if((p||v)&amp;&amp;d){n=e.split("/");for(f=n.length;f&gt;0;f-=1){r=n.slice(0,f).join("/");if(p)for(c=p.length;c&gt;0;c-=1){i=d[p.slice(0,c).join("/")];if(i){i=i[r];if(i){s=i,o=f;break}}}if(s)break;!u&amp;&amp;v&amp;&amp;v[r]&amp;&amp;(u=v[r],a=f)}!s&amp;&amp;u&amp;&amp;(s=u,o=a),s&amp;&amp;(n.splice(0,o,s),e=n.join("/"))}return e}function m(e,t){return function(){return s.apply(r,p.call(arguments,0).concat([e,t]))}}function g(e){return function(t){return v(t,e)}}function y(e){return function(t){a[e]=t}}function b(e){if(d(f,e)){var t=f[e];delete f[e],c[e]=!0,i.apply(r,t)}if(!d(a,e)&amp;&amp;!d(c,e))throw new Error("No "+e);return a[e]}function w(e){var t,n=e?e.indexOf("!"):-1;return n&gt;-1&amp;&amp;(t=e.substring(0,n),e=e.substring(n+1,e.length)),[t,e]}function E(e){return function(){return l&amp;&amp;l.config&amp;&amp;l.config[e]||{}}}var i,s,o,u,a={},f={},l={},c={},h=Object.prototype.hasOwnProperty,p=[].slice;o=function(e,t){var n,r=w(e),i=r[0];return e=r[1],i&amp;&amp;(i=v(i,t),n=b(i)),i?n&amp;&amp;n.normalize?e=n.normalize(e,g(t)):e=v(e,t):(e=v(e,t),r=w(e),i=r[0],e=r[1],i&amp;&amp;(n=b(i))),{f:i?i+"!"+e:e,n:e,pr:i,p:n}},u={require:function(e){return m(e)},exports:function(e){var t=a[e];return typeof t!="undefined"?t:a[e]={}},module:function(e){return{id:e,uri:"",exports:a[e],config:E(e)}}},i=function(e,t,n,i){var s,l,h,p,v,g=[],w;i=i||e;if(typeof n=="function"){t=!t.length&amp;&amp;n.length?["require","exports","module"]:t;for(v=0;v&lt;t.length;v+=1){p=o(t[v],i),l=p.f;if(l==="require")g[v]=u.require(e);else if(l==="exports")g[v]=u.exports(e),w=!0;else if(l==="module")s=g[v]=u.module(e);else if(d(a,l)||d(f,l)||d(c,l))g[v]=b(l);else{if(!p.p)throw new Error(e+" missing "+l);p.p.load(p.n,m(i,!0),y(l),{}),g[v]=a[l]}}h=n.apply(a[e],g);if(e)if(s&amp;&amp;s.exports!==r&amp;&amp;s.exports!==a[e])a[e]=s.exports;else if(h!==r||!w)a[e]=h}else e&amp;&amp;(a[e]=n)},e=t=s=function(e,t,n,a,f){return typeof e=="string"?u[e]?u[e](t):b(o(e,t).f):(e.splice||(l=e,t.splice?(e=t,t=n,n=null):e=r),t=t||function(){},typeof n=="function"&amp;&amp;(n=a,a=f),a?i(r,e,t,n):setTimeout(function(){i(r,e,t,n)},4),s)},s.config=function(e){return l=e,l.deps&amp;&amp;s(l.deps,l.callback),s},n=function(e,t,n){t.splice||(n=t,t=[]),!d(a,e)&amp;&amp;!d(f,e)&amp;&amp;(f[e]=[e,t,n])},n.amd={jQuery:!0}}(),n("vendor/almond",function(){}),!function(e){function t(e,t,n){if(!e||!O[typeof e])return e;t=t&amp;&amp;typeof n=="undefined"?t:u.createCallback(t,n);var r=e.length;if(n=-1,r&amp;&amp;l(e))for(;++n&lt;r&amp;&amp;(n+="",!1!==t(e[n],n,e)););else for(n in r=typeof e=="function",e)if((!r||"prototype"!=n)&amp;&amp;!1===t(e[n],n,e))break;return e}function r(e,t,n){var r,i=e,s=i;if(!i)return s;var o=arguments,a=0,f=typeof n=="number"?2:o.length;if(3&lt;f&amp;&amp;"function"==typeof o[f-2])var c=u.createCallback(o[--f-1],o[f--],2);else 2&lt;f&amp;&amp;"function"==typeof o[f-1]&amp;&amp;(c=o[--f]);for(;++a&lt;f;)if((i=o[a])&amp;&amp;O[typeof i]){var h=i.length;if(r=-1,h&amp;&amp;l(i))for(;++r&lt;h;)r+="",s[r]=c?c(s[r],i[r]):i[r];else for(r in h=typeof i=="function",i)h&amp;&amp;"prototype"==r||!B.call(i,r)||(s[r]=c?c(s[r],i[r]):i[r])}return s}function i(e){var t,n=[];if(!e||!O[typeof e])return n;var r=e.length;if(t=-1,r&amp;&amp;l(e))for(;++t&lt;r;)t+="",n.push(t);else for(t in r=typeof e=="function",e)r&amp;&amp;"prototype"==t||!B.call(e,t)||n.push(t);return n}function s(){}function o(e){e.length=0,y.length&lt;E&amp;&amp;y.push(e)}function u(){}function a(e,t,n){function r(){var a=arguments,l=s?this:t;return i||(e=t[o]),n.length&amp;&amp;(a=a.length?(a=z.call(a),u?a.concat(n):n.concat(a)):n),this instanceof r?(l=f(e.prototype),a=e.apply(l,a),d(a)?a:l):e.apply(l,a)}var i=p(e),s=!n,o=t;if(s){var u=void 0;n=t}else if(!i)throw new TypeError;return r}function f(e){return d(e)?q(e):{}}function l(e){return F.call(e)==S}function c(e){var n=[];return t(e,function(e,t){p(e)&amp;&amp;n.push(t)}),n.sort()}function h(e,n,r,i,s,a){var f=r===w;if(typeof r=="function"&amp;&amp;!f){r=u.createCallback(r,i,2);var l=r(e,n);if(typeof l!="undefined")return!!l}if(e===n)return 0!==e||1/e==1/n;var c=typeof e,d=typeof n;if(e===e&amp;&amp;(!e||"function"!=c&amp;&amp;"object"!=c)&amp;&amp;(!n||"function"!=d&amp;&amp;"object"!=d))return!1;if(null==e||null==n)return e===n;if(d=F.call(e),c=F.call(n),d==S&amp;&amp;(d=k),c==S&amp;&amp;(c=k),d!=c)return!1;switch(d){case T:case N:return+e==+n;case C:return e!=+e?n!=+n:0==e?1/e==1/n:e==+n;case L:case A:return e==n+""}if(c=d==x,!c){if(B.call(e,"__wrapped__")||B.call(n,"__wrapped__"))return h(e.__wrapped__||e,n.__wrapped__||n,r,i,s,a);if(d!=k)return!1;var d=e.constructor,v=n.constructor;if(d!=v&amp;&amp;!(p(d)&amp;&amp;d instanceof d&amp;&amp;p(v)&amp;&amp;v instanceof v))return!1}for(v=!s,s||(s=y.pop()||[]),a||(a=y.pop()||[]),d=s.length;d--;)if(s[d]==e)return a[d]==n;var m=0,l=!0;if(s.push(e),a.push(n),c){if(d=e.length,m=n.length,l=m==e.length,!l&amp;&amp;!f)return l;for(;m--;)if(c=d,v=n[m],f)for(;c--&amp;&amp;!(l=h(e[c],v,r,i,s,a)););else if(!(l=h(e[m],v,r,i,s,a)))break;return l}return t(n,function(t,n,o){return B.call(o,n)?(m++,l=B.call(e,n)&amp;&amp;h(e[n],t,r,i,s,a)):void 0}),l&amp;&amp;!f&amp;&amp;t(e,function(e,t,n){return B.call(n,t)?l=-1&lt;--m:void 0}),v&amp;&amp;(o(s),o(a)),l}function p(e){return typeof e=="function"}function d(e){return!!e&amp;&amp;!!O[typeof e]}function v(e,t,n){if(t&amp;&amp;typeof n=="undefined"&amp;&amp;X(e)){n=-1;for(var r=e.length;++n&lt;r&amp;&amp;!1!==t(e[n],n,e););}else if(e)if(t=t&amp;&amp;typeof n=="undefined"?t:u.createCallback(t,n),r=e.length,n=-1,typeof r=="number")for(;++n&lt;r&amp;&amp;!1!==t(e[n],n,e););else for(n in r=typeof e=="function",e)if((!r||"prototype"!=n)&amp;&amp;B.call(e,n)&amp;&amp;!1===t(e[n],n,e))break;return e}function m(e,t){return W.fastBind||I&amp;&amp;2&lt;arguments.length?I.call.apply(I,arguments):a(e,t,z.call(arguments,2))}function g(e){return e}var y=[],b=0,w={},E=40,S="[object Arguments]",x="[object Array]",T="[object Boolean]",N="[object Date]",C="[object Number]",k="[object Object]",L="[object RegExp]",A="[object String]",O={"boolean":!1,"function":!0,object:!0,number:!1,string:!1,"undefined":!1},M=O[typeof global]&amp;&global;!M||M.global!==M&amp;&amp;M.window!==M||(e=M);var _=[],M=Error.prototype,D=Object.prototype,P=RegExp("^"+(D.valueOf+"").replace(/[.*+?^${}()|[\]\\]/g,"\\$&amp;").replace(/valueOf|for [^\]]+/g,".+?")+"$"),H=_.concat,B=D.hasOwnProperty,j=D.propertyIsEnumerable,F=D.toString,I=P.test(I=F.bind)&amp;&amp;I,q=P.test(q=Object.create)&amp;&amp;q,R=P.test(R=Array.isArray)&amp;&amp;R,U=P.test(U=Object.keys)&amp;&amp;U,z=_.slice;e=P.test(e.attachEvent),e=I&amp;&amp;!/\n|true/.test(I+e);var W=u.support={};W.enumErrorProps=j.call(M,"message")||j.call(M,"name"),W.enumPrototypes=!0,W.fastBind=I&amp;&amp;!e,W.nonEnumArgs=!0,q||(f=function(e){if(d(e)){s.prototype=e;var t=new s;s.prototype=null}return t||{}});var X=R||function(e){return e?typeof e=="object"&amp;&amp;F.call(e)==x:!1},V=U?function(e){return d(e)?W.enumPrototypes&amp;&amp;typeof e=="function"||W.nonEnumArgs&amp;&amp;e.length&amp;&amp;l(e)?i(e):U(e):[]}:i;p(/x/)&amp;&amp;(p=function(e){return typeof e=="function"&amp;&amp;"[object Function]"==F.call(e)}),u.assign=r,u.bind=m,u.bindAll=function(e){for(var t=1&lt;arguments.length?H.apply(_,z.call(arguments,1)):c(e),n=-1,r=t.length;++n&lt;r;){var i=t[n];e[i]=m(e[i],e)}return e},u.createCallback=function(e,t,n){if(null==e)return g;var r=typeof e;if("function"!=r){if("object"!=r)return function(t){return t[e]};var i=V(e);return function(t){for(var n=i.length,r=!1;n--&amp;&amp;(r=h(t[i[n]],e[i[n]],w)););return r}}return typeof t=="undefined"?e:1===n?function(n){return e.call(t,n)}:2===n?function(n,r){return e.call(t,n,r)}:4===n?function(n,r,i,s){return e.call(t,n,r,i,s)}:function(n,r,i){return e.call(t,n,r,i)}},u.defaults=function(e,t,n){var r,i=e,s=i;if(!i)return s;for(var o=arguments,u=0,a=typeof n=="number"?2:o.length;++u&lt;a;)if((i=o[u])&amp;&amp;O[typeof i]){var f=i.length;if(r=-1,f&amp;&amp;l(i))for(;++r&lt;f;)r+="","undefined"==typeof s[r]&amp;&amp;(s[r]=i[r]);else for(r in f=typeof i=="function",i)f&amp;&amp;"prototype"==r||!B.call(i,r)||"undefined"==typeof s[r]&amp;&amp;(s[r]=i[r])}return s},u.forEach=v,u.forIn=t,u.functions=c,u.invoke=function(e,t){var n=z.call(arguments,2),r=-1,i=typeof t=="function",s=e?e.length:0,o=Array(typeof s=="number"?s:0);return v(e,function(e){o[++r]=(i?t:e[t]).apply(e,n)}),o},u.keys=V,u.once=function(e){var t,n;return function(){return t?n:(t=!0,n=e.apply(this,arguments),e=null,n)}},u.pick=function(e,n,r){var i={};if(typeof n!="function")for(var s=-1,o=H.apply(_,z.call(arguments,1)),a=d(e)?o.length:0;++s&lt;a;){var f=o[s];f in e&amp;&amp;(i[f]=e[f])}else n=u.createCallback(n,r),t(e,function(e,t,r){n(e,t,r)&amp;&amp;(i[t]=e)});return i},u.values=function(e){for(var t=-1,n=V(e),r=n.length,i=Array(r);++t&lt;r;)i[t]=e[n[t]];return i},u.each=v,u.extend=r,u.methods=c,u.identity=g,u.isArguments=l,u.isArray=X,u.isEqual=h,u.isFunction=p,u.isObject=d,u.isString=function(e){return typeof e=="string"||F.call(e)==A},u.uniqueId=function(e){var t=++b;return(null==e?"":e)+""+t},u.VERSION="1.3.1",typeof n=="function"&amp;&amp;typeof n.amd=="object"&amp;&amp;n.amd&amp;&amp;n("underscore",[],function(){return u})}(this),n("browserutils",{supportHTML5Audio:function(){var e;try{if(window.HTMLAudioElement&amp;&amp;typeof Audio!="undefined")return e=new Audio,!0}catch(t){return!1}},supportSourceSwappingWithPreload:function(){return/Firefox/i.test(navigator.userAgent)},isMobile:function(e){var t=window.navigator.userAgent,n=["mobile","iPhone","iPad","iPod","Android","Skyfire"];return n.some(function(e){return e=new RegExp(e,"i"),e.test(t)})},isIE10Mobile:function(){return/IEmobile\/10\.0/gi.test(navigator.userAgent)},canPlayType:function(e){var t=document.createElement("audio");return!t||!t.canPlayType?!1:t.canPlayType(e).match(/maybe|probably/i)?!0:!1},isNativeHlsSupported:function(){var e=navigator.userAgent,t=["iPhone","iPad","iPod"],n,r,i;return n=function(t){return t.test(e)},r=!n(/chrome/i)&amp;&amp;!n(/opera/i)&amp;&amp;n(/safari/i),i=t.some(function(e){return n(new RegExp(e,"i"))}),i||r},isMSESupported:function(){return!!window.MediaSource||!!window.WebKitMediaSource},isMSESupportMPEG:function(){var e=window.MediaSource||window.WebKitMediaSource;return e?e.isTypeSupported("audio/mpeg"):!1}}),n("errors",{FLASH_HLS_PLAYLIST_NOT_FOUND:"HLS_PLAYLIST_NOT_FOUND",FLASH_HLS_PLAYLIST_SECURITY_ERROR:"HLS_SECURITY_ERROR",FLASH_HLS_NOT_VALID_PLAYLIST:"HLS_NOT_VALID_PLAYLIST",FLASH_HLS_NO_TS_IN_PLAYLIST:"HLS_NO_TS_IN_PLAYLIST",FLASH_HLS_NO_PLAYLIST_IN_MANIFEST:"HLS_NO_PLAYLIST_IN_MANIFEST",FLASH_HLS_TS_IS_CORRUPT:"HLS_TS_IS_CORRUPT",FLASH_HLS_FLV_TAG_CORRUPT:"HLS_FLV_TAG_CORRUPT",FLASH_HTTP_FILE_NOT_FOUND:"HTTP_FILE_NOT_FOUND",FLASH_RTMP_CONNECT_FAILED:"RTMP_CONNECT_FAILED",FLASH_RTMP_CONNECT_CLOSED:"RTMP_CONNECT_CLOSED",FLASH_RTMP_CANNOT_PLAY_STREAM:"RTMP_CANNOT_PLAY_STREAM",FLASH_PROXY_CANT_LOAD_FLASH:"CANT_LOAD_FLASH",FLASH_PROXY_FLASH_BLOCKED:"FLASH_PROXY_FLASH_BLOCKED",HTML5_AUDIO_ABORTED:"HTML5_AUDIO_ABORTED",HTML5_AUDIO_NETWORK:"HTML5_AUDIO_NETWORK",HTML5_AUDIO_DECODE:"HTML5_AUDIO_DECODE",HTML5_AUDIO_SRC_NOT_SUPPORTED:"HTML5_AUDIO_SRC_NOT_SUPPORTED",HTML5_AUDIO_ENDED_EARLY:"HTML5_AUDIO_ENDED_EARLY",HTML5_AUDIO_OVERRUN:"HTML5_AUDIO_OVERRUN",MSE_NOT_SUPPORTED:"MSE_NOT_SUPPORTED",MSE_MP3_NOT_SUPPORTED:"MSE_MP3_NOT_SUPPORTED",MSE_HLS_NOT_VALID_PLAYLIST:"MSE_HLS_NOT_VALID_PLAYLIST",MSE_HLS_PLAYLIST_NOT_FOUND:"MSE_HLS_PLAYLIST_NOT_FOUND",MSE_HLS_SEGMENT_NOT_FOUND:"MSE_HLS_SEGMENT_NOT_FOUND"}),n("vendor/events",["require","exports","module","underscore"],function(e,t,n){var r=e("underscore"),i=[],s=i.push,o=i.slice,u=i.splice,a=/\s+/,f=function(e,t,n,r){if(!n)return!0;if(typeof n=="object")for(var i in n)e[t].apply(e,[i,n[i]].concat(r));else{if(!a.test(n))return!0;var s=n.split(a);for(var o=0,u=s.length;o&lt;u;o++)e[t].apply(e,[s[o]].concat(r))}},l=function(e,t){var n,r=-1,i=e.length;switch(t.length){case 0:while(++r&lt;i)n=e[r],n.callback.call(n.ctx);return;case 1:while(++r&lt;i)(n=e[r]).callback.call(n.ctx,t[0]);return;case 2:while(++r&lt;i)(n=e[r]).callback.call(n.ctx,t[0],t[1]);return;case 3:while(++r&lt;i)(n=e[r]).callback.call(n.ctx,t[0],t[1],t[2]);return;default:while(++r&lt;i)(n=e[r]).callback.apply(n.ctx,t)}},c={on:function(e,t,n){if(!f(this,"on",e,[t,n])||!t)return this;this._events||(this._events={});var r=this._events[e]||(this._events[e]=[]);return r.push({callback:t,context:n,ctx:n||this}),this},once:function(e,t,n){if(!f(this,"once",e,[t,n])||!t)return this;var i=this,s=r.once(function(){i.off(e,s),t.apply(this,arguments)});return s._callback=t,this.on(e,s,n)},off:function(e,t,n){var i,s,o,u,a,l,c,h;if(!this._events||!f(this,"off",e,[t,n]))return this;if(!e&amp;&amp;!t&amp;&amp;!n)return this._events={},this;u=e?[e]:r.keys(this._events);for(a=0,l=u.length;a&lt;l;a++){e=u[a];if(o=this._events[e]){this._events[e]=i=[];if(t||n)for(c=0,h=o.length;c&lt;h;c++)s=o[c],(t&amp;&amp;t!==s.callback&amp;&amp;t!==s.callback._callback||n&amp;&amp;n!==s.context)&amp;&amp;i.push(s);i.length||delete this._events[e]}}return this},trigger:function(e,t){if(!this._events)return this;var t=o.call(arguments,1);if(!f(this,"trigger",e,t))return this;var n=this._events[e],r=this._events.all;return n&amp;&amp;l(n,t),r&amp;&amp;l(r,arguments),this},stopListening:function(e,t,n){var r=this._listeners;if(!r)return this;var i=!t&amp;&amp;!n;typeof t=="object"&amp;&amp;(n=this),e&amp;&amp;((r={})[e._listenerId]=e);for(var s in r)r[s].off(t,n,this),i&amp;&amp;delete this._listeners[s];return this}},h={listenTo:"on",listenToOnce:"once"};r.each(h,function(e,t){c[t]=function(t,n,i){var s=this._listeners||(this._listeners={}),o=t._listenerId||(t._listenerId=r.uniqueId("l"));return s[o]=t,typeof n=="object"&amp;&amp;(i=this),t[e](n,i,this),this}}),c.bind=c.on,c.unbind=c.off,n.exports=c}),n("states",{PLAYING:"playing",LOADING:"loading",SEEKING:"seeking",PAUSED:"paused",ERROR:"error",IDLE:"idle",INITIALIZE:"initialize",ENDED:"ended",DEAD:"dead"}),n("logger",["require","exports","module"],function(e,t,n){var r;n.exports=r=function(e,t,n){this.enabled=n.debug,this.type=e,this.id=t},r.prototype.log=function(e){if(!this.enabled)return;window.console.log("#"+this.type+" "+this.id+"# "+e)}}),n("html5audioplayer",["require","exports","module","underscore","vendor/events","states","errors","logger","browserutils"],function(e,t,n){var r,i=e("underscore"),s=e("vendor/events"),o=e("states"),u=e("errors"),a=e("logger"),f=e("browserutils");n.exports=r=function(e,t){this._id=e.id,this._descriptor=e,this._isLoaded=!1,this._settings=t,this._bufferingTimeout=null,this._currentPosition=0,this._loadedPosition=0,this._prevCurrentPosition=0,this._prevCheckTime=0,this._positionUpdateTimer=0,this._playRequested=!1,this._startFromPosition=0,e.duration&amp;&amp;(this._duration=e.duration),i.bindAll(this,"_onPositionChange","_onHtml5AudioStateChange","_onLoaded","_onLoadedMetadata","_onBuffering"),this._init(),this._toggleEventListeners(!0),this._descriptor.preload&amp;&amp;this._preload(),e.autoPlay?this.play():this._setState(o.IDLE)},i.extend(r.prototype,s),r.prototype.getId=function(){return this._id},r.prototype.getType=function(){return"HTML5 audio"},r.prototype.play=function(e){if(this._isInOneOfStates(o.ERROR,o.DEAD))return;if(this._isInOneOfStates(o.PAUSED,o.ENDED)){this.resume();return}this._logger.log("play"),this._startFromPosition=e||0,this._setState(o.LOADING),this._playRequested=!0,this._isLoaded?this._playAfterLoaded():(this._preload(),this.once("loaded",this._playAfterLoaded))},r.prototype.pause=function(){this._playRequested=!1;if(this._isInOneOfStates(o.ERROR,o.DEAD))return;this._logger.log("pause"),this._html5Audio.pause(),clearTimeout(this._bufferingTimeout),clearInterval(this._positionUpdateTimer)},r.prototype.seek=function(e){var t=!1,n=e/1e3,r=this._html5Audio.seekable,i;if(this._isInOneOfStates(o.ERROR,o.DEAD))return;if(!this._isLoaded){this.once("loaded",function(){this.seek(e)});return}if(f.isIE10Mobile)t=!0;else for(i=0;i&lt;r.length;i++)if(n&lt;=r.end(i)&amp;&amp;n&gt;=r.start(i)){t=!0;break}if(!t)return;this._logger.log("seek"),this._setState(o.SEEKING),this._html5Audio.currentTime=n,this._currentPosition=e,clearTimeout(this._bufferingTimeout)},r.prototype.resume=function(){if(this._isInOneOfStates(o.ERROR,o.DEAD))return;this._logger.log("resume"),this.getState()===o.PAUSED?(this._setState(o.LOADING),this._html5Audio.play(this._html5Audio.currentTime)):this.getState()===o.ENDED&amp;&amp;(this._setState(o.LOADING),this._html5Audio.play(0)),clearInterval(this._positionUpdateTimer),this._positionUpdateTimer=setInterval(this._onPositionChange,this._settings.updateInterval)},r.prototype.setVolume=function(e){if(!this._html5Audio)return;this._html5Audio.volume=e},r.prototype.getVolume=function(){return this._html5Audio?this._html5Audio.volume:1},r.prototype.setMute=function(e){if(!this._html5Audio)return;this._html5Audio.muted=e},r.prototype.getMute=function(){return this._html5Audio?this._html5Audio.muted:!1},r.prototype.getState=function(){return this._state},r.prototype.getCurrentPosition=function(){return this._currentPosition},r.prototype.getLoadedPosition=function(){return this._loadedPosition},r.prototype.getDuration=function(){return this._duration},r.prototype.kill=function(){if(this._state===o.DEAD)return;clearInterval(this._positionUpdateTimer),clearTimeout(this._bufferingTimeout),this._playRequested=!1,this._toggleEventListeners(!1),this._html5Audio.pause(),this._html5Audio.src=null,delete this._html5Audio,this._setState(o.DEAD)},r.prototype.getErrorMessage=function(){return this._errorMessage},r.prototype.getErrorID=function(){return this._errorID},r.prototype._init=function(){this._html5Audio=new Audio,this._html5Audio.mozAudioChannelType="content",this._html5Audio.id=this._settings.audioObjectID+"_"+this._descriptor.id,this._html5Audio.preload="none",this._logger=new a(this.getType(),this._id,this._settings)},r.prototype._preload=function(){this._html5Audio.preload!=="auto"&amp;&amp;(this._logger.log("setting up preload"),this._html5Audio.preload="auto",this._html5Audio.type=this._descriptor.mimeType,this._html5Audio.src=this._descriptor.src,this._html5Audio.load())},r.prototype._playAfterLoaded=function(){if(!this._playRequested)return;this._trySeekToStartPosition(),this._html5Audio.play(),clearInterval(this._positionUpdateTimer),this._positionUpdateTimer=setInterval(this._onPositionChange,this._settings.updateInterval)},r.prototype._setState=function(e){if(this._state===e)return;this._logger.log('state changed "'+e+'"'),this._logger.log("_currentPosition = "+this._currentPosition+", _loadedPosition = "+this._loadedPosition),this._state=e,this.trigger("stateChange",e,this)},r.prototype._isInOneOfStates=function(){for(var e in arguments)if(arguments[e]===this._state)return!0;return!1},r.prototype._toggleEventListeners=function(e){if(!this._html5Audio)return;var t=e?"addEventListener":"removeEventListener";["ended","play","playing","pause","seeking","waiting","seeked","error"].forEach(function(e){this._html5Audio[t](e,this._onHtml5AudioStateChange)},this),this._html5Audio[t]("loadeddata",this._onLoaded),this._html5Audio[t]("loadedmetadata",this._onLoadedMetadata)},r.prototype._updatePositions=function(){this._currentPosition=this._html5Audio.currentTime*1e3,this._html5Audio.seekable.length&gt;0&amp;&amp;(this._loadedPosition=this._html5Audio.seekable.end(0)*1e3)},r.prototype._trySeekToStartPosition=function(){var e;if(this._startFromPosition&gt;0){this._logger.log("seek to start position="+this._startFromPosition),e=this._startFromPosition/1e3,this._html5Audio.currentTime=e;if(this._html5Audio.currentTime===e)return this._startFromPosition=0,!0}return!1},r.prototype._onBuffering=function(){this._setState(o.LOADING)},r.prototype._onLoaded=function(e){this._logger.log('html5 audio event (loaded handler) "'+e.type+'"');if(this._duration===undefined||this._duration===0)this._duration=this._html5Audio.duration*1e3;this._isLoaded=!0,this.trigger("loaded",this)},r.prototype._onLoadedMetadata=function(e){this._logger.log('html5 audio event (loadedmetadata handler) "'+e.type+'"'),this.trigger("loadedmetadata",this)},r.prototype._onPositionChange=function(e){this._updatePositions();var t=this._currentPosition-this._prevCurrentPosition,n,r,i;this.trigger("positionChange",this.getCurrentPosition(),this._loadedPosition,this._duration,this);if(!this._isInOneOfStates(o.PLAYING,o.LOADING)){this._state===o.SEEKING&amp;&amp;t&gt;0&amp;&amp;this._setState(o.PLAYING);return}this._duration!==0&amp;&amp;(this._currentPosition&gt;this._duration||this._currentPosition&gt;this._loadedPosition&amp;&amp;!f.isIE10Mobile)&amp;&amp;this._onHtml5AudioStateChange({type:"ended"}),n=(new Date).valueOf(),r=n-this._prevCheckTime;if(r===0)return;i=t/r,i&gt;.7?(clearTimeout(this._bufferingTimeout),this._setState(o.PLAYING),this._bufferingTimeout=null):this._state===o.PLAYING&amp;&amp;this._bufferingTimeout==null&amp;&amp;(this._bufferingTimeout=setTimeout(this._onBuffering,this._settings.bufferingDelay)),this._prevCurrentPosition=this._currentPosition,this._prevCheckTime=n},r.prototype._onHtml5AudioStateChange=function(e){this._logger.log('html5 audio event (state change handler) "'+e.type+'"'),clearTimeout(this._bufferingTimeout);switch(e.type){case"playing":if(this._trySeekToStartPosition())return;this._updatePositions(),this._setState(o.PLAYING);break;case"pause":this._setState(o.PAUSED);break;case"ended":this._currentPosition=this._loadedPosition=this._duration,this.trigger("positionChange",this.getCurrentPosition(),this._loadedPosition,this._duration,this),clearInterval(this._positionUpdateTimer),this._setState(o.ENDED);break;case"waiting":if(this.getState()===o.SEEKING)break;this._setState(o.LOADING);break;case"seeking":this._setState(o.SEEKING);break;case"seeked":this._updatePositions(),this._html5Audio.paused?this._setState(o.PAUSED):this._setState(o.PLAYING);break;case"error":this._error(this._html5AudioErrorCodeToErrorId(),!0)}},r.prototype._html5AudioErrorCodeToErrorId=function(){return{1:u.HTML5_AUDIO_ABORTED,2:u.HTML5_AUDIO_NETWORK,3:u.HTML5_AUDIO_DECODE,4:u.HTML5_AUDIO_SRC_NOT_SUPPORTED}[this._html5Audio.error.code]},r.prototype._error=function(e,t){var n="error: ";t&amp;&amp;(n="error (native): "),this._errorID=e,this._errorMessage=this._getErrorMessage(this._errorID),this._logger.log(n+this._errorID+" "+this._errorMessage),this._setState(o.ERROR),this._toggleEventListeners(!1)},r.prototype._getErrorMessage=function(e){var t={};return t[u.HTML5_AUDIO_ABORTED]="The fetching process was aborted by the user.",t[u.HTML5_AUDIO_NETWORK]="A network connection lost.",t[u.HTML5_AUDIO_DECODE]="An error occurred while decoding the media resource.",t[u.HTML5_AUDIO_SRC_NOT_SUPPORTED]="The media resource is not suitable.",t[u.HTML5_AUDIO_ENDED_EARLY]="Audio playback ended before the indicated duration of the track.",t[u.HTML5_AUDIO_OVERRUN]="Audio playback continued past end of the track.",t[e]}}),n("hlsaudioplayer",["require","exports","module","underscore","errors","vendor/events","html5audioplayer","logger","states"],function(e,t,n){var r,i=e("underscore"),s=e("errors"),o=e("vendor/events"),u=e("html5audioplayer"),a=e("logger"),f=e("states"),l=1;n.exports=r=function(e,t){u.apply(this,arguments),this._seekPosition=0},i.extend(r.prototype,u.prototype),r.prototype.getType=function(){return"HTML5 HLS audio"},r.prototype.seek=function(e){u.prototype.seek.apply(this,arguments),this._isInOneOfStates(f.LOADING,f.SEEKING)&amp;&amp;(this._seekPosition=e)},r.prototype.getCurrentPosition=function(){if(this._isInOneOfStates(f.LOADING)&amp;&amp;this._seekPosition&gt;0)return this._seekPosition;if(this._isInOneOfStates(f.PLAYING,f.SEEKING)){if(this._seekPosition&gt;=this._currentPosition)return this._seekPosition;this._seekPosition=0}return u.prototype.getCurrentPosition.apply(this,arguments)},r.prototype._onStateChange=function(e){this._logger.log('hls html5 audio event "'+e.type+'"'),clearTimeout(this._bufferingTimeout);switch(e.type){case"playing":if(this._trySeekToStartPosition())return;this.updatePositions(),this._setState(f.PLAYING);break;case"pause":this._setState(f.PAUSED);break;case"ended":if(this._currentPosition+l&lt;this._duration){this._errorID=s.HTML5_AUDIO_ENDED_EARLY,this._errorMessage=this._getErrorMessage(this._errorID),this._logger.log("hls html5 audio error: "+this._errorID+" "+this._errorMessage),this._setState(f.ERROR),this.toggleEventListeners(!1);break}this._currentPosition=this._loadedPosition=this._duration,this.trigger("positionChange",this._currentPosition,this._loadedPosition,this._duration,this),this._setState(f.ENDED),clearInterval(this._positionUpdateTimer);break;case"waiting":if(this.getState()===f.SEEKING)break;this._setState(f.LOADING);break;case"seeking":this._setState(f.SEEKING);break;case"seeked":this.updatePositions(),this._html5Audio.paused&amp;&amp;this._setState(f.PAUSED);break;case"error":this._errorID={1:s.HTML5_AUDIO_ABORTED,2:s.HTML5_AUDIO_NETWORK,3:s.HTML5_AUDIO_DECODE,4:s.HTML5_AUDIO_SRC_NOT_SUPPORTED}[this._html5Audio.error.code],this._errorMessage=this._getErrorMessage(this._errorID),this._logger.log("hls html5 audio error: "+this._errorID+" "+this._errorMessage),this._setState(f.ERROR),this.toggleEventListeners(!1)}}}),n("singleaudioplayer",["require","exports","module","underscore","browserutils","errors","vendor/events","html5audioplayer","logger","states"],function(e,t,n){var r,i=e("underscore"),s=e("browserutils"),o=e("errors"),u=e("vendor/events"),a=e("html5audioplayer"),f=e("logger"),l=e("states"),c={};n.exports=r=function(e,t){a.apply(this,arguments)},i.extend(r.prototype,a.prototype),r.prototype._init=function(){if(!r._html5Audio){var e=new Audio;e.mozAudioChannelType="content",e.id=this._settings.audioObjectID+"_Single",e.preload="none",r._html5Audio=e,this._preloadAudio=e,this._addGlobalListeners()}this._html5Audio=r._html5Audio,this._playRequested=!1,this._logger=new f(this.getType(),this._id,this._settings)},r.prototype._toggleEventListeners=function(e){e?c[this._id]=this:delete c[this._id]},r.prototype._addGlobalListeners=function(){var e=r._html5Audio,t=function(t,n){var r=c[e._playerId];Object.keys(c).forEach(function(e){var t=c[e];t!==r&amp;&amp;t._isInOneOfStates(l.PLAYING,l.LOADING,l.SEEKING)&amp;&amp;t.pause()}),r&amp;&amp;r[t](n)},n=t.bind(null,"_onHtml5AudioStateChange"),i=t.bind(null,"_onLoaded"),s=t.bind(null,"_onLoadedMetadata");["ended","play","playing","pause","seeking","waiting","seeked","error"].forEach(function(t){e.addEventListener(t,n)}),e.addEventListener("loadeddata",i),e.addEventListener("loadedmetadata",s)},r.prototype.getType=function(){return"HTML5 single audio"},r.prototype.play=function(e){this._playRequested=!0;if(this._html5Audio._playerId===this._descriptor.id&amp;&amp;this._isInOneOfStates(l.PAUSED,l.ENDED)){a.prototype.resume.apply(this,arguments);return}this._isInOneOfStates(l.PAUSED)&amp;&amp;(e=this._currentPosition),this._startFromPosition=e||0,this._html5Audio._playerId=this._descriptor.id,this._toggleEventListeners(!0),this._setState(l.LOADING);var t=function(){if(!this._playRequested)return;this._logger.log("play after loaded"),this._trySeekToStartPosition(),this._html5Audio.play(),clearInterval(this._positionUpdateTimer),this._positionUpdateTimer=setInterval(this._onPositionChange,this._settings.updateInterval)};this._html5Audio.readyState&gt;0&amp;&amp;this._descriptor.src===this._html5Audio.src?t.apply(this):(this.once("loaded",t),this._html5Audio.type=this._descriptor.mimeType,this._html5Audio.src=this._descriptor.src,this._html5Audio.preload="auto",this._html5Audio.load())},r.prototype.pause=function(){this._playRequested=!1;if(this._isInOneOfStates(l.ERROR,l.DEAD))return;this._logger.log("pause"),this._html5Audio._playerId===this._descriptor.id?this._html5Audio.pause():(this._toggleEventListeners(!1),this._setState(l.PAUSED)),clearTimeout(this._bufferingTimeout),clearInterval(this._positionUpdateTimer)},r.prototype.seek=function(e){if(this._html5Audio._playerId!==this._descriptor.id){this._currentPosition=e,this.trigger("positionChange",this._currentPosition,this._loadedPosition,this._duration,this);return}a.prototype.seek.apply(this,arguments)},r.prototype.kill=function(){if(this._state===l.DEAD)return;this._playRequested=!1,clearInterval(this._positionUpdateTimer),clearTimeout(this._bufferingTimeout),this._toggleEventListeners(!1),this._setState(l.DEAD)},r.prototype.resume=function(){if(this._isInOneOfStates(l.ERROR,l.DEAD))return;if(this._html5Audio._playerId!==this._descriptor.id){this.play(this._currentPosition);return}a.prototype.resume.apply(this,arguments)},r.prototype.preload=function(){!this._preloadAudio&amp;&amp;s.supportSourceSwappingWithPreload()&amp;&amp;(this._preloadAudio=new Audio,this._preloadAudio.preload="none");var e=this._preloadAudio;e&amp;&amp;e.preload!=="auto"&amp;&amp;(this._logger.log("preload"),e.preload="auto",e._playerId=this._id,e.type=this._descriptor.mimeType,e.src=this._descriptor.src,e.load())}}),n("hlssingleaudioplayer",["require","exports","module","underscore","errors","vendor/events","hlsaudioplayer","logger","singleaudioplayer","states"],function(e,t,n){var r,i=e("underscore"),s=e("errors"),o=e("vendor/events"),u=e("hlsaudioplayer"),a=e("logger"),f=e("singleaudioplayer"),l=e("states");n.exports=r=function(e,t){f.apply(this,arguments)},i.extend(r.prototype,f.prototype),i.extend(r.prototype,i.pick(u.prototype,"_seekPosition","getCurrentPosition","_onStateChange")),r.prototype.seek=function(e){f.prototype.seek.apply(this,arguments),this._isInOneOfStates(l.LOADING,l.SEEKING)&amp;&amp;(this._seekPosition=e)},r.prototype.getType=function(){return"HTML5 HLS single audio"}}),n("mimetypes",{AAC:"audio/aac",M3U8:"application/x-mpegURL",MP4:"audio/mp4",MPEG:"audio/mpeg",OGG:"audio/ogg",WAV:"audio/wav",WEBM:"audio/webm",getTypeByExtension:function(e){var t={mp1:this.MPEG,mp2:this.MPEG,mp3:this.MPEG,mpeg:this.MPEG,mpg:this.MPEG,aac:this.AAC,mp4:this.MP4,ogg:this.OGG,oga:this.OGG,opus:this.OGG,webm:this.WEBM,wav:this.WAV,m3u8:this.M3U8};return t[e]||null}}),n("factory",["require","exports","module","browserutils","hlssingleaudioplayer","mimetypes","singleaudioplayer"],function(e,t,n){var r,i=e("browserutils"),s=e("hlssingleaudioplayer"),o=e("mimetypes"),u=e("singleaudioplayer");n.exports=r=function(){},r.createAudioPlayer=function(e,t){var n,a,f,l;a=e.src.split(":")[0];if(a==="rtmp"||a==="rtmpt")return null;n=r.getMimeType(e);if(n===o.M3U8){if(!i.isNativeHlsSupported())return null;l=new s(e,t)}else{if(!i.supportHTML5Audio()||!i.canPlayType(n))return null;l=new u(e,t)}return l},r.getMimeType=function(e){if(e.mimeType)return e.mimeType;var t=e.src.split("?")[0];return t=t.substring(t.lastIndexOf(".")+1,t.length),o.getTypeByExtension(t)}}),n("audiomanager",["require","exports","module","underscore","factory","states","errors","browserutils"],function(e,t,n){var r,i=e("underscore"),s=e("factory"),o=e("states"),u=e("errors"),a=e("browserutils");n.exports=r=function(e){e=e||{},this._players={},this._volume=1,this._mute=!1,this._settings=i.defaults(e,r.defaults)},r.States=o,r.Errors=u,r.BrowserUtils=a,r.defaults={flashAudioPath:"flashAudio.swf",flashLoadTimeout:2e3,flashObjectID:"flashAudioObject",audioObjectID:"html5AudioObject",updateInterval:300,bufferTime:8e3,bufferingDelay:800,debug:!1},r.prototype.getAudioPlayer=function(e){return this._players[e]},r.prototype.hasAudioPlayer=function(e){return this._players[e]!==undefined},r.prototype.removeAudioPlayer=function(e){this.hasAudioPlayer(e)&amp;&amp;delete this._players[e]},r.prototype.setVolume=function(e){e=Math.min(1,e),this._volume=Math.max(0,e);for(var t in this._players)this._players.hasOwnProperty(t)&amp;&amp;this._players[t].setVolume(this._volume)},r.prototype.getVolume=function(){return this._volume},r.prototype.setMute=function(e){this._muted=e;for(var t in this._players)this._players.hasOwnProperty(t)&amp;&amp;this._players[t].setMute(this._muted)},r.prototype.getMute=function(){return this._muted},r.prototype.createAudioPlayer=function(e){var t,n,r;e.id||(e.id=Math.floor(Math.random()*1e10).toString()+(new Date).getTime().toString());if(!e.src)throw new Error("AudioManager: You need to pass a valid src");return this._players[e.id]||(this._players[e.id]=s.createAudioPlayer(e,this._settings)),this._players[e.id].setVolume(this._volume),this._players[e.id].setMute(this._muted),this._players[e.id].on("stateChange",this._onStateChange,this),this._players[e.id]},r.prototype._onStateChange=function(e,t){t.getState()===o.DEAD&amp;&amp;this.removeAudioPlayer(t.getId())}}),t(["audiomanager"]),t("audiomanager")})}),
define("vendor/i18n/lib/datetime",["require","exports","module"],function(e,t,n){function f(e,t){function f(t,n,r){if(t instanceof Date){r=r||Date.now();var i=r-t,s=i&gt;0,o,a=null,f,l,c=e.relativeTime;n=n&amp;&amp;parseInt(n,10)||1e3,i=Math.abs(i);if(i&lt;=n)return s?c.justNow:c.rightNow;for(o in u)if(u.hasOwnProperty(o)){if(i&lt;u[o])break;a=o,i/=u[o]}return i=Math.floor(i),f=s?c.past:c.future,l=c[a](i),f.replace(/%s/i,l)}throw new Error("toRelativeTime method expects first argument to be Date")}function g(t,n){var r,i,s,o,u,a,l,c=e.dates;if(t instanceof Date)return n==="relative"?f(t):(r=t.getDate(),i=t.getDay(),s=t.getMonth(),o=t.getFullYear(),u=y(t.getMinutes()),a=b(n),l=[["YYYY",o],["MMMM",c.months[s]],["DDDD",c.weekdays[i]],["MMM",c.monthsShort[s]],["DD",r],["MM",s+1],["HH",t.getHours()],["mm",u]],l.forEach(function(e){a=a.replace(new RegExp(e[0],"g"),e[1])}),a);throw new Error("format method expects first argument to be Date")}function b(t){var n;switch(t){case"iso":return"YYYY-MM-DD";case"readable":n="readable";break;case"readable_time":n="readableTime";break;case"readable_abbreviated":n="readableAbbreviated";break;case"readable_with_weekday":n="readableWithWeekday";break;default:n="default"}return e.dateFormats[n]}function w(e){var t,r;return t=typeof e=="number"?new Date(e):l(e),r=t-Date.now(),Math.abs(r)&gt;7*o?!1:(n=r,!0)}function E(){return Date.now()+n}function S(t,n){if(isNaN(t))return t;var o=[],u=Math.floor(t/s),a=Math.floor(t/i%60),f=Math.floor(t/r%60),l=e.relativeTime;return n&amp;&amp;n.inWords?(u&gt;0&amp;&amp;o.push(l.hour(u)),a&gt;0&amp;&amp;o.push(l.min(a)),(f&gt;0||a===0&amp;&amp;u===0)&amp;&amp;o.push(l.sec(f)),o.join(" ")):(u&gt;0&amp;&amp;o.push(u),n&amp;&amp;n.minimal&amp;&amp;u===0&amp;&amp;a===0?o.push(""):o.push(a&lt;10&amp;&amp;u&gt;0?"0"+a:a),o.push(f&lt;10?"0"+f:f),o.join(":"))}function x(e){return t.zeroPad(e.getHours(),2)+":"+t.zeroPad(e.getMinutes(),2)}var n=0;return{time:a,toRelativeTime:f,format:g,fromString:l,setServerTime:w,nowAtServer:E,timecode:S,stringToTime:c,convert:h,floorTo30Minutes:p,parseTime:d,formatTime:x,getTimezoneOffset:v,getBounds:m}}function l(e){return new Date(Date.parse(e)||e)}function c(e){var t=/^\d+(\.\d+)?$/g,n=/^(?:npt:)?(?:(?:(\d+):)?(\d\d?):)?(\d\d?)(\.\d+)?$/,r=/^(?:(\d\d?)[hH])?(?:(\d\d?)[mM])?(\d\d?)[sS]$/,i;return t.test(e)?parseFloat(e)*1e3:(i=n.exec(e)||r.exec(e),i?(3600*(parseInt(i[1],10)||0)+60*(parseInt(i[2],10)||0)+parseInt(i[3],10)+(parseFloat(i[4])||0))*1e3:0)}function h(e,t,n){n=n||"s";var r="smh",i=r.indexOf(t),s=r.indexOf(n);if(i===-1||s===-1)throw new Error('Units must be expressed as either "h", "m" or "s"');return Math.round(Math.pow(60,s-i)*e)}function p(e){return e=new Date(e),e.setMinutes(e.getMinutes()-e.getMinutes()%30),e}function d(e){var t=e.match(/^\s*(\d{1,2})\s*(?::\s*(\d{1,2}))?\s*(?:(a|p)m?)?\s*$/i),n,r,i;if(!t)return;n=t[1]&amp;&amp;parseInt(t[1],10),r=t[2]&amp;&amp;parseInt(t[2],10),i=t[3]&amp;&amp;t[3].toLowerCase();if(n&gt;23||r&gt;59)return;if(i)if(i==="p"){if(n&lt;12)n+=12;else if(n&gt;13)return}else if(i==="a")if(n===12)n=0;else if(n&gt;12)return;return r||(r=0),[n,r]}function v(){var e=new Date(2009,0,1,6,0,0),t=new Date(2009,6,1,6,0,0),n;return n=e.getUTCHours()&gt;t.getUTCHours()?e.getTimezoneOffset():t.getTimezoneOffset(),n}function m(e){if(e.offset==null)return{};var t=new Date,n,r;return g(t,e.resolution),n=+(new Date(+t+e.offset*a[e.resolution])),r=+(new Date(n+(e.duration-1)*a[e.resolution])),{from:n,to:r}}function g(e,t){switch(t){case"day":e.setUTCHours(0,0,0,0);break;case"hour":e.setUTCMinutes(0,0,0)}}function y(e){return("0"+e).substr(-2)}n.exports=f;var r=1e3,i=6e4,s=60*i,o=24*s,u={sec:1e3,min:60,hour:60,day:24,month:30,year:12},a={minute:i,hour:s,day:o}}),
define("vendor/i18n/lib/number",["require","exports","module"],function(e,t,n){function r(e){return{round:i,format:function(t,n){if(t===""||t==null||isNaN(t)||Math.abs(t)===Infinity)return"";t=parseFloat(t);var r=n&amp;&amp;n.precision||0,s=e.delimiters;return r=Math.max(Math.min(r,20),0),t=i(t,r),(""+t).split(".").map(function(e,t){return t===0?e.replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1"+s.thousands):e}).join(s.decimal)},zeroPad:function(e,t){if(e==null)return e;e+="";var n=t-e.length;return n&gt;0&amp;&amp;(e=(new Array(n+1)).join("0")+e),e}}}function i(e,t){var n=Math.pow(10,t||0);return Math.round(e*n)/n}n.exports=r}),
define("vendor/i18n/locales/en",["require","exports","module"],function(e,t,n){function i(e,t){return function(t){return e[r.pluralForm(t)].replace(/%d/i,t)}}var r={delimiters:{thousands:",",decimal:"."},relativeTime:{justNow:"Just now",rightNow:"Right now",future:"in %s",past:"%s",sec:i(["1 second","%d seconds"]),min:i(["1 minute","%d minutes"]),hour:i(["1 hour","%d hours"]),day:i(["1 day","%d days"]),month:i(["1 month","%d months"]),year:i(["1 year","%d years"])},dateFormats:{readable:"DD MMMM YYYY",readableTime:"DD MMMM YYYY HH:mm",readableAbbreviated:"MMM DD, YYYY",readableWithWeekday:"DDDD, DD MMMM YYYY","default":"DD/MM/YYYY"},dates:{months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],weekdays:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},pluralForm:function(e){return e!==1?1:0}};n.exports=r}),
define("vendor/i18n/locales/pt_BR",["require","exports","module"],function(e,t,n){function i(e,t){return function(t){return e[r.pluralForm(t)].replace(/%d/i,t)}}var r={delimiters:{thousands:".",decimal:","},relativeTime:{justNow:"Agora a pouco",rightNow:"Agora a pouco",future:"em %s",past:"%s",sec:i(["1 segundo","%d segundos"]),min:i(["1 minuto","%d minutos"]),hour:i(["1 hora","%d horas"]),day:i(["1 dia","%d dias"]),month:i(["1 ms","%d meses"]),year:i(["1 ano","%d anos"])},dateFormats:{readable:"DD MMMM YYYY",readableTime:"DD MMMM YYYY HH:mm",readableAbbreviated:"MMM DD, YYYY",readableWithWeekday:"DDDD, DD MMMM YYYY","default":"DD/MM/YYYY"},dates:{months:["Janeiro","Fevereiro","Maro","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"],monthsShort:["Jan","Fev","Mar","Abr","Mai","Jun","Jul","Ago","Set","Out","Nov","Dez"],weekdays:["Domingo","Segunda-Feira","Tera-Feira","Quarta-Feira","Quinta-Feira","Sexta-Feira","Sbado"]},pluralForm:function(e){return e!==1?1:0}};n.exports=r}),
define("views/app-buttons/app-buttons",["require","exports","module","lib/helpers/client-environment-helper","lib/lingua","lib/native-links","lib/tracking/tracking-bus","lib/views/mixins/update-on-layout-change","lib/view","views/app-buttons/app-buttons.tmpl","views/app-buttons/app-buttons.css"],function(e,t,n){function v(){o.action("submit","download_app_badge:download")}function m(){return r.iOS?f:r.android?l:r.blackberry?c:r.amazon?h:r.firefoxOS?p:""}var r=e("lib/helpers/client-environment-helper").device,i=e("lib/lingua"),s=e("lib/native-links"),o=e("lib/tracking/tracking-bus"),u=e("lib/views/mixins/update-on-layout-change"),a=e("lib/view"),f=i.t("Download on the App Store",null,{comment:"Download button help text when website is viewed on ios"}),l=i.t("Get it on Google Play",null,{comment:"Download button help text when website is viewed on android"}),c=i.t("Get it at BlackBerry World",null,{comment:"Download button help text when website is viewed on blackberry"}),h=i.t("Available at Amazon",null,{comment:"Download button help text when website is viewed on amazon device"}),p=i.t("Get it in the Firefox Marketplace",null,{comment:"Download button help text when website is viewed on firefox device"}),d=n.exports=a.extend(u,{className:"appButtons",template:e("views/app-buttons/app-buttons.tmpl"),css:e("views/app-buttons/app-buttons.css"),events:{click:v},element2selector:{"upsell-link":".appButtons__link"},setup:function(){this.el.className+=" "+r.brand},renderDecorate:function(){var e=this.getElement("upsell-link")[0];!s.useNativeDeeplinks()&amp;&amp;e&amp;&amp;(e.target="_blank")},getTemplateData:function(e,t){return e.url=s.useNativeDeeplinks()&amp;&amp;t&amp;&amp;s.getStoreDeepLink(t)||s.getStoreLink(),e.a11yText=m.call(this),e}})}),
define("vendor/experiments/experiments",["require","exports","module"],function(e,t,n){(function(){function r(t){if(!e._localStorageEnabled)return;localStorage.setItem(e._localStorageKey,t)}var e,t="assignments";e={_initialized:!1,_assignments:null,_localStorageKey:null,_localStorageEnabled:null,_availableLayers:null,_assignmentServiceUrl:null,_version:null,_anonymousId:null,initialize:function(n){return n=n||{},e._availableLayers=n.availableLayers||[],e._localStorageKey=n.localStorageKey||t,e._assignmentServiceUrl=n.assignmentServiceUrl+n.anonymousUserId,e._version=n.version,e._anonymousId=n.anonymousUserId,e._localStorageEnabled=n.hasOwnProperty("localStorageEnabled")?n.localStorageEnabled:!0,e._assignments=e.loadAssignments(),e._initialized=!0,e},reset:function(){e._availableLayers=[],e._localStorageKey=t,e._assignmentServiceUrl="",e._version=null,e._anonymousId=null,e._assignments=null},get:function(t,n){if(!e._initialized)return!1;var r=e.getLayers()||{};return r.hasOwnProperty(t)&amp;&amp;r[t].experimentName===n?r[t].variantName:!1},set:function(t,n,r){var i=e.getLayers();i[t]={experimentName:n,variantName:r}},fetchAssignments:function(){var t=$.Deferred(),n=e.getAssignments(),r=e._availableLayers,i=!!r.length,s={layers:r.join(",")};return e.isUpToDate(n,e._version)?t.resolve(e.formatAssignments()):i?(e.clearAssignments(),$.ajax({url:e._assignmentServiceUrl,type:"GET",dataType:"json",data:s,timeout:5e3}).done(function(n){e.buildAssignments(n),e.storeAssignments(),t.resolve(e.formatAssignments())}).fail(t.reject)):(e.clearAssignments(),t.resolve(e.formatAssignments())),t.promise()},isUpToDate:function(e,t){return e&amp;&amp;e._version===t},loadAssignments:function(){var t;try{t=JSON.parse(localStorage.getItem(e._localStorageKey))}catch(n){t={}}return t},buildAssignments:function(t){e._assignments={_version:e._version,layers:e.formatLayers(t)}},storeAssignments:function(){var t=e.getAssignments()||{};r(JSON.stringify(t))},clearAssignments:function(){e._assignments={},r(JSON.stringify({}))},getAssignments:function(){return e._assignments},getLayers:function(){return e.getAssignments().layers},formatAssignments:function(){var t={},n=e.getLayers(),r;return n&amp;&amp;(r=Object.keys(n),r.forEach(function(e){t[e]=n[e].variantId})),t},formatLayers:function(e){var t={};return e.forEach(function(e){t[e.layer_name]={experimentName:e.experiment_name,variantName:e.variant_name,variantId:e.variant_id}}),t},serialize:function(){var t=e.getLayers(),n,r,i=[];for(r in t)n=t[r],n&amp;&amp;n.experimentName&amp;&amp;n.variantName&amp;&amp;i.push("["+r+"] "+n.experimentName+": "+n.variantName);return i.join(", ")},setExperimentsFromQueryParams:function(t){var n,r,i,s,o;for(o in t)n=/^exp\.([^.]+)\.([^.]+)$/.exec(o),s=t[o],n&amp;&amp;(r=n[1],i=n[2]),r&amp;&amp;i&amp;&amp;s&amp;&amp;e.set(r,i,s)}},typeof n!="undefined"&amp;&amp;n.exports?n.exports=e:(window.SC=window.SC||{},window.SC.Experiments=e)})()}),
define("lib/helpers/name-helper",["require","exports","module","vendor/handlebars-runtime","lib/helpers/lang-helper"],function(e,t,n){var r=e("vendor/handlebars-runtime"),i=e("lib/helpers/lang-helper"),s=n.exports={get:function(e,t){var n=r.Utils.escapeExpression(e.username||e.title||e.name);return t===!0&amp;&amp;(n=i.possessive(n)),n}}}),
define("views/header/search-button.css",["require","exports","module","css"],function(e,t,n,r){n.exports=r.stringToStyleElement(r.transform(".searchButton,.searchButton:active{top:0;right:0;position:absolute;overflow:hidden;height:44px;width:50px;text-indent:50px}.searchButton::after{position:absolute;content:'';top:0;right:0;background:#fff url(https://m.soundcloud.com/assets/images/ldpi/search/search-5738d5f4.png) 0 0 no-repeat;background-size:50px 44px;width:50px;height:44px;transition:background-color .1s linear}.searchButton.initiate::after{background-color:#333}.searchButton:active::after{background-color:#f50}")),data=null}),
define("lib/views/mixins/form",["require","exports","module","$","underscore","lib/mixin"],function(e,t,n){var r=e("$"),i=e("underscore"),s=e("lib/mixin"),o=n.exports=new s({defaults:{tagName:"form",formSelector:null,formId:null,submit:function(e){e.preventDefault(),this.onSubmit(this.getFormElement().elements)},reset:function(){this.onReset()},getFormElement:function(){return this.formSelector?this.el.querySelector(this.formSelector):this.el},onSubmit:r.noop,onReset:r.noop},applyTo:function(e){var t={},n=this.formSelector;t[["reset",n].join(" ").trim()]="reset",t[["submit",n].join(" ").trim()]="submit",e.events=i.defaults(t,e.events)},before:{setup:function(){this.formId=i.uniqueId("form-")}},around:{getTemplateData:function(e,t){return t=e(t)||t,t.form_id=this.formId,t}}})}),
define("views/search/suggestions-overlay",["require","exports","module","lib/event-bus","lib/views/fullscreen-overlay"],function(e,t,n){function o(){this.close()}var r=e("lib/event-bus"),i=e("lib/views/fullscreen-overlay"),s=n.exports=i.extend({setup:function(){i.prototype.setup.apply(this,arguments),this.listenTo(r,"suggestion-item:click",o)},dispose:function(){i.prototype.dispose.apply(this,arguments),this.stopListening(r,"suggestion-item:click",o)},onClose:function(){this.dispose()}})}),
define("views/search/suggestions-list",["require","exports","module","underscore","lib/views/list","collections/suggestions","views/search/suggestion-item","views/search/suggestions-list.tmpl","views/search/suggestions-list.css","views/search/search.css"],function(e,t,n){var r=e("underscore"),i=e("lib/views/list"),s=e("collections/suggestions"),o=e("views/search/suggestion-item"),u=n.exports=i.extend({template:e("views/search/suggestions-list.tmpl"),css:[e("views/search/suggestions-list.css"),e("views/search/search.css")],className:"suggestionsList",itemClassName:"suggestionsList__item",Subview:o,setup:function(e){this.collection=new s(null,{query:e.query})},getTemplateData:function(e){e.showMessage=r.isEmpty(e)},getSubviewArgs:function(){return r.extend(i.prototype.getSubviewArgs.apply(this,arguments),{query:this.options.query})}})}),
define("views/search/search-box.tmpl",["vendor/handlebars-runtime"],function(){return require("vendor/handlebars-runtime").template(function(e,t,n,r,i){function l(e,t){var r="";return r+='\n&lt;button class="searchBox__searchCancel cancel g-font-14 g-button-nostyle g-touch-padding" type="button"&gt;'+u(n.$t.call(e,"Cancel",{hash:{_comment:"Cancel search button text"},data:t}))+"&lt;/button&gt;\n",r}this.compilerInfo=[4,"&gt;= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u=this.escapeExpression,a=this,f="function";o=n["if"].call(t,t&amp;&amp;t.needsCancel,{hash:{},inverse:a.noop,fn:a.program(1,l,i),data:i});if(o||o===0)s+=o;return s+='\n&lt;div class="searchBox__searchInputWrap"&gt; &lt;input class="searchBox__searchInput" placeholder="'+u(n.$t.call(t,"Search SoundCloud",{hash:{},data:i}))+'" type="search" name="q" autocomplete="off" autocorrect="off" autocapitalize="off" aria-label="'+u((o=t&amp;&amp;t.label,typeof o===f?o.apply(t):o))+'" value="'+u((o=t&amp;&amp;t.q,typeof o===f?o.apply(t):o))+'"&gt; &lt;button class="g-button-nostyle searchBox__searchEmpty g-touch-padding" type="reset"&gt;&#215;&lt;/button&gt;\n&lt;/div&gt;\n',s})}),
define("views/search/search-box.css",["require","exports","module","css"],function(e,t,n,r){n.exports=r.stringToStyleElement(r.transform(".searchBox{position:absolute;top:0;left:0;width:100%;height:44px;background:#fff;z-index:-1;opacity:0;-webkit-transition:opacity .25s,z-index .3s;transition:opacity .25s,z-index .3s}.searchBox.open{z-index:1;opacity:1;-webkit-transition:opacity .25s,z-index .01s;transition:opacity .25s,z-index .01s}.searchBox__searchInputWrap{position:relative;overflow:hidden;padding-right:8px}.searchBox__searchCancel+.searchBox__searchInputWrap{padding-right:4px}.searchBox__searchInput{position:relative;display:block;width:100%;height:36px;margin:4px 0 0 4px;padding-left:40px;border:0;border-radius:2px;color:#333;background:#e5e5e5}.searchBox__searchInput:focus{outline:0}.searchBox__searchInput::-moz-placeholder,.searchBox__searchInput::-webkit-placeholder,.searchBox__searchInput:-ms-placeholder{color:#999}.searchBox__searchInputWrap::after{content:'';display:block;position:absolute;left:12px;top:12px;width:20px;height:20px;background:url(https://m.soundcloud.com/assets/images/ldpi/search/search_input-bd02f9a1.png) 0 0 no-repeat;opacity:.4;background-size:20px 20px}.searchBox__searchEmpty{color:#999;display:none;position:absolute;right:10px;top:3px;height:36px;line-height:36px;width:20px;font-size:20px}.searchBox.filled .searchBox__searchEmpty{display:block}.searchBox__searchCancel{float:right;margin:13px 13px 0;color:#999}")),data=null}),
define("views/app-buttons/app-buttons.tmpl",["vendor/handlebars-runtime"],function(){return require("vendor/handlebars-runtime").template(function(e,t,n,r,i){function l(e,t){var r="",i;return r+=' &lt;a class="appButtons__link" href="'+a((i=e&amp;&amp;e.url,typeof i===u?i.apply(e):i))+'"&gt; '+a(n.$a11y.call(e,{hash:{screenreader:e&amp;&amp;e.a11yText},data:t}))+" &lt;/a&gt;\n",r}this.compilerInfo=[4,"&gt;= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u="function",a=this.escapeExpression,f=this;o=n["if"].call(t,t&amp;&amp;t.url,{hash:{},inverse:f.noop,fn:f.program(1,l,i),data:i});if(o||o===0)s+=o;return s+="\n",s})}),
define("views/app-buttons/app-buttons.css",["require","exports","module","css"],function(e,t,n,r){n.exports=r.stringToStyleElement(r.transform(".appButtons__link{display:block;height:57px;overflow:hidden;margin:0 auto}.appButtons.android .appButtons__link{background:url(https://m.soundcloud.com/assets/images/ldpi/appstores/en/google-a0cfe29e.png) 0 0 no-repeat;background-size:165px 57px;width:165px}.appButtons.iOS .appButtons__link{background:url(https://m.soundcloud.com/assets/images/ldpi/appstores/en/apple-c5f7f746.png) 0 0 no-repeat;background-size:193px 57px;width:193px}.appButtons.blackberry .appButtons__link{background:url(https://m.soundcloud.com/assets/images/ldpi/appstores/en/blackberry-a0cfe29e.png) 0 0 no-repeat;background-size:164px 57px;width:164px}.appButtons.amazon .appButtons__link{background:url(https://m.soundcloud.com/assets/images/ldpi/appstores/en/amazon-a0cfe29e.png) 0 0 no-repeat;background-size:167px 57px;width:167px}.appButtons.firefoxOS .appButtons__link{background:url(https://m.soundcloud.com/assets/images/firefox_marketplace-6e30092e.png) 0 0 no-repeat;background-size:172px 60px;height:60px;width:172px}")),data=null}),
define("lib/helpers/lang-helper",["require","exports","module"],function(e,t,n){var r=n.exports={plural:function(e,t,n){return n=typeof n=="string"?n:t+"s",e===1?t:n},possessive:function(e,t){return e+"s"+(t?" "+t:"")}}}),
define("lib/views/fullscreen-overlay",["require","exports","module","config","lib/views/mixins/overlay","lib/view","lib/views/fullscreen-overlay.css"],function(e,t,n){var r=e("config"),i=e("lib/views/mixins/overlay"),s=e("lib/view"),o=n.exports=s.extend(i,{defaults:{showHeader:!1},parentEl:function(){return r.get("appView").el},template:function(){return""},transitions:{"in":"fadeIn",out:"fadeOut"},css:e("lib/views/fullscreen-overlay.css"),className:"fullscreen-overlay",setup:function(e){e.animate||(this.transitions=null),this.$el.toggleClass("fullscreen-overlay-show-header",e.showHeader)}})}),
define("lib/views/list",["require","exports","module","$","underscore","vendor/handlebars-runtime","lib/helpers/map-to-html-attrs-helper","lib/view"],function(e,t,n){var r=e("$"),i=e("underscore"),s=e("vendor/handlebars-runtime"),o=e("lib/helpers/map-to-html-attrs-helper"),u=e("lib/view"),a=n.exports=u.extend({emptyTemplate:null,defaults:{maxDisplay:3},Subview:null,listTagName:"ul",listClassName:"sc-list-nostyle sc-clearfix",itemTagName:"li",itemClassName:"",template:function(){return""},_listElement:null,renderDecorate:function(){var e=this.getListContainer();e&amp;&amp;(e.appendChild(this.createListElement()),this.addInitialItems())},createListElement:function(){if(!this._listElement){var e=document.createElement(this.listTagName);this.listClassName&amp;&amp;(e.className=this.listClassName),this._listElement=e}return this._listElement},addInitialItems:function(){var e,t=this.getModelsToRender(),n=Math.min(this.options.maxDisplay||Infinity,t.length);for(e=0;e&lt;n;++e)this.createAndInsertListItemView(t[e],-1)},_teardown:function(){this._listElement&amp;&amp;(r(this._listElement).remove(),this._listElement=null),u.prototype._teardown.call(this)},getModelsToRender:function(){return this.collection.models},createAndInsertListItemView:function(e,t){var n,r=this.options.maxDisplay;n=this.addListItemSubview(e),n.render(),this.addListItemToDOM(n,i.isNumber(t)?t:-1),r&amp;&amp;this.getListItemViews().length&gt;r&amp;&amp;(n=this.getListItemView(this.collection.at(r)),n&amp;&amp;(this.removeListItemFromDOM(n),this.removeSubview(n)))},getTemplate:function(e){return!this.emptyTemplate||!e||this.collection.length?u.prototype.getTemplate.apply(this,arguments):this.emptyTemplate},getListContainer:function(){return this.el},getListElement:function(){return this._listElement},getListItemView:function(e){return i.find(this.subviews,function(t){return t.model===e})},getListItemWrappers:function(){return this.getListElement().children},getListItemViews:function(){var e=this.Subview;return this.subviews.filter(function(t){return t instanceof e})},getSubviewArgs:function(e){return{resource_id:e.resource_id,resource_type:e.resource_type}},getListItemAttributesData:function(e){return e.model?e.model.toJSON():{}},getListItemAttributes:function(){return{}},getListItemAttributesString:function(e){var t=this.getListItemAttributes(e);return new s.SafeString(o(t))},getListItemSelector:function(){return"."+this.itemClassName.trim().split(/\s+/).join(".")},getListItemViewByEvent:function(e){var t=r(e.target).closest(this.getListItemSelector()),n;return t.length&amp;&amp;(n=i.find(this.subviews,function(e){return e.el===t.children()[0]})),n},onAdd:function(e,t){if(this.disposed)return;if(!this.getListElement()&amp;&amp;t.length===1&amp;&amp;e===t.at(0)){this.rerender();return}var n=t.indexOf(e),r=typeof n=="number"?n:-1,i=this.options.maxDisplay,s=!i||r&gt;=0&amp;&amp;r&lt;i||r&lt;0&amp;&amp;this.collection.length&lt;=i;s&amp;&amp;this.createAndInsertListItemView(e,r)},onRemove:function(e){var t=this.getListItemView(e);t&amp;&amp;(this.removeListItemFromDOM(t),this.removeSubview(t))},addListItemSubview:function(e){var t=this.getSubviewArgs(e);return this.addSubview(new this.Subview(t))},createSubviewWrapper:function(e){var t=this.getListItemAttributesString(this.getListItemAttributesData(e)),n;return t=t.toString().length?" "+t:"",n=r("&lt;"+this.itemTagName+' class="'+this.itemClassName+'"'+t+"&gt;"),n[0]},getSubviewWrapper:function(e){return e.el.parentNode},addListItemToDOM:function(e,t){var n=this.getListElement(),r=this.getSubviewWrapper(e),i;if(!n)return;r||(r=this.createSubviewWrapper(e),r.appendChild(e.el)),t===-1||t&gt;=this.collection.length-1||t===undefined?n.appendChild(r):t===0?n.insertBefore(r,n.firstElementChild):(i=this.getSubviewWrapper(this.getListItemView(this.collection.at(t-1))),i.parentNode.insertBefore(r,i.nextElementSibling))},removeListItemFromDOM:function(e){var t,n=this.getSubviewWrapper(e),i=this.options.maxDisplay;t=function(){var t,s,o=r(n),u=o.index();o.remove(),e._dispose(),s=!this._disposed&amp;&amp;i&amp;&amp;i&lt;=this.collection.length&amp;&amp;this.getListItemWrappers().length&lt;i,s&amp;&amp;(t=this.addListItemSubview(this.collection.at(i-1)),t.render(),this.addListItemToDOM(t,u))}.bind(this),t()}})}),
define("collections/suggestions",["require","exports","module","lib/collection","models/suggestion","lib/url"],function(e,t,n){var r=e("lib/collection"),i=e("models/suggestion"),s=e("lib/url"),o=n.exports=r.extend({model:i,defaults:{limit:10,category:null,query:null},baseUrl:function(){return s.stringify({path:["search","suggest",this.options.category],query:{q:this.options.query,highlight_mode:"offsets"}})},parse:function(e){return e.suggestions.map(function(e){return e.resource_type=e.kind.toLowerCase()==="user"?"user":"sound",e})}},{hashFn:function(e,t){return[t.query,t.category||"all"].join("_")}})}),
define("views/search/suggestion-item",["require","exports","module","lib/views/mixins/audible-control","lib/event-bus","lib/helpers/search-helper","models/suggestion","lib/tracking/tracking-bus","vendor/usertext/usertext","lib/view","views/search/suggestion-item.css","views/search/suggestion-item.tmpl"],function(e,t,n){function c(){var e=this.model,t=e.get("kind");u.action("navigate",t,{level:"search",chapter:"suggestions"}),t==="track"&amp;&amp;!e.isPlaying()&amp;&amp;this.playAudible(e,{userInitiated:!0,context:this.getContextData()}),i.trigger("suggestion-item:click")}var r=e("lib/views/mixins/audible-control"),i=e("lib/event-bus"),s=e("lib/helpers/search-helper"),o=e("models/suggestion"),u=e("lib/tracking/tracking-bus"),a=e("vendor/usertext/usertext"),f=e("lib/view"),l=n.exports=f.extend(r,{css:e("views/search/suggestion-item.css"),template:e("views/search/suggestion-item.tmpl"),className:"suggestionItem sc-media g-font-16",ModelClass:o,requiredAttributes:{user:["query","avatar_url","permalink"],sound:["query","artwork_url","user"]},events:{"click .suggestedLink":c},getTemplateData:function(e){e.isUser=this.model.get("kind")==="user",e.className=e.isUser?"suggestedUser":"suggestedSound",e.query=s.highlightText(e.query,e.highlights),e.query=a(e.query,{paragraphs:!1,links:!1,userlinks:!1,whitelist:["b"]})}})}),
define("views/search/suggestions-list.tmpl",["vendor/handlebars-runtime"],function(){return require("vendor/handlebars-runtime").template(function(e,t,n,r,i){function f(e,t){var r="";return r+=' &lt;h1 class="search__noresult search__banner g-font-20"&gt;'+u(n.$t.call(e,"Sorry, nothing matches your search",{hash:{},data:t}))+"&lt;/h1&gt;\n",r}this.compilerInfo=[4,"&gt;= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u=this.escapeExpression,a=this;o=n["if"].call(t,t&amp;&amp;t.showMessage,{hash:{},inverse:a.noop,fn:a.program(1,f,i),data:i});if(o||o===0)s+=o;return s+="\n",s})}),
define("views/search/suggestions-list.css",["require","exports","module","css"],function(e,t,n,r){n.exports=r.stringToStyleElement(r.transform(".suggestionsList{height:100%;color:#333;background-color:#fff;border-top:1px solid #f7f7f7}")),data=null}),
define("views/search/search.css",["require","exports","module","css"],function(e,t,n,r){n.exports=r.stringToStyleElement(r.transform(".search{background:#fff}.search__banner{padding-top:140px;color:#666;text-align:center;margin:0 40px;background-position:50% 60px;background-repeat:no-repeat;background-size:48px 48px}.search__noresult{background-image:url(https://m.soundcloud.com/assets/images/ldpi/search/search_noresult-bd02f9a1.png)}.search__blank{background-image:url(https://m.soundcloud.com/assets/images/ldpi/search/search_blank-bd02f9a1.png);padding-bottom:100%}")),data=null}),
define("lib/views/mixins/overlay",["require","exports","module","$","underscore","lib/event-bus","lib/helpers/client-environment-helper","lib/css-transitions","lib/scroll-bouncing-fix","lib/mixin"],function(e,t,n){function c(){this.close()}var r=e("$"),i=e("underscore"),s=e("lib/event-bus"),o=e("lib/helpers/client-environment-helper").device,u=e("lib/css-transitions"),a=e("lib/scroll-bouncing-fix"),f=e("lib/mixin"),l=n.exports=new f({applyTo:function(e){e.defaults=i.defaults(e.defaults||{},{Subview:null,subviewArgs:null,parentEl:null})},defaults:{transitions:null,onOpen:r.noop,onSyncOpen:r.noop,onClose:r.noop},after:{renderDecorate:function(){o.iOS&amp;&amp;a.call(this),this.$el.addClass("g-z-index-overlay"),s.on("layout:change",c,this)}},before:{dispose:function(){s.off("layout:change",c)}},open:function(){this.isOpened=!0,this.rerender(),this.transitions&amp;&amp;this.transitions.in&amp;&amp;u[this.transitions.in](this.el,this.onOpen.bind(this)),(i.result(this,"parentEl")||document.body).appendChild(this.el),this.createContentView(),(!this.transitions||!this.transitions.in)&amp;&amp;this.onOpen(),this.onSyncOpen()},close:function(){if(!this.isOpened)return;this.isOpened=!1,this.transitions&amp;&amp;this.transitions.out?u[this.transitions.out](this.el,this._onClose.bind(this)):this._onClose()},_onClose:function(){this.detach(),this.onClose()},createContentView:function(){if(this.getContentView()||!this.options.Subview)return;var e=this.options,t=e.Subview,n=i.result(e,"subviewArgs"),r;r=this.addSubview(new t(i.extend({resource_id:e.resource_id,resource_type:e.resource_type},n)),"contentView"),this.el.appendChild(r.render().el)},getContentView:function(){return this.subviews.contentView},detach:function(){var e=i.result(this,"parentEl")||document.body;r(e).children(this.el)[0]&amp;&amp;e.removeChild(this.el)}})}),
define("lib/views/fullscreen-overlay.css",["require","exports","module","css"],function(e,t,n,r){n.exports=r.stringToStyleElement(r.transform(".fullscreen-overlay{position:fixed;width:100%;left:0;top:0;bottom:0}.fullscreen-overlay-show-header{margin-top:44px}")),data=null}),
define("lib/helpers/map-to-html-attrs-helper",["require","exports","module","underscore"],function(e,t,n){var r=e("underscore"),i=n.exports=function(e){var t=[],n,i;return r.each(e,function(e,s){n=s+'="',i=[],r.isObject(e)?r.each(e,function(e,t){i.push(t+":"+e)}):i.push(e),t.push(n+i.join(";")+'"')}),t.join(" ")}}),
define("models/suggestion",["require","exports","module","models/sound","models/user"],function(e,t,n){var r=e("models/sound"),i=e("models/user"),s=n.exports=function(e,t){var n=e.resource_type,s;return delete e.resource_type,n==="user"?s=new i(e,t):s=new r(e,t),s};s.getClass=function(e){var t=e.resource_type;return t==="user"?i:r}}),
define("lib/views/mixins/audible-control",["require","exports","module","underscore","lib/play-manager","lib/mixin"],function(e,t,n){function u(e,t){var n,i=r.extend(t||{},{audible:e});return this.bubble?n=this.bubble("requestPlayContext",i):n={data:i},n}var r=e("underscore"),i=e("lib/play-manager"),s=e("lib/mixin"),o=n.exports=new s({toggleAudible:function(e,t){this[e.isPlaying()?"pauseAudible":"playAudible"](e,t)},playAudible:function(e,t){i.saveLayout(),i.play(e,this.getPlayContext(e,t))},pauseAudible:function(e,t){i.pause(e,this.getPlayContext(e,t))},getPlayContext:function(e,t){var n=u.call(this,e,t);return n.data},toggleSource:function(e,t){var n=i.getCurrentSound();i.source===e&amp;&amp;i.sourceCursor&gt;-1&amp;&amp;n&amp;&amp;n.isPlaying()?i.pauseCurrent(t):(i.saveLayout(),i.playSource(e,t))}})}),
define("lib/helpers/search-helper",["require","exports","module","underscore"],function(e,t,n){var r=e("underscore"),i=["q","q[fulltext]","filter.duration","filter.created_at","filter.license","filter.genre","filter.genre_or_tag","filter.place"],s=n.exports={getValidParams:function(e){return r.pick(e,i)},highlightText:function(e,t,n){var i=r.extend({pre:"&lt;b&gt;",post:"&lt;/b&gt;"},n),s=e.split(""),o;if(!t)return e;for(o=t.length;o--;)s.splice(t[o].post,0,i.post),s.splice(t[o].pre,0,i.pre);return s.join("")}}}),
define("vendor/usertext/usertext",["require","exports","module"],function(e,t,n){(function(){var e,t,r,i,s,o,u,a,f=/\b((?:https?:\/\/|www\d{0,3}\.|(?:[a-z0-9\-]+\.)+[a-z]{2,4}\/)[^\s'"]*[^\s`!()\[\]{};:'".,&lt;&gt;?])/ig,l=/(\b(?:[0-5]?[0-9])(?::[0-5][0-9]){1,2}\b)/g,c=/([a-z0-9._%+\-]+@[a-z0-9.\-]+\.[a-z]{2,6})/gi,h=/(\s|[^\w]|^)@([\w\-]+)/g,p=/( |^)(#([\w-]+))/gm,d=/\{\{\b((?:https?:\/\/|www\d{0,3}\.|(?:[a-z0-9\-]+\.)+[a-z]{2,4}\/)\S*[^\s`!()\[\]{};:'".,&lt;&gt;?])\}\}/ig,v=/\{\{(?:mailto:)?([a-z0-9._%+\-]+@[a-z0-9.\-]+\.[a-z]{2,6})\}\}/gi,m=/\{\{@([\w\-]+)\}\}/gi,g=/^((?:https?:\/\/)?(?:www\.|m\.)?soundcloud\.(?:com|dev))\/?/i,y=/^(?:ht|f)tps?:\/\//i,b=/(?:[ \t]*\r?\n[ \t]*){2,}/,w=/[ \t][ \t]+/g;t={paragraphs:!0,links:!0,externalLinks:!0,internalLinks:!0,userLinks:!0,deepLinks:!1,whitelist:["b","i","em"],internalLinksBaseUrl:"/",isOpeningNewWindow:!1,maxLength:null,truncateExternalLinks:!0,maxExternalLinksLength:50,hashtagLinks:!0},r=function(e){var t,n,r,i,s,o;s=[].slice.call(arguments,1);for(t=0,n=s.length;t&lt;n;++t){i=s[t];for(o in i)i[o]!==r&amp;&amp;(e[o]=i[o])}return e},i=function(e){return e.replace(/^\s+/,"").replace(/\s+$/,"")},s=function(e){return e.textContent||e.innerText||""},a=function E(e,t){t(e),e=e.firstChild;while(e)E(e,t),e=e.nextSibling},o=function(e,t){if(e.length&lt;t)return e;var n=document.createElement("div"),r=document.createElement("div"),i,s;return i=function(e){if(t&gt;0){var n=e.data.length;t-=n,t&lt;=0&amp;&amp;(e.data=e.substringData(0,e.data.length+t))}else e.data=""},s=function(e,n){var r=e.firstChild,i;if(r)do r.nodeType===3?n(r):r.nodeType===1&amp;&amp;s(r,n);while((r=r.nextSibling)&amp;&amp;t&gt;0);while(r)i=r,r=r.nextSibling,e.removeChild(i)},r.innerHTML=n.innerHTML=e,s(n,i),n.innerHTML+(n.innerHTML===r.innerHTML?"":"&hellip;")},u=function(e,t,n){e=n?e:e.replace(y,"");var r,i,s=/\.[a-z]{2,4}\//,o=e.match(s);return o&amp;&amp;o[0]&amp;&amp;e.length&gt;t?(r=e.search(s)+o[0].length,i=Math.floor((t-r)/2),e.slice(0,r+i)+"&hellip;"+e.slice(-i)):e},e=function(e,n){var s=r({},t,n),E,S,x=s.whitelist&amp;&amp;s.whitelist.slice(),T=document.createElement("div");if(typeof e!="string")return"";s.links?!s.userLinks&amp;&amp;!s.internalLinks&amp;&amp;!s.externalLinks?s.links=!1:x.push("a"):s.userLinks=s.internalLinks=s.externalLinks=!1,f.lastIndex=h.lastIndex=c.lastIndex=0,e=e.replace(/&lt;\/p&gt;/g,"\n\n").replace(/&lt;br\s*\/?&gt;/g,"\n").replace(w," "),x&amp;&amp;x.length?e=e.replace(new RegExp("&lt;(?!\\s*\\/?("+x.join("|")+")\\b)[^&gt;]*&gt;","ig"),""):e=e.replace(/&lt;.*?&gt;/g,""),T.innerHTML=e,s.links&amp;&amp;a(T,function(e){e.nodeType===3?e.parentNode.nodeName.toLowerCase()!=="a"&amp;&amp;(e.nodeValue=e.nodeValue.replace(f,"{{$1}}").replace(c,"{{mailto:$1}}").replace(h,"$1{{@$2}}")):e.nodeName==="A"&amp;&amp;(g.test(e.href)&amp;&amp;(e.href=e.href.replace(g,s.internalLinksBaseUrl),e.removeAttribute("target")),e.children.length||(e.innerHTML=u(e.innerHTML,s.maxExternalLinksLength,!0)))}),e=T.innerHTML,s.links&amp;&amp;(e=e.replace(d,function(e,t){return s.internalLinks&amp;&amp;g.test(t)?'&lt;a href="'+t.replace(g,s.internalLinksBaseUrl)+'"&gt;'+t.replace(y,"")+"&lt;/a&gt;":s.externalLinks?'&lt;a href="'+(y.test(t)?t:"http://"+t)+'" rel="nofollow" target="_blank"&gt;'+u(t,s.maxExternalLinksLength)+"&lt;/a&gt;":t}).replace(v,'&lt;a href="mailto:$1"&gt;$1&lt;/a&gt;').replace(m,'@&lt;a href="'+s.internalLinksBaseUrl+'$1"'+(s.isOpeningNewWindow?' target="_blank"':"")+"&gt;$1&lt;/a&gt;"),s.hashtagLinks&amp;&amp;(e=e.replace(p,'$1&lt;a href="/tags/$3"&gt;$2&lt;/a&gt;')),s.deepLinks&amp;&amp;(e=e.replace(l,'&lt;a href="#t=$1"&gt;$1&lt;/a&gt;'))),s.maxLength&amp;&amp;(e=o(e,s.maxLength));if(s.paragraphs){e=e.split(b);for(E=0,S=e.length;E&lt;S;E++)e[E]=i(e[E]),e[E]=e[E].replace(/\r?\n/g,"&lt;br&gt;"),e[E]="&lt;p&gt;"+e[E]+"&lt;/p&gt;";e=e.join("")}else e=e.replace(/[\r\n]+/g," ").replace(w," ");return e},e.withDefaults=function(n){var i=r({},t,n);return function(t,n){var s=n?r({},i,n):i;return e.call(this,t,s)}},typeof n!="undefined"&amp;&amp;n.exports?n.exports=e:(global=function(){return this}(),global.SC=global.SC||{},global.SC.usertext=e)})()}),
define("views/search/suggestion-item.css",["require","exports","module","css"],function(e,t,n,r){n.exports=r.stringToStyleElement(r.transform(".suggestionItem{display:block;height:50px}.suggestedLink{height:50px;display:block;padding:0 16px;color:#333}.suggestedResult{height:50px;display:block;line-height:50px;border-bottom:1px solid #d6d6d6;padding:0 0 0 32px}.suggestedLink:active{background:#f2f2f2}.suggestedUser&gt;.suggestedResult{background:url(https://m.soundcloud.com/assets/images/ldpi/suggestions/user-8fcba46c.png) 0 14px no-repeat;background-size:18px 18px}.suggestedSound&gt;.suggestedResult{background:url(https://m.soundcloud.com/assets/images/ldpi/suggestions/sound-8fcba46c.png) 0 16px no-repeat;background-size:18px 18px}")),data=null}),
define("views/search/suggestion-item.tmpl",["vendor/handlebars-runtime"],function(){return require("vendor/handlebars-runtime").template(function(e,t,n,r,i){function l(e,t){return u(n.$route.call(e,"user",e,{hash:{},data:t}))}function c(e,t){return u(n.$route.call(e,"listen",e,{hash:{},data:t}))}this.compilerInfo=[4,"&gt;= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u=this.escapeExpression,a="function",f=this;s+='&lt;a class="suggestedLink '+u((o=t&amp;&amp;t.className,typeof o===a?o.apply(t):o))+'" href="',o=n["if"].call(t,t&amp;&amp;t.isUser,{hash:{},inverse:f.program(3,c,i),fn:f.program(1,l,i),data:i});if(o||o===0)s+=o;s+='"&gt; &lt;span class="suggestedResult"&gt;',o=(o=t&amp;&amp;t.query,typeof o===a?o.apply(t):o);if(o||o===0)s+=o;return s+="&lt;/span&gt;\n&lt;/a&gt;\n",s})}),
define("lib/css-transitions",["require","exports","module","$","underscore"],function(e,t,n){function h(e,t,n){d(e,t,{"in":f,out:l,transitionClass:a},n)}function p(e,t,n){d(e,t,{"in":o,out:u,transitionClass:s},n)}function d(e,t,n,s){var o=e?n.out:n.in,u=e?n.in:n.out,a=r(t);a.addClass(n.transitionClass).addClass(o),setTimeout(function(){a.addClass(u).removeClass(o),i.delay(function(){a.removeClass(n.transitionClass).removeClass(o).removeClass(u),s&amp;&amp;s()},c)},16)}var r=e("$"),i=e("underscore"),s="g-transition-fade",o="g-transition-fade-in",u="g-transition-fade-out",a="g-transition-translate",f="g-transition-slide-top-in",l="g-transition-slide-top-out",c=300;t.fadeIn=p.bind(null,!0),t.fadeOut=p.bind(null,!1),t.slideTopIn=h.bind(null,!0),t.slideTopOut=h.bind(null,!1)}),
define("lib/scroll-bouncing-fix",["require","exports","module"],function(e,t,n){var r=n.exports=function(){this.$el.on("touchmove",function(e){e.preventDefault()})}}),
define("layouts/listen",["require","exports","module","config","config/error-messages","models/exception","lib/layouts/fullheight","lib/futures","lib/lingua","models/playlist","models/sound","lib/url"],function(e,t,n){function d(e,t,n){var r=u.defer();return l.resolve(e,t,n).done(r.resolve).fail(s.ajaxFatal(i.SOUND_NOT_FOUND)),r}function v(e){var t=u.defer(),n,i;return n=r.get("router").getRouteInfo("playlist"),i=n.route.exec(e),i?(i.shift(),n.handler.apply({apply:function(e,n){f.resolve(n.userPermalink,n.playlistPermalink,n.secretToken).done(t.resolve).fail(function(){t.resolve(null)})}},i)):t.resolve(null),t}function m(e,t){t&amp;&amp;(e=t.findSound(e)||e),this.setTitle(a.t("[[soundTitle]] by [[authorName]]",{soundTitle:e.get("title"),authorName:e.get("user").username}));var n={"l-main":["views/listen/listen-carousel",{resource_id:e.resource_id}],"l-footnote":["views/sound/sound-controls"]};return this.setViews(n)}var r=e("config"),i=e("config/error-messages"),s=e("models/exception"),o=e("lib/layouts/fullheight"),u=e("lib/futures"),a=e("lib/lingua"),f=e("models/playlist"),l=e("models/sound"),c=e("lib/url"),h=a.t("Take this track with you and enjoy the full SoundCloud experience with our free app."),p=n.exports=o.extend({performanceSelector:".soundControls__playPause",setup:function(e){var t=u.defer(),n,r=[];return r.push(d(e.userPermalink,e.soundPermalink,e.secretToken)),n=c.getQueryParam("in"),n&amp;&amp;r.push(v(n)),this.pageUrn="",u.all(r).then(function(e,t){return this.pageUrn=e.getUrn(),m.call(this,e,t)}.bind(this)).then(t.resolve),t},includeFooter:".l-footnote",getPageUrn:function(){return this.pageUrn},getUpsellText:function(){return h}})}),
define("config/error-messages",["require","exports","module","lib/lingua"],function(e,t,n){var r=e("lib/lingua"),i=n.exports={UNKNOWN:{title:r.t("Were sorry, there seems to be a problem here"),message:r.t("Please try refreshing the page")},PAGE_NOT_FOUND:{title:r.t("We cant find this page")},SOUND_NOT_FOUND:{title:r.t("We cant find this sound")},PLAYLIST_NOT_FOUND:{title:r.t("We cant find this playlist")},USER_NOT_FOUND:{title:r.t("We cant find this user")}}}),
define("models/exception",["require","exports","module","underscore","lib/event-bus","lib/model"],function(e,t,n){var r=e("underscore"),i=e("lib/event-bus"),s=e("lib/model"),o=n.exports=s.extend({url:null,lastFetchTime:1,initialize:function(e){e=e||{},this.id||(e.id=this.id=this.cid,o.instances.set(this.id,this)),this.fatal=!!e.fatal,s.prototype.initialize.apply(this,arguments)}},{raise:function(e,t){var n=new o(e);n.release(),t=t||{};if(t.hard)throw n;i.trigger("exception",n)},ajaxFatal:function(e){return function(t,n){n!=="abort"&amp;&amp;o.raise(r.extend(e,{xhr:t,fatal:!0}))}},ajaxNonFatal:function(e){return function(t,n){n!=="abort"&amp;&amp;o.raise({message:e,xhr:t,fatal:!1})}}})}),
define("models/playlist",["require","exports","module","$","underscore","models/audible-interface","lib/backbone","lib/event-bus","lib/math","lib/model","lib/play-manager","models/sound","lib/helpers/title-helper","models/user","lib/url","lib/mixins/urn"],function(e,t,n){function y(e,t){var n=e[t?"on":"off"].bind(e);n("play",b,this),n("pause",w,this),n("finish",E,this),n("time",S,this),n("seeked",x,this)}function b(e){this._internalNavigation||(T.call(this,e,"play"),this._internalNavigation=!0)}function w(e){this._internalNavigation||(T.call(this,e,"pause"),this._internalNavigation=!0)}function E(e){e.sound===this.soundsCollection.last()&amp;&amp;(T.call(this,e,"pause"),T.call(this,e,"finish"))}function S(e){T.call(this,e,"time")}function x(e){T.call(this,e,"seeked")}function T(e,t){e.playlist=this,this.trigger(t,e),u.trigger("audio:"+t,e)}function N(){var e=[];i.each(this.get("tracks"),function(t){var n,r,s,o;s=this.soundsCollection.any(function(e){return e.id===t.id}),s||(o=new c(t),this.addSubmodel(o),r=i.extend({},t,{resource_id:{playlist_id:this.id,sound_id:t.id}}),n=new c(r,{suppressGlobalEvents:!0}),n.playlist=this,n.originalSound=o,e.push(n),y.call(this,n,!0))},this),this.soundsCollection.length===0?this.soundsCollection.reset(e):this.soundsCollection.add(e,{silent:!0}),C(this.soundsCollection)}function C(e){e.reduce(function(e,t){return t.timeOffset=e,e+t.get("duration")},0)}var r=e("$"),i=e("underscore"),s=e("models/audible-interface"),o=e("lib/backbone"),u=e("lib/event-bus"),a=e("lib/math"),f=e("lib/model"),l=e("lib/play-manager"),c=e("models/sound"),h=e("lib/helpers/title-helper"),p=e("models/user"),d=e("lib/url"),v=e("lib/mixins/urn"),m;m=o.Collection.extend({model:c,fetch:function(){return this.playlist.fetch.apply(this.playlist,arguments)},initialize:function(e,t){this.playlist=t.playlist},hasDataForView:function(){return!!this.playlist.attributes.tracks},isFullyPopulated:function(){return!0},_usageCount:function(){return 1},hold:r.noop,release:r.noop});var g=n.exports=s.extend(v,{resource_type:"playlist",urnPrefix:"soundcloud:playlists",submodelMap:{tracks:c,user:p},soundsCollection:null,currentSoundCursor:0,_isPlayActionQueued:!1,_internalNavigation:!1,setup:function(){s.prototype.setup.apply(this,arguments),this.soundsCollection=new m(null,{playlist:this})},baseUrl:function(){return d.stringify({path:["playlists",this.id]})},parse:function(e){return e=f.prototype.parse.apply(this,arguments),e.secret_token&amp;&amp;e.tracks&amp;&amp;e.tracks.forEach(function(t){t.sharing!=="public"&amp;&amp;(t.secret_token=e.secret_token)}),e.sharing==="private"&amp;&amp;(e.track_count=Math.max(e.track_count,e.tracks.length)),e},createSubmodel:function(e,t){t==="tracks"?N.call(this):f.prototype.createSubmodel.apply(this,arguments)},getSoundsCollection:function(){return this.soundsCollection},getSounds:function(){return this.soundsCollection.models},getNumSounds:function(){return this.soundsCollection.length},getSoundAt:function(e){return this.soundsCollection.at(e===0?0:this.getSoundIndexAt(e))},getSoundIndex:function(e){return this.soundsCollection.indexOf(e)},getSoundIndexAt:function(e){var t,n=this.getSounds();for(t=n.length;t--;)if(e&gt;=n[t].timeOffset)return t},getRelativeTrackLength:function(e){return a.precise(this.soundsCollection.at(e).get("duration")/this.get("duration"),7)},findSound:function(e){return this.findSoundById(e.id)},findSoundById:function(e){return this.soundsCollection.get(e)},getPrevSound:function(){return this.soundsCollection.at(this.currentSoundCursor-1)},getCurrentSound:function(){return this.soundsCollection.at(this.currentSoundCursor)},getNextSound:function(){return this.soundsCollection.at(this.currentSoundCursor+1)},getFirstSound:function(){return this.soundsCollection.at(0)},getLastSound:function(){return this.soundsCollection.at(this.soundsCollection.length-1)},containsSound:function(e){return!!this.findSoundById(e)},play:function(e){this.soundsCollection.length?(this._internalNavigation=!1,this.getCurrentSound().audio.play(e)):this.lastFetchTime||(this._isPlayActionQueued=!0,this.fetch().done(function(){this._isPlayActionQueued&amp;&amp;(this._isPlayActionQueued=!1,this.play(e))}.bind(this)))},pause:function(e){this._isPlayActionQueued=!1,this.soundsCollection&amp;&amp;this.soundsCollection.length&amp;&amp;(this._internalNavigation=!1,this.getCurrentSound().audio.pause(e))},seek:function(e){if(this.soundsCollection.length){var t=this.getCurrentSound(),n=t.isPlaying(),r=this.getSoundIndexAt(e),i=this.soundsCollection.at(r);i.seek(e-i.timeOffset),t!==i&amp;&amp;(this._internalNavigation=!0,t.audio.pause(),this.currentSoundCursor=r,n&amp;&amp;(this._internalNavigation=!0,l.play(i,{keepSource:!0,userInitiated:!0}),h.update()))}},currentTime:function(){var e=this.getCurrentSound();return e?e.audio.currentTime()+e.timeOffset:0},isBuffering:function(){var e=this.getCurrentSound();return e&amp;&amp;e.isBuffering()||this.soundsCollection.some(function(e){return e.isBuffering()})},isPlaying:function(){var e=this.getCurrentSound();return e&amp;&amp;e.isPlaying()||this.soundsCollection.some(function(e){return e.isPlaying()})},isPlayable:function(){return this.soundsCollection.every(function(e){return e.isPlayable()})},isProcessing:function(){return this.soundsCollection.length?this.soundsCollection.any(function(e){return e.isProcessing()}):!1},loadProgress:function(){var e=this.getCurrentSound();return e?(e.timeOffset+e.loadProgress()*e.duration())/this.duration():0}},{urnPrefix:"soundcloud:playlists",onCleanup:function(e){e.soundsCollection.each(function(e){e.playlist=null,e.release()}),e.soundsCollection.off(),delete e.soundsCollection,s.onCleanup(e)},resolve:function(e,t,n){return f._resolve(this,[e,"sets",t,n],function(n){var r=n.get("user");return r&amp;&amp;n.get("permalink")===t&amp;&amp;r.permalink===e})}})}),
define("views/listen/listen-carousel",["require","exports","module","underscore","$","lib/views/mixins/audible-control","config","lib/views/mixins/has-queue-source","lib/play-manager","router","models/sound","views/sound/sound","lib/helpers/style-helper","lib/view","lib/window-events","views/listen/listen-carousel.css","views/listen/listen-carousel.tmpl"],function(e,t,n){function y(e){var t=e?"on":"off";d[t]("resize:debounced",D,this),a[t]("change:currentSound",b,this)}function b(e){e.isGoingForward&amp;&amp;e.prev?w.call(this,e.current.resource_id,!0):e.isGoingForward===!1&amp;&amp;w.call(this,e.current.resource_id),x(e.current)}function w(e,t){var n=t?0:3,r=t?2:0,i=t?N:T,s=this.$("."+this.itemClassName);S.call(this,e,r),t?C.call(this,[s[1],s[2]],"left"):C.call(this,[s[0],s[1]],"right"),this.addDeferred(setTimeout(function(){i(this.getElement("wrapper")[0],L.call(this)),s=this.$("."+this.itemClassName),s[n].parentNode.removeChild(s[n]),k([s[1],s[2]])}.bind(this),v))}function E(e){var t="sound_"+e,n=this.subviews[t];return n||(n=new c({resource_id:e}),this.addSubview(n.render(),t)),n}function S(e,t){var n=E.call(this,e),r=this.$("."+this.itemClassName)[t];r&amp;&amp;(r.innerHTML="",r.appendChild(n.el))}function x(e){var t=f.getRoute("listen",e);o.get("router").navigate(t,{trigger:!1,replace:!0})}function T(e,t){e.insertBefore(t,e.firstChild)}function N(e,t){e.appendChild(t)}function C(e,t){t=t==="left"?-this._carouselWidth:this._carouselWidth;var n="transform: translate3d("+t+"px , 0, 0);";e.forEach(function(e){e.className+=" g-transition-translate",h(e,n)})}function k(e){var t="transform: none;";e.forEach(function(e){i(e).removeClass("g-transition-translate"),h(e,t)})}function L(){var e=document.createElement("div");return e.className=this.itemClassName,A.call(this,e,this._carouselWidth),e}function A(e,t){e.style.width=t+"px"}function O(e){this.elWidth=this.el.offsetWidth,this.$el.find(".listenCarousel__itemWrapper").each(function(t){A(t,e)})}function M(e){var t=this.getElement("wrapper")[0],n=-1*e;h(t,"transform: translate("+n+"px, 0)"),t.style.width=3*e+"px"}function _(){return this._carouselWidth=this.el.offsetWidth,this._carouselWidth}function D(){var e=_.call(this);M.call(this,e),O.call(this,e)}var r=e("underscore"),i=e("$"),s=e("lib/views/mixins/audible-control"),o=e("config"),u=e("lib/views/mixins/has-queue-source"),a=e("lib/play-manager"),f=e("router"),l=e("models/sound"),c=e("views/sound/sound"),h=e("lib/helpers/style-helper"),p=e("lib/view"),d=e("lib/window-events"),v=250,m,g=n.exports=p.extend(s,u,{css:e("views/listen/listen-carousel.css"),template:e("views/listen/listen-carousel.tmpl"),className:"listenCarousel",itemClassName:"listenCarousel__itemWrapper",element2selector:{wrapper:".listenCarousel__wrapper"},states:{transitionTranslate:function(e){this.getElement("wrapper")[e?"addClass":"removeClass"]("g-transition-translate")}},ModelClass:l,getQueueSource:function(){return this.model.playlist||this.model},cursor:-1,setup:function(){this.$el.one("pointerdown",m.bind(this)),y.call(this,!0)},dispose:function(){y.call(this,!1)},renderDecorate:function(){this.whenInserted().done(function(){D.call(this),S.call(this,this.model.resource_id,1)}.bind(this))},teardown:function(){clearTimeout(this._fetchNeighborSoundsId)}});m=r.once(function(){var e=this.getQueueSource();e&amp;&amp;!e.isPlaying()&amp;&amp;this.playAudible(e,{userInitiated:!0})})}),
define("views/sound/sound-controls",["require","exports","module","underscore","lib/event-bus","lib/play-manager","lib/view","views/sound/sound-controls.css","views/sound/sound-controls.tmpl"],function(e,t,n){function l(e){this.getState("disabled")||s[e==="prev"?"playPrev":"playNext"]({userInitiated:!0})}function c(){this.getState("disabled")||s.toggleCurrent({userInitiated:!0})}function h(){var e=s.getCurrentSound(),t=!!e&amp;&amp;!!e.isLoading(),n=!s.hasCurrentSound(),r=n||!s.hasPrevSound(),i=n||!s.hasNextSound();this.toggleState("loading",t).toggleState("prevDisabled",r).toggleState("nextDisabled",i).toggleState("disabled",n)}function p(){this.toggleState("paused",!0).toggleState("playing",!1),h.call(this)}function d(){this.toggleState("playing",!0).toggleState("paused",!1),h.call(this)}function v(){this.toggleState("initializing",!0),this.addDeferred(r.delay(function(){this.toggleState("initializing",!1),this.toggleState("initialized",!0)}.bind(this),u))}function m(){this.toggleState("scrubbing",!0)}function g(){this.toggleState("scrubbing",!1)}var r=e("underscore"),i=e("lib/event-bus"),s=e("lib/play-manager"),o=e("lib/view"),u=2e3,a=250,f=n.exports=o.extend({css:e("views/sound/sound-controls.css"),template:e("views/sound/sound-controls.tmpl"),className:"soundControls sc-selection-disabled",tagName:"section",events:{"click .soundControls__prev":"onClickPrev","click .soundControls__next":"onClickNext","click .soundControls__playPause":c},states:{loading:"loading",playing:"playing",paused:"paused",prevDisabled:"prevDisabled",nextDisabled:"nextDisabled",disabled:"disabled",initializing:"initializing",initialized:"initialized"},setup:function(){this.listenTo(i,"audio:play",d).listenTo(i,"audio:pause",p).listenTo(i,"scrub:start",m).listenTo(i,"scrub:end",g).listenToOnce(i,"audio:play",v)},renderDecorate:function(){var e=s.getCurrentSound();e&amp;&amp;e.isPlaying()&amp;&amp;this.toggleState("initialized",!0).toggleState("playing",!0).toggleState("paused",!1)},dispose:function(){this.stopListening()},onClickNext:r.debounce(function(){l.call(this,"next")},a,!0),onClickPrev:r.debounce(function(){l.call(this,"prev")},a,!0)})}),
define("lib/math",["require","exports","module"],function(e,t,n){n.exports={clamp:function(e,t,n){return Math.min(n,Math.max(t,e))},precise:function(e,t){return t=Math.pow(10,t||0),Math.round(e*t)/t}}}),
define("lib/views/mixins/has-queue-source",["require","exports","module","underscore","lib/event-bus","lib/mixin","lib/play-manager","lib/url"],function(e,t,n){function f(e){var t=e?"on":"off";i[t]("audio:play",l,this)[t]("audio:pause",c,this)}function l(e){h.call(this,e.sound)}function c(e){h.call(this,e.sound)}function h(e){this.toggleState("playing",p.call(this,e))}function p(e){return e=e||o.getCurrentSound(),!!(e&amp;&amp;e.isPlaying()&amp;&amp;this.getQueueSource().getSounds().indexOf(e)&gt;-1)}function d(e){var t=e.data,n=t.audible,r=this.getQueueSource();return r&amp;&amp;o.indexOfSoundInSource(n.getCurrentSound(),r)&gt;-1}var r=e("underscore"),i=e("lib/event-bus"),s=e("lib/mixin"),o=e("lib/play-manager"),u=e("lib/url"),a=n.exports=new s({defaults:{getQueueSource:function(){return this.collection||this.model},getRestoreUrl:function(){return u.currentPath()}},applyTo:function(e){e.bubbleEvents=r.extend(e.bubbleEvents||{},{requestPlayContext:"onRequestPlayContext"})},onRequestPlayContext:function(e){d.call(this,e)&amp;&amp;(e.stopPropagation(),r.extend(e.data,{source:this.getQueueSource(),restoreUrl:this.getRestoreUrl()}))},before:{setup:function(){f.call(this,!0)},dispose:function(){f.call(this,!1)},renderDecorate:function(){var e=this.getQueueSource(),t=0;e&amp;&amp;o.setInitialSource(e,t,this.getRestoreUrl()),h.call(this)},teardown:function(){var e=this.getQueueSource();e&amp;&amp;o.unsetInitialSource(e)}}})}),
define("views/sound/sound",["require","exports","module","lib/views/mixins/audible-control","lib/event-bus","lib/views/mixins/fullscreen-loader","lib/views/mixins/has-queue-source","lib/helpers/image-helper","lib/play-manager","models/sound","lib/views/mixins/swipeable","lib/tracking/tracking-bus","lib/view","views/sound/sound.css","views/sound/sound.tmpl"],function(e,t,n){function d(){this.model.get("playable")||this.getElement("info").addClass("disabled")}function v(){c.action("navigate","user")}function m(){this.toggleAudible(this.model,{userInitiated:!0,context:this.getContextData()})}function g(){this.toggleState("paused",!0),this.toggleState("playing",!1)}function y(){this.toggleState("paused",!1),this.toggleState("playing",!0)}function b(){this.getState("paused")||(this._wasPaused=this.getState("paused"),this.toggleState("paused",!0))}function w(){this.toggleState("paused",this._wasPaused)}var r=e("lib/views/mixins/audible-control"),i=e("lib/event-bus"),s=e("lib/views/mixins/fullscreen-loader"),o=e("lib/views/mixins/has-queue-source"),u=e("lib/helpers/image-helper"),a=e("lib/play-manager"),f=e("models/sound"),l=e("lib/views/mixins/swipeable"),c=e("lib/tracking/tracking-bus"),h=e("lib/view"),p=n.exports=h.extend(s,r,o,l,{swipeableSelector:".sound__artwork",ModelClass:f,css:e("views/sound/sound.css"),template:e("views/sound/sound.tmpl"),className:"sound g-box-full",element2selector:{info:".sound__info",artwork:".sound__artworkImage"},requiredAttributes:["user","title"],events:{"click .sound__artwork":m,"click .sound__info":v},bubbleEvents:{scrubStart:b,scrubEnd:w},setup:function(){this._wasPaused=!1,this.listenTo(i,"audio:pause",g).listenTo(i,"audio:play",y).model.on("change:playable",this.rerender,this)},dispose:function(){this.stopListening().model.off("change:playable",this.rerender,this)},renderDecorate:function(){var e=u.urlFrom(this.model.toJSON(),500),t=this.getElement("artwork")[0];u.fadeInBackground(e,t),d.call(this),this.model.playlist&amp;&amp;a.backfillHistoryFromPlaylist(this.model,this.model.playlist)},getQueueSource:function(){return this.model.playlist||this.model},onSwipeLeft:function(){a.playNext({userInitiated:!0})},onSwipeRight:function(){a.playPrev({userInitiated:!0})}})}),
define("lib/helpers/style-helper",["require","exports","module"],function(e,t,n){function o(e,t,n){return e.style[t]=n,!0}function u(e){return e in document.documentElement.style}var r={transform:["webkit"]},i=Object.keys(r),s=n.exports=function(e,t){t=t.replace(";","");var n=t.split(":"),s=n[0],a=n[1],f=!1;return u(s)&amp;&amp;(f=o(e,s,a)),!f&amp;&amp;i.indexOf(s)&gt;-1&amp;&amp;(f=r[s].some(function(t){var n="-"+t+"-"+s;if(u(n))return o(e,n,a)})),f}}),
define("lib/window-events",["require","exports","module","$","underscore","lib/backbone","lib/support"],function(e,t,n){function l(e,t){var n=t+"d",r=e==="resize"?c(n):f.trigger.bind(f,e+":"+n);return i[t](r,a)}function c(e){var t=window.innerWidth,n=window.innerHeight,r=f.trigger.bind(f,"resize:x:"+e),i=f.trigger.bind(f,"resize:y:"+e),s=f.trigger.bind(f,"resize:"+e);return function(e){var o=window.innerWidth,u=window.innerHeight;o!==t&amp;&amp;r(e),u!==n&amp;&amp;i(e),s(e),n=u,t=o}}var r=e("$"),i=e("underscore"),s=e("lib/backbone"),o=e("lib/support"),u=o.orientationChange?"orientationchange":"resize",a=200,f=n.exports=i.extend({},s.Events);r(window).on(u,l("resize","debounce")).on(u,l("resize","throttle")).on("scroll",l("scroll","debounce")).on("scroll",l("scroll","throttle"))}),
define("views/listen/listen-carousel.css",["require","exports","module","css"],function(e,t,n,r){n.exports=r.stringToStyleElement(r.transform(".listenCarousel{position:relative;width:100%;height:100%;overflow:hidden}.listenCarousel__wrapper{height:100%}.listenCarousel__itemWrapper{float:left;height:100%}")),data=null}),
define("views/listen/listen-carousel.tmpl",["vendor/handlebars-runtime"],function(){return require("vendor/handlebars-runtime").template(function(e,t,n,r,i){return this.compilerInfo=[4,"&gt;= 1.0.0"],n=this.merge(n,e.helpers),i=i||{},'&lt;div class="listenCarousel__wrapper"&gt; &lt;div class="listenCarousel__itemWrapper"&gt;&lt;/div&gt; &lt;div class="listenCarousel__itemWrapper"&gt;&lt;/div&gt; &lt;div class="listenCarousel__itemWrapper"&gt;&lt;/div&gt;\n&lt;/div&gt;\n'})}),
define("views/sound/sound-controls.css",["require","exports","module","css"],function(e,t,n,r){n.exports=r.stringToStyleElement(r.transform(".soundControls{height:80px;position:absolute;top:50%;left:0;right:0;margin-top:-40px;-webkit-transform:translate3d(0,0,0);pointer-events:none}.soundControls__control{background-position:0 0;background-repeat:no-repeat;background-size:100% auto;position:absolute;pointer-events:auto}.soundControls__prev,.soundControls__next{background-image:url(https://m.soundcloud.com/assets/images/ldpi/player/skip_button-e03e9a61.png);width:28px;height:19px;top:30px;opacity:0;-webkit-transition:opacity 2s cubic-bezier(1,.01,.81,1);transition:opacity 2s cubic-bezier(1,.01,.81,1)}.soundControls__prev{left:17px}.soundControls__next{right:17px;-webkit-transform:scaleX(-1);-ms-transform:scaleX(-1);transform:scaleX(-1)}.soundControls.disabled .soundControls__playPause,.soundControls.playing .soundControls__playPause:active,.soundControls.loading .soundControls__playPause:active{background-color:rgba(0,0,0,.5)}.soundControls.playing .soundControls__playPause,.soundControls.loading .soundControls__playPause{background-position:0 0}.soundControls__prev:active,.soundControls__next:active{background-position:0 -19px}.soundControls.disabled .soundControls__next,.soundControls.nextDisabled .soundControls__next,.soundControls.disabled .soundControls__prev,.soundControls.prevDisabled .soundControls__prev{display:none}.initialized .soundControls__playPause{opacity:0}.initializing .soundControls__next,.initializing .soundControls__prev,.paused .soundControls__next,.paused .soundControls__prev,.paused .soundControls__playPause{opacity:1}.paused .soundControls__next,.paused .soundControls__prev,.paused .soundControls__playPause{-webkit-transition:none;transition:none}.soundControls.scrubbing{display:none}")),data=null}),
define("views/sound/sound-controls.tmpl",["vendor/handlebars-runtime"],function(){return require("vendor/handlebars-runtime").template(function(e,t,n,r,i){this.compilerInfo=[4,"&gt;= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o=this.escapeExpression;return s+='&lt;a role="button" class="soundControls__control soundControls__prev g-touch-padding"&gt;'+o(n.$a11y.call(t,{hash:{screenreader:n.$t.call(t,"Previous track",{hash:{_comment:"Help text on prev button"},data:i})},data:i}))+'&lt;/a&gt;\n&lt;a role="button" class="g-play-button soundControls__playPause g-touch-padding"&gt;'+o(n.$a11y.call(t,{hash:{screenreader:n.$t.call(t,"Play or pause track",{hash:{_comment:"Help text on play/pause button"},data:i})},data:i}))+'&lt;/a&gt;\n&lt;a role="button" class="soundControls__control soundControls__next g-touch-padding"&gt;'+o(n.$a11y.call(t,{hash:{screenreader:n.$t.call(t,"Next track",{hash:{_comment:"Help text on next button"},data:i})},data:i}))+"&lt;/a&gt;\n",s})}),
define("lib/views/mixins/fullscreen-loader",["require","exports","module","lib/views/loading","lib/mixin"],function(e,t,n){var r=e("lib/views/loading"),i=e("lib/mixin"),s=n.exports=new i({override:{LoadingView:r,loadingViewArgs:function(){return{size:"fullscreen"}}}})}),
define("lib/views/mixins/swipeable",["require","exports","module","lib/mixin"],function(e,t,n){function s(e){var t=e.data.direction;t==="left"&amp;&amp;this.onSwipeLeft?this.onSwipeLeft():this.onSwipeRight&amp;&amp;this.onSwipeRight(),e.originalEvent.preventDefault()}var r=e("lib/mixin"),i=n.exports=new r({defaults:{swipeableSelector:null},after:{renderDecorate:function(){this.$el.on("swipe",this.swipeableSelector,s.bind(this))}}})}),
define("views/sound/sound.css",["require","exports","module","css"],function(e,t,n,r){n.exports=r.stringToStyleElement(r.transform(".sound__info{position:absolute;z-index:1;top:20px;left:18px;right:18px}.sound__username{font-size:15px;line-height:22px}.sound__username a{color:#ccc}.sound__title{font-size:22px;line-height:1.3}.sound__controls{position:absolute;top:50%;left:0;right:0;height:80px;margin-top:-50px}.sound__infoContent{margin:0 0 4px}.sound__artwork,.sound__artworkOverlay{position:absolute;top:0;bottom:0;width:100%}.sound__artworkOverlay{height:100%;opacity:0;background:#000}.sound__playIndicator{-webkit-transform:translate3d(0,-3px,0);transform:translate3d(0,-3px,0)}.sound.playing .sound__playIndicator{-webkit-transform:translate3d(0,0,0);transform:translate3d(0,0,0)}.sound__info.disabled&gt;.sound__infoDisabled{display:block}.sound__infoDisabled{display:none;position:absolute;background:rgba(0,0,0,.2);top:0;left:0;right:0;bottom:0}.sound.paused .sound__artworkOverlay{opacity:.6}.sound.paused .sound__username,.sound.paused .sound__title{background:none;box-shadow:none}")),data=null}),
define("views/sound/sound.tmpl",["vendor/handlebars-runtime","views/banner/banner","views/sound/waveform"],function(){return require("vendor/handlebars-runtime").template(function(e,t,n,r,i){function l(e,t){var r="";return r+=" "+u(n.$view.call(e,"views/banner/banner",{hash:{},data:t}))+"\n",r}function c(e,t){var r="",i;r+=" ",i=n.$view.call(e,"views/banner/banner",{hash:{},inverse:a.noop,fn:a.program(4,h,t),data:t});if(i||i===0)r+=i;return r+="\n",r}function h(e,t){var r="";return r+=" "+u(n.$t.call(e,"We're sorry, track not available on mobile",{hash:{},data:t}))+" ",r}this.compilerInfo=[4,"&gt;= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u=this.escapeExpression,a=this,f="function";s+='&lt;div class="sound__playIndicator g-z-index-banner g-play-indicator"&gt;&lt;/div&gt;\n&lt;div class="sound__info"&gt; &lt;div class="sound__infoContent"&gt; &lt;h3 class="sound__username g-type-shrinkwrap-inline sc-truncate"&gt; &lt;a href="'+u(n.$route.call(t,"user",t&amp;&amp;t.user,{hash:{},data:i}))+'" class="g-touch-padding"&gt;'+u((o=(o=t&amp;&amp;t.user,o==null||o===!1?o:o.username),typeof o===f?o.apply(t):o))+'&lt;/a&gt; &lt;/h3&gt;\n&lt;/div&gt; &lt;div class="sound__infoContent"&gt; &lt;h2 class="sound__title g-type-shrinkwrap-inline"&gt;'+u((o=t&amp;&amp;t.title,typeof o===f?o.apply(t):o))+'&lt;/h2&gt; &lt;/div&gt;\n&lt;/div&gt; &lt;div class="sound__artwork"&gt; &lt;div class="sound__artworkOverlay"&gt;&lt;/div&gt; &lt;div class="sound__artworkImage sc-selection-disabled g-background-cover g-transition-fade g-transition-fade-out"&gt;&lt;/div&gt;\n&lt;/div&gt; ',o=n["if"].call(t,t&amp;&amp;t.playable,{hash:{},inverse:a.program(3,c,i),fn:a.program(1,l,i),data:i});if(o||o===0)s+=o;return s+=" "+u(n.$view.call(t,"views/sound/waveform",{hash:{resource_id:t&amp;&amp;t._resource_id,resource_type:t&amp;&amp;t._resource_type},data:i}))+"\n",s})}),
define("views/banner/banner",["require","exports","module","underscore","lib/view","views/banner/banner.css"],function(e,t,n){var r=e("underscore"),i=e("lib/view"),s=n.exports=i.extend({className:"banner g-z-index-banner",css:e("views/banner/banner.css"),template:function(){return""},defaults:{message:null},setup:function(e){this.options.message=e.message||e.blockContent,this.toggleState("disabled",!0),r.bindAll(this,"setBanner")},renderDecorate:function(){this.whenInserted().done(function(){var e=this.options;!r.isEmpty(e)&amp;&amp;!r.isEmpty(r.compact(r.values(e)))&amp;&amp;this.setBanner(e)}.bind(this))},setBanner:function(e){if(!e||!e.message)return;var t=this.el,n=e.message;n&amp;&amp;this.getState("disabled")?(this.toggleState("disabled",!1),t.innerHTML=e.message,t.style.top=e.position):n&amp;&amp;!this.getState("disabled")?t.innerHTML=e.message:this.toggleState("disabled",!0)}})}),
define("views/sound/waveform",["require","exports","module","views/sound/waveform-canvas","models/sound","lib/helpers/style-helper","lib/view","views/sound/waveform.tmpl","views/sound/waveform.css"],function(e,t,n){function a(e){var t=e?"on":"off";this.model[t]("play pause",f,this),this.model[t]("position",l,this)}function f(){this.toggleState("playing",this.model.isPlaying())}function l(){this._isScrubbing||c.call(this,this.model.currentTime()/this.model.get("duration"))}function c(e){var t=this.subviews.waveformCanvasUnplayed.elWidth;s(this.getElement("waveformPlayed")[0],"transform: translateX("+(t-Math.floor(t*e))+"px)"),s(this.getElement("waveformUnplayed")[0],"transform: translateX("+ -Math.floor(t*e)+"px)")}function h(e){var t=this.subviews.waveformCanvasUnplayed.elWidth,n=this._currentSeek+e*t;this._currentSeek=Math.min(Math.max(0,n),t),this._isScrubbing&amp;&amp;(c.call(this,this._currentSeek/t),this.subviews.timeIndicator.manualProgress(this._currentSeek/t))}function p(){this._isScrubbing=!0,this.subviews.timeIndicator.toggleScrubbing(!0),this.toggleState("scrubbing",!0)}function d(){var e=this.subviews.waveformCanvasUnplayed.elWidth;this.model.seek(this.model.get("duration")*(this._currentSeek/e)),this._isScrubbing=!1,this.subviews.timeIndicator.toggleScrubbing(!1),this.toggleState("scrubbing",!1)}function v(e){h.call(this,e.data.delta)}var r=e("views/sound/waveform-canvas").Events,i=e("models/sound"),s=e("lib/helpers/style-helper"),o=e("lib/view"),u=n.exports=o.extend({template:e("views/sound/waveform.tmpl"),css:e("views/sound/waveform.css"),className:"waveform sc-selection-disabled g-opacity-transition",ModelClass:i,element2selector:{waveformPlayed:".waveform__waveformCanvasPlayed &gt; canvas",waveformUnplayed:".waveform__waveformCanvasUnplayed &gt; canvas"},bubbleEvents:{scrubStart:p,scrub:v,scrubEnd:d},defaults:{upperPartHeight:.7},requiredAttributes:{playlist:["tracks"],sound:["id","waveform_url","state"]},setup:function(){this.toggleState("visual",this.options.visual),this._currentSeek=0,a.call(this,!0)},dispose:function(){a.call(this,!1)},renderDecorate:function(){this.subviews.waveformCanvasUnplayed.on(r.RENDERED,function(){this.toggleState("visible",!0),f.call(this)},this)},getTemplateData:function(e){var t=this.options;return{model:e,upperPartHeight:t.upperPartHeight,upperPartHeightPercent:t.upperPartHeight*100+"%"}}})}),
define("views/banner/banner.css",["require","exports","module","css"],function(e,t,n,r){n.exports=r.stringToStyleElement(r.transform(".banner.disabled{display:none}.banner{position:absolute;left:0;width:100%;height:36px;line-height:36px;background:#000;background:rgba(0,0,0,.8);color:#e5e5e5;text-align:center;font-size:13px}")),data=null}),
define("views/sound/waveform-canvas",["require","exports","module","underscore","models/audible","lib/views/canvas-view","lib/circuit-breaker","vendor/color/color","config","lib/store","lib/support"],function(e,t,n){function S(e){var t=e.waveform,n=e.scaledWidth,r=e.scaledHeight,i=e.upperPartHeight,s=e.gapHeight,o=e.context,a=e.offset,f=Math.round(i*r),l=Math.round(r-f),c=n/m,h=u(e.bgColor),p=u(e.bottomBgColor),d,v,y,b,w,E,S,x,T,N,C,k,L=null,A=null,O=2,M=2,_=O+M;d=h.rgba(e.upperAlpha),y=p.rgba(e.lowerAlpha),v=o.createLinearGradient(0,0,0,r),v.addColorStop(0,h.lighten(20).rgba(0)),v.addColorStop(.6,h.lighten(12).rgba(.6*e.gapAlpha)),v.addColorStop(1,h.rgba(1*e.gapAlpha)),b=h.rgba(.25*e.gapAlpha);for(w=0;w&lt;n;++w)k=_-w%_&lt;=M,S=a+w,E=k?w+1:w,x=Math.ceil((E-E%_)/c),T=t[x]/g,N=Math.round(T*f),C=Math.round((1-T)*l+f),o.fillStyle=k?v:d,k&amp;&amp;(N=Math.max(N,L),C=Math.min(C,A)),o.fillRect(S,N,1,f-N),o.fillStyle=k?b:y,o.fillRect(S,f+s,1,C-f),L=N,A=C}function x(e){return $.ajax({url:a.get("wisHost")+"/"+e.replace(/\.png$/,".json"),type:"GET",dataType:"json"})}function T(){var e=this.model.getSounds(),t,n=this.elWidth,i=this.model.duration(),s;return e.length?s=e.map(function(e){return{duration:e.duration(),waveform_url:e.get("waveform_url")}}):s=[{duration:i,waveform_url:h}],t=s.map(function(e){var t=Math.round(n*e.duration/i),r=t&gt;v?e.waveform_url:b[Math.floor(Math.random()*b.length)],s=$.Deferred(),o,u;return r.indexOf(p)&gt;-1&amp;&amp;(r=h),u=r.split("/").pop(),o=y.get(u),o?s.resolve({data:o}):(s.done(function(e){y.set(e.key,e.data)}),w.enabled&amp;&amp;x(u).done(function(e){w.succeeded();var t=new c(e.samples.length);e.samples.forEach(function(n,r){t[r]=e.height-n}),s.resolve({key:u,data:t})}).fail(function(){w.failed()})),s}),$.when.apply($,t).then(function(){this.waveformData=r.pluck(arguments,"data")}.bind(this))}var r=e("underscore"),i=e("models/audible"),s=e("lib/views/canvas-view"),o=e("lib/circuit-breaker"),u=e("vendor/color/color"),a=e("config"),f=e("lib/store"),l=e("lib/support"),c=l.typedArrays?Uint8Array:Array,h="//w1.sndcdn.com/90GaSwazbrh1_m.png",p="/images/player-waveform-medium.png",d=500,v=15,m=1800,g=140,y=new f({maxLength:d}),b=["//w1.sndcdn.com/oQ4mQ28umFy9_m.png","//w1.sndcdn.com/yAsGo4Oj2vjn_m.png","//w1.sndcdn.com/XOsjuw7QwaPt_m.png","//w1.sndcdn.com/H9uGzKOYK5Ph_m.png","//w1.sndcdn.com/IHBAsSu3O7qn_m.png","//w1.sndcdn.com/wco8JS0UScQo_m.png"],w,E=n.exports=s.extend({className:"g-box-full waveformCanvas",defaults:{bgColor:"#333333",bottomBgColor:"#EEEEEE",gapAlpha:0,gapHeight:1,lowerAlpha:1,upperAlpha:1,upperPartHeight:.61},ModelClass:i,requiredAttributes:{sound:["waveform_url"]},waveformData:null,setup:function(){w||(w=new o({tolerance:5,baseDelay:2e3,maxDelay:12e4}))},onCanvasInserted:function(){this.renderWaveform()},onCanvasResize:function(){this.renderWaveform()},renderWaveform:function(){if(this.disposed)return;if(!this.waveformData)T.call(this).done(this.renderWaveform.bind(this));else{var e=this.options,t=this.context,n=this.elHeight,r=0;this.clearCanvas(),this.waveformData.forEach(function(i){var s=this.elWidth;S({waveform:i,scaledWidth:s,scaledHeight:n,context:t,offset:r,bgColor:e.bgColor,bottomBgColor:e.bottomBgColor,upperPartHeight:e.upperPartHeight,upperAlpha:e.upperAlpha,lowerAlpha:e.lowerAlpha,gapAlpha:e.gapAlpha,gapHeight:e.gapHeight}),r+=s},this),this.trigger(E.Events.RENDERED)}},renderWaveformDecorate:$.noop},{Events:{RENDERED:"waveform-canvas.rendered"}})}),
define("views/sound/waveform.tmpl",["vendor/handlebars-runtime","views/sound/waveform-canvas","views/listen/time-indicator","views/listen/scrubber"],function(){return require("vendor/handlebars-runtime").template(function(e,t,n,r,i){this.compilerInfo=[4,"&gt;= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u=this.escapeExpression;return s+='&lt;div class="waveform__layer waveform__waveformCanvases"&gt; &lt;div class="waveform__layer waveform__waveformCanvasPlayed"&gt; '+u(n.$view.call(t,"views/sound/waveform-canvas",{hash:{resource_id:(o=t&amp;&amp;t.model,o==null||o===!1?o:o._resource_id),resource_type:(o=t&amp;&amp;t.model,o==null||o===!1?o:o._resource_type),key:"waveformCanvasPlayed",bgColor:"#FF6600",bottomBgColor:"#ffa366",className:"g-moving-element"},data:i}))+' &lt;/div&gt; &lt;div class="waveform__layer waveform__waveformCanvasUnplayed"&gt; '+u(n.$view.call(t,"views/sound/waveform-canvas",{hash:{resource_id:(o=t&amp;&amp;t.model,o==null||o===!1?o:o._resource_id),resource_type:(o=t&amp;&amp;t.model,o==null||o===!1?o:o._resource_type),key:"waveformCanvasUnplayed",bgColor:"#FFFFFF",bottomBgColor:"#B3B3B3",className:"g-moving-element"},data:i}))+' &lt;/div&gt;\n&lt;/div&gt; &lt;div class="waveform__timeIndicator"&gt; '+u(n.$view.call(t,"views/listen/time-indicator",{hash:{resource_id:(o=t&amp;&amp;t.model,o==null||o===!1?o:o._resource_id),resource_type:(o=t&amp;&amp;t.model,o==null||o===!1?o:o._resource_type),key:"timeIndicator"},data:i}))+'\n&lt;/div&gt; &lt;div class="waveform__layer waveform__scrubber"&gt; '+u(n.$view.call(t,"views/listen/scrubber",{hash:{resource_id:(o=t&amp;&amp;t.model,o==null||o===!1?o:o._resource_id),resource_type:(o=t&amp;&amp;t.model,o==null||o===!1?o:o._resource_type)},data:i}))+"\n&lt;/div&gt; ",s})}),
define("views/sound/waveform.css",["require","exports","module","css"],function(e,t,n,r){n.exports=r.stringToStyleElement(r.transform(".waveform{height:100%;pointer-events:none}.waveform,.waveform__layer{width:100%;position:absolute}.waveform__layer{height:87px;bottom:7%;overflow:hidden;pointer-events:auto;-ms-touch-action:none;touch-action:none}.waveform__layer .waveform__layer{bottom:0}.waveform__timeIndicator{position:absolute;bottom:7%;margin-bottom:34px;display:inline-block;left:50%;-webkit-transform:translateX(-50%);transform:translateX(-50%);transition:bottom .15s linear;z-index:2}.waveform:not(.playing) .waveform__timeIndicator .timeIndicator__container,.waveform.scrubbing .waveform__timeIndicator .timeIndicator__container{background:none}.waveform.scrubbing .waveform__timeIndicator{bottom:46%;transition-timing-function:cubic-bezier(.51,.37,.61,1.6);transition-duration:.25s}.waveform.scrubbing .timeIndicator__text{font-size:20px}.waveform__waveformCanvases{clip:rect(50px,auto,53px,0);-webkit-transform:scaleY(.5);transform:scaleY(.5);-webkit-transform-origin:0 54px;transform-origin:0 54px;-webkit-transition:all .2s cubic-bezier(.68,.68,.165,1);transition:all .2s cubic-bezier(.68,.68,.165,1);z-index:0}.waveform.playing .waveform__waveformCanvases{clip:rect(0,auto,87px,0);-webkit-transform:scaleY(1);transform:scaleY(1);transition:all .45s cubic-bezier(.68,.68,.165,1.45);-webkit-transition:all .45s cubic-bezier(.68,.68,.165,1.45)}.waveform__waveformCanvasPlayed,.waveform__waveformCanvasUnplayed{z-index:1}.waveform__waveformCanvasPlayed{right:50%}.waveform__waveformCanvasPlayed canvas{-webkit-transform:translateX(100%);transform:translateX(100%)}.waveform__waveformCanvasUnplayed{left:50%}.waveform__waveformCanvasUnplayed canvas{-webkit-transform:translateX(0);transform:translateX(0)}.waveform__scrubber{z-index:3}")),data=null}),
define("models/audible",["require","exports","module","underscore","models/playlist","models/sound"],function(e,t,n){var r=e("underscore"),i=e("models/playlist"),s=e("models/sound"),o=n.exports=function(e,t){var n=e.resource_type||e.kind;return e=r.omit(e,"resource_type"),n==="playlist"?new i(e,t):new s(e,t)};o.getClass=function(e){var t=e.resource_type;return t==="playlist"?i:s}}),
define("lib/views/canvas-view",["require","exports","module","lib/helpers/client-environment-helper","lib/view","lib/window-events"],function(e,t,n){function u(){try{var e=this.el.offsetWidth,t=this.el.offsetHeight;if(this.elWidth!==e||this.elHeight!==t)a.call(this,e,t),this.onCanvasResize()}catch(n){}}function a(e,t){var n;this.elWidth=e||this.el.offsetWidth,this.elHeight=t||this.el.offsetHeight,this.el.setAttribute("width",this.elWidth),this.el.setAttribute("height",this.elHeight),r.device.isHiDPI&amp;&amp;(n=r.device.devicePixelRatio/r.browser.backingStoreRatio,n!==1&amp;&amp;(this.el.setAttribute("width",this.elWidth*n),this.el.setAttribute("height",this.elHeight*n),this.context.scale(n,n)))}var r=e("lib/helpers/client-environment-helper"),i=e("lib/view"),s=e("lib/window-events"),o=n.exports=i.extend({tagName:"canvas",className:"g-box-full",context:null,template:function(){return""},_setup:function(){this.context=this.el.getContext("2d"),s.on("resize:debounced",u,this),i.prototype._setup.apply(this,arguments)},_dispose:function(){if(this.disposed)return;s.off("resize:debounced",u,this),delete this.context,delete this.elWidth,delete this.elHeight,i.prototype._dispose.apply(this,arguments)},renderDecorate:function(){this.whenInserted().done(function(){a.call(this),this.onCanvasInserted()}.bind(this))},onCanvasInserted:$.noop,onCanvasResize:$.noop,forceResize:function(){this._onWindowResize()},clearCanvas:function(){this.context&amp;&amp;this.context.clearRect(0,0,this.elWidth,this.elHeight)}})}),
define("lib/circuit-breaker",["require","exports","module","underscore","lib/backbone"],function(e,t,n){var r=e("underscore"),i=e("lib/backbone"),s=n.exports=Class.extend({enabled:!0,_breakCount:0,_failCount:0,_maxBreaks:0,_timeoutId:null,defaults:{tolerance:1,baseDelay:1e3,maxDelay:3e4,backoffRate:2},initialize:function(e){e=this.options=r.extend({},this.defaults,e),this._currentDelay=e.baseDelay;var t=e.maxDelay/e.baseDelay;while(t&gt;1)++this._maxBreaks,t/=e.backoffRate},dispose:function(){this.clearTimeout()},clearTimeout:function(){this._timeoutId&amp;&amp;(clearTimeout(this._timeoutId),this._timeoutId=null)},failed:function(){++this._failCount&gt;=this.options.tolerance&amp;&amp;this.disable()},succeeded:function(){this._breakCount=this._failCount=0},disable:function(){if(this.enabled){this.enabled=!1,this._breakCount&lt;this._maxBreaks&amp;&amp;++this._breakCount;var e=Math.min(this.options.baseDelay*Math.pow(this.options.backoffRate,Math.floor(Math.random()*this._breakCount)),this.options.maxDelay);this.trigger("disabled",{delay:e}),this._timeoutId=setTimeout(this.enable.bind(this),e)}},enable:function(){this.enabled||(this.enabled=!0,this._failCount=0,this.trigger("enabled"))}});r.extend(s.prototype,i.Events)}),
define("vendor/color/color",["require","exports","module"],function(e,t,n){(function(){function f(e){return e===void 0}function l(e){return parseInt(e,16)}function c(e){return parseInt(e,10)}function h(e){return e.length===1?"0"+e:""+e}function p(e){return typeof e=="string"&amp;&amp;e.indexOf(".")!==-1&amp;&amp;parseFloat(e)===1}function d(e){return typeof e=="string"&amp;&amp;e.indexOf("%")!==-1}function v(e){return o(1,u(0,e))}function m(e,t){p(e)&amp;&amp;(e="100%");var n=d(e);return e=o(t,u(0,parseFloat(e))),n&amp;&amp;(e=parseInt(e*t,10)/100),r.abs(e-t)&lt;1e-6?1:e%t/parseFloat(t)}function g(e){return[h(s(e.r).toString(16)),h(s(e.g).toString(16)),h(s(e.b).toString(16))].join("")}function y(e){function u(e,t,n){return n&lt;0&amp;&amp;(n+=1),n&gt;1&amp;&amp;(n-=1),n&lt;1/6?e+(t-e)*6*n:n&lt;.5?t:n&lt;2/3?e+(t-e)*(2/3-n)*6:e}var t,n,r,i=m(e.h,360),s=m(e.s,100),o=m(e.l,100);if(s===0)t=n=r=o;else{var a=o&lt;.5?o*(1+s):o+s-o*s,f=2*o-a;t=u(f,a,i+1/3),n=u(f,a,i),r=u(f,a,i-1/3)}return{r:t*255,g:n*255,b:r*255}}function b(e){var t=m(e.r,255),n=m(e.g,255),r=m(e.b,255),i=u(t,n,r),a=o(t,n,r),f,l,c=(i+a)/2;if(i===a)f=l=0;else{var h=i-a;l=c&gt;.5?h/(2-i-a):h/(i+a);switch(i){case t:f=(n-r)/h+(n&lt;r?6:0);break;case n:f=(r-t)/h+2;break;case r:f=(t-n)/h+4}f/=6}return{h:s(f*360),s:s(l*100),l:s(c*100)}}function w(n){n=n.replace(e,"").replace(t,"").toLowerCase();var r;return(r=a.rgb.exec(n))?{r:c(r[1]),g:c(r[2]),b:c(r[3])}:(r=a.hsl.exec(n))?{h:c(r[1]),s:c(r[2]),l:c(r[3])}:(r=a.hex6.exec(n))?{r:l(r[1]),g:l(r[2]),b:l(r[3])}:(r=a.hex3.exec(n))?{r:l(r[1]+""+r[1]),g:l(r[2]+""+r[2]),b:l(r[3]+""+r[3])}:!1}function E(e){var t=null;return typeof e=="string"&amp;&amp;(e=w(e)),typeof e=="object"&amp;&amp;(e.hasOwnProperty("r")&amp;&amp;e.hasOwnProperty("g")&amp;&amp;e.hasOwnProperty("b")?t=e:e.hasOwnProperty("h")&amp;&amp;e.hasOwnProperty("s")&amp;&amp;e.hasOwnProperty("l")&amp;&amp;(t=y(e))),t}function S(e){var t=this.toHsl();return t.h+=c(e),A(t)}function x(e){var t=this.toHsl();return t.l-=c(e),u(0,t.l),A(t)}function T(e){var t=this.toHsl();return t.l+=c(e),o(100,t.l),A(t)}function N(e,t){e=e||6,t=t||30;var n=this.toHsl(),r=360/t,i=[A(n)];for(n.h=(n.h-(r*e&gt;&gt;1)+720)%360;--e;)n.h=(n.h+r)%360,i.push(A(n));return i}function C(e){var t=this.toRgb(),n=A(e).toRgb(),r=(t.r*299+t.g*587+t.b*114)/1e3,s=(n.r*299+n.g*587+n.b*114)/1e3,a=u(t.r,n.r)-o(t.r,n.r)+u(t.g,n.g)-o(t.g,n.g)+u(t.b,n.b)-o(t.b,n.b);return{brightness:i(r-s),color:a}}function k(e){var t=this.diff(e);return t.brightness&gt;125&amp;&amp;t.color&gt;500}function L(e,t){var n=this.diff(e||"#000"),r=this.diff(t||"#fff");return n.brightness&gt;r.brightness&amp;&amp;n.color&gt;r.color?A(e):A(t)}var e=/^[\s,#]+/,t=/\s+$/,r=Math,i=r.abs,s=r.round,o=r.min,u=r.max,a=function(){var e="[-\\+]?\\d+%?",t="[-\\+]?\\d*\\.\\d+%?",n="(?:"+t+")|(?:"+e+")",r="[\\s|\\(]+("+n+")[,|\\s]+("+n+")[,|\\s]+("+n+")\\s*\\)?";return{rgb:new RegExp("rgb"+r),hsl:new RegExp("hsl"+r),hex3:/^([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}}(),A=function(e){var t=E(e);return{hue:function(e){return S.call(this,e)},darken:function(e){return x.call(this,e)},lighten:function(e){return T.call(this,e)},analogous:function(e,t){return N.call(this,e,t)},readable:function(e){return k.call(this,e)},diff:function(e){return C.call(this,e)},contrast:function(e,t){return L.call(this,e,t)},hex:function(){return t?"#"+g(t):null},toRgb:function(){return t},isValid:function(){return t?!0:!1},rgb:function(){return t?"rgb("+[s(t.r),s(t.g),s(t.b)].join(", ")+")":null},rgba:function(e){return t?"rgba("+[s(t.r),s(t.g),s(t.b),f(e)?1:v(e)].join(", ")+")":null},toHsl:function(){return b(t)},hsl:function(){var e=b(t);return t?"hsl("+e.h+", "+e.s+"%, "+e.l+"%)":null}}};typeof n!="undefined"&amp;&amp;n.exports?n.exports=A:(global=function(){return this}(),global.SC=global.SC||{},global.SC.color=A)})()}),
define("views/listen/time-indicator",["require","exports","module","underscore","lib/helpers/datetime-helper","lib/views/progress-bar","views/listen/time-indicator.tmpl","views/listen/time-indicator.css"],function(e,t,n){var r=e("underscore"),i=e("lib/helpers/datetime-helper"),s=e("lib/views/progress-bar"),o=1e3/60,u=n.exports=s.extend({template:e("views/listen/time-indicator.tmpl"),css:e("views/listen/time-indicator.css"),className:"timeIndicator",element2selector:{current:".timeIndicator__current"},setup:function(){s.prototype.setup.apply(this,arguments),this._isScrubbing=!1,this.updateTimeDisplay=r.throttle(this.updateTimeDisplay.bind(this),o)},getTemplateData:function(e){e.timecode=i.timecode(e.duration)},manualProgress:function(e){this.updateTimeDisplay(e*this.model.duration())},updateProgress:function(e){this._isScrubbing||this.updateTimeDisplay(e)},toggleScrubbing:function(e){this._isScrubbing=e},updateTimeDisplay:function(e){var t=e?e:this.model.currentTime();t=Math.floor(t/1e3+.1)*1e3,this.getElement("current")[0].innerHTML=i.timecode(t)}})}),
define("views/listen/scrubber",["require","exports","module","lib/views/mixins/draggable","lib/event-bus","models/sound","lib/view"],function(e,t,n){function a(){i.trigger("scrub:start"),this.bubble("scrubStart")}function f(e){this.bubble("scrub",{delta:e.data.delta})}function l(){i.trigger("scrub:end"),this.bubble("scrubEnd")}var r=e("lib/views/mixins/draggable"),i=e("lib/event-bus"),s=e("models/sound"),o=e("lib/view"),u=n.exports=o.extend(r,{className:"scrubber g-box-full",template:function(){return""},ModelClass:s,events:{"draggable-start":a,"draggable-drag":f,"draggable-end":l},setup:function(){this.el.style.background="rgba(0,0,0,0)"}})}),
define("lib/views/progress-bar",["require","exports","module","underscore","$","models/sound","lib/view","lib/window-events"],function(e,t,n){function p(e){var t=e?"on":"off";a[t]("pointerup",w,this)[t]("pointerdown",b,this),u[t]("resize:debounced",N,this)[t]("resize:debounced",this.getWidth.bind(this,!0),this),this.model[t]("finish",g,this)[t]("seeked",m,this)[t]("manually-seeked",m,this)[t]("play",v,this)[t]("pause",d,this)}function d(){T.call(this)}function v(){x.call(this)}function m(){y.call(this)}function g(){y.call(this)}function y(){var e=this.model.currentTime();if(this.disposed||this.isUserScrubbing&amp;&amp;!e)return;this.playedProgress=e?E.call(this,e):this.getPlayedProgress(),this.updateProgress(e)}function b(){this.isUserScrubbing=!0}function w(){r.delay(function(){this.isUserScrubbing=!1}.bind(this),c)}function E(e){return e/this.model.duration()}function S(e){var t=this._throttleTime,n;!e&amp;&amp;!this.isUserScrubbing&amp;&amp;y.call(this),n=Math.max(f,t&amp;&amp;t-this.model.currentTime()%t),this._throttleTimeout=setTimeout(S.bind(this,this.isUserScrubbing),n)}function x(){this.model.isPlaying()&amp;&amp;(this._throttleTime||N.call(this),this._throttleTimeout||S.call(this))}function T(){clearTimeout(this._throttleTimeout),this._throttleTimeout=null}function N(){if(this.disposed)return;var e=this.el.clientWidth,t;e!==this._lastContainerSize&amp;&amp;(this._lastContainerSize=e,t=this.model.duration(),this._throttleTime=Math.max(f,Math.floor(t/e)),this._throttleTime=Math.min(this._throttleTime,l))}var r=e("underscore"),i=e("$"),s=e("models/sound"),o=e("lib/view"),u=e("lib/window-events"),a=i(document),f=50,l=250,c=300,h=n.exports=o.extend({ModelClass:s,setup:function(){this.loadedProgress=this.getLoadedProgress(),this.playedProgress=this.getPlayedProgress(),this.isFullyLoaded=!1,this.isUserScrubbing=!1,p.call(this,!0)},dispose:function(){p.call(this,!1)},renderDecorate:function(){x.call(this)},teardown:function(){T.call(this)},updateProgress:i.noop,getLoadedProgress:function(){return this.model.loadProgress()},getPlayedProgress:function(){return this.model.currentTime()},calculateProgressPixels:function(e){return Math.floor(this.getWidth()*e)},getWidth:function(e){return e=this.el.parentNode?e:!0,this._width=e?this.el.offsetWidth:this._width||this.el.offsetWidth,this._width}})}),
define("views/listen/time-indicator.tmpl",["vendor/handlebars-runtime"],function(){return require("vendor/handlebars-runtime").template(function(e,t,n,r,i){this.compilerInfo=[4,"&gt;= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u="function",a=this.escapeExpression;return s+='&lt;div class="timeIndicator__container"&gt; &lt;span class="timeIndicator__current timeIndicator__text"&gt;0.00&lt;/span&gt; &lt;span class="timeIndicator__divider timeIndicator__text"&gt;|&lt;/span&gt; &lt;span class="timeIndicator__total timeIndicator__text"&gt;'+a((o=t&amp;&amp;t.timecode,typeof o===u?o.apply(t):o))+"&lt;/span&gt;\n&lt;/div&gt;\n",s})}),
define("views/listen/time-indicator.css",["require","exports","module","css"],function(e,t,n,r){n.exports=r.stringToStyleElement(r.transform(".timeIndicator__container{background:rgba(0,0,0,.8);height:20px;line-height:20px;font-size:0;white-space:nowrap}.timeIndicator__current{color:#fff}.timeIndicator__text{font-size:12px;transition:font-size .15s cubic-bezier(.51,.37,.61,1.6)}.timeIndicator__current,.timeIndicator__total{padding:0 5px}.timeIndicator__divider,.timeIndicator__total{color:#999}")),data=null}),
define("lib/views/mixins/draggable",["require","exports","module","$","lib/animation","lib/mixin","lib/window-events"],function(e,t,n){function f(e){this.el=e,this.width=null,this.coords=null,this.reset(),this.onPointerMove=p.bind(this),this.onPointerUp=d.bind(this),this.onPointerDown=h.bind(this),l.call(this,!0)}function l(e){var t=e?"on":"off";this.el[t?"addEventListener":"removeEventListener"]("pointerdown",this.onPointerDown),o[t?"on":"off"]("resize:debounced",v,this)}function c(e){var t=e?"on":"off";u[t]("pointerup",this.onPointerUp)[t]("pointermove",this.onPointerMove)}function h(e){this.kineticMoveAnimation&amp;&amp;this.kineticMoveAnimation.reject(),this.dispatchEvent("start"),this.dispatchEvent("drag",0),this.lastPointerX=e.x,c.call(this,!0)}function p(e){e.maskedEvent.preventDefault();var t=e.x,n=this.lastPointerX-t;this.startMoveTimestamp=this.startMoveTimestamp||Date.now(),this.deltas.push(n),this.lastPointerX=t,(n&gt;.01||n&lt;-0.01)&amp;&amp;this.dispatchEvent("drag",n)}function d(){var e,t,n,r,s=0;r=this.deltas.length?this.deltas[this.deltas.length-1]:0,e=r&gt;0?1:-1,t=this.deltas.reduce(function(e,t){return e+Math.abs(t)},0),n=t/this.deltas.length,n&lt;3&amp;&amp;(s=n),this.kineticMoveAnimation=i.animateValue(a,s,n*1.3,"ease-out-cubic").progress(function(t,n){var r=e*(t-n);this.dispatchEvent("drag",r)}.bind(this)).always(function(){this.dispatchEvent("end"),this.reset()}.bind(this)),c.call(this,!1)}function v(){this.width=null,this.coords=null}var r=e("$"),i=e("lib/animation"),s=e("lib/mixin"),o=e("lib/window-events"),u=r(document),a=250;n.exports=new s({before:{setup:function(){this._draggableEl=new f(this.el)},dispose:function(){this._draggableEl.dispose(),delete this._draggableEl}}}),f.prototype={constructor:f,reset:function(){this.deltas=[],this.lastPointerX=0,this.startMoveTimestamp=null,this.kineticMoveAnimation=null},getWidth:function(){return this.width=this.width||this.el.offsetWidth,this.width},dispose:function(){l.call(this,!1)},dispatchEvent:function(e,t){var n=document.createEvent("CustomEvent");n.initCustomEvent("draggable-"+e,!0,!0,{}),t!==void 0&amp;&amp;(n.data={delta:t/this.getWidth()}),this.el.dispatchEvent(n)}}}),
define("lib/animation",["require","exports","module","$"],function(e,t,n){function u(e,t){var n=r.Deferred();return e.removeClass("g-opacity-transition").css({opacity:t?0:1}).addClass("g-opacity-transition").css({opacity:t?1:0}),a(s).progress(n.notify).done(function(){e.removeClass("g-opacity-transition"),n.resolve()}),n}function a(e){var t=r.Deferred(),n=Date.now(),i,s,o;return o=setInterval(function(){s=Date.now()-n,i=Math.min(1,s/e),t.notify(i),i===1&amp;&amp;(t.resolve(),clearInterval(o))},16),t.fail(function(){clearInterval(o)}),t}function f(e,t,n,r){return n*e/r+t}function l(e,t,n,r){return n*(e/=r)*e+t}function c(e,t,n,r){return-n*(e/=r)*(e-2)+t}function h(e,t,n,r){return(e/=r/2)&lt;1?n/2*e*e+t:-n/2*(--e*(e-2)-1)+t}function p(e,t,n,r){return n*(e/=r)*e*e+t}function d(e,t,n,r){return n*((e=e/r-1)*e*e+1)+t}var r=e("$"),i={linear:f,"ease-in":l,"ease-out":c,"ease-in-out":h,"ease-in-cubic":p,"ease-out-cubic":d},s=200,o=n.exports={fadeOut:function(e,t){return u(e,!1,t)},fadeIn:function(e,t){return u(e,!0,t)},animateValue:function(e,t,n,s){var o=r.Deferred(),u=n-t,f=a(e),l=i[s]||i.linear,c=t;return u?(f.progress(function(n){var r=e*n,i=l(r,t,u,e);o.notify(i,c),c=i}).done(o.resolve),o.fail(f.reject),o):o.resolve()}}})
  </script>
  <script>
   require(['lib/lingua'],function(L){ L.initializeFromUserSettings(); require(['application', '$'],function(A, $){ window.$ = $; A.start('b21050a3',{"_prefix":"https://m.soundcloud.com","layouts/error":"/assets/layouts/error-o2aM-9d404d3f.js","layouts/home":"/assets/layouts/home-ddiy-5c0ed0ed.js","layouts/messages":"/assets/layouts/messages-hETJ-5c0ed0ed.js","layouts/mobile-apps":"/assets/layouts/mobile-apps-AiN6-b519a586.js","layouts/password-reset-success":"/assets/layouts/password-reset-success-WN9E-5c0ed0ed.js","layouts/people-directory":"/assets/layouts/people-directory-pSfh-095b2ac1.js","layouts/playlist":"/assets/layouts/playlist-m0e8-040cfc7e.js","layouts/premium":"/assets/layouts/premium-I7HQ-0f52e25f.js","layouts/search":"/assets/layouts/search-AUyz-5c0ed0ed.js","layouts/static-page":"/assets/layouts/static-page-a5bK-b519a586.js","layouts/unsubscribed":"/assets/layouts/unsubscribed-tpYT-5c0ed0ed.js","layouts/upload":"/assets/layouts/upload-p5oz-5c0ed0ed.js","layouts/user-profile":"/assets/layouts/user-profile-RIhH-5c0ed0ed.js"}); }); function getParameterByName(name) { name = name.replace(/[\[]/, '\\[').replace(/[\]]/, '\\]'); var regex = new RegExp('[\\?&amp;]' + name + '=([^&amp;#]*)'), results = regex.exec(location.search); return results === null ? '' : decodeURIComponent(results[1].replace(/\+/g, ' ')); }});
  </script>
 </body>
</html>