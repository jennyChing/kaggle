<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en" xml:lang="en">
 <head>
  <meta content="text/html; charset=utf-8" http-equiv="Content-type"/>
  <title>
   Text + Image + CSS3 = Crazy Delicious
  </title>
  <script charset="utf-8" src="jquery.js" type="text/javascript">
  </script>
  <style media="screen" type="text/css">
   body {
      font: small "Helvetica", "Trebuchet MS", Verdana, sans-serif;
    }
    #form textarea {
      width: 300px;
      height: 30px;
      margin-left: 20px;
      margin-bottom: 10px;
    }
    #form select {
      margin-left: 20px;
    }
    #form label {
      display: block;
    }
    #form input[type="submit"], #form input[type="text"] {
      width: 300px;
    }
    #form input {
      margin-left: 20px;
      margin-bottom: 10px;
    }
    span::selection {
      color: white;
      background: white
    }
    span::-moz-selection {
      color: white;
      background: white
    }
    #beg {
      float: right;
      width: 15em;
      margin-right: 4em;
      padding: 0.5em;
      border: 4px double #999;
      background: #efefef;
    }
    #code {
      width: 300px;
      height: 40px;
    }
  </style>
 </head>
 <body id="color">
  <h1>
   Hide an image in html
  </h1>
  <h2>
   Highlight the text with your mouse.
  </h2>
  <div id="beg">
   <p>
    Like this or my other projects like
    <a alt="Spell with Flickr" href="http://metaatem.net/words/spell+with+flickr">
     Spell with Flickr
    </a>
    and
    <a alt="Befuddlr!" href="http://befuddlr.com/">
     Befuddlr
    </a>
    ? Help me cover the cost of EC2:
   </p>
   <form action="https://www.paypal.com/cgi-bin/webscr" method="post">
    <input name="cmd" type="hidden" value="_s-xclick"/>
    <input alt="Make payments with PayPal - it's fast, free and secure!" border="0" name="submit" src="https://www.paypal.com/en_US/i/btn/btn_donate_SM.gif" type="image"/>
    <img alt="" border="0" height="1" src="https://www.paypal.com/en_US/i/scr/pixel.gif" width="1"/>
    <input name="encrypted" type="hidden" value="-----BEGIN PKCS7-----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-----END PKCS7-----
      "/>
   </form>
   <p>
    Created by
    <a href="mailto:kastner@gmail.com">
     Erik Kastner
    </a>
    at 2am
   </p>
   <p>
    Want the code? Grab it on
    <a href="http://github.com/kastner/highlite/">
     GitHub
    </a>
   </p>
  </div>
  <h3>
   How it works:
  </h3>
  <p>
   Safari and Firefox support
   <a href="http://www.w3.org/TR/css3-selectors/#UIfragments" title="Selectors">
    CSS3's ::selection pseudo-element
   </a>
   . Using that and PHP, this toy hides an image in plain view.
  </p>
  <form id="form">
   <div>
    <label for="text">
     Text:
    </label>
    <textarea id="text" name="text">
     Were%20no%20strangers%20to%20love%0D%0AYou%20know%20the%20rules%20and%20so%20do%20i%0D%0AA%20full%20commitments%20what%20Im%20thinking%20of%0D%0AYou%20wouldnt%20get%20this%20from%20any%20other%20guy%0D%0A%0D%0AI
    </textarea>
   </div>
   <div>
    <label for="image">
     Image URL:
    </label>
    <input id="image" name="image" type="text" value=""/>
   </div>
   <div>
    <label for="colors">
     Number of colors:
    </label>
    <input id="h-colors" type="hidden" value=""/>
    <select id="colors" name="colors">
     <option>
      2
     </option>
     <option>
      4
     </option>
     <option>
      16
     </option>
     <option>
      32
     </option>
     <option selected="">
      128
     </option>
     <option>
      256
     </option>
    </select>
   </div>
   <div>
    <label for="width">
     Width of output:
    </label>
    <input id="h-width" type="hidden" value=""/>
    <select id="width" name="width">
     <option>
      40
     </option>
     <option>
      80
     </option>
     <option selected="">
      120
     </option>
     <option>
      160
     </option>
     <option>
      220
     </option>
    </select>
   </div>
   <div>
    <label for="reverse">
     Reverse it
     <span>
      (see the image, highlight for text)
     </span>
     :
    </label>
    <input id="h-reverse" type="hidden" value=""/>
    <input id="reverse" name="reverse" type="checkbox" value="true"/>
   </div>
   <input type="submit" value="generate"/>
  </form>
  <div id="output-code" style="display:none;">
   <div>
    <a href="#" onclick="$('#code').toggle(); return false;">
     Get code
    </a>
   </div>
   <textarea id="code" onfocus="this.select();" style="display:none;">
   </textarea>
  </div>
  <div id="output">
  </div>
  <script charset="utf-8" type="text/javascript">
   function go() {
      if (!$("#image").val().match(/^http:\/\//)) {
        alert("You must supply a url for an image");
        return false;
      }
      $("#output").load("make_selection_ajax.php", {
        text: $("#text").val(),
        image: $("#image").val(),
        colors: $("#colors").val(),
        width: $("#width").val(),
        reverse: $("#reverse").attr("checked")
      }, function(responseText) {
        $("#output-code").show();
        $("#code").val(responseText);
        new_css = responseText.match(/\/\*--\*\/(\n|.)+\/\*/);
        if (new_css) {
          $("#injectedCss").html(new_css[0]);
        }
      });      
    }
    
    $(document).ready(function() {
  		$('head').append('&lt;style id="injectedCss" type="text/css"&gt;.bob{border:0}&lt;/style&gt;');
  		if ($("#h-colors").val() != "") { $("#colors").val($("#h-colors").val()); }
  		if ($("#h-colors").val() != "") { $("#colors").val($("#h-colors").val()); }
  		if ($("#h-width").val() != "") { $("#width").val($("#h-width").val()); }
  		if ($("#h-reverse").val() == "true") { $("#reverse").attr("checked", true); }
  		if ($("#image").val() != "") {
  		  go();
  		}
  	});
  </script>
  <script type="text/javascript">
   var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
  document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
  </script>
  <script type="text/javascript">
   var pageTracker = _gat._getTracker("UA-70669-14");
  pageTracker._initData();
  pageTracker._trackPageview();
  </script>
 </body>
</html>