<!DOCTYPE html>
<!-- paulirish.com/2008/conditional-stylesheets-vs-css-hacks-answer-neither/ -->
<!--[if lt IE 7]&gt; &lt;html class="no-js lt-ie10 lt-ie9 lt-ie8 lt-ie7" lang="en"&gt; &lt;![endif]-->
<!--[if IE 7]&gt;    &lt;html class="no-js lt-ie10 lt-ie9 lt-ie8 ie7" lang="en"&gt; &lt;![endif]-->
<!--[if IE 8]&gt;    &lt;html class="no-js lt-ie10 lt-ie9 ie8" lang="en"&gt; &lt;![endif]-->
<!--[if IE 9 ]&gt;   &lt;html class="no-js lt-ie10 ie9" lang="en"&gt; &lt;![endif]-->
<!--[if (gt IE 9)|!(IE)]&gt;&lt;!-->
<html class="no-js" lang="en">
 <!--&lt;![endif]-->
 <head>
  <meta charset="utf-8"/>
  <title>
   AW Energy
  </title>
  <meta content="" name="description"/>
  <meta content="" name="author"/>
  <meta content="width=1121" name="viewport"/>
  <link href="/assets/img/roller_ico_32.png" rel="icon" sizes="32x32" type="image/png"/>
  <link href="/assets/img/roller_ico_64.png" rel="icon" sizes="64x64" type="image/png"/>
  <!--[if IE]&gt;&lt;link href="/favicon.ico" rel="shortcut icon" type="image/x-icon"&gt;&lt;![endif]-->
  <link href="/assets/css/bootstrap.css" rel="stylesheet"/>
  <link href="/assets/css/bootstrap-responsive.css" rel="stylesheet"/>
  <link href="/assets/css/style.css" rel="stylesheet"/>
  <link href="/assets/css/font.css" rel="stylesheet"/>
  <link href="/assets/js/jquery-ui-1.8.21/themes/base/minified/jquery-ui.min.css" rel="stylesheet"/>
  <link href="/assets/js/jquery-lightbox-0.5/css/jquery.lightbox-0.5.css" rel="stylesheet"/>
  <link href="/assets/js/jquery-simplyscroll-2.0.5/jquery.simplyscroll.css" rel="stylesheet"/>
  <link href="/assets/slick/slick.css" rel="stylesheet" type="text/css"/>
  <link href="/assets/css/fix.css" rel="stylesheet"/>
  <!--&lt;link href="/assets/css/ipad.css" rel="stylesheet" media="only screen and (device-width: 768px)"&gt;-->
  <!--[if lt IE 9]&gt;
	&lt;script type="text/javascript" src="/assets/js/libs/modernizr.custom.62487.js"&gt;&lt;/script&gt;
	&lt;![endif]-->
  <script type="text/javascript">
   &lt;!--
	var _gaq = _gaq || [];
	_gaq.push(['_setAccount', 'UA-30116675-1']);
	_gaq.push(['_trackPageview']);

	(function() {
		var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
		ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
		var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
	})();
	//--&gt;
  </script>
 </head>
 <body class=" en error-page error-404">
  <div class="flash-wave" style="">
   <div id="flash-wave-container">
   </div>
  </div>
  <!--
&lt;div class="firefox-tutorial" style="display: none;"&gt;
	&lt;a href="#" class="firefox-tutorial-close"&gt;Close&lt;/a&gt;
	&lt;div class="firefox-tutorial-container"&gt;
		&lt;p&gt;Please update your &lt;strong&gt;Firefox&lt;/strong&gt;&lt;/p&gt;
	&lt;/div&gt;
&lt;/div&gt;

&lt;div class="flash-wave" style="display: none !important;"&gt;
	&lt;div id="firefox-14-upgrade" style="display: none;"&gt;
		&lt;img src="/assets/img/fox-roller.png" alt="" width="2445" height="600" /&gt;
	&lt;/div&gt;
	&lt;div id="flash-wave-container"&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="flash-roller" style="display: none !important;"&gt;
	&lt;div id="flash-roller-wrapper"&gt;
		&lt;div id="flash-roller-container"&gt;&lt;/div&gt;
	&lt;/div&gt;
&lt;/div&gt;
-->
  <div class="header-bar">
  </div>
  <div class="header">
   <div class="arrow-mover">
   </div>
   <div id="menu-hold">
   </div>
   <ul class="main-menu">
    <li class="main-level-1 menu-item-6 current_page_item">
     <a href="/about-waveroller/waveroller-concept">
      About WaveRoller
     </a>
     <ul>
      <li class="menu-level-2 menu-item-24 sub-1">
       <a class="box-anim" href="/about-waveroller/waveroller-concept">
        WaveRoller concept
       </a>
       <span class="line-x-mover" style="width: 0px">
        <span class="line-gray-box-one" style="display:none;">
        </span>
        <span class="line-y-mover" style="height: 0px">
         <span class="line-gray-box-two" style="display:none;">
         </span>
         <span class="line-x-back-mover" style="width: 0px;">
          <span class="line-anime-box" style="display:none;">
           <img alt="" src="/assets/img/line-loader.png"/>
          </span>
         </span>
        </span>
       </span>
      </li>
      <li class="menu-level-2 menu-item-27 sub-2">
       <a class="box-anim" href="/about-waveroller/site-selection">
        Site selection
       </a>
       <span class="line-x-mover" style="width: 0px">
        <span class="line-gray-box-one" style="display:none;">
        </span>
        <span class="line-y-mover" style="height: 0px">
         <span class="line-gray-box-two" style="display:none;">
         </span>
         <span class="line-x-back-mover" style="width: 0px;">
          <span class="line-anime-box" style="display:none;">
           <img alt="" src="/assets/img/line-loader.png"/>
          </span>
         </span>
        </span>
       </span>
      </li>
      <li class="menu-level-2 menu-item-29 sub-3">
       <a class="box-anim" href="/about-waveroller/testing">
        Testing
       </a>
       <span class="line-x-mover" style="width: 0px">
        <span class="line-gray-box-one" style="display:none;">
        </span>
        <span class="line-y-mover" style="height: 0px">
         <span class="line-gray-box-two" style="display:none;">
         </span>
         <span class="line-x-back-mover" style="width: 0px;">
          <span class="line-anime-box" style="display:none;">
           <img alt="" src="/assets/img/line-loader.png"/>
          </span>
         </span>
        </span>
       </span>
      </li>
      <li class="menu-level-2 menu-item-31 sub-4">
       <a class="box-anim" href="/about-waveroller/operation-maintenance">
        Operation &amp; Maintenance
       </a>
       <span class="line-x-mover" style="width: 0px">
        <span class="line-gray-box-one" style="display:none;">
        </span>
        <span class="line-y-mover" style="height: 0px">
         <span class="line-gray-box-two" style="display:none;">
         </span>
         <span class="line-x-back-mover" style="width: 0px;">
          <span class="line-anime-box" style="display:none;">
           <img alt="" src="/assets/img/line-loader.png"/>
          </span>
         </span>
        </span>
       </span>
      </li>
      <li class="menu-level-2 menu-item-33 sub-5">
       <a class="box-anim" href="/about-waveroller/wave-farms">
        Wave farms
       </a>
       <span class="line-x-mover" style="width: 0px">
        <span class="line-gray-box-one" style="display:none;">
        </span>
        <span class="line-y-mover" style="height: 0px">
         <span class="line-gray-box-two" style="display:none;">
         </span>
         <span class="line-x-back-mover" style="width: 0px;">
          <span class="line-anime-box" style="display:none;">
           <img alt="" src="/assets/img/line-loader.png"/>
          </span>
         </span>
        </span>
       </span>
      </li>
      <li class="menu-level-2 menu-item-35 sub-6">
       <a class="box-anim" href="/about-waveroller/environment">
        Environment
       </a>
       <span class="line-x-mover" style="width: 0px">
        <span class="line-gray-box-one" style="display:none;">
        </span>
        <span class="line-y-mover" style="height: 0px">
         <span class="line-gray-box-two" style="display:none;">
         </span>
         <span class="line-x-back-mover" style="width: 0px;">
          <span class="line-anime-box" style="display:none;">
           <img alt="" src="/assets/img/line-loader.png"/>
          </span>
         </span>
        </span>
       </span>
      </li>
      <li class="menu-level-2 menu-item-37 sub-7 last-child">
       <a class="box-anim" href="/about-waveroller/health-safety">
        Health &amp; Safety
       </a>
       <span class="line-x-mover" style="width: 0px">
        <span class="line-gray-box-one" style="display:none;">
        </span>
        <span class="line-y-mover" style="height: 0px">
         <span class="line-gray-box-two" style="display:none;">
         </span>
         <span class="line-x-back-mover" style="width: 0px;">
          <span class="line-anime-box" style="display:none;">
           <img alt="" src="/assets/img/line-loader.png"/>
          </span>
         </span>
        </span>
       </span>
      </li>
     </ul>
    </li>
    <li class="main-level-1 menu-item-13 current_page_item">
     <a href="/wave-energy-resources/resources-globally">
      Wave energy
     </a>
     <ul>
      <li class="menu-level-2 menu-item-39 sub-1">
       <a class="box-anim" href="/wave-energy-resources/resources-globally">
        Global resources
       </a>
       <span class="line-x-mover" style="width: 0px">
        <span class="line-gray-box-one" style="display:none;">
        </span>
        <span class="line-y-mover" style="height: 0px">
         <span class="line-gray-box-two" style="display:none;">
         </span>
         <span class="line-x-back-mover" style="width: 0px;">
          <span class="line-anime-box" style="display:none;">
           <img alt="" src="/assets/img/line-loader.png"/>
          </span>
         </span>
        </span>
       </span>
      </li>
      <li class="menu-level-2 menu-item-41 sub-2">
       <a class="box-anim" href="/wave-energy-resources/near-shore-vs-off-shore">
        Near-shore vs. off-shore
       </a>
       <span class="line-x-mover" style="width: 0px">
        <span class="line-gray-box-one" style="display:none;">
        </span>
        <span class="line-y-mover" style="height: 0px">
         <span class="line-gray-box-two" style="display:none;">
         </span>
         <span class="line-x-back-mover" style="width: 0px;">
          <span class="line-anime-box" style="display:none;">
           <img alt="" src="/assets/img/line-loader.png"/>
          </span>
         </span>
        </span>
       </span>
      </li>
      <li class="menu-level-2 menu-item-43 sub-3 last-child">
       <a class="box-anim" href="/wave-energy-resources/surge-phenomenon">
        Surge phenomenon
       </a>
       <span class="line-x-mover" style="width: 0px">
        <span class="line-gray-box-one" style="display:none;">
        </span>
        <span class="line-y-mover" style="height: 0px">
         <span class="line-gray-box-two" style="display:none;">
         </span>
         <span class="line-x-back-mover" style="width: 0px;">
          <span class="line-anime-box" style="display:none;">
           <img alt="" src="/assets/img/line-loader.png"/>
          </span>
         </span>
        </span>
       </span>
      </li>
     </ul>
    </li>
    <li class="main-level-1 menu-item-16 current_page_item">
     <a href="/projects/project-surge">
      Projects
     </a>
     <ul>
      <li class="menu-level-2 menu-item-45 sub-1 last-child">
       <a class="box-anim" href="/projects/project-surge">
        Project Surge
       </a>
       <span class="line-x-mover" style="width: 0px">
        <span class="line-gray-box-one" style="display:none;">
        </span>
        <span class="line-y-mover" style="height: 0px">
         <span class="line-gray-box-two" style="display:none;">
         </span>
         <span class="line-x-back-mover" style="width: 0px;">
          <span class="line-anime-box" style="display:none;">
           <img alt="" src="/assets/img/line-loader.png"/>
          </span>
         </span>
        </span>
       </span>
      </li>
     </ul>
    </li>
    <li class="main-level-1 menu-item-18 current_page_item">
     <a href="/news-media/news">
      News &amp; Media
     </a>
     <ul>
      <li class="menu-level-2 menu-item-300 sub-1">
       <a class="box-anim" href="/news-media/news">
        News
       </a>
       <span class="line-x-mover" style="width: 0px">
        <span class="line-gray-box-one" style="display:none;">
        </span>
        <span class="line-y-mover" style="height: 0px">
         <span class="line-gray-box-two" style="display:none;">
         </span>
         <span class="line-x-back-mover" style="width: 0px;">
          <span class="line-anime-box" style="display:none;">
           <img alt="" src="/assets/img/line-loader.png"/>
          </span>
         </span>
        </span>
       </span>
      </li>
      <li class="menu-level-2 menu-item-303 sub-2">
       <a class="box-anim" href="/news-media/gallery">
        Gallery
       </a>
       <span class="line-x-mover" style="width: 0px">
        <span class="line-gray-box-one" style="display:none;">
        </span>
        <span class="line-y-mover" style="height: 0px">
         <span class="line-gray-box-two" style="display:none;">
         </span>
         <span class="line-x-back-mover" style="width: 0px;">
          <span class="line-anime-box" style="display:none;">
           <img alt="" src="/assets/img/line-loader.png"/>
          </span>
         </span>
        </span>
       </span>
      </li>
      <li class="menu-level-2 menu-item-55 sub-3 last-child">
       <a class="box-anim" href="/news-media/press-enquires">
        Press enquires
       </a>
       <span class="line-x-mover" style="width: 0px">
        <span class="line-gray-box-one" style="display:none;">
        </span>
        <span class="line-y-mover" style="height: 0px">
         <span class="line-gray-box-two" style="display:none;">
         </span>
         <span class="line-x-back-mover" style="width: 0px;">
          <span class="line-anime-box" style="display:none;">
           <img alt="" src="/assets/img/line-loader.png"/>
          </span>
         </span>
        </span>
       </span>
      </li>
     </ul>
    </li>
    <li class="main-level-1 menu-item-20 current_page_item">
     <a href="/about-us/company-history">
      About us
     </a>
     <ul>
      <li class="menu-level-2 menu-item-47 sub-1">
       <a class="box-anim" href="/about-us/company-history">
        Company history
       </a>
       <span class="line-x-mover" style="width: 0px">
        <span class="line-gray-box-one" style="display:none;">
        </span>
        <span class="line-y-mover" style="height: 0px">
         <span class="line-gray-box-two" style="display:none;">
         </span>
         <span class="line-x-back-mover" style="width: 0px;">
          <span class="line-anime-box" style="display:none;">
           <img alt="" src="/assets/img/line-loader.png"/>
          </span>
         </span>
        </span>
       </span>
      </li>
      <li class="menu-level-2 menu-item-49 sub-2">
       <a class="box-anim" href="/about-us/partners">
        Partners
       </a>
       <span class="line-x-mover" style="width: 0px">
        <span class="line-gray-box-one" style="display:none;">
        </span>
        <span class="line-y-mover" style="height: 0px">
         <span class="line-gray-box-two" style="display:none;">
         </span>
         <span class="line-x-back-mover" style="width: 0px;">
          <span class="line-anime-box" style="display:none;">
           <img alt="" src="/assets/img/line-loader.png"/>
          </span>
         </span>
        </span>
       </span>
      </li>
      <li class="menu-level-2 menu-item-1002 sub-3">
       <a class="box-anim" href="/about-us/careers">
        Careers
       </a>
       <span class="line-x-mover" style="width: 0px">
        <span class="line-gray-box-one" style="display:none;">
        </span>
        <span class="line-y-mover" style="height: 0px">
         <span class="line-gray-box-two" style="display:none;">
         </span>
         <span class="line-x-back-mover" style="width: 0px;">
          <span class="line-anime-box" style="display:none;">
           <img alt="" src="/assets/img/line-loader.png"/>
          </span>
         </span>
        </span>
       </span>
      </li>
      <li class="menu-level-2 menu-item-1178 sub-4 last-child">
       <a class="box-anim" href="/about-us/suomeksi">
        Suomeksi
       </a>
       <span class="line-x-mover" style="width: 0px">
        <span class="line-gray-box-one" style="display:none;">
        </span>
        <span class="line-y-mover" style="height: 0px">
         <span class="line-gray-box-two" style="display:none;">
         </span>
         <span class="line-x-back-mover" style="width: 0px;">
          <span class="line-anime-box" style="display:none;">
           <img alt="" src="/assets/img/line-loader.png"/>
          </span>
         </span>
        </span>
       </span>
      </li>
     </ul>
    </li>
    <li class="main-level-1 menu-item-51 current_page_item">
     <a href="/investors">
      Investors
     </a>
    </li>
    <li class="main-level-1 menu-item-22 current_page_item">
     <a href="/contact-us">
      Contact us
     </a>
    </li>
   </ul>
   <!-- end main-menu -->
   <ul class="languages-menu">
    <li class="active">
     <a class="no-js" href="/en" title="English">
      en
     </a>
    </li>
    <li>
     <a class="no-js" href="/es" title="Espaol">
      es
     </a>
    </li>
    <li>
     <a class="no-js" href="/fr" title="Franais">
      fr
     </a>
    </li>
    <li>
     <a class="no-js" href="/pt-pt" title="Portugus">
      pt
     </a>
    </li>
   </ul>
   <!-- end main-menu -->
   <div class="social-icons">
    <a href="https://www.facebook.com/pages/WaveRoller/345362128879496" rel="external">
     <img alt="" height="21" src="/assets/img/fb-icon.png" width="24"/>
    </a>
    <a href="https://twitter.com/WRoller" rel="external">
     <img alt="" height="21" src="/assets/img/twitter-icon.png" width="24"/>
    </a>
    <div class="clear">
    </div>
   </div>
  </div>
  <!-- end header -->
  <div class="content-wrapper">
   <div id="home-header" style="display:none;">
    <div class="content-intro">
     <a class="logo" href="/">
      <img alt="" height="85" src="/assets/img/logo-white.png" width="280"/>
     </a>
     <div class="intro">
     </div>
    </div>
   </div>
   <div id="page-header" style="display:none;">
    <a class="logo" href="/">
     <img alt="" height="85" src="/assets/img/logo.png" width="280"/>
    </a>
    <div class="search-box">
     <form action="/" method="post">
      <input class="search empty" name="search" required="" type="search" value=""/>
      <a class="submit" href="#">
       search
      </a>
     </form>
    </div>
    <!-- end search-box -->
   </div>
   <div class="content" role="main">
    <div class="not-found">
     <div class="not-found-icon">
     </div>
     <div class="not-found-text">
      We apologise.
      <br/>
      To submerge please click
      <br/>
      on the logo.
     </div>
    </div>
   </div>
   <!-- end content -->
  </div>
  <!-- end content-wrapper -->
  <div class="footer">
   <div class="dock" id="panel">
    <a class="icons-block one" data-rel="one" href="/reliable-partners" id="usp-0" tabindex="0">
     <img alt="ReliablePARTNERS" src="/assets/img/en-footer-icon-1.png"/>
    </a>
    <a class="icons-block two" data-rel="two" href="/innovative-and-efficient-design" id="usp-1" tabindex="1">
     <img alt="Innovative and Efficient Design" src="/assets/img/en-footer-icon-2.png"/>
    </a>
    <a class="icons-block three" data-rel="three" href="/validated-at-multiple-stages-of-development" id="usp-2" tabindex="2">
     <img alt="Validated at Multiple Stages of Development" src="/assets/img/en-footer-icon-3.png"/>
    </a>
    <a class="icons-block four" data-rel="four" href="/weathering-the-harshest-storm" id="usp-3" tabindex="3">
     <img alt="Weathering the Harshest Storm" src="/assets/img/en-footer-icon-4.png"/>
    </a>
    <a class="icons-block five" data-rel="five" href="/safe-and-straightforward-maintenance" id="usp-4" tabindex="4">
     <img alt="Safe and Straightforward Maintenance" src="/assets/img/en-footer-icon-5.png"/>
    </a>
    <a class="icons-block six" data-rel="six" href="/scalable-to-utility-grade-wave-farms" id="usp-5" tabindex="5">
     <img alt=" Scalable to Utility Grade Wave Farms" src="/assets/img/en-footer-icon-6.png"/>
    </a>
    <a class="icons-block seven" data-rel="seven" href="/abundant-and-proven-global-resources" id="usp-6" tabindex="6">
     <img alt="Abundant and Proven Global Resources" src="/assets/img/en-footer-icon-7.png"/>
    </a>
    <a class="icons-block eight" data-rel="eight" href="/environment-friendly-with-low-visual-impact" id="usp-7" tabindex="7">
     <img alt="Environment-Friendly with Low Visual Impact" src="/assets/img/en-footer-icon-8.png"/>
    </a>
    <a class="icons-block nine" data-rel="nine" href="/unlimited-and-cost-efficient-power-generation" id="usp-8" tabindex="8">
     <img alt="Unlimited and Cost-Efficient Power Generation" src="/assets/img/en-footer-icon-9.png"/>
    </a>
   </div>
  </div>
  <div class="footer-bar">
   AW-Energy Oy /// Vanha Nurmijrventie 85 / FI-01730 Vantaa / Finland ///  2010-2012 AW-Energy Oy / All rights reserved.
  </div>
  <div class="modal hide" id="errorModal">
   <div class="modal-header">
    <button class="close" data-dismiss="modal" type="button">
     
    </button>
    <h3>
     Modal header
    </h3>
   </div>
   <div class="modal-body">
    <p>
     One fine body
    </p>
   </div>
   <div class="modal-footer">
    <a class="btn btn-primary" data-dismiss="modal" href="#">
     Close
    </a>
   </div>
  </div>
  <!-- jQuery -->
  <script src="/assets/js/libs/jquery-1.7.2.js">
  </script>
  <!-- jQuery UI -->
  <script src="/assets/js/jquery-ui-1.8.21/ui/minified/jquery-ui.min.js">
  </script>
  <!-- Bootstrap -->
  <script src="/assets/js/libs/bootstrap.min.js">
  </script>
  <!-- SWFObject -->
  <script src="/assets/js/swfobject/swfobject.js">
  </script>
  <!-- Plugins -->
  <script src="/assets/js/dantipa-hammer.js-7cf4cdc/hammer.js">
  </script>
  <script src="/assets/js/dantipa-hammer.js-7cf4cdc/jquery.hammer.js">
  </script>
  <script src="/assets/js/sydlawrence-jquery.videoBG-45da9a9/jquery.videoBG.js">
  </script>
  <!--&lt;script src="/assets/js/jquery.tinyscrollbar.min.js"&gt;&lt;/script&gt;-->
  <script src="/assets/js/jquery.address-1.4.min.js">
  </script>
  <script src="/assets/js/jquery-lightbox-0.5/js/jquery.lightbox-0.5.min.js">
  </script>
  <!-- &lt;script src="/assets/js/benbarnett-jQuery-Animate-Enhanced-9f80839/jquery.animate-enhanced.min.js"&gt;&lt;/script&gt; -->
  <!--&lt;script src="/assets/js/jscroller-0.4.js"&gt;&lt;/script&gt;-->
  <script src="/assets/js/jquery-simplyscroll-2.0.5/jquery.simplyscroll.min.js">
  </script>
  <script src="/assets/js/css-dock-menu/js/interface.js">
  </script>
  <script src="/assets/js/jquery.dock-0.8b.source.js">
  </script>
  <!--&lt;script src="/assets/js/jscroller2-1.61.js"&gt;&lt;/script&gt;-->
  <!--&lt;script src="/assets/js/byrei_windiv-0.8.js"&gt;&lt;/script&gt;-->
  <!--&lt;script src="/assets/js/jquery.li-scroller.1.0.js"&gt;&lt;/script&gt;-->
  <!-- Custom -->
  <script src="/assets/js/plugins.js">
  </script>
  <script src="/assets/js/slick/slick.min.js" type="text/javascript">
  </script>
  <!--&lt;script src="/assets/js/script.js"&gt;&lt;/script&gt;-->
  <script>
   var userAgent = navigator.userAgent.toLowerCase(); 
$.browser.chrome = /chrome/.test(navigator.userAgent.toLowerCase()); 

$.browser.ie = /msie/.test(navigator.userAgent.toLowerCase()); 

var isOpera = !!(window.opera &amp;&amp; window.opera.version);  // Opera 8.0+
var isFirefox = testCSS('MozBoxSizing');                 // FF 0.8+
var isSafari = Object.prototype.toString.call(window.HTMLElement).indexOf('Constructor') &gt; 0;
    // At least Safari 3+: "[object HTMLElementConstructor]"
var isChrome = !isSafari &amp;&amp; testCSS('WebkitTransform');  // Chrome 1+
var isIE = /*@cc_on!@*/false || testCSS('msTransform');  // At least IE6

function testCSS(prop) {
	return prop in document.documentElement.style;
}

$.MacOS = navigator.userAgent.indexOf("Mac OS X") != -1;

$.browser.safari = isSafari;

var ua = navigator.userAgent;
//console.log(ua);
var iDevice = (ua.match(/iPad/i) || ua.match(/iPhone/i) ? true : false);
var iPad = (ua.match(/iPad/i) ? true : false);

if ($.browser.ie) {
	$("body").addClass("br-ie");
	//$("video").css({width: "2800px",marginLeft: "-75px"});
}

if ($.browser.safari &amp;&amp; !iDevice) {
	$("body").addClass("br-safari");
}

if ($.browser.safari &amp;&amp; $.MacOS &amp;&amp; !iDevice) {
//	$(".flash-wave").css({backgroundColor: "#1c718e"});
//	$("body").css({backgroundColor: "#1c718e"});
}

if ($.browser.chrome) {
	$("body").addClass("br-chrome");
	//$("#flash-roller-wrapper").css({paddingTop: "0"});
	//$(".flash-wave").css({backgroundColor: "#1d7198"});
}
/*
$("#flash-roller-wrapper").videoBG({
	position:"relative",
	zIndex:-1,
	mp4:'/assets/video/waveroller_a1.h264.mp4',
	ogv:'/assets/video/waveroller_video.ogv',
	webm:'/assets/video/waveroller.webm',
	poster:'"/assets/img/fox-roller.png'
	//opacity:0.5
});
*/


function nullpad( str, len ) {
    if( str.length &gt;= len ) {
        return str;
    }
    return Array( 1 + (len - str.length) ).join("0") + str;
}
var beginImage = 47;
var endImage = 320;
var i = beginImage - 1;
var img;
var file;
var src;
var percent;
var loaded = [];
var failed = [];
var wave = {
	loading: -1,
	rt: null
};
function loadImage (_src, _name) {
	var _img = new Image(); 
	_img.src = _src;
	_img.name = _name;
	_img.onload = function () {
		loaded[_name] = 1;
	}
	_img.onerror = function () {
		if (typeof failed[_name] == "undefined") {
			failed[_name] = 0;
		}
		failed[_name]++;
		if (failed[_name] &lt; 3) {
			window.setTimeout(function () {
				loadImage(_src, _name);
			}, 1000);
		}
	}
}
function wavePreload (force) {
	if (!iDevice) {
		//console.log("wavePreload - not an iDevice");
		return;
	}
	if (!force) {
		if (wave.loading == 1) {
			//console.log("wavePreload - in process");
			return;
		}
		if (wave.loading == 0) {
			Done();
			//console.log("wavePreload - already done");
			return;
		}
	}
	if (i &lt;= 0) {
		wave.loading = 1;
		
		//console.log("wavePreload loop");
	}
	i++;
	file = "roller" + nullpad(new String(i), 4) + ".jpg";
	src = "/assets/ipad-video/" + file;
	if (typeof loaded[i] == "undefined") {
		loadImage(src, i);
	}
	if (i &lt; endImage) {
		percent = parseInt((100 / endImage) * i, 10);
		////console.log("wavePreload " + i);
		$("#flash-wave-container").html(percent + "%");
		window.setTimeout(function () {
			wavePreload(1);
		}, 50); // 10 -&gt; 50
	} else {
		wave.loading = 0;
		Done();
	}
}
function Run () {
	i++;
	src = "/assets/ipad-video/roller" + nullpad(new String(i), 4) + ".jpg";
	img.src = src;
	if (i &gt;= endImage) {
		i = beginImage - 1;
	}
	
	if (i &gt; 165 &amp;&amp; i &lt; 225) {
		waveOnNews();
	}
	if (i &lt; 165 || i &gt; 225) {
		waveOffNews();
	}
	
	wave.rt = window.setTimeout(Run, 75);
}
function Done() {
	i = beginImage - 1;
	$("#flash-wave-container").replaceWith("&lt;img id=\"flash-wave-container\" /&gt;");
	img = document.getElementById("flash-wave-container");
	if (wave.rt) {
		window.clearTimeout(wave.rt);
		wave.rt = null;
	}
	wave.rt = window.setTimeout(Run, 75);
}

var flashvars = {}, params = {}, attributes = {};
params = {
	menu: "true",
	wmode: "transparent",
	loop: "true",
	quality: "high"
};

function createSWF(name, id, width, height) {
	////console.log("iDevice", iDevice);
	if (iPad) {
		if (name == "water") {
			
		}
	}
	else if (!iDevice) {
		//console.log("createSWF", arguments);
		var id = id + "-container", $o = $("#" + id);
		if ($o.length &amp;&amp; $o.prop("nodeName") != "OBJECT") {
			swfobject.embedSWF("/assets/img/" + name + ".swf", id, width, height, "8.0.0", "expressInstall.swf", flashvars, params, attributes);
		}
	}
}

function removeSWF(id) {
	////console.log("iDevice", iDevice);
	if (!iDevice) {
		//console.log("removeSWF", arguments);
		var id = id + "-container", $o = $("#" + id), $n;
		if ($o.length &amp;&amp; $o.prop("nodeName") == "OBJECT") {
			$n = $("&lt;div /&gt;");
			$o.after($n);
			swfobject.removeSWF(id);
			$n.attr("id", id);
		}
	}
}

function eMessage(e) {
	Message = e;
	if (typeof e == "object") {
		Message = e.message;
	}
	
	return Message;
}

function popError(e, Title) {
	Message = eMessage(e);
	var $o = $("#errorModal");/*
	if (typeof e == "object") {
		Message = e.message;
	}*/
	if (typeof Title == "undefined") {
		Title = "Error loading page";
	}
	if ($o.length) {
		$o.find("p").html(Message);
		$o.find("h3").html(Title);
		$o.modal("show");
	}
	else {
		alert(Note + "\n" + Message);
	}
}

$.fn.preload = function() {
    this.each(function(){
        $('&lt;img/&gt;')[0].src = this;
    });
}

jQuery.fn.executeSlide = function() {
	var	args = arguments[0] || {},
		_speed = args.speed || 250,
		$li = $(this),
		dimensions = $li.data("Dimensions"),
		tag = $li.prop("tagName"),
		visible = $li.is(":visible"),
		mode = $li.parent().prop("Mode"),
		processing = $li.hasClass("in-process");
	if (tag != "LI" || args.mode != mode) {
		return args.complete ? args.complete.call(this) : this;
	}
	////console.log(tag, "mode:", mode, ", processing:", processing, ", visible:", visible, ", class:", $li.attr("class"));
	if (processing) {
		$li.stop();//true
	}
	if (mode == "show") {
		if (!visible || processing) {
			$li.addClass("in-process").show().css({height: 0, width: 0, opacity: 0}).animate({height: dimensions.height, width: dimensions.width, opacity: 1}, _speed, function () {//"easeOutBounce", 
				/* Hack for li staying overflow hidden when visible */
				$li.css({overflow:"visible"});
				$li.removeClass("in-process").next("li").executeSlide(args);
			});
		} else {
			$li.next("li").executeSlide(args);
		}
	} else if (mode == "hide") {
		if (visible || processing) {
			$li.addClass("in-process").animate({height: 0, width: 0}, _speed, function () {//"easeOutBounce", 
				$li.removeClass("in-process").hide().prev("li").executeSlide(args);
			});
		} else {
			$li.prev("li").executeSlide(args);
		}
	}
};
var menuActive;
jQuery.fn.applySlide = function() {
	var	args = arguments[0] || {},
		_speedOpen = args.speedOpen || 250,
		_speedClose = args.speedClose || 150,
		_delay = args.delay || 500;
	return this.each(function() {
		var	$li = $(this),
			$pa = $li.parent(),
			tag = $li.prop("tagName"),
			$ul = $li.children("ul"),
			h = $ul.height(),
			$sl = null,
			mode = null,
			$mh = $("#menu-hold");
		
		////console.log("applySlide to", tag, ", UL height", h);
		if (typeof h != "undefined" &amp;&amp; h &gt; 0) {
			$li.attr("subHeight", h);
			$ul.data("Height", h);
			////console.log("subHeight:", h);
			$ul.show().children("li").each(function () {
				var	$o = $(this).show(),
					d = {"width": $o.width(), "height": $o.height()};
				$o.hide().data("Dimensions", d);
				////console.log("Dimensions:", d);
			}).hide();
			
			var menuHigh = $mh.data("menuHigh");
			if (typeof menuHigh == "undefined") {
				menuHigh = 0;
			}
			menuHigh = (menuHigh &gt; h ? menuHigh : h);
			$mh.data("menuHigh", menuHigh);//.css({height: (18 + 11 + 35 + menuHigh)})
			
			//$("#menu-hold").data("menuHigh")
			
			var Show = function () {
				/**
				 * Show
				 */
				////console.log("Hover:", $ul.prop("tagName"), ", current mode:", $ul.prop("Mode"));
				if ($li.Timer) {
					window.clearTimeout($li.Timer);
					$li.Timer = null;
				}
				
				if (typeof menuActive == "object" &amp;&amp; menuActive != $li) {
					$sl = menuActive.children("ul").children("li:last");
					menuActive.children("ul").prop("Mode", "hide");
					var mma = menuActive;
					$sl.executeSlide({speed: _speedClose, mode: "hide", complete: function () {
						mma.removeClass("menu-hover");
					}});
				}
				menuActive = $li;
				
				menuAreaHover();
				
				$li.addClass("menu-hover");
				
				/*
				var Active = $pa.data("Active");
				if (typeof Active != "undefined" &amp;&amp; Active != $li) {
					$sl = Active.children("ul").children("li:last");
					Active.children("ul").prop("Mode", "hide");
					$sl.executeSlide({speed: _speedClose, mode: "hide"});
				}
				$pa.data("Active", $li);
				//console.log("Show", "$pa.Active", $li);
				*/
				
				//$sl = $ul.children("li.in-process");
				//if (!$sl.length) {
				$sl = $ul.children("li:eq(0)");
				//}
				$ul.prop("Mode", "show");//.css("z-index", 100000);
				$sl.executeSlide({speed: _speedOpen, mode: "show",complete: function () {
					////console.log("Hover END");
					//$ul.css("z-index", 99999);
				}});
				
				//$mh.data("Active", $li);
			};
			
			var Hide = function () {
				/**
				 * Hide
				 */
				//$li.removeClass("menu-hover");
				////console.log("Out:", $ul.prop("tagName"), ", Mode:", $ul.prop("Mode"), ", class:", $ul.prop("class"));
				/*
				var Active = $pa.data("Active");
				//console.log("Hide", "Active", Active, "$li", $li);
				
				$li.Timer = window.setTimeout(function () {
					App.boxStop();
					//$sl = $ul.children("li.in-process");
					//if (!$sl.length) {
					$sl = $ul.children("li:last");
					//}
					$ul.prop("Mode", "hide");//.css("z-index", 99999);
					$sl.executeSlide({speed: _speedClose, mode: "hide", complete: function () {
						////console.log("Out END");
						
						//$mh.data("Active", undefined);
					}});
				}, _delay);
				*/
			};
		} else {
			if ($li.hasClass("main-level-1")) {
				var Show = function () {
					if (typeof menuActive == "object" &amp;&amp; menuActive != $li) {
						$sl = menuActive.children("ul").children("li:last");
						menuActive.children("ul").prop("Mode", "hide");
						var mma = menuActive;
						$sl.executeSlide({speed: _speedClose, mode: "hide", complete: function () {
							mma.removeClass("menu-hover");
						}});
					}
					menuActive = $li;
					
					menuAreaHover();
				};
			} else {
				var Show = function () {};
			}
			var Hide = function () {};
		}
		/*
		$li.hover(function () {
			//console.log("Keep menu open");
			
			if ($li.Timer) {
				window.clearTimeout($li.Timer);
				$li.Timer = null;
			}
		}, Hide);
		*/
		/*
		$mh.hover(function () {
			//console.log("Keep menu open");
			
			if ($li.Timer) {
				window.clearTimeout($li.Timer);
				$li.Timer = null;
			}
		}, Hide);
		*/
		$li.hover(Show, Hide);
		
		if (iDevice || iPad) {
			$li.click(Show);
			
			//$li.on("tap", Show);
			
			$li.hammer({prevent_default:false}).bind("tap", Show);
		}
	});
};

var	isOpen = false, 
	Timer;

function menuAreaHover() {
	var $mh = $("#menu-hold");
	
	if (Timer) {
		window.clearTimeout(Timer);
		Timer = null;
	}
	
	////console.log("menuAreaHover", isOpen);
	if (isOpen === false &amp;&amp; typeof menuActive == "object") {
		var	menuHigh = parseInt($mh.data("menuHigh"), 10),
			mh = 18 + 11 + 35 + menuHigh + 15;
		
		var	$cw = $("body .content-wrapper"),
			cwTop = $cw.data("Top");
		if (typeof cwTop == "undefined") {
			var	cwPos = $cw.position(),
				cwTop = parseInt(cwPos.top, 10); // OLD
			cwTop = parseInt($cw.css("top"), 10); // NEW
			$cw.data("Top", cwTop);
		}
		
		var	$fw = $("body .flash-wave"),
		fwTop = $fw.data("Top");
		if (typeof fwTop == "undefined") {
			var	fwPos = $fw.position();
			if(fwPos.top &gt; 0)
			{
				fwTop = parseInt(fwPos.top, 10);
				$fw.data("Top", fwTop);
			}
			
		}
		

		
		$mh.show().css({overflow:"visible"}).stop(true).css({"height": 0}).animate({"height": mh}, 250);
		
		if ($("body .content").hasClass("error-page")) {
			//cwTop+= menuHigh;
			fwTop+= menuHigh;
		}
		
		//if (!$("body .content").hasClass("error-page")) {
		if (!$("body").hasClass("home")) {
			//$("body .content-wrapper").stop(true).animate({"top": (menuHigh + cwTop)}, 250);
		
			//console.log("animate back to", fwTop);
			//$("body .flash-wave").stop(true).animate({"top": (menuHigh + fwTop)}, 250);
		}
		//}
		
		
		isOpen = true;
	}
}

function menuAreaOut(now) {
	Timer = window.setTimeout(function () {
		var mma = menuActive;
		var $mh = $("#menu-hold");
		////console.log("menuAreaOut", typeof menuActive, menuActive);
		isOpen = false;
		
		if (typeof menuActive == "object") {
			$sl = menuActive.children("ul").children("li:last");
			menuActive.children("ul").prop("Mode", "hide");
			
			$sl.executeSlide({speed: 75, mode: "hide", complete: function () {
				mma.removeClass("menu-hover");
			}});
			
			menuActive = false;
		}
		
		window.setTimeout(function () {
			App.boxStop();
		}, 50);
		
		$mh.stop(true).animate({"height": 0}, 750);
		
		var cwTop = $("body .content-wrapper").data("Top");
		var fwTop = $("body .flash-wave").data("Top");
		
		if ($("body .content").hasClass("error-page")) {
			
			var	menuHigh = $mh.data("menuHigh");
			
			//cwTop+= menuHigh;
			fwTop+= menuHigh;
		}
		$("body .content-wrapper").stop(true).animate({"top": cwTop}, 750);
		if (!$("body").hasClass("home") &amp;&amp; fwTop &gt; 0) {
			
			$("body .flash-wave").stop(true).animate({"top": fwTop}, 750);
		}
		
		$("body .flash-roller").stop(true).animate({"top": $("body .flash-roller").data("Top")}, 750);
	}, (now ? 1 : 250));
}

Function.prototype.method = function (name, func) {
    this.prototype[name] = func;
    return this;
};

Function.method('inherits', function (parent) {
    var d = {}, p = (this.prototype = new parent());
    this.method('uber', function uber(name) {
        if (!(name in d)) {
            d[name] = 0;
        }
        var f, r, t = d[name], v = parent.prototype;
        if (t) {
            while (t) {
                v = v.constructor.prototype;
                t -= 1;
            }
            f = v[name];
        } else {
            f = p[name];
            if (f == this[name]) {
                f = v[name];
            }
        }
        d[name] += 1;
        r = f.apply(this, Array.prototype.slice.apply(arguments, [1]));
        d[name] -= 1;
        return r;
    });
    return this;
});

Function.method('swiss', function (parent) {
    for (var i = 1; i &lt; arguments.length; i += 1) {
        var name = arguments[i];
        this.prototype[name] = parent.prototype[name];
    }
    return this;
});

function App_Core() {
	this._swf = [];
	
	this._state;
	this._time = 250;
	this._timer = false;
	this._crawlable = true;
	
	this._supportsState = function() {
		return (_h.pushState !== undefined);
	};
	this._hrefState = function() {
		return ('/' + _l.pathname.replace(new RegExp(_this._state), '') + 
		_l.search + (_hrefHash() ? '#' + _hrefHash() : '')).replace(_re, '/');
	};
	this._hrefHash = function() {
		////console.log("_hrefHash -&gt; _l.href: " + _l.href);
		var index = _l.href.indexOf('#');
		////console.log("_hrefHash -&gt; var index: " + index);
		return index != -1 ? _this._crawl(_l.href.substr(index + 1), false) : '/';
	};
	this._href = function() {
		return _supportsState() ? _hrefState() : _hrefHash();
	};
	this._window = function() {
			try {
				return top.document !== UNDEFINED ? top : window;
			} catch (e) { 
				return window;
			}
	};
	this._crawl = function(value, direction) {
		if (_this._crawlable &amp;&amp; direction) {
			return (value !== '' ? '!' : '') + value;
		}
		return value.replace(/^\!/, '');
	};
	var	_this = this,
		UNDEFINED,
		_t = this._window(),
		_d = _t.document,
		_h = _t.history,
		_l = _t.location,
		_re = /\/{2,9}/g;
	
	this._document = _d;
	this._location = _l;
	this._history = _h;

}

var pageStatus = 200;
App_Core.method("pageNotFound", function () {
	if (pageStatus != 404) {
		pageStatus = 404;
		
		$("body").addClass("error-page");
		$("body").addClass("error-404");
		/*
		var menuHigh = $("#menu-hold").data("menuHigh");
		
		var	$cw = $("body .content-wrapper"),
			cwTop = $cw.data("Top");
		if (typeof cwTop == "undefined") {
			var	cwPos = $cw.position(),
				cwTop = parseInt(cwPos.top, 10); // OLD
			cwTop = parseInt($cw.css("top"), 10); // NEW
			$cw.data("Top", cwTop);
		}
		
		var	$fw = $("body .flash-wave"),
			fwTop = $fw.data("Top");
		if (typeof fwTop == "undefined") {
			var	fwPos = $fw.position(),
				fwTop = parseInt(fwPos.top, 10);
			$fw.data("Top", fwTop);
		}
		
		//console.log("menuHigh", menuHigh);
		//console.log("fwTop", fwTop);
		
		hh = menuHigh;//(menuHigh + fwTop);
		
		//$("body .content-wrapper").stop(true).css({"top": (menuHigh + cwTop) + "px"});
		$("body .flash-wave").stop(true).css({"top": hh + "px"});
		*/
	}
});

App_Core.method("pageFound", function () {
	if (pageStatus != 200) {
		pageStatus = 200;
		
		$("body").removeClass("error-page");
		$("body").removeClass("error-404");
	}
});

App_Core.method('Init', function () {
	var self = this;
	if (typeof this._state == "undefined" || this._state == "") {
		this._state = this._hrefHash();
		
		//console.log("Init -&gt; set this._state: " + this._state);
	}
	
	if (this._supportsState()) {
		$(window).bind("popstate", function(evt) {
			var state = evt.originalEvent.state;
			//if (state &amp;&amp; state.isMine) {
				//$.getScript(location.href);
				//App.ajaxGet(location.href);
			//}
			//console.log("Going back to: " + location.href);
			App.ajaxGet(location.href, false);
		});
	} else {
		/*
		$(window).bind('hashchange', function() {
			console.info("Load page with ajax");
			//console.log("this._state : " + self._state);
			//console.log("_hrefHash(): " + self._hrefHash());
			
			self._state = self._hrefHash();
			App.ajaxGet(self._state, false);
		});
		*/
		var _this = this;
		this._timer = setInterval(function () {
			_this.checkAnchor();
		}, this._time); 
		
	}
	
	$("a[rel*=external]").each(function () {
		this.target = "_blank";
		//console.log(this);
	});
});

App_Core.method('checkAnchor', function () {
	if (this._state != this._hrefHash())
	{
		console.info("Load page with ajax");
		//console.log("this._state : " + this._state);
		//console.log("_hrefHash(): " + this._hrefHash());
		
		this._state = this._hrefHash();
		App.ajaxGet(this._state, false);
	}
});
/*
    getIntervalFn: function(requesterObj) {
        return function() {
            requesterObj.send.apply(requesterObj);
        };
    },
    
    start: function() {
        this.ref = setInterval(this.getIntervalFn(this.requesterObj), this.time);
    },
    
    stop: function() {
        clearInterval(this.ref);
    }
*/

App_Core.method('Set', function (name, value) {
    this[name] = value;
    return this;
});

App_Core.method('Get', function (name) {
    return this[name];
});

App_Core.method('setBase', function (value) {
    this.base = value;
    return this;
});

App_Core.method('setState', function (value) {
	//console.log("setState: " + value);
    this._state = value;
    return this;
});

App_Core.method('getBase', function () {
    return this.base;
});

App_Core.method('Reload', function () {
	document.location.replace(this.getBase());
});

App_Core.method("parseJSON", function (Resource) {
	try {
	var	self = this, 
		Name, 
		Template, 
		scrollTop,
		Module;
	console.groupCollapsed("parseJSON");
	//console.log("Resource.Error:", typeof Resource.Error);
	if (typeof Resource.Error != "undefined") {
		if (typeof Resource.Error == "undefined") {
			Resource.Error = "Undefined error message";
		}
		popError(Resource.Message);
	} else {
		if (typeof Resource.Title != "undefined") {
			//console.log("Document title:", Resource.Title);
			document.title = Resource.Title;
		}
		
		if (typeof Resource.Url != "undefined") {
			//console.log("self.History().state(url): " + Resource.Url);
			self.History().state(Resource.Url);
		}
	}
	if (Resource.Module) {
		Name = Resource.Module;
		Template = Resource.Template;
		scrollTop = Resource.scrollTop;
		//console.log("Module Name:", Name);
		if (Resource[Name]) {
			var List = Resource[Name];
			for (var key in List) {
				if (List.hasOwnProperty(key)) {
					////console.log("List key:", key);
					Module = List[key];
					////console.log("Module.Type:", Module.Type);
					if (Module.Type == "text/javascript") {
						////console.log("Execute javascript");
						(new Function(Module.Content).call(self));
					}
					else if (Module.Type == "text/html") {
						////console.log("Module.Action:", Module.Action);
						////console.log("Module.Element:", Module.Element);
						if (Module.Action == "append") {
							$(Module.Element).append(Module.Content);
						}
						else if (Module.Action == "prepend") {
							$(Module.Element).prepend(Module.Content);
						}
						else if (Module.Action == "set") {
							if (typeof Module.Animate != "undefined") {
								var elem = Module.Element;
								var cont = Module.Content;
								$(elem).fadeOut('slow', function() {
									$(elem).html(cont);
									//$(elem).show();
									$(elem).fadeIn('fast');
								});
							} else {
								$(Module.Element).html(Module.Content).show();
							}
						}
						else {
							console.error("Unknown Module.Action");
						}
					}
					else {
						console.error("Unknown Module.Type");
					}
					if (Module.Module) {
						////console.log("Found Module.Module");
						this.parseJSON(Module);
					}
				}
			}
		} else {
			console.warn(data.Name + " (data.Name) != data." + Name);
		}
		App.Set("Module", Name);
		App.Set("Template", Template);
		
		App.parseInit();
		
		if (scrollTop == 1) {
			//$("html, body").animate({scrollTop: 0}, "slow");
			scrollTop = 0;
		}
	} else {
		console.warn("data.Module not exists");
		//console.log(Resource);
	}
	console.groupEnd();
	} catch (e) {
		popError(e);
	}
});

App_Core.method('Link', function (search, url) {
	var self = this;
	var request = url;
	//console.log("Link " + search + " to " + request);
	$(search).click(function (event) {
		event.preventDefault();
		self.ajaxGet(request);
		return false;
	});
});

App_Core.method('ajaxGet', function (url, state) {
	var self = this;
	if (state !== true &amp;&amp; state !== false) {
		state = true;
	}
	if (state) {
		//console.log("this.History().state(url): " + url);
		this.History().state(url);
	}
	$.ajax({
		type: "GET",
		url: url,
		data: {Module: self.Get("Module"), Template: self.Get("Template")},
		cache: false,
		success: function(data) {
			//console.log("Execute App.parseJSON");
			App.parseJSON(data);
			
			_gaq.push(['_trackPageview', url]);
		},
		dataType: "json"
	});
});

App_Core.method('ajaxPost', function (data, url) {
	if (typeof url == "undefined") {
		url = this.getBase();
	}
	$.ajax({
		type: "POST",
		url: url,
		data: data,
		cache: false,
		success: function(data) {
			App.parseJSON(data);
			
			_gaq.push(['_trackPageview', url]);
		},
		dataType: "json"
	});
});

App_Core.method('Home', function () {
	this.ajaxGet(this.getBase());
});

App_Core.method('Back', function () {
	//this.ajaxGet(this.getBase());
	//history.go(-1);
});

/*
	function srollEvents(direction)
	{
		$j("#event-list ul").stop(true, true);
		height = $j("#event-list ul").height();
		scrollheight = $j("#event-list li").height() * 2;
		container = $j("#event-list").height();
		offset = $j("#event-list ul").position();

		if(direction == 'up' &amp;&amp; offset.top &lt; 0 )
		{	
			$j("#event-list ul").animate({
				top: "+="+scrollheight
			}, 250);
		}
		else if(direction == 'down' &amp;&amp; height - container + offset.top &gt; 0)
		{
			$j("#event-list ul").animate({
				top: "-="+scrollheight
			}, 250);
		}
		return false;
	}
*/

App_Core.method('Click', function (event) {
	var	$o = $(this),
	c = $o.hasClass("confirm"),
	s = $o.hasClass("submit"),
	h = $o.attr("href"),
	//rel = $o.attr("rel"),
	w = /wp-content/,
	u = App.parseUri(h),
	uri = (u.requestUri.substr(0, 1) == '/' ? u.requestUri : "/" + u.requestUri),
	wTest = !w.test(uri);
	
	console.info("Click:", $o);
	console.info("window.location.host: " + window.location.host);
	console.info("wTest:", wTest);
	
	/*
	
	
	for (var key in u) {
		if (u.hasOwnProperty(key)) {
			//console.log(key + ": " + u[key]);
		}
	}
	return false;
	*/
	if (s || (((u.hostname == "" || u.hostname == window.location.host) &amp;&amp; wTest) &amp;&amp; !$o.attr("data-dismiss"))) {
		event.preventDefault();
		if (s) {
			console.info("Fire submit action on closest form");
			$o.closest("form").submit();
		} else if (!c || confirm("Are you sure?")) {
			App.ajaxGet(uri);
			
			if ($o.parent().hasClass("main-level-1")) {
				App.menuArrow().Animate($o.parent(), true, true);
			}
			
			if ($o.parent().parent().hasClass("main-menu")) {
				//App.menuArrow().Animate($o.parent(), true);
			}
		}
		return false;
	}
	return true;
});

App_Core.method('Submit', function (event) {
	var $o = $(this);
	App.ajaxPost($o.serialize(), $o.attr("action"));//App.getBase() + 
	$("input.empty", $o).each(function(){
		$(this).val('');
	});
	return false;
});

App_Core.method('Button', function (event) {
	var $o = $(this);
	var name = $o.attr("name");
	var re = /^App\.(\w+)*$/;
	var result = re.exec(name)
	if (result) {
		var func = result[1];
		console.info("Call App." + func);
		App[func].call(App);
		return false;
	}
});

App_Core.method('History', function () {
	var	_this = this;
	return {
		state: function (url, title, state) {
			if (url.substr(0, 1) == "/") {
				//url = url.replace(/^\//, '');
			}
			if (_this._state == url) {
				//console.log("Setting the same url, skipped " + url);
				return false;
			}
			//console.log("_this._state now: " + _this._state);
			_this._state = url;
			//console.log("_this._state after: " + _this._state);
			
			//console.log("url: " + url);
			if (!title) {
				title = _this._document.title;
			}
			//console.log("title: " + title);
			if (!state) {
				state = {isMine:true};
			}
			//console.log("state: " + state);
			
			////console.log("_this._supportsState(): " + _this._supportsState());
			
			if (_this._supportsState()) {
				//console.log("Use pushState");
				_this._history.pushState(state, title, url);
				//_this._history.replaceState(state, title, url);
			} else {
				//console.log("Use location hash");
				_this._document.location = "#!" + url;
			}
			////console.log("Ready");
		}
	};
});
App_Core.method('toggleFlash', function (id, action) {
	var	$o = $(id);
	//console.log("toggleFlash", id, action);
	//console.log(this._swf);
	if ($o.length &amp;&amp; action == "hide") {
		if (typeof this._swf[id] == "undefined") {
			//console.log("Backup DOM");
			var clone = $o.clone(true);
			clone.find("script").remove();
			this._swf[id] = {
				"parent": $o.parent(),
				"clone": clone
			};
		}
		//console.log("Remove DOM");
		$o.remove();
	} else if (!$o.length &amp;&amp; action != "hide") {
		//console.log("Prepend DOM");
		$(this._swf[id].parent).prepend(this._swf[id].clone);
	}
});

App_Core.method('imgThumb', function (event) {
	event.preventDefault();
	var	$o = $(this),
		rel = $o.attr("rel"),
		$r = $("#" + rel),
		//$gd = $(".gallery-data"),
		t = $o.attr("data-title"),
		d = $o.attr("data-description");
	//console.log("imgThumb:", rel, t);
	$("a.little-gallery-main-pic", $r.parent()).hide();
	$r.show();
	
	if ($r.hasClass("wp-caption")) {
		$(".little-gallery-block").addClass("gallery-with-caption");
	} else {
		$(".little-gallery-block").removeClass("gallery-with-caption");
	}
	//$("span.image-date", $gd).html(t);
	//$("p", $gd).html(d);
	return false;
});

var $am = null,
	amPos = null;

App_Core.method('menuArrow', function () {
	var self = this;
	return {
		Init: function () {
			//console.log("menuArrow.Init()");
			
			$am = $(".arrow-mover");
			amPos = $am.position();
			
			$(".main-menu li").hover(function () {
				////console.log(".main-menu li hover");
				
				self.menuArrow().Animate($(this), null, false);
			}, function () {
				/*
				//console.log(".main-menu li out");
				
				if ($am.restoreTimer) {
					window.clearTimeout($am.restoreTimer);
					$am.restoreTimer = null;
				}
				$am.restoreTimer = window.setTimeout(function () {
					$am.stop(true).animate({left: amPos.left}, 400);
				}, 500);
				*/
			});
			
			$("#menu-hold").hover(null, function () {
				////console.log(".main-menu li out");
				
				if ($am.restoreTimer) {
					window.clearTimeout($am.restoreTimer);
					$am.restoreTimer = null;
				}
				$am.restoreTimer = window.setTimeout(function () {
					$am.stop(true).animate({left: amPos.left}, 400);
				}, 500);
			});
		},
		Animate: function ($o, setStart, now) {
			if ($am.restoreTimer) {
				window.clearTimeout($am.restoreTimer);
				$am.restoreTimer = null;
			}
			if ($am.animateTimer) {
				window.clearTimeout($am.animateTimer);
				$am.animateTimer = null;
			}
			
			var newLeft = self.menuArrow().getleft($o);
			if (setStart) {
				amPos = {left: newLeft};
			}
			
			$am.animateTimer = window.setTimeout(function () {
				//console.log("menuArrow.Animate()", $o, setStart, now, "newLeft:", newLeft);
				/*
				if (setStart) {
					amPos = {left: newLeft};
				}*/
				$am.stop(true).animate({left: newLeft}, 400);
			}, now ? 1 : 200);
		},
		getleft: function ($o) {
			var	$li = $o.closest('li.main-level-1'),
				marginLeft = 140,
				liLeft = $li.position().left,
				liWhalf = ($li.width() / 2),
				amWhalf = ($am.width() / 2),
				newLeft = Math.floor(marginLeft + (liLeft + liWhalf) - amWhalf - 10);
			
			if (iDevice) {
				newLeft-= marginLeft;
			}
			
			return newLeft;
		}
	}
});
App_Core.method('menuArrowOld', function () {
	return {
		Init: function () {
			$am = $(".arrow-mover");
			amPos = $am.position();
			
			$(".main-menu li").hover(function () {
				if ($am.Timer) {
					window.clearTimeout($am.Timer);
					$am.Timer = null;
				}
				
				App.menuArrow().Animate($(this), null, false);
			}, function () {
				$am.Timer = window.setTimeout(function () {
					$am.stop(true).animate({left: amPos.left}, 600);
				}, 250);
			});
		},
		Animate: function ($o, setStart, now) {
			//console.log("Animate()", $o, setStart, now);
			if ($am.aTimer) {
				window.clearTimeout($am.aTimer);
				$am.aTimer = null;
			}
			$am.aTimer = window.setTimeout(function () {
				if ($am.Timer) {
					window.clearTimeout($am.Timer);
					$am.Timer = null;
				}
				
				var	$li = $o.closest('li.main-level-1'),
					marginLeft = 140,
					liLeft = $li.position().left,
					liWhalf = ($li.width() / 2),
					amWhalf = ($am.width() / 2),
					newLeft = Math.floor(marginLeft + (liLeft + liWhalf) - amWhalf - 10);
				
				if (setStart) {
					amPos = {left: newLeft};
				}
				$am.stop(true).animate({left: newLeft}, 400);
			}, now ? 1 : 100);
		}
	}
});
/*
.footer .icons-block {text-decoration: none; z-index: 50; display: block; height: 248px; width: 238px; position: relative; margin: 0 -35px; float: left; bottom: -0px; -webkit-transition: 0.3s ease-out; -moz-transition: 0.3s ease-out; transition: 0.3s ease-out; transform: scale(0.9, 0.9); -ms-transform: scale(0.9, 0.9); -webkit-transform: scale(0.9, 0.9); -o-transform: scale(0.9, 0.9); -moz-transform: scale(0.9, 0.9);}
.footer .icons-block.one { opacity: 0.1; z-index: 10; margin: 0 -100px; bottom: -55px; transform: scale(0.3, 0.3); -ms-transform: scale(0.3, 0.3); -webkit-transform: scale(0.3, 0.3); -o-transform: scale(0.3, 0.3); -moz-transform: scale(0.3, 0.3); }
.footer .icons-block.two { opacity: 0.3; z-index: 20; margin: 0 -85px; bottom: -45px; transform: scale(0.4, 0.4); -ms-transform: scale(0.4, 0.4); -webkit-transform: scale(0.4, 0.4); -o-transform: scale(0.4, 0.4); -moz-transform: scale(0.4, 0.4); }
.footer .icons-block.three { opacity: 0.5; z-index: 30; margin: 0 -70px; bottom: -25px; transform: scale(0.6, 0.6); -ms-transform: scale(0.6, 0.6); -webkit-transform: scale(0.6, 0.6); -o-transform: scale(0.6, 0.6); -moz-transform: scale(0.6, 0.6); }
.footer .icons-block.four { opacity: 0.8; z-index: 40; margin: 0 -50px; bottom: -5px; transform: scale(0.8, 0.8); -ms-transform: scale(0.8, 0.8); -webkit-transform: scale(0.8, 0.8); -o-transform: scale(0.8, 0.8); -moz-transform: scale(0.8, 0.8); }
.footer .icons-bar .icons-text.three-row { top: 37px; }
*/

var styles = [
	{opacity: 1, zIndex: 50, bottom: -48},
	{opacity: 0.8, zIndex: 40, bottom: -38},
	{opacity: 0.6, zIndex: 30, bottom: -28},
	{opacity: 0.4, zIndex: 20, bottom: -18},
	{opacity: 0.3, zIndex: 10, bottom: -15}
];

var	all = ["one", "two", "three", "four", "five", "four", "three", "two", "one"], 
	nextPrev = ["four", "three", "two", "one"];

var Width = 238;

function getUspPos(index, i) {
	y = index - i;
	if (y &lt; 0) {
		y*= -1;
	}
	
	return y;
}

function setOpacity(testObj, value) {
	testObj.style.opacity = value / 10;
	testObj.style.filter = 'alpha(opacity=' + value * 10 + ')';
}

var activeUSP;
function USP(now, out) {
	////console.log("OUT", now, out);
	if (typeof out != "undefined") {
		$(".footer").css({height: "71px"});
		////console.log("OUT", now);
		if (now.length) {
			var $i = now.find("img");
			var src = $i.attr("src");
			var has = src.match(/on.png$/gi);
			
			if (has &amp;&amp; !now.hasClass("active")) {
				$i.attr("src", src.replace("-on.png",".png"));
			}
		}
		
		var totalLeft = 140;
		for (var i = 0; i &lt; 10; i++) {
			var o = document.getElementById("usp-" + i);
			if (o) {
				var $o = $(o);
				
				var realLeft = totalLeft;
				var newWidth = parseInt(Width * 0.3, 10);
				
				if ($.browser.msie &amp;&amp; parseInt($.browser.version, 10) &lt; 10) {
					$o.stop(true).animate({
						width: newWidth + "px",
						left: realLeft + "px",
						bottom: "-15px"
					}, 250);
				} else {
					o.style.left = realLeft + "px";
					o.style.width = newWidth + "px";
					o.style.bottom = "-15px";
				}
				
				o.style.opacity = 0.3;
				o.style.filter = 'alpha(opacity=' + 0.3 * 100 + ')';
				
				totalLeft+= newWidth - 15;
			}
		}
		
		/*
		if (activeUSP &gt;= 0) {
			var o = document.getElementById("usp-" + activeUSP);
			if (o) {
				var $o = $(o);
				
				var $i = $o.find("img");
				var src = $i.attr("src");
				var has = src.match(/on.png$/gi);
				
				if (has) {
					$i.attr("src", src.replace("-on.png",".png"));
				}
			}
			activeUSP = null;
		}
		*/
	} else {
		$(".footer").css({height: "200px"});
		var active = parseInt(now.attr("tabindex"), 10); // old index
		var totalLeft = 0;
		var style;
		
		activeUSP = active;
		
		for (var i = 0; i &lt; 10; i++) {
			var o = document.getElementById("usp-" + i);
			if (o) {
				var $o = $(o);
				
				if (i &lt; active) {
					var pos = active - i;
					var percent = 0.05;
				} else {
					var pos = i - active;
					var percent = 0.05;
				}
				
				var $i = $o.find("img");
				var src = $i.attr("src");
				var has = src.match(/on.png$/gi);
				if (i == active) {
					if (!has) {
						$i.attr("src", src.replace(".png","-on.png"));
					}
				} else {
					if (has &amp;&amp; !$o.hasClass("active")) {
						$i.attr("src", src.replace("-on.png",".png"));
					}
				}
				
				style = typeof styles[pos] != "undefined" ? styles[pos] : styles[4]; // 0 - 4 (100% - 30%)
				
				var realLeft = totalLeft;
				var newWidth = parseInt(Width * style.opacity, 10);
				
				if ($.browser.msie &amp;&amp; parseInt($.browser.version, 10) &lt; 10) {
					$o.stop(true).animate({
						width: newWidth + "px",
						left: realLeft + "px",
						bottom: style.bottom + "px"
					}, 250);
				} else {
					o.style.left = realLeft + "px";//parseInt(realLeft - (realLeft * percent) + 8, 10) + "px";
					o.style.width = newWidth + "px";
					o.style.bottom = style.bottom + "px";
				}
				
				o.style.zIndex = style.zIndex;
				//setOpacity(o, 10 * style.opacity);
				o.style.opacity = style.opacity;
				o.style.filter = 'alpha(opacity=' + style.opacity * 100 + ')';
				
				var ex = (2 * style.bottom);
				if (i &lt; active) {
					ex+= 0;
				} else {
					ex+= 20;
				}
				
				totalLeft+= newWidth + ex;// + ((2 * style.bottom) / 1.2);
			}
		}
	}
}
var btTimer;
App_Core.method('footerMenu', function () {
	var _init;
	/*
	var styles = [
		{opacity: 0.8, marginBottom: "-50px", bottom: "-5px"},//"four": 
		{opacity: 0.6, marginBottom: "-70px", bottom: "-25px"},//"three": 
		{opacity: 0.4, marginBottom: "-85px", bottom: "-45px"},//"two": 
		{opacity: 0.3, marginBottom: "-100px", bottom: "-55px"}//"one": 
	];
	*/
	var i = 0;
	$("#panel").show().find("a").each(function () {
		i++;
		var $o = $(this);
		$o.find("img").css({width: "100%"});
		if (!_init &amp;&amp; i == 5) {
			//USP($o);
			//_init = true;
		}
		
		$o.hover(function () {
			////console.log("USP HOVER");
			var _this = $(this);
			if (btTimer) {
				window.clearTimeout(btTimer);
				btTimer = null;
			}
			USP(_this);
		}, function () {
			////console.log("USP OUT");
			var _this = $(this);
			if (btTimer) {
				window.clearTimeout(btTimer);
				btTimer = null;
			}
			btTimer = window.setTimeout(function () {
				USP(_this, true);
			}, 100);
		});
		/*
		$o.mouseenter(function () {
			USP($(this));
		});*/
	});
});

App_Core.method('boxRun', function (event) {

	event.preventDefault();
	var	$o = $(this), 
		$li = $o.parent(), 
		pos = $li.position(), 
		dimensions = {"width": $li.width(), "height": $li.height()}, 
		$ul = $li.parent(), 
		ulH = $ul.data("Height"), 
		dotH = 55 + (ulH - pos.top);
	//console.log("boxAnim", $li, "position", pos, "dimensions", dimensions, "ulH", ulH, "dotH", dotH);
	
	/* Hack for spans staying overflow hidden when visible */
	$("span", $li).css({overflow:"visible"});
	
	App.boxStop();
	
	active = App.Get("boxActive");
	console.log("active:",active);
	if (typeof active != "undefined") {
		active.removeClass("active");
	}
	
	App.Set("boxActive", $li);
	
	$li.addClass("active");
	
	App.ajaxGet($o.attr("href"));
	return false;
	$(".line-x-mover", $li).animate({"width": "260"}, 300, function () {
		$(".line-gray-box-one", $li).show();
		$(".line-y-mover", $li).animate({"height": dotH}, 300, function () {
			$(".line-gray-box-two", $li).show();
			$(".line-x-back-mover", $li).animate({"width": "70"}, 300, function () {
				var $c = $(".line-anime-box", $li);
				$c.removeClass("animate").show().css({overflow:"hidden"});
				window.setTimeout(function () {
					$c.addClass("animate");
					
					//scrollTo(".content");
					menuAreaOut(1);
					//scrollTo(210);
				}, 50);
				window.setTimeout(function () {
					App.boxStop($li);
				}, 1500);
			});
		});
	});
	return false;
});

App_Core.method('boxStop', function (active) {
	if (typeof active == "undefined") {
		active = App.Get("boxActive");
	}
	if (typeof active != "undefined") {
		//active.removeClass("active");
		
		$("span", active).each(function () {
			var $s = $(this);
			if ($s.hasClass("line-y-mover")) {
				$s.stop(true).css({height: 0});//{height: 0, width: 0, opacity: 0}
			}
			else if ($s.hasClass("line-x-mover") || $s.hasClass("line-x-back-mover")) {
				$s.stop(true).css({width: 0});
			}
			else if ($s.hasClass("line-gray-box-one") || $s.hasClass("line-gray-box-two") || $s.hasClass("line-anime-box")) {
				$s.hide();
			}
		});
	}
});

App_Core.method('scrollerArrow', function (event) {
	event.preventDefault();
	var	$o = $(this),
		$c = $(".horisontal-items"),
		active = parseInt($c.data("active"), 10),
		direction = ($o.hasClass("scroller-right-arrow") || $o.hasClass("next") ? "right" : "left");
	if (!isNumber(active)) {
		active = 0;
	}
	if (direction == "right") {
		active++;
	} else {
		if (active &gt; 0) {
			active--;
		}
	}
	//console.log("scrollerArrow()", "direction", direction, "active", active);
	App.newsBlock().scrollTo(active);
	return false;
});

App_Core.method('newsBlock', function () {
	return {
		scrollTo: function (active) {
			var blocks = App.newsBlock().Blocks();
			////console.log(blocks);
			if (typeof blocks[active] != "undefined") {
				var marginL = (active &gt; 0 ? blocks[(active - 1)] * -1 : 0);
				
				if (!isNaN(marginL) &amp;&amp; blocks.length &gt; 1) {
					var $container = $(".horisontal-items");
					
					//console.log("newsBlock().scrollTo()", "active", active, "marginLeft:", marginL);
					
					$container.data("active", active).stop(true).animate({marginLeft: marginL}, 500, "easeOutBounce");
					
					var w = $(".news-footer").width(),
						$f = $(".news-arrow-floater"),
						count = blocks.length,
						clc = (w / count),
						to = (active == 0 ? clc / 2 : (active * clc) + (clc / 2));
					////console.log("blocks count", count);
					////console.log(".news-footer width", w);
					////console.log("width / count", clc);
					//console.log("count", count, "w", w, "clc", clc, "to", to);
					
					$f.animate({left: to}, 500, "easeOutBounce", function () {
						
					});
				}
			}
		},
		Blocks: function () {
			return App.Get("Blocks");
		},
		Init: function () {
			var $container = $(".horisontal-items"),
				i = 0,
				tw = 0,
				blocks = []
				fw = $(".news-footer").width();
			
			$container.children("div.image-item").each(function () {
				var	$d = $(this),
					w = $d.width(),
					h = $d.height();
				i++;
				$d.data("Dimensions", {"width": w, "height": h});
				tw+= w + (2 * 16);
				if (i &gt;= 3) {
					//console.log("News page:" , i, "tw:", tw, "block:", blocks.length);
					blocks.push(tw);
					//tw = 0;
					i = 0;
				}
			});
			if (i &gt; 0) {
				//console.log("News page:" , i, "tw:", tw, "block:", blocks.length);
				blocks.push(tw);
				i = 0;
			}
			
			App.Set("Blocks", blocks);
			
			var newW = fw + 1 + 10;
			$(".news-footer").prepend($("&lt;div /&gt;").attr("id", "news-footer-slider").css({height: "inherit", position: "absolute", width: newW + "px"}));
			
			var bLen = blocks.length,
				sw = $("#news-footer-slider").width(),
				ow = parseInt(sw / bLen, 10),
				leftPx = 0;
			//console.log("news-footer-slider w:" , sw, "ow:", ow);
			for (i = 0; i &lt; bLen; i++) {
				(function (i) {
					var ii = i;
					if (ii == (bLen - 1)) { // End
						ow = sw - leftPx;
					}
					var elem = $("&lt;a /&gt;").attr("href", "#").css({width: ow + "px", height: "inherit", display: "block", position: "inherit", left: leftPx + "px"}).click(function (event) {
						var toI = ii;
						//console.log("App.newsBlock().scrollTo()" , toI);
						App.newsBlock().scrollTo(toI);
						return false;
					});
					$("#news-footer-slider").append(elem);
				})(i);
				leftPx+= ow;
			}
			
			App.newsBlock().scrollTo(0);
		}
	}
});

App_Core.method('sliderActive', function (id, init) {
	try {
		var	$li = $(id),
			$ul = $li.parent(),
			$ac = $("li.active", $ul),
			$sm = $ul.parent(),
			$aw = $(".inner-menu-mover", $sm), // arrow
			pos = $li.position(),
			spos = $sm.width() - $ul.width(),
			left = pos.left,
			ah = ($li.width() / 2),
			np = (spos + left + ah) - ($aw.width() / 2);
		////console.log($li, "pos", pos);
		////console.log("spos", spos, "left", left, "ah", ah, "np", np, "$ac", $ac);
		
		if ($ac.length &gt; 0 &amp;&amp; init !== true) {
			this.sliderActive($ac, true);
		}
		
		if (init === true) {
			$aw.show().css({left: np + "px"});
		} else {
			$aw.show().animate({left: np + "px"}, 500, "easeOutBounce");
			
			$li.addClass("active").siblings().removeClass("active");
		}
	} catch (e) {
		//popError("sliderActive: " + eMessage(e));
		throw new Error(e);
	}
});

var checkMenuStateTimer;
App_Core.method("checkMenuState", function () {
	if (iDevice) {
		if (checkMenuStateTimer) {
			window.clearTimeout(checkMenuStateTimer);
			checkMenuStateTimer = null;
		}
		checkMenuStateTimer = window.setTimeout(function () {
			var $mh = $("#menu-hold");
			var h = parseInt($mh.height(), 10);
			
			//console.log("checkMenuState ", "h:", h);
			
			if (h &gt; 0) {
				menuAreaOut(1);
			}
		}, 5000);
	}
});

var checkUSPStateTimer;
App_Core.method("checkUSPState", function () {
	if (iDevice) {
		if (checkUSPStateTimer) {
			window.clearTimeout(checkUSPStateTimer);
			checkUSPStateTimer = null;
		}
		checkUSPStateTimer = window.setTimeout(function () {
			USP([], true);
		}, 3000);
	}
});

App_Core.method('parseInit', function () {
	//console.log("$.browser.mozilla", $.browser.mozilla);
	//console.log("$.browser.version", $.browser.version);
	
	if ($.browser.mozilla &amp;&amp; ($.browser.version == "14.0" || $.browser.version == "16.0")) {
		//$("#firefox-14-upgrade").show();
		
		if (App.Get("Template") == "index") {
			//$(".firefox-tutorial").show();
		}
	} else {
		//$(".firefox-tutorial").hide();
	}
});

var App = new App_Core();

(function (w, d) {
	var a, k = 'protocol hostname host pathname port search hash href'.split(' ');
	w.App = w.App || {};
	/**
	* Parse a URI, returning an object similar to Location
	* 
	* Usage: UFCOE.parseUri("hello?search#hash").search -&gt; "?search"
	* 
	* @param String url
	* @return Object
	*/
	w.App.parseUri = function (url) {
		a || (a = d.createElement('a'));
		// Let browser do the work
		a.href = url;
		for (var r = {}, i = 0; i&lt;8; i++) {
			r[k[i]] = a[k[i]];
		}
		r.toString = function() { return a.href; };
		r.requestUri = r.pathname + r.search;
		return r;
	};
})(window, document);

App.Set("Module", "Index");
App.Set("Template", "not-found");

App.setBase("/");
App.setState("/page_1_4.html");

var BGPos;
var frwH;
function BGTop() {
	if (typeof BGPos == "undefined") {
		BGPos = $(".flash-wave").position();
	}
	var wh = $(window).height();
	$(".flash-wave").css({height: (wh - BGPos.top)});
	
	if ($.browser.ie) {
		wh+= 84;
	}
	
	var fh = (wh - 90	 - 4);
	if (fh &lt; 600) {
		if (fh &lt; 300) {
			fh = 300;
		}
	} else {
		fh = 600;
	}
	
	var m = 600 - fh; // 600 - 300
	var p = (100 / 300) * m;
	var px = (p / 100) * 100;
	
	//px+=35;
	
	if (typeof frwH == "undefined") {
		$("#video").show();
		frwH = $("#flash-roller-wrapper").height();
		$("#video").hide();
	}
	
	$("#flash-roller-wrapper").css({marginTop: px + "px",height: (frwH - px) + "px"});
	
	$("#flash-roller-wrapper video").css({height: fh + "px"});
	//$("#flash-roller-wrapper object").css({height: fh + "px"});
	
	var cwh = $(".content-wrapper").height();
	
	var sum = (cwh - BGPos.top - 200);
	var nh = (wh - BGPos.top); // min height
	var xh = cwh + 200 + 50; // current, max height
	//console.log("window height", wh, "BGPos.top", BGPos.top, "content-wrapper height", cwh, "(" + wh + " [wh] &gt; " + sum + " [cwh - BGPos.top - 200	])", "xh", xh, "nh", nh);
	
	if (xh &gt; nh) {
		nh = xh
	}
	
	//$(".flash-wave").css({height: nh});
	//console.log("flash-wave height", nh);
}

function isNumber(n) {
	return !isNaN(parseFloat(n)) &amp;&amp; isFinite(n);
}

function scrollTo(prop) {
	if (isNumber(prop)) {
		//console.log("isNumber scrollTo", prop);
	} else {
		//console.log("scrollTo", prop);
		prop = $(prop).offset().top + parseInt($(prop).css('padding-top'),10) + parseInt($(prop).css('margin-top'),10);
	}
	$($.browser.webkit ? "body": "html").scrollTop(prop);
}

function waveOnNews() {
	$(".news-bar").addClass("alternate-color");
}

function waveOffNews() {
	$(".news-bar").removeClass("alternate-color");
}

function showNotFound() {
	var menuHigh = $("#menu-hold").data("menuHigh");
	
	var	$fw = $("body .flash-wave"),
		fwTop = $fw.data("Top");
	if (typeof fwTop == "undefined") {
		var	fwPos = $fw.position(),
			fwTop = fwPos.top;
		$fw.data("Top", fwTop);
	}
	
	$("body .flash-wave").stop(true).css({"top": (menuHigh + fwTop) + "px"});
}

$(function() {
	try {
		BGTop();
		$(window).resize(function() {
			BGTop();
		});
		$("body").on("submit", "form", App.Submit);
		$("body").on("click", "a.submit", App.Click);
		$("body").on("click", "input[type='button']", App.Button);
		$("body").on("click", "a.little-gallery-thumb", App.imgThumb);
		$("body").on("click", "a.box-anim", App.boxRun);
		
		//$("body").on("click touchend", "a:not([href^=#],[rel=lightbox],[class*=no-js],[class*=box-anim])", App.Click);
		$("body").on("click touchend", "a:not([href^=#],[rel=lightbox],[class*=no-js],[class*=box-anim])", App.Click);
		
		//$(".footer").on("touchend", "a:not([href^=#],[rel=lightbox],[class*=no-js],[class*=box-anim])", App.Click);
		
		$(".footer").on("tap", "a.icons-block", App.Click);
		
		$("body").on("click", "a.scroller-right-arrow", App.scrollerArrow);
		$("body").on("click", "a.scroller-left-arrow", App.scrollerArrow);
		$("body").on("click", "div.meta-nav a.next", App.scrollerArrow);
		$("body").on("click", "div.meta-nav a.prev", App.scrollerArrow);
		$("body").on("click", "a.back", App.Back);
		/*
		$("body").on("click", "a.firefox-tutorial-close", function () {
			$(this).parent().hide();
			return false;
		});
		*/
		
		$(".news-arrow-floater").css({left: 0});
		$("body").on("click", "a:[href^=#]", function () {return false;});
		$(".main-menu li").applySlide({speedOpen:100,speedClose:50,delay:150});
		
		if (App.Get("Template") == "not-found") {
			//showNotFound();
			App.pageNotFound();
		}
		
		$("#menu-hold").hover(menuAreaHover, function () {
			menuAreaOut(1);
		});
		App.menuArrow().Init();
		App.footerMenu();
		App.Init();
		App.parseInit();
		if (!(App.Get("Template") == "not-found") &amp;&amp; iDevice) {
			wavePreload();
		}
		
		if ($.browser.ie) {
			$("#flash-roller-wrapper").css({overflow: "hidden"});
		}
		
App.pageNotFound();
$("body").removeClass("home"); $("#home-header").hide(); $("#page-header").show();
var $usp = $("#panel").find(".active");$usp.removeClass("active");USP($usp, true);
$(["/assets/img/en-footer-icon-1-on.png", "/assets/img/en-footer-icon-2-on.png", "/assets/img/en-footer-icon-3-on.png", "/assets/img/en-footer-icon-4-on.png", "/assets/img/en-footer-icon-5-on.png", "/assets/img/en-footer-icon-6-on.png", "/assets/img/en-footer-icon-7-on.png", "/assets/img/en-footer-icon-8-on.png", "/assets/img/en-footer-icon-9-on.png"]).preload();
$("div.news-bar").hide();
$("#video").hide();
$("video").hide();
createSWF("water", "flash-wave", "2561", "30");
window.setTimeout(BGTop, 250);App.checkMenuState();
	} catch (e) {
		popError(e);
	}
	
	try {
		var video = document.getElementsByTagName("video")[0];
		if (video) {
			video.addEventListener("timeupdate", function() {
				////console.log(video.currentTime);
				if (video.currentTime &gt;= 8.6 &amp;&amp; video.currentTime &lt;= 12.4) {
					waveOnNews();
				} else {
					waveOffNews();
				}
			}, false);
		}
	} catch (e) {}
});
  </script>
  <!--
-->
 </body>
</html>