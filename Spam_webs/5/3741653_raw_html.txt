<!DOCTYPE html>
<html lang="en">
 <head>
  <title>
   setuid(2): set user identity - Linux man page
  </title>
  <base href="http://linux.die.net/man/2/setuid"/>
  <link href="http://linux.die.net/man/2/setuid" rel="canonical"/>
  <link href="/style/white.css" rel="stylesheet" type="text/css"/>
  <link href="/favicon.ico" rel="shortcut icon" type="image/x-icon"/>
  <meta content="width=device-width,initial-scale=1" name="viewport"/>
  <meta content="setuid() sets the effective user ID of the calling process. If the effective UID of the caller is root, the real UID and saved set-user-ID are also set." name="description"/>
  <script type="text/javascript">
   &lt;!--
var _gaq = _gaq || [];_gaq.push(['_setAccount', 'UA-50820-6']);_gaq.push(['_trackPageview']);
window.google_analytics_uacct = 'UA-50820-6';
// --&gt;
  </script>
 </head>
 <body>
  <div id="bg">
   <div id="logo">
    <a href="http://www.die.net/">
     <img alt="die.net" height="120" onerror="this.onerror=null; this.src='/style/logo.png'" src="/style/logo.svg" width="120"/>
    </a>
   </div>
   <div id="content">
    <!-- google_ad_section_start -->
    <h1>
     setuid(2) - Linux man page
    </h1>
    <h2>
     Name
    </h2>
    setuid - set user identity
    <h2>
     Synopsis
    </h2>
    <b>
     #include &lt;
     <a href="/include/sys/types.h" rel="nofollow">
      sys/types.h
     </a>
     &gt;
    </b>
    <br/>
    <b>
     #include &lt;
     <a href="/include/unistd.h" rel="nofollow">
      unistd.h
     </a>
     &gt;
    </b>
    <p>
     <b>
      int setuid(uid_t
     </b>
     <i>
      uid
     </i>
     <b>
      );
     </b>
    </p>
    <h2>
     Description
    </h2>
    <div id="adright">
     <script async="" src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js">
     </script>
     <ins class="adsbygoogle" data-ad-client="ca-pub-5823754184406795" data-ad-slot="7130739364" style="display:inline-block;width:336px;height:280px">
     </ins>
     <script>
      (adsbygoogle = window.adsbygoogle || []).push({});
     </script>
    </div>
    <b>
     setuid
    </b>
    () sets the effective user ID of the calling process. If the effective UID of the
caller is root, the real UID and saved set-user-ID are also set.
    <p>
     Under Linux,
     <b>
      setuid
     </b>
     () is implemented like the POSIX version with the
     <b>
      _POSIX_SAVED_IDS
     </b>
     feature. This allows a set-user-ID (other than root)
program to drop all of its user privileges, do some un-privileged work, and then reengage the original effective user ID in a secure manner.
    </p>
    <p>
     If the user is root or the program is set-user-ID-root, special care must be taken. The
     <b>
      setuid
     </b>
     () function checks the effective user ID of the caller
and if it is the superuser, all process-related user ID's are set to
     <i>
      uid
     </i>
     . After this has occurred, it is impossible for the program to regain root
privileges.
    </p>
    <p>
     Thus, a set-user-ID-root program wishing to temporarily drop root privileges, assume the identity of an unprivileged user, and then regain root privileges
afterward cannot use
     <b>
      setuid
     </b>
     (). You can accomplish this with
     <i>
      <b>
       <a href="seteuid">
        seteuid
       </a>
      </b>
      (2)
     </i>
     .
    </p>
    <h2>
     Return Value
    </h2>
    On success, zero is returned. On error, -1 is returned, and
    <i>
     errno
    </i>
    is set appropriately.
    <h2>
     Errors
    </h2>
    <dl compact="">
     <dt>
      <b>
       EAGAIN
      </b>
     </dt>
     <dd>
      The
      <i>
       uid
      </i>
      does not match the current uid and
      <i>
       uid
      </i>
      brings process over its
      <b>
       RLIMIT_NPROC
      </b>
      resource limit.
     </dd>
     <dt>
      <b>
       EPERM
      </b>
     </dt>
     <dd>
      The user is not privileged (Linux: does not have the
      <b>
       CAP_SETUID
      </b>
      capability) and
      <i>
       uid
      </i>
      does not match the real UID or saved set-user-ID of the
calling process.
     </dd>
    </dl>
    <h2>
     Conforming to
    </h2>
    SVr4, POSIX.1-2001. Not quite compatible with the 4.4BSD call, which sets all of the real,
saved, and effective user IDs.
    <h2>
     Notes
    </h2>
    Linux has the concept of the file system user ID, normally equal to the effective user ID. The
    <b>
     setuid
    </b>
    () call also sets the file system user ID of the calling process. See
    <i>
     <b>
      <a href="setfsuid">
       setfsuid
      </a>
     </b>
     (2)
    </i>
    .
    <p>
     If
     <i>
      uid
     </i>
     is different from the old effective UID, the process will be forbidden from leaving core dumps.
    </p>
    <p>
     The original Linux
     <b>
      setuid
     </b>
     () system call supported only 16-bit user IDs. Subsequently, Linux 2.4 added
     <b>
      setuid32
     </b>
     () supporting 32-bit IDs. The
glibc
     <b>
      setuid
     </b>
     () wrapper function transparently deals with the variation across kernel versions.
    </p>
    <h2>
     See Also
    </h2>
    <i>
     <b>
      <a href="getuid">
       getuid
      </a>
     </b>
     (2)
    </i>
    ,
    <i>
     <b>
      <a href="seteuid" rel="nofollow">
       seteuid
      </a>
     </b>
     (2)
    </i>
    ,
    <i>
     <b>
      <a href="setfsuid" rel="nofollow">
       setfsuid
      </a>
     </b>
     (2)
    </i>
    ,
    <i>
     <b>
      <a href="setreuid">
       setreuid
      </a>
     </b>
     (2)
    </i>
    ,
    <i>
     <b>
      <a href="/man/7/capabilities">
       capabilities
      </a>
     </b>
     (7)
    </i>
    ,
    <i>
     <b>
      <a href="/man/7/credentials">
       credentials
      </a>
     </b>
     (7)
    </i>
    <!-- google_ad_section_end -->
    <h2>
     Referenced By
    </h2>
    <b>
     <a href="access" rel="nofollow">
      access
     </a>
    </b>
    (2),
    <b>
     <a href="/man/1/capsh" rel="nofollow">
      capsh
     </a>
    </b>
    (1),
    <b>
     <a href="/man/1/ci" rel="nofollow">
      ci
     </a>
    </b>
    (1),
    <b>
     <a href="/man/3/euidaccess" rel="nofollow">
      euidaccess
     </a>
    </b>
    (3),
    <b>
     <a href="geteuid" rel="nofollow">
      geteuid
     </a>
    </b>
    (2),
    <b>
     <a href="getresuid" rel="nofollow">
      getresuid
     </a>
    </b>
    (2),
    <b>
     <a href="/man/8/milter-regex" rel="nofollow">
      milter-regex
     </a>
    </b>
    (8),
    <b>
     <a href="/man/1/mlmmj-sub" rel="nofollow">
      mlmmj-sub
     </a>
    </b>
    (1),
    <b>
     <a href="/man/8/named" rel="nofollow">
      named
     </a>
    </b>
    (8),
    <b>
     <a href="/man/8/nutupsdrv" rel="nofollow">
      nutupsdrv
     </a>
    </b>
    (8),
    <b>
     <a href="/man/1/pmpost" rel="nofollow">
      pmpost
     </a>
    </b>
    (1),
    <b>
     <a href="setresuid" rel="nofollow">
      setresuid
     </a>
    </b>
    (2),
    <b>
     <a href="/man/1/trickle" rel="nofollow">
      trickle
     </a>
    </b>
    (1),
    <b>
     <a href="/man/5/ups.conf" rel="nofollow">
      ups.conf
     </a>
    </b>
    (5),
    <b>
     <a href="/man/8/upsdrvctl" rel="nofollow">
      upsdrvctl
     </a>
    </b>
    (8),
    <b>
     <a href="/man/8/upslog" rel="nofollow">
      upslog
     </a>
    </b>
    (8)
    <div id="adbottom">
     <script async="" src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js">
     </script>
     <ins class="adsbygoogle" data-ad-client="ca-pub-5823754184406795" data-ad-slot="8789940313" style="display:inline-block;width:336px;height:280px">
     </ins>
     <script>
      (adsbygoogle = window.adsbygoogle || []).push({});
     </script>
    </div>
   </div>
   <div id="menu">
    <dl>
     <dt>
      Site Search
     </dt>
     <dd>
      <form action="http://www.google.com/cse" id="cse-search-box-menu">
       <input name="q" size="10" type="text"/>
       <input name="sa" type="hidden" value="Search"/>
       <input name="ie" type="hidden" value="ISO-8859-1"/>
       <input name="cx" type="hidden" value="partner-pub-5823754184406795:54htp1rtx5u"/>
       <input name="cof" type="hidden" value="FORID:9"/>
      </form>
      <script type="text/javascript">
       &lt;!--
document.forms["cse-search-box-menu"].action = "http://www.die.net/search/";
// --&gt;
      </script>
     </dd>
    </dl>
    <dl>
     <dt>
      Library
     </dt>
     <dd>
      <a href="http://linux.die.net/">
       linux docs
      </a>
     </dd>
     <dd>
      <a href="http://linux.die.net/man/">
       linux man pages
      </a>
     </dd>
     <dd>
      <a href="http://www.die.net/musings/page_load_time/">
       page load time
      </a>
     </dd>
    </dl>
    <dl>
     <dt>
      Toys
     </dt>
     <dd>
      <a href="http://www.die.net/earth/">
       world sunlight
      </a>
     </dd>
     <dd>
      <a href="http://www.die.net/moon/">
       moon phase
      </a>
     </dd>
     <dd>
      <a href="http://trace.die.net/">
       trace explorer
      </a>
     </dd>
    </dl>
    <dl>
     <dt>
      <a href="/man/2/">
       <img alt="Back" height="22" src="/style/back.gif" width="20"/>
      </a>
     </dt>
     <dd>
     </dd>
    </dl>
   </div>
  </div>
  <script type="text/javascript">
   &lt;!--
if (top.location != self.location) top.location = self.location;
if (/[?&amp;][pq]=/.test(document.referrer)) document.write(unescape("%3Cscript src='/style/highlight.js' type='text/javascript'%3E%3C/script%3E"));
function googleTranslateElementInit() {new google.translate.TranslateElement({pageLanguage: 'en', floatPosition: google.translate.TranslateElement.FloatPosition.TOP_RIGHT, gaTrack: true, gaId: 'UA-50820-6'});}
if (!/^en/i.test(window.navigator.userLanguage||window.navigator.language)) document.write(unescape("%3Cscript src='//translate.google.com/translate_a/element.js?cb=googleTranslateElementInit' type='text/javascript'%3E%3C/script%3E"));
(function() {
var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
})();
// --&gt;
  </script>
 </body>
</html>