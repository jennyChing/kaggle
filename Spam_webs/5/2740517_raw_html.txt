<!DOCTYPE html>
<html dir="ltr" lang="de" xml:lang="de" xmlns="http://www.w3.org/1999/xhtml">
 <head>
  <style type="text/css">
   .ui-autocomplete {z-index:9999!important;}
  </style>
  <meta content="text/html; charset=utf-8" http-equiv="content-type"/>
  <!--[if lt IE 9]&gt;
&lt;SCRIPT src="js/versioned/html5-20110529.js"&gt;&lt;/SCRIPT&gt;
&lt;![endif]-->
  <meta content="hawaii, rotkardinal" name="keywords"/>
  <meta content="Kay Tetzlaff" name="author"/>
  <meta content="Heimisch ist er in Nordamerika und dort habe ich ihn als scheu erlebt und selten vor die Kamera bekommen. Auf Hawaii ist er eigefuehrt und stellenweise wie hier vor ungewohnter Kulisse am Strand auf Maui fast zutraulich." name="description"/>
  <meta content="2011-06-01T02:33:24+02:00" name="dc.date.issued"/>
  <title data-debug="0" data-user_id="0">
   Rotkardinal	    
	
		  (Forum fr Naturfotografen)
  </title>
  <link href="/cache/bundles/1385715808-abb5a58c11ee02a4a6b326809bd5a62f.css" rel="stylesheet" type="text/css"/>
  <!--[if IE 6]&gt;&lt;style type='text/css' &gt;#header {height:1px;}
&lt;/style&gt;&lt;![endif]-->
  <link href="/cache/bundles/1403422674-741f736f15892b429c8672887632164e.css" rel="stylesheet" type="text/css"/>
  <link href="https://naturfotografen-forum.de/o545897-Rotkardinal" rel="canonical"/>
  <link href="/shared/icons2014/favicon.ico" rel="shortcut icon"/>
  <link href="/shared/icons2014/apple-touch-icon-57x57.png" rel="apple-touch-icon" sizes="57x57"/>
  <link href="/shared/icons2014/apple-touch-icon-114x114.png" rel="apple-touch-icon" sizes="114x114"/>
  <link href="/shared/icons2014/apple-touch-icon-72x72.png" rel="apple-touch-icon" sizes="72x72"/>
  <link href="/shared/icons2014/apple-touch-icon-144x144.png" rel="apple-touch-icon" sizes="144x144"/>
  <link href="/shared/icons2014/apple-touch-icon-60x60.png" rel="apple-touch-icon" sizes="60x60"/>
  <link href="/shared/icons2014/apple-touch-icon-120x120.png" rel="apple-touch-icon" sizes="120x120"/>
  <link href="/shared/icons2014/apple-touch-icon-76x76.png" rel="apple-touch-icon" sizes="76x76"/>
  <link href="/shared/icons2014/apple-touch-icon-152x152.png" rel="apple-touch-icon" sizes="152x152"/>
  <link href="/shared/icons2014/apple-touch-icon-180x180.png" rel="apple-touch-icon" sizes="180x180"/>
  <link href="/shared/icons2014/favicon-192x192.png" rel="icon" sizes="192x192" type="image/png"/>
  <link href="/shared/icons2014/favicon-160x160.png" rel="icon" sizes="160x160" type="image/png"/>
  <link href="/shared/icons2014/favicon-96x96.png" rel="icon" sizes="96x96" type="image/png"/>
  <link href="/shared/icons2014/favicon-16x16.png" rel="icon" sizes="16x16" type="image/png"/>
  <link href="/shared/icons2014/favicon-32x32.png" rel="icon" sizes="32x32" type="image/png"/>
  <meta content="#7c9c2d" name="msapplication-TileColor"/>
  <meta content="/shared/icons2014/mstile-144x144.png" name="msapplication-TileImage"/>
  <meta content="/shared/icons2014/browserconfig.xml" name="msapplication-config"/>
  <!--[if lte IE 6]&gt; &lt;style type='text/css'&gt;
    body {
      behavior:url("styles/csshover.htc");
    }
  &lt;/style&gt;&lt;![endif]-->
  <!--[if lte IE 7]&gt; &lt;style type='text/css'&gt;
  html .thumbarea {     
    zoom:1; /* trigger haslayout */
  }
  html .thumbarea .thumbnail {
    padding-top:10px;
  }
  &lt;/style&gt;&lt;![endif]-->
  <meta content="width=device-width,initial-scale=1" name="viewport"/>
  <link href="site/images/apple-touch-icon.png" rel="apple-touch-icon"/>
  <link href="rss.php" rel="alternate" title="Subscribe" type="application/rss+xml"/>
  <style>
   body,table { font-family:Vollkorn; }
body,table { line-height:inherit; }
  </style>
 </head>
 <body class=" object-type-img img_splugin_blackwhite" data-object_id="545897">
  <div id="page-container-outer">
   <div class="img_splugin_blackwhite" id="page">
    <div id="header">
     <div class="notclosed" id="nf_header_wrapper">
      <div id="nf_header_closer" title="Kopf aus/einblenden?">
       <span class="symbol uf_toggle_symbol">
        
       </span>
      </div>
      <div id="nf_header">
       <div id="nf_header_top">
        <div class="uf_object_hover_disable" id="mainmenu">
         <div class="menuentry with_submenu mayhover" id="mainmenu_person">
          <div class="mainmenu_header">
           Zugang
          </div>
          <table class="submenu">
           <tr>
            <td>
             <ol>
              <li>
               <a class="ufmodal" data-ufmodal-href="ajax.php?action=usr_login_screen" href="index.php?page=usr_login">
                Anmelden (Login)
               </a>
              </li>
              <li>
               <a href="index.php?action=usr_register">
                Registrieren
               </a>
              </li>
              <li class="">
               <a href="screencontrol.php">
                Layout
               </a>
              </li>
             </ol>
            </td>
           </tr>
          </table>
         </div>
         <div class="menuentry with_submenu mayhover" id="mainmenu_bilder">
          <div class="mainmenu_header">
           Bilder
          </div>
          <table class="submenu">
           <tr>
            <td>
             <div class="mainmenu_subheader">
              Naturbild-Rubriken
             </div>
             <ol>
              <li>
               <a class="uf_micropreview uf_oid586570 uf_draggable_object" data-object_id="586570" data-object_type="rub" draggable="true" href="/o586570-Amphibien%20und%20Reptilien">
                Amphibien und Reptilien
               </a>
              </li>
              <li>
               <a class="uf_micropreview uf_oid307865 uf_draggable_object" data-object_id="307865" data-object_type="rub" draggable="true" href="/o307865-Farben%20und%20Formen">
                Farben und Formen
               </a>
              </li>
              <li>
               <a class="uf_micropreview uf_oid7 uf_draggable_object" data-object_id="7" data-object_type="rub" draggable="true" href="/o7-Landschaften">
                Landschaften
               </a>
              </li>
              <li>
               <a class="uf_micropreview uf_oid310990 uf_draggable_object" data-object_id="310990" data-object_type="rub" draggable="true" href="/o310990-Mensch%20und%20Natur">
                Mensch und Natur
               </a>
              </li>
              <li>
               <a class="uf_micropreview uf_oid25 uf_draggable_object" data-object_id="25" data-object_type="rub" draggable="true" href="/o25-Pflanzen%20und%20Pilze">
                Pflanzen und Pilze
               </a>
              </li>
              <li>
               <a class="uf_micropreview uf_oid5 uf_draggable_object" data-object_id="5" data-object_type="rub" draggable="true" href="/o5-S%C3%A4ugetiere">
                Sugetiere
               </a>
              </li>
              <li>
               <a class="uf_micropreview uf_oid562540 uf_draggable_object" data-object_id="562540" data-object_type="rub" draggable="true" href="/o562540-Unter%20Wasser">
                Unter Wasser
               </a>
              </li>
              <li>
               <a class="uf_micropreview uf_oid6 uf_draggable_object" data-object_id="6" data-object_type="rub" draggable="true" href="/o6-V%C3%B6gel">
                Vgel
               </a>
              </li>
              <li>
               <a class="uf_micropreview uf_oid8 uf_draggable_object" data-object_id="8" data-object_type="rub" draggable="true" href="/o8-Wirbellose">
                Wirbellose
               </a>
              </li>
             </ol>
            </td>
            <td>
             <div class="mainmenu_subheader">
              Naturbild-Extras
             </div>
             <ol>
              <li>
               <a href="index.php?page=newimages">
                Neue Bilder
               </a>
              </li>
              <li class="indent">
               <a href="index.php?page=neue_bilder">
                ... nach Rubriken
               </a>
              </li>
              <li class="indent">
               <a href="index.php?page=photowall">
                ... bersicht
               </a>
              </li>
              <li>
               <a href="index.php?page=need_comments">
                Kommentarmangel
               </a>
              </li>
              <li>
               <a href="index.php?page=hot">
                Top-Bilder
               </a>
              </li>
              <li>
               <a href="index.php?page=con_overview">
                Wettbewerbe
               </a>
              </li>
              <li class="indent">
               <a href="/o561569-bodenpflanzen">
                ...Naturkalender 2013
               </a>
              </li>
             </ol>
            </td>
            <td>
             <div class="mainmenu_subheader">
              Forumsleben
             </div>
             <ol>
              <li>
               <a class="uf_micropreview uf_oid312978 uf_draggable_object" data-object_id="312978" data-object_type="rub" draggable="true" href="/o312978-Adventskalender">
                Adventskalender
               </a>
              </li>
              <li>
               <a class="uf_micropreview uf_oid24 uf_draggable_object" data-object_id="24" data-object_type="rub" draggable="true" href="/o24-Benutzerbilder">
                Benutzerbilder
               </a>
              </li>
              <li>
               <a class="uf_micropreview uf_oid23 uf_draggable_object" data-object_id="23" data-object_type="rub" draggable="true" href="/o23-Gl%C3%BCckw%C3%BCnsche%20und%20Gr%C3%BC%C3%9Fe">
                Glckwnsche und Gre
               </a>
              </li>
              <li>
               <a class="uf_micropreview uf_oid77448 uf_draggable_object" data-object_id="77448" data-object_type="rub" draggable="true" href="/o77448-Stammtische">
                Stammtische
               </a>
              </li>
              <li>
               <a class="uf_micropreview uf_oid265389 uf_draggable_object" data-object_id="265389" data-object_type="rub" draggable="true" href="/o265389-Vergangene%20Treffen">
                Vergangene Treffen
               </a>
              </li>
             </ol>
            </td>
           </tr>
          </table>
         </div>
         <div class="menuentry with_submenu mayhover" id="mainmenu_textforum">
          <div class="mainmenu_header">
           Texte
          </div>
          <table class="submenu">
           <tr>
            <td>
             <div class="mainmenu_subheader">
              Administratives
             </div>
             <ol>
              <li class="">
               <a class="uf_micropreview uf_oid77958 uf_draggable_object" data-object_id="77958" data-object_type="rub" draggable="true" href="/o77958-News">
                News
               </a>
              </li>
              <li class="">
               <a class="uf_micropreview uf_oid437945 uf_draggable_object" data-object_id="437945" data-object_type="rub" draggable="true" href="/o437945-Forumsblog">
                Forumsblog
               </a>
              </li>
              <li class="">
               <a href="index.php?page=calendar&amp;object_id=78123">
                Kalender
               </a>
              </li>
             </ol>
            </td>
            <td id="textforum_menu_block">
             <div class="mainmenu_subheader">
              <a href="/o77423-Textforum">
               Textforum
              </a>
             </div>
             <ol>
              <li class="pad-above">
               Forum
              </li>
              <li class="indent">
               <a class="uf_micropreview uf_oid77450 uf_draggable_object" data-object_id="77450" data-object_type="rub" draggable="true" href="/o77450-Allgemeines">
                Allgemeines
               </a>
              </li>
              <li class="indent">
               <a class="uf_micropreview uf_oid77451 uf_draggable_object" data-object_id="77451" data-object_type="rub" draggable="true" href="/o77451-Forumssoftware">
                Forumssoftware
               </a>
              </li>
              <li class="indent">
               <a class="uf_micropreview uf_oid77449 uf_draggable_object" data-object_id="77449" data-object_type="rub" draggable="true" href="/o77449-Treffen">
                Treffen
               </a>
              </li>
              <li class="pad-above">
               <a class="uf_micropreview uf_oid77447 uf_draggable_object" data-object_id="77447" data-object_type="rub" draggable="true" href="/o77447-Marktplatz">
                Marktplatz
               </a>
              </li>
              <li class="pad-above">
               Natur
              </li>
              <li class="indent">
               <a class="uf_micropreview uf_oid77452 uf_draggable_object" data-object_id="77452" data-object_type="rub" draggable="true" href="/o77452-Beobachtungen">
                Beobachtungen
               </a>
              </li>
              <li class="indent">
               <a class="uf_micropreview uf_oid77455 uf_draggable_object" data-object_id="77455" data-object_type="rub" draggable="true" href="/o77455-Gebiete">
                Gebiete
               </a>
              </li>
              <li class="indent">
               <a class="uf_micropreview uf_oid77456 uf_draggable_object" data-object_id="77456" data-object_type="rub" draggable="true" href="/o77456-Verhaltensweisen">
                Verhaltensweisen
               </a>
              </li>
              <li class="pad-above">
               Technik
              </li>
              <li class="indent">
               <a class="uf_micropreview uf_oid77458 uf_draggable_object" data-object_id="77458" data-object_type="rub" draggable="true" href="/o77458-Bildbearbeitung">
                Bildbearbeitung
               </a>
              </li>
              <li class="indent">
               <a class="uf_micropreview uf_oid77459 uf_draggable_object" data-object_id="77459" data-object_type="rub" draggable="true" href="/o77459-Computer%20und%20-software">
                Computer und -software
               </a>
              </li>
              <li class="indent">
               <a class="uf_micropreview uf_oid77462 uf_draggable_object" data-object_id="77462" data-object_type="rub" draggable="true" href="/o77462-Kameras%20und%20Objektive">
                Kameras und Objektive
               </a>
              </li>
              <li class="indent">
               <a class="uf_micropreview uf_oid77461 uf_draggable_object" data-object_id="77461" data-object_type="rub" draggable="true" href="/o77461-Fotozubeh%C3%B6r%2C%20Hilfsmittel">
                Fotozubehr, Hilfsmittel
               </a>
              </li>
              <li class="pad-above">
               <a class="uf_micropreview uf_oid77464 uf_draggable_object" data-object_id="77464" data-object_type="rub" draggable="true" href="/o77464-Andere%20Themen">
                Andere Themen
               </a>
              </li>
             </ol>
            </td>
           </tr>
          </table>
         </div>
         <div class="menuentry with_submenu mayhover" id="mainmenu_help">
          <div class="mainmenu_header">
           Hilfe
          </div>
          <table class="submenu">
           <tr>
            <td>
             <ol>
              <li>
               Forum:
              </li>
              <li class="indent">
               <a class="uf_micropreview uf_oid101625 uf_draggable_object" data-object_id="101625" data-object_type="htm" draggable="true" href="/o101625-Forumsrichtlinien">
                Forumsrichtlinien
               </a>
              </li>
              <li class="indent">
               <a class="uf_micropreview uf_oid101634 uf_draggable_object" data-object_id="101634" data-object_type="htm" draggable="true" href="/o101634-Gastanleitung">
                Gastanleitung
               </a>
              </li>
              <li class="indent">
               <a class="uf_micropreview uf_oid101645 uf_draggable_object" data-object_id="101645" data-object_type="htm" draggable="true" href="/o101645-Kurzanleitung">
                Kurzanleitung
               </a>
              </li>
              <li class="indent">
               <a class="uf_micropreview uf_oid374033 uf_draggable_object" data-object_id="374033" data-object_type="rub" draggable="true" href="/o374033-FAQ">
                FAQ
               </a>
              </li>
              <li class="indent">
               <a class="uf_micropreview uf_oid111719 uf_draggable_object" data-object_id="111719" data-object_type="art" draggable="true" href="/o111719-Spendeninformation">
                Spendeninformation
               </a>
              </li>
              <li class="indent">
               <a class="uf_micropreview uf_oid79311 uf_draggable_object" data-object_id="79311" data-object_type="htm" draggable="true" href="/o79311-Punktsystem">
                Punktsystem
               </a>
              </li>
              <li class="indent">
               <a class="uf_micropreview uf_oid657506 uf_draggable_object" data-object_id="657506" data-object_type="boo" draggable="true" href="/o657506-Forumsdokumentation">
                Forumsdokumentation
               </a>
              </li>
              <li class="pad-above">
               Fotografie und Bildbearbeitung:
              </li>
              <li class="indent">
               <a class="uf_micropreview uf_oid251069 uf_draggable_object" data-object_id="251069" data-object_type="rub" draggable="true" href="/o251069-Colormanagement">
                Colormanagement
               </a>
              </li>
              <li class="indent">
               <a class="uf_micropreview uf_oid248066 uf_draggable_object" data-object_id="248066" data-object_type="rub" draggable="true" href="/o248066-EBV-Leitfaden">
                EBV-Leitfaden
               </a>
              </li>
              <li class="indent">
               <a class="uf_micropreview uf_oid275777 uf_draggable_object" data-object_id="275777" data-object_type="rub" draggable="true" href="/o275777-Makrofotografie">
                Makrofotografie
               </a>
              </li>
             </ol>
            </td>
           </tr>
          </table>
         </div>
         <div class="menuentry with_submenu mayhover" id="mainmenu_extras">
          <div class="mainmenu_header">
           Extras
          </div>
          <table class="submenu">
           <tr>
            <td>
             <ol>
              <li class="">
               <a href="index.php?page=usergalleries" title="Zeigt eine Liste der Galerien der Benutzer">
                Galerien
               </a>
              </li>
              <li class="">
               <a href="index.php?page=calendar&amp;object_id=78123">
                Kalender
               </a>
              </li>
              <li class="">
               <a href="links.php">
                Links
               </a>
              </li>
              <li class="">
               <a href="index.php?page=live">
                Live-Update
               </a>
              </li>
              <li class="">
               <a href="index.php?page=xlo_list">
                Logos
               </a>
              </li>
              <li class="">
               <a href="index.php?page=portal">
                Portal
               </a>
              </li>
              <li class="">
               <a href="index.php?page=stats">
                Statistik
               </a>
              </li>
             </ol>
            </td>
           </tr>
          </table>
         </div>
         <div class="menuentry" id="mainmenu_impressum">
          <div class="mainmenu_header">
           <a class="uf_micropreview uf_oid77466 uf_draggable_object" data-object_id="77466" data-object_type="art" draggable="true" href="/o77466-Impressum">
            Impressum
           </a>
          </div>
         </div>
         <div class="menuentry" id="mainmenu_datenschutz">
          <div class="mainmenu_header">
           <a href="/o669519-Datenschutzerkl%C3%A4rung">
            Datenschutz
           </a>
          </div>
         </div>
         <div class="menuentry" id="mainmenu_periodical">
          <div class="mainmenu_header">
           <a href="index.php?page=periodical" style="">
            Newsletter
           </a>
          </div>
         </div>
        </div>
        <div id="nf_header_top_right">
         <!--late: (generic_timinginfo_button) -->
         <!--late: (cht_service) -->
        </div>
       </div>
       <div id="nf_header_middle">
        <div class="nf_header_left">
         <div id="nf-title">
          <div class="nf10wrapper">
           <a class="nf10" data-idx="0" href="#">
            <img alt=""/>
           </a>
           <a class="nf10" data-idx="1" href="#">
            <img alt=""/>
           </a>
           <a class="nf10logolink" href="index.php">
            <div class="nflogo">
             <img alt="Logo des Forums fr Naturfotografen" class="nf10_image" height="35" src="data/o/101/505383/nf-logo.png" width="414"/>
             <span class="nf10_ersatz">
             </span>
             <span class="nf10_line">
             </span>
            </div>
            <span class="nf10_10jahre">
             11 Jahre
            </span>
            <span class="nf10_20032013">
             <span data-idx="0">
              2
             </span>
             <span data-idx="1">
              0
             </span>
             <span data-idx="2">
              0
             </span>
             <span data-idx="3">
              3
             </span>
             -
             <span data-idx="4">
              2
             </span>
             <span data-idx="5">
              0
             </span>
             <span data-idx="6">
              1
             </span>
             <span data-idx="7">
              4
             </span>
            </span>
            <span class="nf10_fn">
            </span>
           </a>
           <a class="nf10" data-idx="2" href="#">
            <img alt=""/>
           </a>
           <a class="nf10" data-idx="3" href="#">
            <img alt=""/>
           </a>
          </div>
          <div id="nf-title-extra">
           4 SSL
          </div>
         </div>
        </div>
        <a class="ufmodal itk_abutton primary" data-ufmodal_href="#suchform_wrapper" data-ufmodal_title="Ihre Suche" href="search.php" id="suchlink">
         Suchen
        </a>
        <div id="suchform_wrapper">
         <form action="/search.php" class="suchform" method="get">
          <input accesskey="4" class="text searchinput" name="q" placeholder="Suchbegriff(e)" type="text"/>
          <input class="suchblock_types" name="types[]" type="hidden" value="cal"/>
          <input class="suchblock_types" name="types[]" type="hidden" value="usr"/>
          <input class="suchblock_types" name="types[]" type="hidden" value="ser"/>
          <input class="suchblock_types" name="types[]" type="hidden" value="rub"/>
          <input class="suchblock_types" name="types[]" type="hidden" value="img"/>
          <input class="suchblock_types" name="types[]" type="hidden" value="art"/>
          <input class="suchblock_types" name="types[]" type="hidden" value="pms"/>
          <input class="suchblock_types" name="types[]" type="hidden" value="xte"/>
          <input class="itk_button submit" name="submit" type="submit" value="Suchen"/>
          <a class="smalltext suchblock_extended" href="/search.php">
           Erweiterte Suche
          </a>
         </form>
        </div>
       </div>
       <div id="nf_header_bottom">
        <div id="nf_header_bottom_right">
         <a class="ufmodal javascript-only itk_abutton" href="/ajax.php?action=quicklinks_get&amp;default_entries=78123,7,8,25,5,6,307865,310990&amp;force_entries=77958">
          Schnellzugriff
         </a>
         <a class="ufmodal itk_abutton javascript-only" href="ajax.php?action=clickstream_show">
          Verlauf
         </a>
         <a class="itk_abutton ufmodal" data-object_id="545897" data-ufmodal-href="/ajax.php?action=object_functionblock_get&amp;object_id=545897" href="/index.php?action=object_functionblock_get&amp;object_id=545897" rel="nofollow">
          Funktionen
         </a>
        </div>
        <div id="nav-path-container">
         <div class="object-path">
          <div class="objectpath">
           <span class="objectpath-head">
            Sie sind hier:
           </span>
           <span class="objectpath-entry">
            <a class="uf_micropreview uf_oid194982 uf_draggable_object" data-object_id="194982" data-object_type="rub" draggable="true" href="/o194982-Bilder">
             Bilder
            </a>
           </span>
           <span class="objectpath-separator">
            &gt;&gt;
           </span>
           <span class="objectpath-entry">
            <a class="uf_micropreview uf_oid6 uf_draggable_object" data-object_id="6" data-object_type="rub" draggable="true" href="/o6-V%C3%B6gel">
             Vgel
            </a>
           </span>
          </div>
         </div>
        </div>
        <div style="clear:both">
        </div>
       </div>
      </div>
     </div>
    </div>
    <div id="content">
     <div id="generic_info">
      <!--late: (generic_info) -->
     </div>
     <div id="generic_precontent">
     </div>
     <div id="generic_main">
      <div id="generic_main_inner">
       <article itemscope="" itemtype="http://schema.org/ImageObject">
        <div data-object_id="545897" data-rel="6" data-rel_qs="" data-relname="Vgel" id="img_quicknav">
         <h2 class="img-name uf_draggable_object " data-object_id="545897" data-object_type="img" draggable="true">
          <span itemprop="name">
           Rotkardinal
          </span>
         </h2>
        </div>
        <div id="magimage">
        </div>
        <div data-nextolderurl="/o545880-Flussseeschwalben#content" data-nextyoungerurl="/o545910-Es%20liegt%20was%20in%20der%20Luft...#content" data-object_id="545897" id="img_imageblock">
         <menu icon="local/favicon.ico" id="img_imageblock_contextmenu" type="context">
          <menu icon="local/favicon.ico" label="Forum fr Naturfotografen">
           <menuitem data-href="/o383487-Kay%20Tetzlaff?action=usr_contact" id="img_imageblock_copyright" label="Copyright  Kay Tetzlaff">
           </menuitem>
           <menuitem class="blackwhite_ctxmenu blackwhite_trigger uf_hidebydefault" label="Schwarzer/Weier Hintergrund">
           </menuitem>
           <menuitem class="fullscreen_ctxmenu fullscreen_trigger uf_hidebydefault" label="Vollbildmodus an/aus">
           </menuitem>
           <menuitem class="resizer_ctxmenu resizer_trigger uf_hidebydefault" label="Kleiner/Grer">
           </menuitem>
           <menuitem class="zoom_ctxmenu zoom_trigger uf_hidebydefault" label="Zoom">
           </menuitem>
           <menuitem class="rotator_ctxmenu rotator_trigger uf_hidebydefault" label="Drehen">
           </menuitem>
           <menuitem class="autorotate_ctxmenu autorotate_trigger uf_hidebydefault" label="Autorotation an/aus">
           </menuitem>
          </menu>
         </menu>
         <div id="img_imageblock_imgwrapper">
          <div id="copyrighthack">
            Kay Tetzlaff
          </div>
          <div id="img_imageblock_innerwrapper">
           <img alt="Rotkardinal" height="980" id="theimage" src="data/o/109/545897/image::Kay_Tetzlaff_rotkardinal_hawaii.jpg" style="border-width:0px; display:inline-block; background-image:url(https://naturfotografen-forum.de/data/o/109/545897/thumb.jpg); ; width:619px; height:980px;" width="619"/>
           <div class="img_imageblock_scroll_block" id="img_imageblock_scroll_left">
           </div>
           <div class="img_imageblock_scroll_block" id="img_imageblock_scroll_right">
           </div>
          </div>
          <div id="img_subimagebuttons">
           <span class="star star1 " data-value="1">
            <b title="Das Bild gefllt mir, obwohl">
             *
            </b>
           </span>
           <span class="star star2 " data-value="2">
            <b title="Bild bewerten als gut.">
             **
            </b>
           </span>
           <span class="star star3 " data-value="3">
            <b title="Bild bewerten als sehr gut, mehr als nur gut.">
             ***
            </b>
           </span>
           <span class="star star4 " data-value="4">
            <b title="Bild bewerten als das mglicherweise beste Bild des heutigen Tages.">
             ****
            </b>
           </span>
           <a class="uf_hidebydefault blackwhite_trigger blackwhite_button" data-color1="#A39698" data-color2="#5E5366" data-color3="#C5BFC7" href="#" title="Zeigt nur noch das Bild vor schwarzem oder weiem Hintergrund.">
            <span>
            </span>
            <span>
            </span>
           </a>
           <a class="uf_hidebydefault fullscreen_trigger ui_abutton" href="#" title="Zeigt das Bild im Vollbildschirmmodus">
            Vollbild
           </a>
           <a accesskey="k" class="ui_abutton uf_hidebydefault resizer_trigger" data-downtext="Kleiner" data-uptext="Grer" href="#" id="resizer" title="Bild auf Fensterbreite verkleinern, oder wieder vergrern.">
           </a>
           <a class="ui_abutton uf_hidebydefault zoom_trigger" href="#" id="zoomer" title="Bildgre dynamisch verndern (Mausrad).">
            Zoom
            <span class="ui_abutton zoom_hover zoom_trigger_smaller" title="Bild verkleinern.">
             &lt;
            </span>
            <span class="ui_abutton zoom_hover zoom_trigger_normal" title="Normalgre.">
             0
            </span>
            <span class="ui_abutton zoom_hover zoom_trigger_larger" title="Bild vergrern.">
             &gt;
            </span>
           </a>
           <a class="javascript-only ui_abutton" href="#" id="ss_2012_activator">
            Diashow
           </a>
           <div data-element_id="545897" data-image_extra_info="" data-image_id_attribute="" data-image_ids="" data-image_selector="" data-parent_id="531925" id="ss_2012_bg">
            <div id="ss_2012_img_wrapper">
             <div id="ss_2012_img_inner_wrapper">
              <img alt="" id="ss_2012_img" src="styles/ajax-loader.gif"/>
             </div>
             <div id="ss_2012_preload_wrapper">
             </div>
            </div>
            <img alt="" id="ss_2012_waiting_img" src="styles/ajax-loader.gif"/>
            <div id="ss_2012_usageinfo">
             Klicken Sie auf das Bild, um Bedienelemente einzublenden!
             <span id="ss_2012_otherinfo">
              Dies verschwindet nach 10 Sekunden
              <span id="ss_2012_usageinfo_times">
               und wird noch
               <span id="ss_2012_usageinfo_times_val">
               </span>
               mal angezeigt.
              </span>
              !
             </span>
            </div>
            <div class="default-disabled" id="ss_2012_continue">
             Nur das Bild zeigen.
            </div>
            <div id="ss_2012_help">
             <a class="ss_2012_help_closer ss_2012_help_closer_tl" href="#">
              X
             </a>
             <h4>
              Bedienungshinweise
             </h4>
             <dl>
              <dt>
               Navigationshilfen
              </dt>
              <dd>
               ... werden sichtbar, wenn Sie mit der Maus in die oberen 300 oder unteren 50 Pixel gehen.
              </dd>
              <dt>
               Oben:
              </dt>
              <dd>
               Oben finden Sie Vorschaubilder zur Navigation. Oben links und rechts in den Ecken knnen Sie die Vorschaubilder seitenweise berspringen.
              </dd>
              <dt>
               Unten, von links nach rechts.
              </dt>
              <dd>
               Start/Stop der Diashow, An den Anfang / Bild zurck / Bild vor / An das Ende.
               <dd>
                Optionen zur Vergrerung und Verkleinerung der Bilder (Skalierung).
                <dd>
                 Die Einstellung der Pausendauer.
                 <dd>
                  <b>
                   i
                  </b>
                  blendet den Bildtitel ein.
                  <dd>
                   <b>
                    b
                   </b>
                   Bildseite einblenden.
                   <dd>
                    <b>
                     ESC
                    </b>
                    Beenden der Diashow.
                   </dd>
                  </dd>
                 </dd>
                </dd>
               </dd>
              </dd>
              <dt>
               Skalierung:
              </dt>
              <dd>
               <b>
                Ja
               </b>
               : Das Bild wird so angepat, da es noch auf den Bildschirm pat - bei Bedarf wird es vergrert oder verkleinert.
               <dd>
                <b>
                 Kleiner
                </b>
                : Das Bild wird so angepat, da es noch auf den Bildschirm pat. Dabei wird es nur verkleinert, nie vergrert.
                <dd>
                 <b>
                  2x
                 </b>
                 : Das Bild maximal auf die zweifache Flche vergrert, nie aber verkleinert.
                 <dd>
                  <b>
                   Nie
                  </b>
                  : Das Bild wird exakt in den Maen dargestellt, fr die es gedacht ist. bergroe Bilder werden angeschnitten.
                 </dd>
                </dd>
               </dd>
              </dd>
              <dt>
               Tastatur:
              </dt>
              <dd>
               <b>
                Leertaste
               </b>
               : Start/Stop.
               <b>
                Links
               </b>
               /
               <b>
                Rechts
               </b>
               : Zurck und Vor.
               <b>
                Pos1
               </b>
               bzw.
               <b>
                Home
               </b>
               /
               <b>
                Rechts
               </b>
               : Erstes / Letztes.
               <dd>
                <b>
                 Tab
                </b>
                : Geht die Skalierungsoptionen durch.
                <b>
                 Punkt
                </b>
                : Blendet den Bildtitel aus.
                <b>
                 Minus
                </b>
                : Verlt die Diashow.
               </dd>
              </dd>
             </dl>
             <a class="ss_2012_help_closer ss_2012_help_closer_br" href="#">
              X
             </a>
            </div>
            <div class="default-disabled" id="ss_2012_thumbs_wrapper">
             <div id="ss_2012_thumbs">
             </div>
             <a id="ss_2012_thumbs_prevpage">
              <img alt="Vorherige Seite" src="images/scroll_da_left.png"/>
             </a>
             <a id="ss_2012_thumbs_nextpage">
              <img alt="Nchste Seite" src="images/scroll_da_right.png"/>
             </a>
            </div>
            <div id="ss_2012_title">
            </div>
            <div id="ss_2012_quickinfo">
            </div>
            <div id="ss_2012_popup_bg">
             <div id="ss_2012_popup">
             </div>
            </div>
            <div class="default-disabled" id="ss_2012_controls">
             <div id="ss_2012_controls_inner">
              <span id="ss_2012_deactivator_wrapper">
               <span id="ss_2012_colorselector">
                <span>
                </span>
                <span>
                </span>
               </span>
               <a class="gcontrol" href="#" id="ss_2012_show_info" title="Bildinformation einblenden">
                i
               </a>
               <a class="gcontrol" href="#" id="ss_2012_show_help" title="Hilfe zeigen">
                ?
               </a>
               <a class="gcontrol" href="#" id="ss_2012_frame_it" title="Die Bildseite in einem Frame zeigen">
                Bildseite
               </a>
               <a class="gcontrol" href="#" id="ss_2012_deactivator" title="Diashow beenden">
                Ende
               </a>
              </span>
              <span id="ss_2012_movers">
               <a class="gcontrol" href="#" id="ss_2012_startstop">
                Start/Stop
               </a>
               <a class="gcontrol" href="#" id="ss_2012_first">
                &lt;&lt;&lt;
               </a>
               <a class="gcontrol" href="#" id="ss_2012_prev">
                &lt;
               </a>
               <a class="gcontrol" href="#" id="ss_2012_next">
                &gt;
               </a>
               <a class="gcontrol" href="#" id="ss_2012_last">
                &gt;&gt;&gt;
               </a>
              </span>
              <span id="settings">
               <span class="gcontrol" id="ss_2012_scale_wrapper">
                Skalieren:
                <input checked="" id="ss_2012_scale_all" name="ss_2012_scale" type="radio" value="all"/>
                Ja
                <input id="ss_2012_scale_smaller" name="ss_2012_scale" type="radio" value="smaller"/>
                Kleiner
                <input id="ss_2012_scale_2x" name="ss_2012_scale" type="radio" value="2x"/>
                Nur 2x
                <input id="ss_2012_scale_never" name="ss_2012_scale" type="radio" value="never"/>
                Nie.
               </span>
               <span class="gcontrol gcontrol-pause">
                <input id="ss_2012_pauseval" max="30" min="1" type="range" value="5"/>
                Pause (
                <span id="ss_2012_showpauseval">
                 5
                </span>
                Sek.)
               </span>
              </span>
             </div>
            </div>
            <div id="ss_2012_iframe_closer">
             Frame Schlieen
            </div>
            <div id="ss_2012_popup_colorselect_template" style="display:none">
             <form action="index.php" method="get">
              <table class="ss_2012_colorselect_table">
               <tbody>
                <tr>
                 <td>
                  Hintergrund
                 </td>
                 <td>
                  Rahmen
                 </td>
                 <th>
                 </th>
                </tr>
                <tr data-colormode="b">
                 <td>
                  <span class="cs bg">
                   <span style="background-color:#000">
                   </span>
                  </span>
                 </td>
                 <td>
                  <span class="cs fr">
                   <span style="background-color:#000">
                   </span>
                  </span>
                 </td>
                 <td>
                  Schwarz
                 </td>
                </tr>
                <tr data-colormode="w">
                 <td>
                  <span class="cs bg">
                   <span style="background-color:#fff">
                   </span>
                  </span>
                 </td>
                 <td>
                  <span class="cs fr">
                   <span style="background-color:#fff">
                   </span>
                  </span>
                 </td>
                 <td>
                  Wei
                 </td>
                </tr>
                <tr class="color1" data-colormode="1">
                 <td>
                  <span class="cs bg">
                   <span style="background-color:#fff">
                   </span>
                  </span>
                 </td>
                 <td>
                  <span class="cs fr">
                   <span style="background-color:#fff">
                   </span>
                  </span>
                 </td>
                 <td>
                  1. Bildfarbe
                 </td>
                </tr>
                <tr class="color2" data-colormode="2">
                 <td>
                  <span class="cs bg">
                   <span style="background-color:#fff">
                   </span>
                  </span>
                 </td>
                 <td>
                  <span class="cs fr">
                   <span style="background-color:#fff">
                   </span>
                  </span>
                 </td>
                 <td>
                  2. Bildfarbe
                 </td>
                </tr>
                <tr class="color3" data-colormode="3">
                 <td>
                  <span class="cs bg">
                   <span style="background-color:#fff">
                   </span>
                  </span>
                 </td>
                 <td>
                  <span class="cs fr">
                   <span style="background-color:#fff">
                   </span>
                  </span>
                 </td>
                 <td>
                  3. Bildfarbe
                 </td>
                </tr>
                <tr class="color1c" data-colormode="1c">
                 <td>
                  <span class="cs bg">
                   <span style="background-color:#fff">
                   </span>
                  </span>
                 </td>
                 <td>
                  <span class="cs fr">
                   <span style="background-color:#fff">
                   </span>
                  </span>
                 </td>
                 <td>
                  Komplementrfarbe zur 1. Bildfarbe
                 </td>
                </tr>
                <tr class="color2c" data-colormode="2c">
                 <td>
                  <span class="cs bg">
                   <span style="background-color:#fff">
                   </span>
                  </span>
                 </td>
                 <td>
                  <span class="cs fr">
                   <span style="background-color:#fff">
                   </span>
                  </span>
                 </td>
                 <td>
                  Komplementrfarbe zur 2. Bildfarbe
                 </td>
                </tr>
                <tr class="color3c" data-colormode="3c">
                 <td>
                  <span class="cs bg">
                   <span style="background-color:#fff">
                   </span>
                  </span>
                 </td>
                 <td>
                  <span class="cs fr">
                   <span style="background-color:#fff">
                   </span>
                  </span>
                 </td>
                 <td>
                  Komplementrfarbe zur 3. Bildfarbe
                 </td>
                </tr>
               </tbody>
              </table>
             </form>
             <p>
              Wenn Hintergrund = Rahmen, dann wird der Rahmen weggelassen.
              <br/>
              Das gilt auch, wenn nicht genug Platz fr den Rahmen da ist.
             </p>
             <p>
              <button class="ss_2012_colormemory">
               Merken und Schlieen
              </button>
              <button class="ss_2012_color_close">
               Schlieen
              </button>
             </p>
            </div>
            <style type="text/css">
             #ss_2012_continue {
	position:absolute;
	bottom:3em;
	left:8px;
	padding:2px;
	border:1px solid white;
	background-color:white;
	background-color:rgba(255,255,255,0.75);
	color:black;
    }
    #ss_2012_bg .cs {
	display:inline-block;
	background-color:white;
	border:1px dotted black;
	height:1em;
    }
    #ss_2012_bg .cs span {
	height:1em;
	width:20px;
	display:inline-block;
    }
    #ss_2012_bg .ss_2012_colorselect_table .cs.current {
	position:relative;
    }
    #ss_2012_bg .ss_2012_colorselect_table .cs.current:after {
	content:"!";
	position:absolute;
    }
    #ss_2012_show_info {
	display:none;
    }

    #ss_2012_colorselector {
	display:inline-block;
	padding:2px;
	background-color:#888;
	height:14px;
	margin-left:5px;
    }
    #ss_2012_colorselector span {
	width:14px;
	height:14px;
	display:inline-block;
	background-color:white;
	vertical-align:top;
    }
    #ss_2012_colorselector span:first-child {
	background-color:black;
    }
    #ss_2012_popup_bg {
	position:fixed;
	top:0;
	right:0;
	bottom:0;
	left:0;
	background-color:#888;
	background-color:rgba(255,255,255,0.01);
	display:none;
	z-index:2000;
	text-align:center;
    }
    #ss_2012_popup {
	z-index:2001;
	border:2px solid #888;
	background-color:white;
	color:black;
	padding:8px;
	margin: 0 auto;
	display:inline-block;
	text-align:left;
    }
    #ss_2012_popup h1,
    #ss_2012_popup h2 {
	    color:black;
    }
    #ss_2012_colorselector_popup .example {
	display:inline-block;
	width:1em;
	height:1em;
    }
    #ss_2012_waiting_img {
	position:absolute;
	left:50%;
	top:50%;
    }
    #ss_2012_usageinfo #ss_2012_otherinfo {
	font-size:75%;
	display:block;
    }
    #ss_2012_usageinfo_times {
	display:none;
    }
    #ss_2012_iframe {
	z-index:1000;
	position:fixed;
	left:0;
	right:0;
	bottom:20px;
	top:0;
    }
    #ss_2012_iframe_closer {
	z-index:1000;
	position:fixed;
	left:0;
	right:0;
	bottom:0;
	border-top:2px solid black;
	height:18px;
	padding:1px 0 0 1px;
	font-size:16px;
	background:white;
	display:none;
	color:black;
	text-decoration:underline;
	cursor:pointer;
	text-align:right;
    }
    #ss_2012_usageinfo {
	position:absolute;
	left:0;
	bottom:3em;
	z-index:10;
	background-color:#fff;
	background-color:rgba(255,255,255,0.75);
	color:black;
	font-size:100%;
	padding:0.5em 1em;
	border-top:2px solid black;
	border-right:2px solid black;
	border-bottom:2px solid black;
	opacity:1.0;
	transition:opacity 2s 4s;
	-webkit-transition:opacity 2s 4s;
	display:none;
    }
    #ss_2012_usageinfo.removed {
	opacity:0;
    }
    .default-disabled {
	display:none;
    }
    .default-disabled.enabled {
	display:block;
    }
    #ss_2012_pauseval { max-width:60px; padding:2px; }
    #ss_2012_showpauseval { min-width:1em; text-align:right; display:inline-block;}
    #ss_2012_thumbs_nextpage {
	position:absolute;
	top:0;
	right:0;
	width:40px;
	height:130px;
	background-color:#fff;
	background-color:rgba(255,255,255,0.75);
	color:black;
	padding-top:53px;
	display:block;
	border-left:1px solid black;
	border-bottom:1px solid black;
    }
    #ss_2012_thumbs_prevpage {
	position:absolute;
	top:0;
	left:0;
	width:40px;
	height:130px;
	background-color:#fff;
	background-color:rgba(255,255,255,0.75);
	color:black;
	border-right:1px solid black;
	border-bottom:1px solid black;
	padding-top:53px;
	display:block;
    }
    #ss_2012_thumbs_wrapper {
	position:absolute;
	top:0;
	left:0;
	right:0;
	min-height:145px;
	max-height:300px;
	background-color:#202020;
	background-color:rgba(32,32,32,0.75);
	text-align:center;
	overflow:hidden;
	z-index:3;
    }
    #ss_2012_thumbs {
	display:inline-block;
    }
    #ss_2012_thumbs .ss_2012_thumb {
	height:135px;
	display:inline-block;
	width:135px;
	text-align:center;
	display:table-cell;
	vertical-align:middle;
	padding:5px;
    }
    #ss_2012_thumbs .ss_2012_thumb.current img {
	outline:2px solid white;
    }
    #ss_2012_help a {
	color:black;
    }
    #ss_2012_title a {
	color:black;
    }
    #ss_2012_title {
	visibility:hidden;

	background-color:#ffffff;
	background-color:rgba(255,255,255,0.75);
	color:black;
	padding:0.5em;
	text-align:left;

	position:absolute;
	left:1em;
	top:1em;
	z-index:3;
    }
    .default-disabled.enabled + #ss_2012_title {
	top:155px;
    }

    #ss_2012_quickinfo {
	background-color:#ffffff;
	background-color:rgba(255,255,255,0.75);
	color:black;
	text-align:left;
	padding:0.5em;
	position:absolute;
	display:none;
	bottom:5em;
	left:0;
	z-index:3;
    }
    #ss_2012_controls {
	position:absolute;
	bottom:0;
	left:0;
	right:0;
	z-index:3;
    }
    #ss_2012_controls_inner {
	padding:0.5em 0.5em 0.25em;
	background-color:#ffffff;
	background-color:rgba(255,255,255,0.75);
	border-top:1px solid black;
    }
    #ss_2012_controls #settings {
	margin-left:0.5em;
    }
    #ss_2012_pauseval { max-height:1em; }
    #ss_2012_controls .gcontrol {
	text-decoration:none;
	display:inline-block;
	text-align:center;
	font-weight:bold;
	color:black;
	padding:0 0.25em 2px;
	border:1px solid black;
	min-height:1.25em;
    }
    #ss_2012_controls .gcontrol-pause {
	min-width:12em;
    }
    #ss_2012_controls #ss_2012_startstop {
	min-width:3em;
    }
    #ss_2012_movers {
	display:inline-block;
	float:left;
    }
    #ss_2012_deactivator_wrapper {
	float:right;
    }
    #ss_2012_deactivator_wrapper a {
	color:black; /* IE8 */
    }
    #ss_2012_bg {
	display:none;
	background-color:black;
	color:white;
    }
    #ss_2012_bg.active {
	display:block;
	position:fixed;
	top:0;
	bottom:0;
	left:0;
	right:0;
    }
    #ss_2012_img_wrapper {
	display:table;
	width:100%;
	height:100%;
	max-height:100%;
	position:static;
	text-align:center;
    }
    #ss_2012_img_inner_wrapper {
	display:table-cell;
	vertical-align:middle;
	position:relative;
    }
    #ss_2012_preload_wrapper {
	display:table-cell;
	vertical-align:middle;
	position:absolute;
	width:100%;
	height:100%;
	max-height:100%;
    }
    #ss_2012_preload_wrapper img {
	position:absolute;
	left:0;
	top:0;
	visibility:hidden;
	max-width:100%;
	max-height:100%;
	overflow:hidden;
    }
    #ss_2012_img {
	position:relative;
	display:none;
    }
    #ss_2012_img.ss_2012_no_borders {
	border-top-width:0px !important;
	border-bottom-width:0px !important;
	border-left-width:0px !important;
	border-right-width:0px !important;
    }
    .ss_2012_help_closer {
	font-weight:150%;
	position:absolute;
	color:black;
    }
    .ss_2012_help_closer_tl {
	top:0;
	left:0;
	border-right:2px solid black;
	border-bottom:2px solid black;
    }
    .ss_2012_help_closer_br {
	bottom:0;
	right:0;
	border-left:2px solid black;
	border-top:2px solid black;
    }
    #ss_2012_help {
	visibility:hidden;
	position:absolute;
	bottom:100px;
	right:0;
	padding:1em;
	background-color:#ffffff;
	background-color:rgba(255,255,255,0.75);
	border:1px solid black;
	color:black;
	color:800;
	z-index:10;
    }
    #ss_2012_bg.hidemouse * {
	cursor:none;
    }
            </style>
           </div>
           <div id="fx_eye_info">
           </div>
           <a class="javascript-only ui_abutton uf_hidebydefault" href="#" id="fx_starter">
            FX
           </a>
           <a class="fx_toggle ui_abutton" href="#" id="fx_toggle">
            
           </a>
           <div id="fx_click_catcher">
           </div>
           <div id="fx_control_container">
           </div>
           <div id="fx_control" style="display:none;">
            <h3 id="fx_control_dragger">
             Kontrollen
             <button class="fx_toggle" id="fx_toggle_beforeafter">
              Vorher/Nachher
             </button>
            </h3>
            <div id="fx_control_outer">
             <div id="fx_control_inner">
              <div class="toggleblock" id="toggleblock_hist">
               <h4>
                Histogramm
               </h4>
               <div class="onecontrol">
                <select id="fx_hist_select">
                 <option value="rgb">
                  RGB
                 </option>
                 <option value="r">
                  Rot
                 </option>
                 <option value="g">
                  Grn
                 </option>
                 <option value="b">
                  Blau
                 </option>
                 <option value="v">
                  Wert
                 </option>
                </select>
                <canvas height="128" id="fx_hist" width="256">
                </canvas>
               </div>
              </div>
              <div class="toggleblock" id="toggleblock_curve">
               <h4>
                Tonwertkorrektur
               </h4>
               <div class="onecontrol">
                <select id="fx_curve_select">
                 <option value="v">
                  Wert
                 </option>
                 <option value="r">
                  Rot
                 </option>
                 <option value="g">
                  Grn
                 </option>
                 <option value="b">
                  Blau
                 </option>
                </select>
                <button id="fx_curve_reset">
                 Kurve zurcksetzen
                </button>
               </div>
               <canvas height="256" id="fx_curve" width="256">
               </canvas>
              </div>
              <div class="toggleblock" id="toggleblock_colors">
               <h4>
                Farben
               </h4>
               <div class="onecontrol">
                <h6>
                 Farbton
                </h6>
                <input data-range-factor="5" max="36" min="-36" name="fxi_hue" type="range" value="0.0"/>
                <button class="zero">
                 0
                </button>
               </div>
               <div class="onecontrol">
                <h6>
                 Weiabgleich: Blau/Rot
                </h6>
                <input data-range-factor="5" max="20" min="-20" name="fxi_rb_mod" type="range" value="0.0"/>
                <button class="zero">
                 0
                </button>
               </div>
               <div class="onecontrol">
                <h6>
                 Weiabgleich: Grn
                </h6>
                <input data-range-factor="5" max="20" min="-20" name="fxi_g_mod" type="range" value="0.0"/>
                <button class="zero">
                 0
                </button>
               </div>
               <div class="onecontrol">
                <h6>
                 Sttigung
                </h6>
                <input data-range-factor="5" max="20" min="-20" name="fxi_saturation" type="range" value="0.0"/>
                <button class="zero">
                 0
                </button>
               </div>
               <div class="onecontrol">
                <h6>
                 Vibrance
                </h6>
                <input data-range-factor="5" max="20" min="-20" name="fxi_vibrance" type="range" value="0.0"/>
                <button class="zero">
                 0
                </button>
               </div>
              </div>
              <div class="toggleblock" id="toggleblock_contrast">
               <h4>
                Helligkeit, Kontrast, Schrfe
               </h4>
               <div class="onecontrol">
                <h6>
                 Helligkeit
                </h6>
                <input data-range-factor="5" max="20" min="-20" name="fxi_brightness" type="range" value="0.0"/>
                <button class="zero">
                 0
                </button>
               </div>
               <div class="onecontrol">
                <h6>
                 Kontrast
                </h6>
                <input data-range-factor="5" max="20" min="-20" name="fxi_contrast" type="range" value="0.0"/>
                <button class="zero">
                 0
                </button>
               </div>
               <div class="twocontrol">
                <h5>
                 Lokalkontast
                </h5>
                <div class="onecontrol">
                 <h6>
                  Radius
                 </h6>
                 <input max="100" min="0" name="fxi_usm2_radius" type="range" value="0.0"/>
                 <button class="zero">
                  0
                 </button>
                </div>
                <div class="onecontrol">
                 <h6>
                  Strke
                 </h6>
                 <input max="100" min="0" name="fxi_usm2_strength" type="range" value="0.0"/>
                 <button class="zero">
                  0
                 </button>
                </div>
               </div>
               <div class="twocontrol">
                <h5>
                 Unscharf maskieren
                </h5>
                <div class="onecontrol">
                 <h6>
                  Radius
                 </h6>
                 <input max="2" min="0" name="fxi_usm1_radius" step="0.1" type="range" value="0.0"/>
                 <button class="zero">
                  0
                 </button>
                </div>
                <div class="onecontrol">
                 <h6>
                  Strke
                 </h6>
                 <input max="1000" min="0" name="fxi_usm1_strength" type="range" value="0.0"/>
                 <button class="zero">
                  0
                 </button>
                </div>
               </div>
              </div>
              <div class="toggleblock" id="toggleblock_crop">
               <h4>
                Drehen und Ausschnitt
               </h4>
               <div class="onecontrol">
                <h6>
                 Rotation
                </h6>
                <input data-range-factor="5" max="18" min="-18" name="fxi_rotate" type="range" value="0.0"/>
                <button class="zero">
                 0
                </button>
               </div>
               <div class="onecontrol" id="fx_crop_controls">
                <h6>
                 Ausschnitt
                </h6>
                <select id="fx_crop_format">
                 <option value="">
                  Frei
                 </option>
                 <option value="3:2">
                  3:2
                 </option>
                 <option value="4:3">
                  4:3
                 </option>
                 <option value="2:3">
                  2:3
                 </option>
                 <option value="3:4">
                  3:4
                 </option>
                 <option value="1:1">
                  1:1
                 </option>
                </select>
                <button id="fx_crop_mouse">
                 Auswahl starten
                </button>
                <button class="zero">
                 0
                </button>
               </div>
              </div>
              <div>
               <button id="fx_reset">
                Zurcksetzen
               </button>
               <button id="fx_fontsize_large">
                A
               </button>
               <button id="fx_fontsize_medium">
                A
               </button>
               <button id="fx_fontsize_small">
                A
               </button>
               <button id="fx_eye">
                o
               </button>
              </div>
              <div>
               <h4>
                Zusammenfassung
               </h4>
               <input name="fxi_x1" type="hidden" value="0"/>
               <input name="fxi_x2" type="hidden" value="0"/>
               <input name="fxi_y1" type="hidden" value="0"/>
               <input name="fxi_y2" type="hidden" value="0"/>
               <input name="fxi_curve_v" type="hidden" value="0"/>
               <input name="fxi_curve_r" type="hidden" value="0"/>
               <input name="fxi_curve_g" type="hidden" value="0"/>
               <input name="fxi_curve_b" type="hidden" value="0"/>
               <div id="fxi_cmd">
               </div>
               <div>
                <button id="fx_copy_cmd">
                 Kopieren
                </button>
                <button id="fx_load_cmd">
                 Laden
                </button>
                <button id="fx_save_cmd">
                 Speichern
                </button>
               </div>
              </div>
             </div>
            </div>
           </div>
           <script id="testworker" type="text/webworker">
            worktest=function() {
	return "wtest";
    };
    self.onmessage = function(e) {
	self.postMessage('answer to '+e);
	return;
    };
           </script>
           <script id="histworker" type="text/webworker">
            // this needs to be part of the document, not put into the script section.
    var fx_worker_calc_histogram=function(pxa,x1,y1,x2,y2,width,height) {
	var i;
	var len=pxa.length;
	var h={};
	h.r=[];
	h.g=[];
	h.b=[];
	h.v=[];
	for (var i=0;i&lt;256;i++) {
	    h.r[i]=0;
	    h.g[i]=0;
	    h.b[i]=0;
	    h.v[i]=0;
	}

	var r,g,b,v,p,y=0,x=0,cont;
	for (var i=0;i&lt;len;i+=4) {
	    cont=1;
	    if (x&lt;x1||x&gt;x2)
		cont=0;
	    if (y&lt;y1||y&gt;y2)
		cont=0;
	    x++;
	    if (x==width) {
		x=0;
		y++;
	    }
	    if (!cont)
		continue;
	    r=pxa[i+0];
	    g=pxa[i+1];
	    b=pxa[i+2];
	    v=r*0.3+g*0.59+b*0.11;
	    if ((r+g+b)/3&gt;v)
		v=(r+g+b)/3;
	    v=Math.floor(v);
	    h.r[r]=h.r[r]+1;
	    h.g[g]=h.g[g]+1;
	    h.b[b]=h.b[b]+1;
	    h.v[v]=h.v[v]+1;
	}

	var m=0;
	for (var i=0;i&lt;256;i++) {
	    if (h.v[i]&gt;m)
		m=h.v[i];
	}
	m=Math.log(m);
	for (var i=0;i&lt;256;i++) {
	    if (h.v[i])
		h.v[i]=Math.log(h.v[i])/(m+0.0);
	}

	var channels=['r','g','b'];
	m=0;
	for (var x in channels) {
	    var c=channels[x];
	    for (var i=0;i&lt;256;i++) {
		if (h[c][i]&gt;m)
		    m=h[c][i];
	    }
	}
	m=Math.log(m);
	for (var x in channels) {
	    var c=channels[x];
	    for (var i=0;i&lt;256;i++) {
		if (h[c][i])
		    h[c][i]=Math.log(h[c][i])/(m+0.0);
	    }
	}
	return h;
    };
    self.onmessage = function(e) {
	var h=fx_worker_calc_histogram(e.data.pxa, e.data.x1, e.data.y1, e.data.x2, e.data.y2, e.data.width, e.data.height);
	self.postMessage(h);
	return;
    };
           </script>
          </div>
         </div>
        </div>
        <div id="com_underimg">
        </div>
        <span itemprop="thumbnail" style="display:none">
         https://naturfotografen-forum.de/data/o/109/545897/thumb.jpg
        </span>
        <span itemprop="image" style="display:none">
         https://naturfotografen-forum.de/data/o/109/545897/image.jpg
        </span>
        <table class="imagedata">
         <tr>
          <td class="img-description" colspan="2" itemprop="description">
           <div class="bbcodeoutput">
            Heimisch ist er in Nordamerika und dort habe ich ihn als scheu erlebt und selten vor die Kamera bekommen. Auf Hawaii ist er eigefuehrt und stellenweise wie hier vor ungewohnter Kulisse am Strand auf Maui fast zutraulich.
           </div>
          </td>
         </tr>
         <tr class="authorline">
          <th>
           Autor:
          </th>
          <td>
           
           <span itemprop="creator" rel="author">
            <a class="uf_micropreview uf_oid383487 uf_draggable_object" data-object_id="383487" data-object_type="usr" draggable="true" href="/o383487-Kay%20Tetzlaff">
             Kay Tetzlaff
            </a>
           </span>
          </td>
         </tr>
         <tr>
          <th>
           Eingestellt:
          </th>
          <td itemprop="datePublished">
           2011-06-01
          </td>
         </tr>
         <tr>
          <th>
           Aufgenommen:
          </th>
          <td class="" itemprop="dateCreated">
           2011-04-15
          </td>
         </tr>
         <tr>
          <th>
           Natur:
          </th>
          <td class="">
           Naturdokument
           <a class="glossary_link" data-glossary-key="metadbdoc:img:nature" href="sysdoc.php?metadb=metadbdoc:img:nature" title="Glossareintrag zeigen">
            ?
           </a>
          </td>
         </tr>
         <tr class="twocol">
          <th>
           Fotografischer Anspruch:
          </th>
          <td class="">
           Fortgeschritten
           <a class="glossary_link" data-glossary-key="metadbdoc:img:ambition_id" href="sysdoc.php?metadb=metadbdoc:img:ambition_id" title="Glossareintrag zeigen">
            ?
           </a>
          </td>
         </tr>
         <tr class="uf_hidebydefault showtechnical">
          <th>
           Technische Angaben:
          </th>
          <td id="technicalspace">
           <span class="showtechnical2">
            zeigen
           </span>
           <table class="showtechnical3 uf_hidebydefault">
            <tr>
             <th>
              Dateigre:
             </th>
             <td>
              <span itemprop="contentSize">
               294.4 kB
              </span>
              ,
              <span itemprop="width">
               619
              </span>
              x
              <span itemprop="height">
               980
              </span>
              Pixel.
             </td>
            </tr>
            <tr>
             <th>
              Technik:
             </th>
             <td class="" itemprop="exifData">
              <div class="bbcodeoutput">
               Canon EOS 50D, 200mm
               <br/>
               1/320 Sek., f/4.5, ISO 100
               <br/>
               Belichtungsautomatik, Manueller Weiabgleich
               <br/>
               freihand
              </div>
             </td>
            </tr>
            <tr>
             <th>
              Ansichten:
             </th>
             <td>
              4 durch Benutzer, 107 durch Gste
             </td>
            </tr>
           </table>
          </td>
         </tr>
         <tr class="keywordline linkage">
          <th style="vertical-align:middle">
           Schlagwrter:
          </th>
          <td itemprop="keywords">
           <a class="uf_micropreview uf_oid77060 uf_draggable_object" data-object_id="77060" data-object_type="key" draggable="true" href="/o77060-hawaii" rel="tag">
            hawaii
           </a>
           ,
           <a class="uf_micropreview uf_oid133753 uf_draggable_object" data-object_id="133753" data-object_type="key" draggable="true" href="/o133753-rotkardinal" rel="tag">
            rotkardinal
           </a>
          </td>
         </tr>
         <tr class="linkage">
          <th style="vertical-align:middle">
           Rubrik
           <br/>
           <a class="uf_micropreview uf_oid6 uf_draggable_object" data-object_id="6" data-object_type="rub" draggable="true" href="/o6-V%C3%B6gel">
            Vgel
           </a>
           :
          </th>
          <td class="common_object_linkage">
           <div class="ols-area">
            <a class="javascript-only ols-more ols-more-before" data-index="18543" data-object_id="545897" data-parent_id="6" href="#">
             <span class="symbol ">
              <img alt="" height="24" src="images/scroll_da_left.png" width="23"/>
             </span>
            </a>
            <a class="javascript-only ols-more ols-more-after" data-index="18553" data-object_id="545897" data-parent_id="6" href="#">
             <span class="symbol ">
              <img alt="" height="24" src="images/scroll_da_right.png" width="23"/>
             </span>
            </a>
            <span class="uf_thumbcontainer img thumb_box uf_draggable_object uf_webtest_inline_style_ok" data-object_id="545913" data-object_type="img" draggable="true" style="width:135px; height:135px;">
             <a class="thumb " data-object_id="545913" href="/o545913-Hunger">
              <img alt="Hunger" height="101" src="https://naturfotografen-forum.de/data/o/109/545913/thumb.jpg" style="width:135px; height:101px;" title="Hunger" width="135"/>
             </a>
            </span>
            <span class="uf_thumbcontainer img thumb_box uf_draggable_object uf_webtest_inline_style_ok" data-object_id="545910" data-object_type="img" draggable="true" style="width:135px; height:135px;">
             <a class="thumb " data-object_id="545910" href="/o545910-Es%20liegt%20was%20in%20der%20Luft...">
              <img alt="Es liegt was in der Luft..." height="135" src="https://naturfotografen-forum.de/data/o/109/545910/thumb.jpg" style="width:135px; height:135px;" title="Es liegt was in der Luft..." width="135"/>
             </a>
            </span>
            <span class="uf_thumbcontainer img thumb_box uf_draggable_object uf_webtest_inline_style_ok" data-object_id="545897" data-object_type="img" draggable="true" style="width:135px; height:135px;">
             <a class="thumb " data-object_id="545897" href="/o545897-Rotkardinal">
              <img alt="Rotkardinal" height="135" src="https://naturfotografen-forum.de/data/o/109/545897/thumb.jpg" style="width:85px; height:135px;" title="Rotkardinal" width="85"/>
             </a>
            </span>
            <span class="uf_thumbcontainer img thumb_box uf_draggable_object uf_webtest_inline_style_ok" data-object_id="545880" data-object_type="img" draggable="true" style="width:135px; height:135px;">
             <a class="thumb " data-object_id="545880" href="/o545880-Flussseeschwalben">
              <img alt="Flussseeschwalben" height="90" src="https://naturfotografen-forum.de/data/o/109/545880/thumb.jpg" style="width:135px; height:90px;" title="Flussseeschwalben" width="135"/>
             </a>
            </span>
            <span class="uf_thumbcontainer img thumb_box uf_draggable_object uf_webtest_inline_style_ok" data-object_id="545825" data-object_type="img" draggable="true" style="width:135px; height:135px;">
             <a class="thumb " data-object_id="545825" href="/o545825-Kiebitz">
              <img alt="Kiebitz" height="90" src="https://naturfotografen-forum.de/data/o/109/545825/thumb.jpg" style="width:135px; height:90px;" title="Kiebitz" width="135"/>
             </a>
            </span>
           </div>
          </td>
         </tr>
         <tr class="linkage">
          <th style="vertical-align:middle">
           Serie
           <br/>
           <a class="uf_micropreview uf_oid531925 uf_draggable_object" data-object_id="531925" data-object_type="ser" draggable="true" href="/o531925-Hawaii">
            Hawaii
           </a>
           :
          </th>
          <td class="common_object_linkage">
           <div class="ols-area">
            <a class="javascript-only ols-more ols-more-before" data-index="-2" data-object_id="545897" data-parent_id="531925" href="#">
             <span class="symbol ">
              <img alt="" height="24" src="images/scroll_da_left.png" width="23"/>
             </span>
            </a>
            <a class="javascript-only ols-more ols-more-after" data-index="8" data-object_id="545897" data-parent_id="531925" href="#">
             <span class="symbol ">
              <img alt="" height="24" src="images/scroll_da_right.png" width="23"/>
             </span>
            </a>
            <span class="uf_thumbcontainer img thumb_box uf_draggable_object uf_webtest_inline_style_ok" data-object_id="553739" data-object_type="img" draggable="true" style="width:135px; height:135px;">
             <a class="thumb " data-object_id="553739" href="/o553739-Pacific%20Sunset">
              <img alt="Pacific Sunset" height="90" src="https://naturfotografen-forum.de/data/o/110/553739/thumb.jpg" style="width:135px; height:90px;" title="Pacific Sunset" width="135"/>
             </a>
            </span>
            <span class="uf_thumbcontainer img thumb_box uf_draggable_object uf_webtest_inline_style_ok" data-object_id="551591" data-object_type="img" draggable="true" style="width:135px; height:135px;">
             <a class="thumb " data-object_id="551591" href="/o551591-Regenbogen%20im%20Paradies">
              <img alt="Regenbogen im Paradies" height="90" src="https://naturfotografen-forum.de/data/o/110/551591/thumb.jpg" style="width:135px; height:90px;" title="Regenbogen im Paradies" width="135"/>
             </a>
            </span>
            <span class="uf_thumbcontainer img thumb_box uf_draggable_object uf_webtest_inline_style_ok" data-object_id="545897" data-object_type="img" draggable="true" style="width:135px; height:135px;">
             <a class="thumb " data-object_id="545897" href="/o545897-Rotkardinal">
              <img alt="Rotkardinal" height="135" src="https://naturfotografen-forum.de/data/o/109/545897/thumb.jpg" style="width:85px; height:135px;" title="Rotkardinal" width="85"/>
             </a>
            </span>
            <span class="uf_thumbcontainer img thumb_box uf_draggable_object uf_webtest_inline_style_ok" data-object_id="533079" data-object_type="img" draggable="true" style="width:135px; height:135px;">
             <a class="thumb " data-object_id="533079" href="/o533079-Graukardinal">
              <img alt="Graukardinal" height="96" src="https://naturfotografen-forum.de/data/o/106/533079/thumb.jpg" style="width:135px; height:96px;" title="Graukardinal" width="135"/>
             </a>
            </span>
            <span class="uf_thumbcontainer img thumb_box uf_draggable_object uf_webtest_inline_style_ok" data-object_id="532479" data-object_type="img" draggable="true" style="width:135px; height:135px;">
             <a class="thumb " data-object_id="532479" href="/o532479-Rotschnabel-Tropikvogel">
              <img alt="Rotschnabel-Tropikvogel" height="87" src="https://naturfotografen-forum.de/data/o/106/532479/thumb.jpg" style="width:135px; height:87px;" title="Rotschnabel-Tropikvogel" width="135"/>
             </a>
            </span>
           </div>
          </td>
         </tr>
        </table>
        <div id="imagecomments">
         <article class="snippet snippet-type-com " data-object_id="547169" data-parent_id="545897" id="link_547169" itemscope="" itemtype="http://schema.org/Comment" style="margin-left:0em">
          <meta content="https://naturfotografen-forum.de//o545897-Rotkardinal" itemprop="url" style="display:none"/>
          <div class="snippet_head">
           <div class="snippet_title" itemprop="name">
            <a class="uf_micropreview uf_oid547169 uf_draggable_object" data-object_id="547169" data-object_type="com" draggable="true" href="/o547169-Re%3A%20Rotkardinal">
             Re: Rotkardinal
            </a>
           </div>
           <div class="snippet_info">
            <div class="snippet_links">
            </div>
            <div class="snippet_created">
             <div class="snippet_create_date" itemprop="datePublished">
              2011-06-03
             </div>
             <div class="snippet_user_id" itemprop="author">
              <a class="uf_micropreview uf_oid543448 uf_draggable_object" data-object_id="543448" data-object_type="usr" draggable="true" href="/o543448-Patrick%20Laimer">
               Patrick Laimer
              </a>
             </div>
            </div>
           </div>
          </div>
          <div class="snippet_content">
           <div class="snippet_real_content" itemprop="text">
            <div class="bbcodeoutput">
             Hallo Kay, ja was soll ich da noch sagen wenn ich Deine Bilder anschaue, mir als "Neuling" bleibt bei den Bildern nur die Spucke weg !
             <br/>
             lg Patrick
            </div>
           </div>
          </div>
         </article>
         <article class="snippet snippet-type-com " data-object_id="545907" data-parent_id="545897" id="link_545907" itemscope="" itemtype="http://schema.org/Comment" style="margin-left:0em">
          <meta content="https://naturfotografen-forum.de//o545897-Rotkardinal" itemprop="url" style="display:none"/>
          <div class="snippet_head">
           <div class="snippet_title" itemprop="name">
            <a class="uf_micropreview uf_oid545907 uf_draggable_object" data-object_id="545907" data-object_type="com" draggable="true" href="/o545907-Re%3A%20Rotkardinal">
             Re: Rotkardinal
            </a>
           </div>
           <div class="snippet_info">
            <div class="snippet_links">
            </div>
            <div class="snippet_created">
             <div class="snippet_create_date" itemprop="datePublished">
              2011-06-01
             </div>
             <div class="snippet_user_id" itemprop="author">
              <a class="uf_micropreview uf_oid83568 uf_draggable_object" data-object_id="83568" data-object_type="usr" draggable="true" href="/o83568-Olaf%20Sch%C3%A4fer">
               Olaf Schfer
              </a>
             </div>
            </div>
           </div>
          </div>
          <div class="snippet_content">
           <div class="snippet_real_content" itemprop="text">
            <div class="bbcodeoutput">
             Ein beeindruckender Kontrast vom leuchtenden Rot zu dem Grau des Bimssteins.
             <br/>
             <br/>
             Das Licht wirkt etwas hart und leider ist das Auge abgeschattet. Nichts desto trotz ein schnes Vogel
             <br/>
             <br/>
             VG Olaf
            </div>
           </div>
          </div>
         </article>
         <article class="snippet snippet-type-com " data-object_id="546942" data-parent_id="545907" id="link_546942" itemscope="" itemtype="http://schema.org/Comment" style="margin-left:1.5em">
          <meta content="https://naturfotografen-forum.de//o545897-Rotkardinal" itemprop="url" style="display:none"/>
          <div class="snippet_head">
           <div class="snippet_title" itemprop="name">
            <a class="uf_micropreview uf_oid546942 uf_draggable_object" data-object_id="546942" data-object_type="com" draggable="true" href="/o546942-Re%3A%20Rotkardinal">
             Re: Rotkardinal
            </a>
           </div>
           <div class="snippet_info">
            <div class="snippet_links">
            </div>
            <div class="snippet_created">
             <div class="snippet_create_date" itemprop="datePublished">
              2011-06-03
             </div>
             <div class="snippet_user_id" itemprop="author">
              <a class="uf_micropreview uf_oid383487 uf_draggable_object" data-object_id="383487" data-object_type="usr" draggable="true" href="/o383487-Kay%20Tetzlaff">
               Kay Tetzlaff
              </a>
             </div>
            </div>
           </div>
          </div>
          <div class="snippet_content">
           <div class="snippet_real_content" itemprop="text">
            <div class="bbcodeoutput">
             Danke Olaf!
            </div>
           </div>
          </div>
         </article>
         <article class="snippet snippet-type-com " data-object_id="546336" data-parent_id="545897" id="link_546336" itemscope="" itemtype="http://schema.org/Comment" style="margin-left:0em">
          <meta content="https://naturfotografen-forum.de//o545897-Rotkardinal" itemprop="url" style="display:none"/>
          <div class="snippet_head">
           <div class="snippet_title" itemprop="name">
            <a class="uf_micropreview uf_oid546336 uf_draggable_object" data-object_id="546336" data-object_type="com" draggable="true" href="/o546336-Re%3A%20Rotkardinal">
             Re: Rotkardinal
            </a>
           </div>
           <div class="snippet_info">
            <div class="snippet_links">
            </div>
            <div class="snippet_created">
             <div class="snippet_create_date" itemprop="datePublished">
              2011-06-01
             </div>
             <div class="snippet_user_id" itemprop="author">
              <a class="uf_micropreview uf_oid266442 uf_draggable_object" data-object_id="266442" data-object_type="usr" draggable="true" href="/o266442-Jalil%20El%20Harrar">
               Jalil El Harrar
              </a>
             </div>
            </div>
           </div>
          </div>
          <div class="snippet_content">
           <div class="snippet_real_content" itemprop="text">
            <div class="bbcodeoutput">
             Hallo Kay,
             <br/>
             <br/>
             ein sehr schner Vogel.
             <br/>
             Die Gestaltung und Schrfe finde ich ok.
             <br/>
             Nur Schade, dass der Kopf im Schatten liegt.
             <br/>
             Ich liebe es, wenn die Augen glnzen.
             <br/>
             <br/>
             Lg Jalil
            </div>
           </div>
          </div>
         </article>
         <article class="snippet snippet-type-com " data-object_id="546941" data-parent_id="546336" id="link_546941" itemscope="" itemtype="http://schema.org/Comment" style="margin-left:1.5em">
          <meta content="https://naturfotografen-forum.de//o545897-Rotkardinal" itemprop="url" style="display:none"/>
          <div class="snippet_head">
           <div class="snippet_title" itemprop="name">
            <a class="uf_micropreview uf_oid546941 uf_draggable_object" data-object_id="546941" data-object_type="com" draggable="true" href="/o546941-Re%3A%20Rotkardinal">
             Re: Rotkardinal
            </a>
           </div>
           <div class="snippet_info">
            <div class="snippet_links">
            </div>
            <div class="snippet_created">
             <div class="snippet_create_date" itemprop="datePublished">
              2011-06-03
             </div>
             <div class="snippet_user_id" itemprop="author">
              <a class="uf_micropreview uf_oid383487 uf_draggable_object" data-object_id="383487" data-object_type="usr" draggable="true" href="/o383487-Kay%20Tetzlaff">
               Kay Tetzlaff
              </a>
             </div>
            </div>
           </div>
          </div>
          <div class="snippet_content">
           <div class="snippet_real_content" itemprop="text">
            <div class="bbcodeoutput">
             Gibt halt Abstriche in der B-Note
             <img alt=":-)" height="20" src="styles/trans.gif" style="background-image:url(cache/images/smileys.spritecache.png); background-position:-0px 0;" title=":-)" width="20"/>
            </div>
           </div>
          </div>
         </article>
         <article class="snippet snippet-type-com " data-object_id="546345" data-parent_id="545897" id="link_546345" itemscope="" itemtype="http://schema.org/Comment" style="margin-left:0em">
          <meta content="https://naturfotografen-forum.de//o545897-Rotkardinal" itemprop="url" style="display:none"/>
          <div class="snippet_head">
           <div class="snippet_title" itemprop="name">
            <a class="uf_micropreview uf_oid546345 uf_draggable_object" data-object_id="546345" data-object_type="com" draggable="true" href="/o546345-Re%3A%20Rotkardinal">
             Re: Rotkardinal
            </a>
           </div>
           <div class="snippet_info">
            <div class="snippet_links">
            </div>
            <div class="snippet_created">
             <div class="snippet_create_date" itemprop="datePublished">
              2011-06-02
             </div>
             <div class="snippet_user_id" itemprop="author">
              <a class="uf_micropreview uf_oid9744 uf_draggable_object" data-object_id="9744" data-object_type="usr" draggable="true" href="/o9744-Christoph%20Keller">
               Christoph Keller
              </a>
             </div>
            </div>
           </div>
          </div>
          <div class="snippet_content">
           <div class="snippet_real_content" itemprop="text">
            <div class="bbcodeoutput">
             Hallo Kay, ein tolles Bild mit faszinierendem Farbkontrast und guter Schrfe.
             <br/>
             <br/>
             Ein leichter Schwenk nach unten wre ein Wunsch, denn dort wirds etwas eng fr den Schatten.
             <br/>
             <br/>
             Ob man die dunkle Gesichtspartie noch etwas aufhellen knnte? Das Licht war halt richtig tropisches Strandlicht...
             <img alt=";-)" height="20" src="styles/trans.gif" style="background-image:url(cache/images/smileys.spritecache.png); background-position:-20px 0;" title=";-)" width="20"/>
             <br/>
             <br/>
             Gefllt!
             <br/>
             <br/>
             Gruss, Toph
            </div>
           </div>
          </div>
         </article>
         <article class="snippet snippet-type-com " data-object_id="546940" data-parent_id="546345" id="link_546940" itemscope="" itemtype="http://schema.org/Comment" style="margin-left:1.5em">
          <meta content="https://naturfotografen-forum.de//o545897-Rotkardinal" itemprop="url" style="display:none"/>
          <div class="snippet_head">
           <div class="snippet_title" itemprop="name">
            <a class="uf_micropreview uf_oid546940 uf_draggable_object" data-object_id="546940" data-object_type="com" draggable="true" href="/o546940-Re%3A%20Rotkardinal">
             Re: Rotkardinal
            </a>
           </div>
           <div class="snippet_info">
            <div class="snippet_links">
            </div>
            <div class="snippet_created">
             <div class="snippet_create_date" itemprop="datePublished">
              2011-06-03
             </div>
             <div class="snippet_user_id" itemprop="author">
              <a class="uf_micropreview uf_oid383487 uf_draggable_object" data-object_id="383487" data-object_type="usr" draggable="true" href="/o383487-Kay%20Tetzlaff">
               Kay Tetzlaff
              </a>
             </div>
            </div>
           </div>
          </div>
          <div class="snippet_content">
           <div class="snippet_real_content" itemprop="text">
            <div class="bbcodeoutput">
             Hallo Toph,
             <br/>
             <br/>
             Danke fuer Deinen Kommentar! Werde das mit dem Aufhellen noch versuchen!
             <br/>
             <br/>
             VG, Kay
            </div>
           </div>
          </div>
         </article>
        </div>
       </article>
       <div style="clear:both">
       </div>
      </div>
     </div>
     <div id="generic_postcontent">
     </div>
    </div>
    <footer id="nf_footer">
     <span class="smalltext">
      Alle Inhalte unterliegen, soweit nicht anders angegeben, dem Copyright.
     </span>
    </footer>
   </div>
  </div>
  <div id="generic_busysymbol" style="display:none">
   <img alt="" height="48" src="/styles/ajax-loader.gif" width="48"/>
  </div>
  <div class="/" id="generic_directory" style="display:none">
  </div>
  <div id="generic_object_id" style="display:none">
   545897
  </div>
  <script src="/cache/bundles/1422131326-ee93c0d65160d738ead062c8ec7980df.js" type="text/javascript">
  </script>
  <script src="/cache/bundles/1422131326-12bb32c77156b986ebae6a6a14af49a8.js" type="text/javascript">
  </script>
  <script type="text/javascript">
   //&lt;![CDATA[

    var user_id=0;
    var generic_object_id=0;

    $(document).ready(function() {
	$("body").on("click",".glossary_link",function(e) {
	    e.preventDefault();
	    var key=$(this).attr('data-glossary-key');
	    if (key) {
		var url='ajax.php?action=glossary_show&amp;word='+key;
		ufmodal_open_url(url);
	    }
	    return false;
	});

	// placeholders:
	// put the label of an input element into the input element, 
	// making sure to remove it if the input thing get's focused.
	// note: _might_ replace it with an solution which puts the 
	// label behind the input element, making the input element
	// transparent as long as needed.
	$('input[placeholder]').each(function() {
	    var t = !!("placeholder" in this);
	    if (!t &amp;&amp; $(this).val()=='') {
		$(this).val($(this).attr('placeholder'));
		$(this).focus(function() {
		    var ph=$(this).attr('placeholder');
		    // remove the text from the input field.
		    if ($(this).val() == ph) {
			$(this).val('');
		    }
		});
		$(this).blur(function() {
		    if ($(this).val() == '')
			$(this).val( $(this).attr('placeholder') );
		});
	    }
	});
	$("form").submit(function() {
	    $('input[placeholder]').each(function() {
		var t = !!("placeholder" in this);
		if (!t) {
		    if ($(this).val() == $(this).attr('placeholder') )
			$(this).val( '' );
		}
	    });
	    return true;
	});

	$('label.placeholder').each(function(x) {
	    var me=$(this).attr('id');
	    var input=$(this).attr('for'); // the input field.
	    if (me &amp;&amp; input) {
		var text=$(this).text();       // the label text
		$("#"+input).val(text);
		$("#"+input).attr('labelid',me);
		$(this).hide();
		$("#"+input).focus(function() {
		    // remove the text from the input field.
		    var labelid=$(this).attr('labelid');
		    if (this.value == $("#"+labelid).text()) {
			this.value='';
		    }
		});
		// if it's empty, insert the placeholder.
		$("#"+input).blur(function() {
		    var labelid=$(this).attr('labelid');
		    if (this.value == '') {
			this.value=$("#"+labelid).text();
		    }
		});
	    }
	});

	/* init generic busy thing */
	var d=$("#generic_directory").html();
	var t="&lt;img src='"+d+"styles/ajax-loader.gif' width='48' height='48'/&gt;";
	var x=jQuery('&lt;div&gt;&lt;/div&gt;')
	    .attr({
		id: 'generic_busywait'
	    }).addClass('')
	    .css({
		'display':'none',
		'margin':'0',
		'padding':'0',
		'padding-top':'30%',
		'position':'fixed',
		'background-color':'transparent',
		'top':'0',
		'left':'0',
		'right':'0',
		'bottom':'0',
		'border':'0',
		'height':'100%',
		'text-align':'center',
		'margin-top':'auto',
		'margin-buttom':'auto',
		'vertical-align':'middle',
		'z-index':'65535'
	    })
	    .html(t);
	    x.appendTo(document.body);

	generic_object_id=$('#generic_object_id').html();
	x=$('#generic_user_id');
	if (x) {
	    user_id=Number(x.html());
	}

	$('#adminfunctionscontent').hide();

	if (user_id&gt;0) {
	    $('#adminfunctionshead a').click(function() {
		if ($('#adminfunctionscontent').is(':hidden')) {
		    $('#adminfunctionscontent').show();
		    $.ajax({
			url: '/ajax.php?action=adminfunctions&amp;object_id='+generic_object_id,
			success: function(fn) {
			    $('#adminfunctionscontent').html(fn),
			    $('#adminfunctionscontent').show()
			},
			type: 'GET'
		    });
		} else {
		    $('#adminfunctionscontent').hide();
		}
		return false;
	    });
	}
    });

      
    jQuery("#mainmenu .menuentry.with_submenu div.mainmenu_header").click(function() {
	var m=$("#mainmenu");
	var a=$(m).attr("data-menu-open");
	if (typeof a != "undefined" &amp;&amp; a) {
	    $("#mainmenu .menuentry").addClass("mayhover");
	    $(m).attr("data-menu-open","");
	    $("#mainmenu .menuentry .submenu").css("left","");
	} else {
	    $("#mainmenu .menuentry.mayhover").removeClass("mayhover");
	    $("#mainmenu .menuentry .submenu").css("left","-9999px");
	    $(m).attr("data-menu-open","1");
	    uf_growl_info("Men bleibt bis zum nchsten Klick offen","brigens fhrt ein Klick auf das Logo zur Startseite.");
	    var s=$(".submenu",$(this).parent());
	    $(s).css("left","0px");
	}
    });

	jQuery(document).ready(function() {
	    var chats=[274939,325823,266971];
	    var nf_chat_info_update_highlight=function(a,mode)
	    {
		$(a).css("color","#000");
		if (mode==1) {
		    // just a user change
		    $(a).css("background-color","#ff0");
		    $(a).css("border-color","#ff0");
		} else {
		    $(a).css("background-color","#f00");
		    $(a).css("border-color","#f00");
		}
	    };
	    if (window.sessionStorage || window.localStorage) {
		for (var i in chats) {
		    var oid=chats[i];
		    var a=$("#nf_chat_info a.o"+oid);
		    var span=$(".nf_chat_info_num",a);
		    var uhash=$(span).attr('data-hash');
		    var curmsg=$(span).attr('data-curmsg');
		    var hl=0;

		    if (window.localStorage) {
			var olduhash=window.localStorage.getItem('nf_chat_info_'+oid+'_olduhash');
			if (olduhash!=uhash) {
			    var t="cur:"+uhash+" old: "+olduhash;
			    hl=hl+1;
			    window.localStorage.setItem('nf_chat_info_'+oid+'_olduhash',uhash);
			}
		    }
		    if (window.localStorage) {
			var oldmsg=window.localStorage.getItem('nf_chat_info_'+oid+'_oldmsg');

			if (oldmsg!=curmsg) {
			    hl=hl+2;
			    window.localStorage.setItem('nf_chat_info_'+oid+'_oldmsg',curmsg);
			}
		    }
		    if (hl&gt;0)
			nf_chat_info_update_highlight(a,hl);
		}
	    }
	});
    
    jQuery(document).ready(function() {
	$("#webtest_button").click(function() {
	    $('body').uf_webtest();
	});
    });

    jQuery(document).ready(function() {
	var timeout_holder=0;
	var norm_timeout=5000;
	var hover_timeout=1000;
	var lastdata=new Array({},{});
	var lastdata_idx=0;
	var did=0;
	var in_header=0;
	var s="Forum fr Naturfotografen";
	var e=$(".nf10_ersatz");
	if (typeof s[0] == "undefined")
	    return;
	var colorcount=3;
	var max_color_offset=4*colorcount;
	var add_string=function(e,s,off, hide, mod)
	{
	    var cnt=0;
	    for (var i=0;i&lt;s.length;i++) {
		var add="";
		if (s[i]!=" ") {
		    add="data-idx='"+off+"'";
		    if (++cnt==mod) {
			off++;
			cnt=0;
		    }
		    if (off==max_color_offset)
			off=0;
		    if (s[i]=='-'){
			off=9;
			cnt=0;
		    }
		}
		if (hide)
		    add=add+" style='display:none'";
		$(e).append("&lt;span class='varcolor' "+add+"&gt;"+s[i]+"&lt;/span&gt;");
	    }
	    return off;
	}
	$(".nf10_10jahre").html("");
	$(".nf10_20032013").html("");
	$(".nf10_fn").append("&lt;span class='nf10_fn_back uf_hidebydefault varcolor' data-idx='8' title='Tauscht die Bilder gegen den vorherigen Satz'&gt;&lt;&gt;&lt;/span&gt;");
	$(".nf10_fn").append("&lt;span class='nf10_fn_stop uf_hidebydefault varcolor' data-idx='9' title='Hlt den Wechsel an'&gt;||&lt;/span&gt;");
	$(".nf10_fn").append("&lt;span class='nf10_fn_start uf_hidebydefault varcolor' data-idx='9' title='Startet den Wechsel wieder'&gt;|&amp;gt&lt;/span&gt;");
	var off=add_string($(".nf10_ersatz"),"Forum fr Naturfotografen",0,1,1);
	off=add_string(".nf10_10jahre","11 Jahre",0,0,2);
	off=add_string(".nf10_20032013","2003 - 2014",6,0,2);

	var nf10_resize=function() {
	    var ll=$(".nf10logolink");
	    var wr=$(".nf10wrapper");
	    var sub=$("#suchblock").width();
	    var avail=$(wr).width()-sub;

	    var need=414+10;
	    var ar=new Array(1,2,0,3);
	    for (var i=0;i&lt;4;i++) {
		j=ar[i];
		if (need+104&lt;avail) {
		    need+=104;
		    $("a.nf10[data-idx="+j+"]").css("display","inline-block");
		} else {
		    $("a.nf10[data-idx="+j+"]").css("display","none");
		}
	    }
	};
	nf10_resize();
	$(window).resize(nf10_resize);

	$("#nf-title-extra").remove();
	$("#nf_header").mouseenter(function() {
	    in_header=1;
	});
	$("#nf_header").mouseleave(function() {
	    in_header=0;
	});
	$("a.nf10 img").attr('width',0);
	$("a.nf10 img").attr('height',0);
	var nf10_update_img=function(loader)
	{
	    var i=loader.className;
	    var ele=$("a.nf10 img")[i];
	    $(ele).css("display","inline");
	    $(ele)[0].width=$(ele).data("want-width");
	    $(ele)[0].height=$(ele).data("want-height");
	    $(ele)[0].title=$(ele).data("want-title");
	    $(ele)[0].src=loader.src;
	    $(ele).show();
	    delete loader;
	};
	$(".nf10_fn_back").click(function() {
	    lastdata_idx++;
	    if (lastdata_idx==2) lastdata_idx=0;
	    nf10_data_handler(lastdata[lastdata_idx]);
	    return false;
	});
	$(".nf10_fn_stop").click(function() {
	    if (timeout_holder)
		clearTimeout(timeout_holder);
	    timeout_holder=0;
	    $(this).addClass("uf_hidebydefault");
	    $(".nf10_fn .nf10_fn_start").removeClass("uf_hidebydefault");
	    return false;
	});
	$(".nf10_fn_start").click(function() {
	    if (!timeout_holder)
		timeout_holder=setTimeout(nf10_do,hover_timeout);
	    $(this).addClass("uf_hidebydefault");
	    $(".nf10_fn .nf10_fn_stop").removeClass("uf_hidebydefault");
	    did=0;
	    return false;
	});
	var nf10_data_handler=function(data) {
	    data=data.pai_data;
	    var imgs=data.images;
	    var as=$("a.nf10");
	    var spanparent=$(".nf10_20032013");
	    var e=$(".nf10_ersatz");
	    for (var i in imgs) {
		var id=imgs[i];
		var a=as[i];
		var img=$("img",a);

		var f=Math.max(id.thumb_y/60, id.thumb_x/100);
		var str = htmlspecialchars(id.name,'ENT_QUOTES');
		if (id.author)
		    str = str + "&lt;br&gt;"+htmlspecialchars(id.author,'ENT_QUOTES');
		str = str + "&lt;br&gt;"+id.date;

		$(img).data("want-width",id.thumb_x/f);
		$(img).data("want-height",id.thumb_y/f);
		$(img).data("want-title",str);
		var loader=new Image;
		loader.className=i;

		loader.onload=function() {
		    nf10_update_img(this);
		};
		loader.src=id.thumb_file;
		if (loader.complete) {
		    nf10_update_img(loader);
		}

		var f2=Math.max(id.media_x/400,id.media_y/300);
		$(img).attr("class","uf_imagetrail");
		$(img).attr("data-image-url",id.media_file);
		$(img).attr("data-image-width",id.media_x/f2);
		$(img).attr("data-image-height",id.media_y/f2);
		$(a).attr("href",id.url);
		for (var ci=1; ci&lt;=colorcount; ci++) {
		    var c=id["color_"+ci];
		    $(".varcolor[data-idx="+(colorcount*i+ ci-1)+"]").css("color",c);
		}
		$("span",e).show();
		$(".nf10_image").hide();
	    }
	    c1=imgs[0].color_1;
	    c2=imgs[1].color_2;
	    c3=imgs[2].color_1;
	    c4=imgs[3].color_2;
	    var s="to right, "+c1+", "+c2+", "+c2+", "+c3+", "+c4+", "+c1+", "+c2+", "+c3+", "+c4;
	    $(".nf10_line").css("background-image","linear-gradient("+s+")");
	};

	var nf10_do=function() {
	    if (document.hidden || document.webkitHidden || document.msHidden) {
		timeout_holder=setTimeout(nf10_do,hover_timeout);
		return;
	    }
	    if (in_header) {
		timeout_holder=setTimeout(nf10_do,hover_timeout);
		return;
	    }
	    var e=$(".nf10_ersatz");
	    if (!$.inviewport(e,{threshold:0})) {
		timeout_holder=setTimeout(nf10_do,hover_timeout);
		return;
	    }
	    $.pai_call("nf_10years_get",null,function(data) {
		lastdata[1]=lastdata[0];
		lastdata[0]=data;
		lastdata_idx=0;
		uf_sessionstorage_set("nf10_cache",JSON.stringify(lastdata));
		if (lastdata[1] &amp;&amp; lastdata[1].pai_data)
		    $(".nf10_fn .nf10_fn_back").removeClass("uf_hidebydefault");
		nf10_data_handler(data);
		$(".nf10_fn .nf10_fn_stop").removeClass("uf_hidebydefault");
		did++;
		if (did==180) norm_timeout=7500;  // nach 180*5 Sekunden = 15 Minuten =&gt;  15 Min.
		if (did==300) norm_timeout=10000; // nach 120*7.5        = 15 Minuten =&gt;  30 Min.
		if (did==480) norm_timeout=15000; // nach 180*10         = 30 Minuten =&gt;  60 Min.
		if (did==720) norm_timeout=60000; // nach 240*15         = 60 Minuten =&gt; 120 Min.
		timeout_holder=setTimeout(nf10_do,norm_timeout);
	    },'GET');
	};
	var old=uf_sessionstorage_get("nf10_cache",null);
	if (old) {
	    lastdata=JSON.parse(old);
	    if (lastdata[0]!==null) {
		nf10_data_handler(lastdata[0]);
		timeout_holder=setTimeout(nf10_do,norm_timeout);
	    } else {
		nf10_do();
	    }
	} else
	    nf10_do();
    });

    $("away #suchblock_input #q").keydown(function(e) {
	console.log(e.keyCode);
	if (e.keyCode==13) {
	    $("#suchblock").submit();
	    return false;
	}
    });
  $(document).ready(function() {
    $("#nf-title-extra").show();
    var w=$(window).width();
    var h=$(window).height();
    $("#nf_size_info").html(w+"x"+h);
    $(window).resize(function() {
	var w=$(window).width();
	var h=$(window).height();
	$("#nf_size_info").html(w+"x"+h);
    });
    var saved=$("#generic_main").css("padding-top");
    $("#nf_header_closer").click(function() {
      if ($("#nf_header_wrapper").hasClass("closed")) {
        cookie_delete('NF_HEADER_CLOSED');
        $("#nf_header_wrapper").removeClass("closed");
        $("#generic_main").css("padding-top",saved);
      } else {
        cookie_set('NF_HEADER_CLOSED',1,0);
        $("#nf_header_wrapper").addClass("closed");
        $("#generic_main").css("padding-top",0);
      }
    });
    if (0 &amp;&amp; cookie_get('NF_HEADER_CLOSED')) {
	$("#nf_header_closer").click();
    }
  });

    $("#theimage").addClass("visibilitytracked");
    var relname=$("#img_quicknav").data("relname");
    var i;
    i    ="&lt;div id='img_quicknav_right'&gt;";
    i   +="&lt;img id='img_quicknav_right_rel' width='23' height='24' src='images/scroll_da_right.png' alt='' title='Zum nchstlteren Bild ("+relname+")'&gt;";
    i   +="&lt;img id='img_quicknav_right_all' width='23' height='24' src='images/scroll_da_right.png' alt='' title='Zum nchstlteren Bild (ber alles)'&gt;";
    i   +="&lt;/div&gt;";
    $("#img_quicknav").prepend(i);
    i    ="&lt;div id='img_quicknav_left'&gt;";
    i   +="&lt;img id='img_quicknav_left_all' width='23' height='24' src='images/scroll_da_left.png' alt='' title='Zum nchstneueren Bild (ber alles)'&gt;";
    i   +="&lt;img id='img_quicknav_left_rel' width='23' height='24' src='images/scroll_da_left.png' alt='' title='Zum nchstneueren Bild ("+relname+")'&gt;";
    i   +="&lt;/div&gt;";
    $("#img_quicknav").prepend(i);
    var doit=function(relname,dir,rel) {
	var qs=$("#img_quicknav").data("rel_qs");
	var oid=$("#img_quicknav").data("object_id");
	if (qs=='')
	    qs="rel="+rel;
	else
	    qs+="&amp;rel="+rel;
	$.pai_call("img_quicknav&amp;"+qs, {
		dir:dir,
		object_id:oid
	    },function(d) {
		var url=d.pai_data.url;
		if (url) {
		    url=url+"#img_quicknav";
		    window.location=url;
		}
		else
		    uf_growl_info(d.pai_message);
	    });
    };
    $("#img_quicknav_left_rel").click(function() {
	var rel=$("#img_quicknav").data("rel");
	doit(relname,-1,rel);
	return false;
    });
    $("#img_quicknav_left_all").click(function() {
	doit(0,-1,0);
	return false;
    });
    $("#img_quicknav_right_rel").click(function() {
	var rel=$("#img_quicknav").data("rel");
	doit(relname,+1,rel);
	return false;
    });
    $("#img_quicknav_right_all").click(function() {
	doit(0,+1,0);
	return false;
    });

    jQuery(document).ready(function() {
	$(".star").click(function() {
	    if ($(this).hasClass("disabled")) {
		uf_growl_info($(this).attr('title'));
		return;
	    }
	    $(".star").removeClass("current");
	    $(this).addClass("current");
	    var oid=$("#img_imageblock").attr('data-object_id');
	    var v=$(this).attr('data-value');
	    jQuery.pai_call("img_top_vote_save",{
		    form_object_id:oid,
		    form_value:v
		},function(data) {
		    uf_growl_info("Stimme gespeichert");
		    $("#starinfo").remove();
		    if (data.pai_data)
			$("#img_subimagebuttons").after("&lt;p id='starinfo'&gt;"+data.pai_data+"&lt;/p&gt;");
		},"POST",{
		    async:true
		}
	    );
	});
    });

    jQuery(document).ready(function() {
	$("body").data("img_splugin_blackwhite-state",0);
	$("#img_imageblock").addClass('img_splugin_blackwhite'); // hack for splugin_fullscreen
	var whites=[];
	whites=$(".img_splugin_blackwhite");
	if (whites.length==1) {
	    /* if there are no explicit elements.img_splugin_blackwhite given, try to find everything intransparent. */
	    $("#theimage").parents().each(function() {
		var x=$(this).css("background-color");
		var a=new RGBColor(x).a;
		if (a!=0) {
		    whites[whites.length++]=this;
		}
	    });
	}
	$(whites).each(function() {
	    var x=$(this).css("background-color");
	    var a=new RGBColor(x).a;
	    if (!a)
		$(this).data('img_splugin_blackwhite_original_color','');
	    else
		$(this).data('img_splugin_blackwhite_original_color',$(this).css("background-color"));
	});


	$(".blackwhite_trigger").click(function() {
	    var ele=this;
	    var state=$("body").data("img_splugin_blackwhite-state");
	    var color1=$(this).data("color1");
	    var color2=$(this).data("color2");
	    var color3=$(this).data("color3");

	    state++;
	    if (state==3 &amp;&amp; color1=="") state++;
	    if (state==4 &amp;&amp; color2=="") state++;
	    if (state==5 &amp;&amp; color3=="") state++;
	    if (state==6) state=0;

	    $("body").data("img_splugin_blackwhite-state",state);

	    if (state==0) {
		$(whites).each(function() {
		    $(this).css("background-color",$(this).data("img_splugin_blackwhite_original_color"));
		});
		$(".img_splugin_blackwhite_autohidden").removeClass("img_splugin_blackwhite_autohidden").css("visibility","visible");
		$(".img_splugin_backwhite_do_not_autohide").removeClass("img_splugin_backwhite_do_not_autohide");
	    } else {
		var ac="";
		var rc="";
		var bc="";
		switch(state) {
		case 1: bc="#000"; break;
		case 2: bc="#fff"; break;
		case 3: bc=color1; break;
		case 4: bc=color2; break;
		case 5: bc=color3; break;
		}
		if (bc) $(whites).each(function() {
		    $(this).css("background-color",bc);
		});

		$("#theimage, #thevideo").parents().each(function() {
		    $(this).addClass('img_splugin_backwhite_do_not_autohide',1);
		});
		$(".context-menu-list, .context-menu-item, .context-menu-item span").each(function() {
		    $(this).addClass('img_splugin_backwhite_do_not_autohide',1);
		});
		$(".blackwhite_click").parents().each(function() {
		    $(this).addClass('img_splugin_backwhite_do_not_autohide',1);
		});
		$("#theimage, #thevideo").addClass('img_splugin_backwhite_do_not_autohide',1);

		$(".blackwhite_trigger, .blackwhite_button span").addClass('img_splugin_backwhite_do_not_autohide',1);
		$(".blackwhite_trigger, .blackwhite_button span").parents().each(function() {
		    $(this).addClass('img_splugin_backwhite_do_not_autohide',1);
		});
		$("*","body").each(function() {
		    if ($(this).hasClass("img_splugin_backwhite_do_not_autohide")) return;
		    if ($(this).is(":hidden")) return;
		    if (this.id!='mixpanel') {
			$(this).addClass("img_splugin_blackwhite_autohidden");
		    }
		    $(this).css("visibility","hidden");
		});
	    }
	    return false;
	});

	$(".blackwhite_trigger").removeClass("uf_hidebydefault");
    });

    if (window.fullScreenApi &amp;&amp; window.fullScreenApi.supportsFullScreen) {
	$(".fullscreen_trigger").removeClass("uf_hidebydefault");
	$(".fullscreen_trigger").click(function() {
	    jQuery("#imageblock").css("-webkit-transform","");
	    jQuery("#imageblock").css("-moz-transform","");
	    jQuery("#imageblock").css("-ms-transform","");
	    jQuery("#imageblock").css("-o-transform","");
	    jQuery("#imageblock").css("-transform","");
	    var was=window.fullScreenApi.isFullScreen();
	    if (was) {
		fullScreenApi.cancelFullScreen();
		return false;
	    }
	    $("#img_imageblock").requestFullScreen();
	    var is=window.fullScreenApi.isFullScreen();
	    if (!is) {
		var m1="Fehlgeschlagen";
		var m2="";
		if (jQuery.browser.mozilla &amp;&amp; jQuery.browser.version[0]=='9') {
		    m2="Fr diese Funktion mu in Firefox 9 in about:config 'full-screen-api.enabled' auf true sein!";
		    uf_growl_warning(m1,m2);
	       } 
	    }
	    return false;
	});
    } else {
	$(".fullscreen_trigger").remove();
    }

    var uf_img_theimage_scaler=function(i) {
	var ow=$(i).attr('data-original-width');
	var oh=$(i).attr('data-original-height');
	var sf=$(i).attr('data-scalefactor');
	$(i).css("width",(ow*sf)+"px");
	$(i).css("height",(oh*sf)+"px");
	$(".theimage-mirror").css("width",(ow*sf)+"px");
	$(".theimage-mirror").css("height",(oh*sf)+"px");
	var r=$("#resizer");
	if (sf&lt;1) {
	    $("a.resizer_trigger").text($(r).attr('data-uptext'));
	    $(".resizer_trigger").attr("label",$(r).attr('data-uptext'));
	} else {
	    $("a.resizer_trigger").text($(r).attr('data-downtext'));
	    $(".resizer_trigger").attr("label",$(r).attr('data-downtext'));
	}
	//console.log("UITS",ow,oh,sf,ow*sf,oh*sf);
    };
    jQuery(document).ready(function() {
	var i=$("#theimage");

	$(".resizer_trigger").click(function() {
	    var i=$("#theimage");
	    var ow=$(i).attr('data-original-width');
	    if (typeof ow == 'undefined') {
		$(i).attr('data-original-width',$(i).width());
		$(i).attr('data-original-height',$(i).height());
	    }

	    var w=$(i).width();
	    var h=$(i).height();
	    var spacew=$("#img_subimagebuttons").width();
	    var spaceh=$(window).height();
	    var flag=$(i).attr('data-scalefactor');
	    if (typeof flag == 'undefined') {
		flag=1;
	    }
	    if (flag &amp;&amp; Math.abs(flag-1)&gt;=0.2) {
		$(i).attr('data-scalefactor',1);
		uf_img_theimage_scaler(i);
		$("a.resizer_trigger").text($(r).attr('data-downtext'));
		$(".resizer_trigger").attr("label",$(r).attr('data-downtext'));
		var off=$(i).offset();
		window.scrollTo(off.left,off.top);
	    } else {
		$(i).removeAttr("width");
		$(i).removeAttr("height");
		var y=spaceh-40; /* buttons */
		$("a.resizer_trigger").text($(r).attr('data-uptext'));
		$(".resizer_trigger").attr("label",$(r).attr('data-uptext'));
		var scalefactor=(spacew+0.0)/w;
		var t=y/h;
		if (t&lt;scalefactor)
		    scalefactor=t;
		$(i).attr('data-scalefactor',scalefactor);
		uf_img_theimage_scaler(i);
		var off=$(i).offset();
		window.scrollTo(off.left,off.top);
	    }
	    return false;
	});

	var spacew=$("#img_subimagebuttons").width();
	var spaceh=$(window).height();
	var i=$("#theimage");
	var w=$(i).width();
	var h=$(i).height();
	if (w&gt;spacew || h&gt;spaceh) {
	    var r=$("#resizer");
	    $(".resizer_trigger").removeClass("uf_hidebydefault");
	    $("a.resizer_trigger").text($(r).attr('data-downtext'));
	    if (window.uf &amp;&amp; window.uf.img_resizer_auto) {
		$("a.resizer_trigger").click();
	    }
	}
    });

    jQuery(document).ready(function() {
	var i=$("#theimage");
	var ow=$(i).attr('data-original-width');
	if (typeof ow == 'undefined') {
	    $(i).attr('data-original-width',$(i).width());
	    $(i).attr('data-original-height',$(i).height());
	}
	var ow=$(i).attr('data-original-width');
	var oh=$(i).attr('data-original-height');
	var zoom_active=0;
	var changer=function(factor) {
		var scalefactor=$(i).attr('data-scalefactor');
		if (!scalefactor) scalefactor=1;
		scalefactor=scalefactor*factor;
		if (factor==0)
		    scalefactor=1;
		if (scalefactor&gt;=1*0.8 &amp;&amp; scalefactor&lt;=1*1.2) scalefactor=1;
		if (scalefactor&gt;10) scalefactor=10;
		if (scalefactor&lt;0.1) scalefactor=0.1;
		$(i).attr('data-scalefactor',scalefactor);
		uf_img_theimage_scaler(i);
		return false;
	};
	$(".zoom_trigger_larger").click(function(event) { return changer(4/3.0); });
	$(".zoom_trigger_smaller").click(function(event) { return changer(3/4.0); });
	$(".zoom_trigger_normal").click(function(event) { return changer(0); });
	$(".zoom_trigger").click(function(event) {
	    var i=$("#theimage");
	    var spacew=$("#img_subimagebuttons").width();
	    var spaceh=$(window).height();

	    if (zoom_active) {
		$(i).unbind('mousewheel');
		$(i).unbind('mousemove');
		uf_img_theimage_scaler(i);
		zoom_active=0;
		return;
	    };
	    zoom_active=1;
	    $(i).bind('mousewheel', function(event, delta, deltaX, deltaY) {
		if (delta&lt;0) {
		    changer(3/4.0);
		} else {
		    changer(4/3.0);
		}
		return false;
	    });
	    return false;
	});

	var spacew=$("#img_subimagebuttons").width();
	var spaceh=$(window).height();
	var i=$("#theimage");
	if (ow&gt;spacew || oh&gt;spaceh) {
	    var r=$("#zoomer");
	    $(".zoom_trigger").removeClass("uf_hidebydefault");
	    $(".zoom_trigger_larger").removeClass("uf_hidebydefault");
	    $(".zoom_trigger_smaller").removeClass("uf_hidebydefault");
	}
    });

    jQuery(document).ready(function() {
	$(".rotator_trigger").click(function() {
	    var i=$("#theimage");
	    var b=i.parent();
	    var r=i.attr('data-rotated');
	    if (!r) {
		r=0;
	    }
	    r=parseInt(r)+90;
	    if (r==360)
		r=0;
	    var w=i.width();
	    var h=i.height();
	    var s="";
	    s="rotate("+r+"deg)";
	    if (r==90 || r==270) {
		var d;
		d=w-h;
		d=Math.round(d/2.0);
		if (r==270)
		    d=-d;
		s+=" translate("+d+"px, 0px)";
		b.css("height",w+"px");
		b.css("display","block");
	    } else {
		b.css("height","auto");
	    }

	    i.attr('data-rotated',r);
	    // b.css('height',"1500px");
	    i.css("-o-transform",s);
	    i.css("-ms-transform",s);
	    i.css("-moz-transform",s);
	    i.css("-webkit-transform",s);
	    i.css("transform",s);
	    return false;
	});
    });

if (window.DeviceOrientationEvent) {
    var last=0;
    var cur_rot="";
    var state=1;
    if (window.localStorage) {
	state=window.localStorage.getItem('img_autorotate_state')
	state=!!state;
    }

    $(".autorotate_trigger").click(function() {
	state=!state;
	if (window.localStorage)
	    window.localStorage.setItem('img_autorotate_state',state);
    });
    window.addEventListener('deviceorientation', function(eventData) {
	var tiltLR = eventData.gamma;
	var tiltFB = eventData.beta;
	if (!state)
	    return;
	var to="-";
	if (tiltLR&lt;-60 &amp;&amp; tiltLR&gt;-120) {
	    to="90deg";
	} else if (tiltLR&gt;60 &amp;&amp; tiltLR&lt;120) {
	    to="-90deg";
	} else if (tiltLR&gt;-30 &amp;&amp; tiltLR&lt;30) {
	    if (tiltFB&gt;-120 || tiltFB&gt;120) {
		to="";
	    } else {
		to="180deg";
	    }
	}
	if (to!='-' &amp;&amp; to!=cur_rot) {
	    cur_rot=to;
	    if (to&gt;'')
		to="rotate("+to+")";
	    jQuery("#img_imageblock").css("-webkit-transform",to);
	    jQuery("#img_imageblock").css("-moz-transform",to);
	    jQuery("#img_imageblock").css("-ms-transform",to);
	    jQuery("#img_imageblock").css("-o-transform",to);
	    jQuery("#img_imageblock").css("transform",to);
	}
    });
} else {
    $(".autorotate_trigger").remove();
}

    var ss_2012_start;
    jQuery(document).ready(function() {
	var ss_2012_last_change=0;
	var ss_2012_current_pause=0;
	var ss_2012_start_time=0;
	var ss_2012_debugging=1;
	var ss_2012_first_loaded=0;

	var ss_2012_interval_active=false;
	var ss_2012_interval_flag_re=0;
	var ss_2012_interval=0;
	var ss_2012_loader_img=$("&lt;img alt=''&gt;");
	var ss_2012_scroll={
	    top:0,
	    left:0
	}

	var ss_2012_debug=function(text)
	{
	    if (!ss_2012_debugging) return;
	    uf_debug.log(text);
	};
	ss_2012_debug("ss2012 loaded/readying");

	/* for very short messages, like 'image not loaded yet', 'lightshow started / stopped'. */
	var ss_2012_quickinfo_text="";

	var ss_2012_quickinfo=function(c) {
	    ss_2012_quickinfo_text=c;
	    $("#ss_2012_quickinfo").html(c).stop(true,true);
	    $("#ss_2012_quickinfo").fadeTo(250,0.75).fadeOut(1750);
	};
	var ss_2012_quickinfo_cancel=function(c) {
	    if (ss_2012_quickinfo_text!=c)
		return;
	    ss_2012_quickinfo_text="";
	    $("#ss_2012_quickinfo").stop(true,true);
	    $("#ss_2012_quickinfo").fadeOut(1);
	};

	var ss_2012_interval_handler=function() {
	    var now=(new Date()).getTime();

	    if (ss_2012_interval_active==0) return;

	    if (ss_2012_first_loaded) {
		if (ss_2012_current_pause==0) return;
		var x=$("#ss_2012_thumbs_wrapper").hasClass("enabled");
		if (x) return;
	    }

	    if (now&gt;ss_2012_current_pause*1000+ss_2012_last_change) {
		/* try to jump more than one image, if some image hangs */
		var x=(now-ss_2012_last_change)/(0.0+ss_2012_current_pause);
		x=Math.floor(x/1000);
		ss_2012_move(x);
		return;
	    }
	};
	var ss_2012_end_interval=function() {
	    if (ss_2012_interval) clearInterval(ss_2012_interval);
	    ss_2012_interval=false;
	};
	var ss_2012_modal=function(html) {
	    $("#ss_2012_popup_bg").show();
	    var p=$("#ss_2012_popup");
	    var bgh=$("#ss_2012_popup_bg").height();
	    p.html(html);
	    var h=p.height();
	    $(p).css("margin-top",((bgh-h)/2)+"px");
	};
	var ss_2012_title=function(image,maylong)
	{
		$("#ss_2012_title").html(s);
		var oid=image.object_id;
		var ei=$("#ss_2012_bg").data("image_extra_info");
		var s="";
		if (ei) {
		    s+=ei[oid];
		}
		if (maylong &amp;&amp; image.long_description) {
		    s+=image.long_description;
		} else {
		    s+=image.title;
		    if (image.user_name)
			s=s+" (&copy; "+image.user_name+")";
		}
		$("#ss_2012_title").html(s);
	};
	var ss_2012_color_translate=function(image,code) {
	    if (!code)
		return "#000";
	    if (code=='w') {
		return "#fff";
	    } else if (code=='b') {
		return "#000";
	    }
	    return image["color"+code];
	};
	var ss_2012_colorsetter=function(image) {
	    var bgcolor=$("#ss_2012_bg").data("bgcolor");
	    var frcolor=$("#ss_2012_bg").data("frcolor");

	    c1=ss_2012_color_translate(image,bgcolor);
	    c2=ss_2012_color_translate(image,frcolor);
	    if (c1) $("#ss_2012_bg").css("background-color",c1);
	    else    $("#ss_2012_bg").css("background-color","black");
	    if (c2) $("#ss_2012_img").css("border","10px solid "+c2);
	    else    $("#ss_2012_img").css("border-width","0px");
	};

	var ss_2012_init=function() {
	    var main=$("#ss_2012_bg");
	    var p=$(main).parent("body");
	    $("#ss_2012_popup").html();
	    $("#ss_2012_popup_bg").hide();
	    var bg=main.data("bgcolor");
	    var fr=main.data("frcolor");
	    if (bg==null || bg==undefined) {
		if (window.localStorage) {
		    bg=window.localStorage.getItem('ss_2012_bgcolor');
		    fr=window.localStorage.getItem('ss_2012_frcolor');
		}
		if (!bg) {
		    bg="1";
		    fr="2";
		}
		main.data("bgcolor",bg);
		main.data("frcolor",fr);
	    }
	    if (!p.length) {
		$("#ss_2012_bg").detach();
		$("body").prepend(main);
		$("#ss_2012_bg").addClass("ss_2012_keep");
		$("#ss_2012_popup").click(function() { return false; });
		$("#ss_2012_popup_bg").click(function() {
		    $("#ss_2012_popup").html("");
		    $(this).hide();
		});
		$("#ss_2012_colorselector span").click(function() {
		    var idx=parseInt($("#ss_2012_bg").data("idx"));
		    var images=$("#ss_2012_bg").data("images");
		    var data=images[idx];
		    var h=$("#ss_2012_popup_colorselect_template").html();
		    h="&lt;div id='ss_2012_colorselector_popup'&gt;"+h+"&lt;/div&gt;";
		    ss_2012_modal(h,'colorselector');
		    var bg=$("#ss_2012_bg").data("bgcolor");
		    var fr=$("#ss_2012_bg").data("frcolor");
		    var p=$("#ss_2012_colorselector_popup");
		    $("tr.color1 .cs span",p).css("background-color",data.color1);
		    $("tr.color2 .cs span",p).css("background-color",data.color2);
		    $("tr.color3 .cs span",p).css("background-color",data.color3);
		    $("tr.color1c .cs span",p).css("background-color",data.color1c);
		    $("tr.color2c .cs span",p).css("background-color",data.color2c);
		    $("tr.color3c .cs span",p).css("background-color",data.color3c);

		    $(".ss_2012_colorselect_table .cs.current").removeClass("current");
		    $(".ss_2012_colorselect_table [data-colormode="+bg+"] .cs.bg").addClass("current");
		    $(".ss_2012_colorselect_table [data-colormode="+fr+"] .cs.fr").addClass("current");

		    $("#ss_2012_colorselector_popup .cs").click(function() {
			var is_bg=$(this).hasClass("bg");
			var c=$(this).parent().parent().data('colormode');
			if (is_bg) {
			    $(".ss_2012_colorselect_table .cs.bg.current").removeClass("current");
			    $(".ss_2012_colorselect_table [data-colormode="+c+"] .cs.bg").addClass("current");
			    c=ss_2012_color_translate(data,c);
			    $("#ss_2012_bg").css("background-color",c);
			    return;
			} 
			$("#ss_2012_img").css("border-color",c);
			$(".ss_2012_colorselect_table .cs.fr.current").removeClass("current");
			$(".ss_2012_colorselect_table [data-colormode="+c+"] .cs.fr").addClass("current");
			c=ss_2012_color_translate(data,c);
			$("#ss_2012_img").css("border-color",c);

			return;
		    });
		    $(".ss_2012_color_close").click(function() {
			$("#ss_2012_popup_bg").click();
			return false;
		    });
		    $(".ss_2012_colormemory").click(function() {
			var bg=$("#ss_2012_colorselector_popup .cs.bg.current").parent().parent().data('colormode');
			var fr=$("#ss_2012_colorselector_popup .cs.fr.current").parent().parent().data('colormode');
			$("#ss_2012_bg").data("bgcolor",bg);
			$("#ss_2012_bg").data("frcolor",fr);
			if (window.localStorage) {
			    window.localStorage.setItem('ss_2012_bgcolor',bg);
			    window.localStorage.setItem('ss_2012_frcolor',fr);
			}
			$("#ss_2012_popup_bg").click();
			return false;
		    });
		});
		$("#ss_2012_activator").click(function() {
		    ss_2012_start();
		    return false;
		});
		$("#ss_2012_iframe_closer").click(function() {
		    $("#ss_2012_iframe").remove();
		    $("#ss_2012_iframe_closer").hide();
		    if (window.uf.visibility) {
			ss_2012_debug("unpausing ss2012 vis tracking on ");
			window.uf.visibility.unpause("#ss_2012_img");
		    }
		    return false;
		});
		$("#ss_2012_deactivator").click(function() {
		    ss_2012_end_interval();
		    ss_2012_end();
		    return false;
		});
		$("#ss_2012_frame_it").click(function() {
		    ss_2012_end_interval();
		    var idx=parseInt($("#ss_2012_bg").data("idx"));
		    var images=$("#ss_2012_bg").data("images");
		    $("#ss_2012_iframe").remove();
		    $("#ss_2012_iframe_closer").show();
		    // ss_2012_end();
		    var wh=$(window).height();
		    var ww=$(window).width();
		    wh=wh-20;
		    var t="&lt;iframe id='ss_2012_iframe' width='"+ww+"' height='"+wh+"' src='"+images[idx].url+"'&gt;&lt;/iframe&gt;";
		    $("#ss_2012_bg").append(t);
		    if (window.uf.visibility) {
			ss_2012_debug("pause ss2012 vis tracking");
			window.uf.visibility.pause("#ss_2012_img");
		    }
		    return false;
		});
		$("#ss_2012_startstop").click(function() {
		    ss_2012_interval_active=!ss_2012_interval_active;
		    if (ss_2012_interval_active) {
			$(this).html("Stop");
			$("#ss_2012_continue").click();
		    } else
			$(this).html("Start");
		    return false;
		});
		$("#ss_2012_first").click(function() {
		    $("#ss_2012_bg").data("idx",-1);
		    ss_2012_move(1,1);
		    return false;
		});
		$("#ss_2012_last").click(function() {
		    $("#ss_2012_bg").data("idx",0);
		    ss_2012_move(-1,1);
		    return false;
		});
		$("#ss_2012_prev").click(function() {
		    ss_2012_move(-1,1);
		    return false;
		});
		$("#ss_2012_next").click(function() {
		    ss_2012_move(1,1);
		    return false;
		});
		if (fullScreenApi.supportsFullScreen) {
		    $(document).on("fullscreenchange "+fullScreenApi.prefix+"fullscreenchange", function(){
			if (!fullScreenApi.isFullScreen()) {
			    $("#ss_2012_deactivator").click();
			}
		    });
		}
		$(window).resize(function() {
		    var ww=$(window).width();
		    var wh=$(window).height();
		    ss_2012_debug("resize event: "+ww+"x"+wh);
		    ss_2012_set_scale_class();
		});
		$("input[type=radio]","#ss_2012_scale_wrapper").change(function() {
		    var val=$("input[type=radio]:checked",$("#ss_2012_scale_wrapper")).val();
		    uf_localstorage_set("ss_2012_scaleval",val);
		    ss_2012_set_scale_class();
		});

		$("#ss_2012_pauseval").change(function() {
		    var ch=$(this).val();
		    ss_2012_current_pause=parseInt(ch);
		    $("#ss_2012_showpauseval").html(ch);
		    uf_localstorage_set("ss_2012_pauseval",ss_2012_current_pause);
		    ss_2012_quickinfo(ss_2012_current_pause+" Sekunden");
		});
		$("#ss_2012_thumbs").on("click",".ss_2012_thumb",function() {
		    var idx=$(this).attr("data-idx");
		    $("#ss_2012_bg").data("idx",idx);
		    ss_2012_move(0,1);
		});
		$("#ss_2012_show_help").click(function() {
		    var old=$("#ss_2012_help").css("visibility");
		    if ("visible" == old) {
			$("#ss_2012_help").css("visibility","hidden");
		    } else {
			$("#ss_2012_help").css("visibility","visible");
		    }
		    return false;
		});
		$("#ss_2012_show_info").click(function() {
		    var old=$("#ss_2012_title").css("visibility");
		    if ("visible" == old) {
			$("#ss_2012_title").css("visibility","hidden");
		    } else {
			$("#ss_2012_title").css("visibility","visible");
			var oid=$("#ss_2012_bg").data('current_image_id');
			if (oid) {
			    var images=$("#ss_2012_bg").data("images");
			    var nolong=$("#ss_2012_bg").data("no_long_description");
			    var doit=0;
			    for (var i=0;i&lt;images.length;i++) {
				if (images[i].object_id==oid) {
				    if (images[i].long_description) {
					ss_2012_title(images[i],!nolong);
				    } else {
					doit=1;
				    }
				    break;
				}
			    }
			    if (doit) {
				$.pai_call("object_get",{object_id:oid},function(d) {
				    // careful: the image might have changed...
				    var images=$("#ss_2012_bg").data("images");
				    var t=d.pai_data.name.value;
				    var a=d.pai_data.user_id.formatted_value;
				    var c=d.pai_data.description.formatted_value;
				    var ld=t+"&lt;br&gt;"+a+"&lt;br&gt;&lt;br&gt;"+c;
				    for (var i=0;i&lt;images.length;i++) {
					if (images[i].object_id==d.pai_data.object_id.value) {
					    images[i].long_description=ld;
					    $("#ss_2012_bg").data(images);
					    var oid=$("#ss_2012_bg").data('current_image_id');
					    if (oid==d.pai_data.object_id.value)
						ss_2012_title(images[i],!nolong);
					}
				    }
				});
			    }
			}
		    }
		    return false;
		});
		$(".ss_2012_help_closer").click(function() {
		    $("#ss_2012_help").hide();
		    return false;
		});
		$("#ss_2012_standalone").click(function() {
		    var oid=$("#ss_2012_bg").data('parent_id');
		    if (oid=='')
			oid=$('#generic_object_id').text();
		    var icsv=$("#ss_2012_bg").data('image_ids');
		    if (icsv=='') {
			var sel=$("#ss_2012_bg").data('image_selector');
			var attr=$("#ss_2012_bg").data('image_id_attribute');
			if (sel!='' &amp;&amp; attr!='') {
			    icsv="";
			    $(sel).each(function() {
				var x=$(this).attr(attr);
				if (icsv)
				    icsv=icsv+",";
				icsv=icsv+x;
			    });
			}
		    }
		    if (icsv!='')
			u="index.php?page=ss_standalone&amp;ids="+icsv;
		    else
			u="index.php?page=ss_standalone&amp;object_id="+oid;
		    window.location=u;
		    return false;
		});
		/* hide the mouse */
		$("#ss_2012_bg").mousemove(function(e) {
		    if (!("flag" in this)) {
			this.flag=0;
			this.x=-1;
			this.y=-1;
		    }
		    if (e.pageX==this.x &amp;&amp; e.pageY==this.y)
			return;
		    this.x=e.pageX;
		    this.y=e.pageY;
		    $("#ss_2012_bg").removeClass("hidemouse");
		    if (this.flag) clearTimeout(this.flag);
		    this.flag=setTimeout(function() {
			$("#ss_2012_bg").addClass("hidemouse");
		    },5*1000);
		});
		$(document).keydown(function(e) {
		    if (e.target.nodeName=='INPUT')
			return;
		    if (e.target.nodeName=='TEXTAREA')
			return;
		    if ($("#ss_2012_popup_bg").is(":visible")) {
			$("#ss_2012_popup_bg").click();
		    }

		    var key = e.which;
		    switch(key) {
		    case 16: /* shift */
			e.preventDefault();
			$("#ss_2012_img_inner_wrapper").click();
			break;
		    case 32: /* spc */
			e.preventDefault();
			$("#ss_2012_startstop").click();
			ss_2012_quickinfo(
			    ss_2012_interval_active ? "Diashow luft" : "Diashow ist pausiert"
			);
			break;
		    case 38: /* down */
			ss_2012_current_pause++;
			$("#ss_2012_pauseval").val(ss_2012_current_pause).change();
			break;
		    case 40: /* down */
			if (ss_2012_current_pause&gt;1) {
			    ss_2012_current_pause--;
			    $("#ss_2012_pauseval").val(ss_2012_current_pause).change();
			}
			break;
		    case 39: /* right */
			e.preventDefault();
			$("#ss_2012_next").click();
			break;
		    case 37: /* left */
			e.preventDefault();
			$("#ss_2012_prev").click();
			break;
		    case 35: /* end */
			e.preventDefault();
			$("#ss_2012_last").click();
			break;
		    case 36: /* end */
			e.preventDefault();
			$("#ss_2012_first").click();
			break;
		    case 9: /* tab */
			e.preventDefault();
			var val=$("input[type=radio]:checked",$("#ss_2012_scale_wrapper")).val();
			var str;
			if (val=='all') {
			    $("#ss_2012_scale_smaller").prop("checked",true);
			    str="Nur kleiner";
			} else if (val=='smaller') {
			    $("#ss_2012_scale_2x").prop("checked",true);
			    str="Maximal auf Faktor 2";
			} else if (val=='2x') {
			    $("#ss_2012_scale_never").prop("checked",true);
			    str="Nie";
			} else {
			    $("#ss_2012_scale_all").prop("checked",true);
			    str="Immer";
			}
			$("input[type=radio]","#ss_2012_scale_wrapper").change();
			ss_2012_quickinfo("Skalierung: "+str);
			break;
		    case 190: /* punkt */
		    case 73: /* i */
			e.preventDefault();
			$("#ss_2012_show_info").click();
			break;
		    case 27: /* escape */
		    case 189: /* minus */
		    case 109: /* Keypad minus */
			e.preventDefault();
			ss_2012_end();
			break;
		    case 191: /* ? */
		    case 72: /* h */
			e.preventDefault();
			$("#ss_2012_show_help").click();
			break;
		    case 66: /* b */
			e.preventDefault();
			$("#ss_2012_frame_it").click();
			break;
		    default:
			ss_2012_quickinfo("Hilfe: h. Das war Keycode "+key);
			break;
		    }
		});
		/* swipe / touch */
		var helpertoggle=function() {
		    $(".default-disabled").toggleClass("enabled");
		};

		$("#ss_2012_continue").click(function(e) {
			helpertoggle();
			return false;
		});
		$("#ss_2012_img_inner_wrapper").click(function(e) {
		    var target=e.target;
		    var id=target.id;
		    ss_2012_debug("inner_wrap,clck");
		    if (id=='ss_2012_img_inner_wrapper') {
			helpertoggle();
			return false;
		    }
		    /*
			This would be right for reconq, where touchSwipe doesn't work.
			It's dead wrong anywhere else.

			if (id=='ss_2012_img' &amp;&amp; 0) {
			    helpertoggle();
			    return true;
			}
		    */
		    return true;
		});
		$("#ss_2012_img").swipe({
		    click: function(e) {
			uf_debug.log("swipe,click");
			helpertoggle();
		    },
		    swipeLeft: function() {
			uf_debug.log("swipe,left");
			$("#ss_2012_next").click();
		    },
		    swipeRight: function() {
			uf_debug.log("swipe,right");
			$("#ss_2012_prev").click();
		    }
		});
		$("#ss_2012_thumbs").swipe({
		    swipeLeft: function() {
			$("#ss_2012_thumbs_nextpage").click();
		    },
		    swipeRight: function() {
			$("#ss_2012_thumbs_prevpage").click();
		    }
		});
	    }
	};
	var ss_2012_set_scale_class=function(event,idx,images) {
	    if (typeof idx == 'undefined') {
		images=$("#ss_2012_bg").data("images");
		idx=parseInt($("#ss_2012_bg").data("idx"));
	    }
	    if (typeof idx == 'undefined')
		return;
	    if (typeof images == 'undefined')
		return;
	    if (idx==-1)
		return;
	    var mode=$("input[type=radio]:checked",$("#ss_2012_scale_wrapper")).val();

	    var src=images[idx].image;
	    var iw=parseInt(images[idx].image_width);
	    var ih=parseInt(images[idx].image_height);
	    var ww=$(window).width();
	    var wh=$(window).height();
	    var x=$("#ss_2012_img").removeClass("ss_2012_no_borders");
	    var bl=parseFloat(x.css("border-left-width"));
	    var br=parseFloat(x.css("border-right-width"));
	    var bt=parseFloat(x.css("border-top-width"));
	    var bb=parseFloat(x.css("border-bottom-width"));
	    if (bl+br+iw&gt;ww || bt+bb+ih&gt;wh) {
		$("#ss_2012_img").addClass("ss_2012_no_borders");
	    }
	    if (mode=='smaller') {
		$("#ss_2012_img").css("max-height",wh+"px");
		$("#ss_2012_img").css("max-width",ww+"px");
		$("#ss_2012_img").css("height","");
		$("#ss_2012_img").css("width","");
		return;
	    }
	    $("#ss_2012_img").css("max-height","");
	    $("#ss_2012_img").css("max-width","");
	    if (mode=='never') {
		$("#ss_2012_img").css("height","");
		$("#ss_2012_img").css("width","");
		return;
	    }
	    if (mode=='2x') {
		var f=ww/iw;
		g=wh/ih;
		if (g&lt;f)
		    f=g;
		if (f&gt;1.4)
		    f=1.4;
		$("#ss_2012_img").css("height",ih*f+"px");
		$("#ss_2012_img").css("width",iw*f+"px");
	    }
	    var f=1.0;
	    f=ww/iw;
	    g=wh/ih;
	    if (g&lt;f)
		f=g;
	    $("#ss_2012_img").css("height",ih*f+"px");
	    $("#ss_2012_img").css("width",iw*f+"px");
	    return;
	};
	ss_2012_start=function(autostart,image_id) {
	    ss_2012_scroll.top=$(window).scrollTop();
	    ss_2012_scroll.left=$(window).scrollLeft();
	    $("#ss_2012_iframe").remove();
	    $("#ss_2012_iframe_closer").hide();
	    $("#ss_2012_popup_bg").hide();
	    $("#ss_2012_popup").html("");
	    var ie=$("#ss_2012_bg").data("image_extra_info");
	    if (ie) {
		$("#ss_2012_title").show();
		$("#ss_2012_title").html("");
	    }

	    ss_2012_start_time=(new Date).getTime();
	    $("#ss_2012_img").attr('src','styles/ajax-loader.gif');

	    ss_2012_first_loaded=0;
	    ss_2012_interval_active=0;
	    ss_2012_last_change=ss_2012_start_time-1000*ss_2012_current_pause;
	    if (typeof autostart == 'undefined') autostart=true;
	    if (typeof image_id == 'undefined')  image_id=0;
	    if (image_id==0) {
		var x=$("#ss_2012_bg").data('element_id');
		if (x)
		    image_id=parseInt(x);
	    }
	    $("#ss_2012_img").hide();
	     $(".default-disabled").removeClass("enabled");

	    ss_2012_end_interval();
	    ss_2012_interval=setInterval(ss_2012_interval_handler,100);

	    if (window.fullScreenApi &amp;&amp; window.fullScreenApi.supportsFullScreen &amp;&amp; 1) {
		var was=window.fullScreenApi.isFullScreen();
		if (!was) {
		    $("#ss_2012_bg").requestFullScreen();
		    $("#ss_2012_bg").data("leave-fullscreen",1);
		}
	    } else
		$("#ss_2012_bg").data("leave-fullscreen",0);
	    // $("body &gt; *").not(".ss_2012_keep").not(":hidden").addClass("ss_2012_hidden").hide();
	    var outer_container="" || "#page-container-outer" || "#page";
	    var x=$(outer_container);
	    if (x.length==0)
		outer_container="#page";
	    $(outer_container).addClass("ss_2012_hidden").hide();
	    $("#ss_2012_bg").addClass("active");

	    var oid=$("#ss_2012_bg").attr('data-parent_id');
	    if (oid=='')
		oid=0;
	    oid=parseInt(oid);
	    if (oid==0)
		oid=$('#generic_object_id').text();
	    if (oid=='')
		oid=0;
	    oid=parseInt(oid);
	    if (oid==0)
		oid=image_id;
	    var action="ss_get_data&amp;object_id="+oid;
	    var adata={};

	    var icsv=$("#ss_2012_bg").data('image_ids');
	    if (icsv=='') {
		var sel=$("#ss_2012_bg").data('image_selector');
		var attr=$("#ss_2012_bg").data('image_id_attribute');
		$(sel).each(function() {
		    var x=$(this).attr(attr);
		    if (icsv)
			icsv=icsv+",";
		    icsv=icsv+x;
		});
	    }
	    if (icsv) {
		action="ss_get_data";
		adata.images=icsv;
	    }

	    $("#ss_2012_waiting_img").show();
	    $.pai_call(action,adata,function(data) {
		$("#ss_2012_waiting_img").hide();
		var images=data.pai_data;
		if (images.length==0) {
		    uf_growl_info("Keine Bilder verfgbar");
		    ss_2012_end();
		    return;
		}
		last=images.length-1;
		$("#ss_2012_bg").data("images",images);
		$("#ss_2012_bg").data("idx",-1);
		if (image_id) {
		    for (var i=0;i&lt;images.length;i++) {
			if (images[i].object_id==image_id) {
			    $("#ss_2012_bg").data("idx",i-1);
			}
		    }

		}
		var count=11;
		if (uf_localstorage_available()) {
		    count=uf_localstorage_get("ss_2012_usageinfo_count",3);
		}
		if (count&gt;0) {
		    if (count&lt;10) {
			count--;
			$("#ss_2012_usageinfo_times").show();
			$("#ss_2012_usageinfo_times_val").html(count);
			uf_localstorage_set("ss_2012_usageinfo_count",count);
		    }
		    $("#ss_2012_usageinfo").show();
		    setTimeout(function() { $("#ss_2012_usageinfo").hide(); },10*1000);
		}
		ss_2012_move(1);
		if (autostart) {
		    ss_2012_interval_active=1;
		    $("#ss_2012_startstop").html("Stop");
		} else {
		    ss_2012_interval_active=0;
		    $("#ss_2012_startstop").html("Start");
		}
	    },"post");
	};
	var ss_2012_end=function() {
	    ss_2012_end_interval();
	    if (window.uf.visibility) {
		window.uf.visibility.end("#ss_2012_img");
		ss_2012_debug("end ss2012 vis tracking");
	    }

	    $("#ss_2012_bg").removeClass("active");
	    var leave=$("#ss_2012_bg").data("leave-fullscreen");
	    if (leave) {
		fullScreenApi.cancelFullScreen();
	    }
	    $(".ss_2012_hidden").removeClass("ss_2012_hidden").show();
	    $("#ss_2012_help").hide();
	    $(window).scrollTop(ss_2012_scroll.top);
	    $(window).scrollLeft(ss_2012_scroll.left);
	    $("#ss_2012_bg").trigger("ss_2012_end");
	};
	ss_2012_init();

	var p=$("#ss_2012_bg").data("default_pause");
	if (!parseInt(p))
	    p=6;
	ss_2012_current_pause=uf_localstorage_get("ss_2012_pauseval",p);
	var current_pause_string=ss_2012_current_pause.toString();
	$("#ss_2012_pauseval").attr('value',current_pause_string);
	$("#ss_2012_showpauseval").html(current_pause_string);

	var scale_val=uf_localstorage_get("ss_2012_scaleval","smaller");
	$("input[type=radio][name=ss_2012_scale][value="+scale_val+"]",$("#ss_2012_scale_wrapper")).prop("checked",true);

	$("#ss_2012_thumbs_nextpage").click(function() {
	    var images=$("#ss_2012_bg").data("images");
	    var idx=parseInt($("#ss_2012_bg").data("idx"));
	    ss_2012_thumbs_display(idx,images,+1);
	});
	$("#ss_2012_thumbs_prevpage").click(function() {
	    var images=$("#ss_2012_bg").data("images");
	    var idx=parseInt($("#ss_2012_bg").data("idx"));
	    ss_2012_thumbs_display(idx,images,-1);
	});
	var ss_2012_thumbs_display=function(idx,images,offset)
	{
	    var w=$(window).width();
	    var n=Math.floor(w/145);
	    var m=Math.floor(n/2);
	    var pages=Math.floor( (images.length+n-1)/n);
	    var page=Math.floor(idx/n);
	    if (offset==0) {
		$("#ss_2012_bg").data("thumbs_offset",offset);
		offset=offset+page;
	    } else {
		var o=$("#ss_2012_bg").data("thumbs_offset");
		offset=o+offset;
	    }
	    if (offset&gt;=pages) offset=0;
	    if (offset&lt;0) offset=pages-1;

	    var first=offset*n;
	    var last=(offset+1)*n-1;
	    if (last&gt;=images.length)
		last=images.length-1;
	    var i;
	    var str="";
	    for (i=first;i&lt;=last;i++) {
		var cl="";
		if (i==idx)
		    cl="current";
		var iid=images[i].object_id;
		var t="&lt;span class='ss_2012_thumb "+cl+"' data-oid='"+iid+"' data-idx='"+i+"'&gt;";
		t=t+"&lt;img alt='' src='"+images[i].thumb+"'";
		t=t+" width='"+images[i].thumb_width+"'";
		t=t+" height='"+images[i].thumb_height+"'";
		t=t+" /&gt;";
		t=t+"&lt;/span&gt;";
		str=str+t;
	    }
	    $("#ss_2012_thumbs").empty();
	    $(str).appendTo("#ss_2012_thumbs");
	    $("#ss_2012_bg").data("thumbs_offset",offset);
	};

	var ss_2012_move=function(add,noanim) {
	    if (typeof add == 'undefined')
		add=1;
	    if (typeof noanim == 'undefined')
		noanim=0;
	    var images=$("#ss_2012_bg").data("images");
	    if (typeof images=='undefined')
		return;
	    var idx=parseInt($("#ss_2012_bg").data("idx"));
	    var old=idx;
	    if (old==-1)
		noanim=1;
	    idx+=add;
	    if (idx&lt;=-1)
		idx=images.length-1;
	    while (idx&gt;=images.length)
		idx=idx-images.length; /* for the interval thing */
	    var did=ss_2012_preload(idx,images);
	    if (did)
		images=$("#ss_2012_bg").data("images");
	    var image=images[idx];
	    $("#ss_2012_frame_it").attr('href',image.url);
	    $("#ss_2012_bg").data('current_image_id',image.object_id);
	    var id="ss_2012_preload_image_"+image.object_id;
	    var doit=1;
	    var io=$("#"+id);

	    var onload_ran=0;
	    ss_2012_loader_img[0].onload=function() {
		if (onload_ran)
		    return;
		onload_ran=1;
		/* the new image is really loaded. fine! */
		if (window.uf.visibility) {
		    ss_2012_debug("end ss2012 vis tracking");
		    window.uf.visibility.end("#ss_2012_img");
		    ss_2012_debug("start ss2012 vis tracking on "+image.object_id);
		    window.uf.visibility.start("#ss_2012_img",image.object_id);
		}
		$("#ss_2012_waiting_img").hide();
		$("#ss_2012_bg").data("idx",idx);
		$("#ss_2012_bg").data("current_object_id",image.object_id);
		$("#ss_2012_img").attr("src",image.image).show();

		$("#ss_2012_img").removeClass("ss_2012_no_borders");
		$("#ss_2012_img").css("max-height","");
		$("#ss_2012_img").css("max-width","");
		$("#ss_2012_img").css("height","");
		$("#ss_2012_img").css("width","");

		/* the background. We need the border. */
		ss_2012_colorsetter(image);
		ss_2012_set_scale_class(null,idx,images);

		ss_2012_title(image);
		/* now for the thumbnails */
		ss_2012_thumbs_display(idx,images,0);
		ss_2012_last_change=new Date().getTime();
		ss_2012_first_loaded=1;

		$("#ss_2012_bg").trigger("ss_2012_image_changed");
		return;

	    };
	    $("#ss_2012_waiting_img").show();
	    ss_2012_loader_img[0].src=image.image;
	    if (ss_2012_loader_img[0].complete) {
		ss_2012_loader_img[0].onload();
	    }

	};
	var ss_2012_preload_cb=function() {
	    var src=this.src;
	    $("#ss_2012_preload_wrapper img").each(function() {
		var t=this.src;
		if (t==src) {
		    var now=(new Date()).getTime();
		    $(this).attr('data-loaded',now);
		}
	    });
	};
	var ss_2012_preload=function(idx,images) {
	    var i;
	    i=idx-3;
	    if (i&lt;0)
		i=i+images.length;
	    did=0;
	    for (var j=0;j&lt;7;j++,i++) {
		if (i&gt;images.length || i&lt;0)
		    continue;
		if (i==images.length)
		    i=0;

		var id="ss_2012_preload_image_"+images[i].object_id;
		var o=$("#"+id);
		if (o.length)
		    continue;
		did++;

		var src=images[i].image;
		var pi=new Image();
		pi.src=src;
		pi.id=id;
		pi.alt='';
		pi.onload=ss_2012_preload_cb;
		pi.onerror=ss_2012_preload_cb;
		$("#ss_2012_preload_wrapper").append(pi);
		$("#"+id).attr("data-loading_started",(new Date()).getTime());

		w=images[i].thumb_width;
		h=images[i].thumb_height;
		src=images[i].thumb;
		images[i].preload_thumb=$("&lt;img alt='' width='"+w+"' height='"+h+"' src='"+src+"' /&gt;");
	    }
	    if (did)
		$("#ss_2012_bg").data("images",images);
	    return did;
	};
	var autostart=parseInt("");
	if (autostart)
	    ss_2012_start();
    });

    jQuery(document).ready(function() {
	try {
	    var canvas=fx.canvas();
	} catch(e) {
	    if (window.console) console.log(e);
	    $('.nf_fx').each(function() {
		var fileexists=$(this).data("fx-file-exists");
		fileexists=parseInt(fileexists);
		if (!fileexists)
		    return;
		$(this).wrapInner("&lt;div class='nf_fx_displaybuttons' style='display:inline'&gt;");
		b="&lt;button class='nf_fx_show'&gt;Zeigen&lt;/button&gt;";
		$("div.nf_fx_displaybuttons",this).append(b);
	    });
	    $('body').on("click",".nf_fx_show",function() {
		var container=$(this).parent().parent(); //button -&gt; div -&gt; span.nf_fx
		var path=container.data("fx-file-path");
		var img=$("&lt;img src='"+path+"' alt='Bearbeitete Version des Bildes' &gt;");
		img.css({
		    margin: "1em 0"
		    });
		container.append("&lt;h6&gt;Modifizierte Version&lt;/h6&gt;");
		container.append(img);
		container.css({
			display: 'block',
			textAlign: 'center'
		    });
		$(this).remove();
	    });


	    return;
	}
	var control=$("#fx_control");
	$("#fx_control").css("max-height",$(window).height()-50);
	$(window).resize(function() {
	    $("#fx_control").css("max-height",$(window).height()-50);
	});
	$("body").addClass("fx");
	$(".toggleblock h4",control).prepend("&lt;span class='toggler'&gt;&#8596;&lt;/span&gt;");
	$(".onecontrol h6",control).append("&lt;span class='info'&gt;?&lt;/span&gt;");
	$(".onecontrol",control).append("&lt;span class='show'&gt;&lt;/span&gt;");
	var main_opts={};

	var num_to_frac=function(orig) {
	    var start;
	    if (orig&lt;0)
		start=1/orig;
	    else
		start=orig;
	    start=Math.floor(start+0.99);
	    if (start&lt;2) start=2;
	    for (var i=start;i&lt;100;i++) {
		var val=orig*i;
		var w=Math.round(val*10)/10;
		if (w==Math.floor(w))
		    return w+":"+i;
	    }
	    return "";
	}

	var fx_fix_opts=function(opts,canvas)
	{
	    var rangeit=function(val, min,max, def) {
		if (val&lt;min) return def;
		if (val&gt;max) return def;
		return val;
	    };
	    for (var i in opts) {
		var v=opts[i];
		if (typeof v == 'undefined') {
		    delete opts[i];
		    continue;
		}
		if (i=='x1') {
		    opts[i]=rangeit(v,0,canvas.width-1,0);
		    continue;
		}
		if (i=='x2') {
		    opts[i]=rangeit(v,0,canvas.width-1,canvas.width-1);
		    continue;
		}
		if (i=='y1') {
		    opts[i]=rangeit(v,0,canvas.height-1,0);
		    continue;
		}
		if (i=='y2') {
		    opts[i]=rangeit(v,0,canvas.height-1,canvas.height-1);
		    continue;
		}
		if (i=='curve_v' || i=='curve_r' || i=='curve_g' || i=='curve_b') {
		    var ok=1;
		    var last=-1;
		    for (var j in v) {
			var d=v[j][0];
			var e=v[j][1];
			if (d&lt;0 || d&gt;100) ok=0;
			if (e&lt;0 || e&gt;100) ok=0;
			if (d&lt;=last) ok=0;
			last=d;
		    }
		    if (!ok)
			delete(opts[i]);
		}
		var e=$("input[name=fxi_"+i+"]");
		if (e.length==0) {
		    delete opts[i];
		    continue;
		}
		var min=-100;
		var max=100;
		if (i=='rotate') {
		    min=-90;
		    max=90;
		} else if (i=='hue') {
		    min=-180;
		    max=180;
		} else if (i=='usm1_radius') {
		    min=0;
		    max=2;
		} else if (i=='usm2_radius') {
		    min=0;
		    max=100;
		} else if (i=='usm1_strength') {
		    min=0;
		    max=1000;
		} else if (i=='usm2_strength') {
		    min=0;
		    max=100;
		}
		if (v&lt;min||v&gt;max)
		    opts[i]=0;
	    }
	    $("input",control).each(function() {
		if ($(this).hasClass('rangecheckbox'))
		    return;
		var name=$(this).attr('name');
		name=name.replace(/^fxi_/,"");
		if (name in opts) {
		    return;
		}
		if (name=='x1' || name=='y1') {
		    opts[name]=0;
		    return;
		}
		if (name=='x2') {
		    opts[name]=canvas.width-1;
		    return;
		}
		if (name=='y2') {
		    opts[name]=canvas.height-1;
		    return;
		}
		if (name=='curve_v' || name=='curve_r' || name=='curve_g' || name=='curve_b') {
		    opts[name]=[];
		    return;
		}
		opts[name]=0;
	    });
	    return opts;
	};

	var fx_crop_show=function() {
	    var x1=main_opts.x1;
	    var x2=main_opts.x2;
	    var y1=main_opts.y1;
	    var y2=main_opts.y2;
	    var w=x2-x1+1;
	    var h=y2-y1+1;
	    var str = w+" x "+h;
	    if (w!=canvas.width || h!=canvas.height) {
		str = str + " ["+x1+","+y1+"]";
	    }
	    var ar=num_to_frac(w/h);
	    str=str+" -- "+ar;
	    var l=$("#fx_crop_format option[value='"+ar+"']");
	    if (l.length==0)
		$("&lt;option value='"+ar+"'&gt;"+ar+"&lt;/option&gt;").appendTo($("#fx_crop_format"));
	    $("#fx_crop_controls .show").text(str);
	};

	var image = document.getElementById('theimage');
	var texture=canvas.texture(image);
	canvas.draw(texture);
	canvas.update();
	image.parentNode.insertBefore(canvas, image);
	$(canvas).addClass("theimage-mirror");
	main_opts=fx_fix_opts(main_opts,canvas);
	$("input[type=range][data-range-factor]",control).each(function() {
	    var name=$(this).attr('name');
	    name=name.replace(/^fxi_/,"");
	    var str="&lt;input class='rangecheckbox' data-range-state='small' type='checkbox' name='fx_widerange_"+name+"' value='1' /&gt;";
	    $(this).parent().append(str);
	    $(this).attr('step','0.1');
	});
	$(".rangecheckbox").change(function() {
	    var name=$(this).attr('name');
	    name=name.replace(/^fx_widerange_/,"");
	    var checked=$(this).is(":checked");
	    var inp=$("input[name=fxi_"+name+"]",control);
	    var val=parseFloat(inp.val());
	    var state=$(this).attr('data-range-state');
	    var factor=parseFloat(inp.attr('data-range-factor'));
	    if (state=='small') {
		if (checked) {
		    $(this).attr('data-range-state','wide');
		    inp.attr('min',inp.attr('min')*factor);
		    inp.attr('max',inp.attr('max')*factor);
		}
	    } else {
		if (!checked) {
		    $(this).attr('data-range-state','small');
		    inp.attr('min',inp.attr('min')/factor);
		    inp.attr('max',inp.attr('max')/factor);
		    var min=inp.attr('min');
		    var max=inp.attr('max');
		    var oval=val;
		    if (val&lt;min) val=min;
		    if (val&gt;max) val=max;
		    if (val!=oval) {
			inp.val(val);
			fx_mark_change();
		    }
		}
	    }
	    fx_update_info(inp);
	});

	fx_crop_show();

	var fx_curve=$("#fx_curve")[0];

	var fx_curve_draw=function(histdata) {
	    fx_curve.width = fx_curve.width;

	    var ctx=$("#fx_curve")[0].getContext('2d');
	    ctx.lineWidth=1;
	    var factor=parseInt($("#fx_curve").attr('width'))/100;

	    ctx.beginPath();
	    ctx.strokeStyle = "#aaa";
	    ctx.moveTo(0,100*factor);
	    ctx.lineTo(100*factor-1,0);
	    ctx.stroke();
	    for (i=1;i&lt;8;i++) {
		ctx.beginPath();
		ctx.strokeStyle = "#aaa";
		ctx.moveTo(i*12.5*factor,0);
		ctx.lineTo(i*12.5*factor,100*factor);
		ctx.stroke();
		ctx.beginPath();
		ctx.strokeStyle = "#aaa";
		ctx.moveTo(0,i*12.5*factor);
		ctx.lineTo(100*factor,i*12.5*factor);
		ctx.stroke();
	    }

	    var which=$("#toggleblock_curve select").val();
	    var todo=[];
	    if (which=='v') {
		if (main_opts.curve_r.length)
		    todo[todo.length]=['r','f00',0];
		if (main_opts.curve_g.length)
		    todo[todo.length]=['g','0f0',0];
		if (main_opts.curve_b.length)
		    todo[todo.length]=['b','00f',0];
		todo[todo.length]=['v','fff',1];
	    } else {
		if (which=='r')
		    todo[todo.length]=['r','f00',1];
		if (which=='g')
		    todo[todo.length]=['g','0f0',1];
		if (which=='b')
		    todo[todo.length]=['b','00f',1];
	    }
	    for (i in todo) {
		var par=todo[i];
		var which=par[0];
		var color=par[1];
		var dots=par[2];

		var n="curve_"+which;
		var path=main_opts[n];

		var pts=[];
		pts[0]=[0,0];
		for (var i=0;i&lt;path.length;i++) {
		    x=path[i][0]
		    y=path[i][1]
		    pts[pts.length]=[x/100.0,y/100.0];
		}
		pts[pts.length]=[1,1];

		var out=fx.splineInterpolate(pts);
		ctx.beginPath();
		ctx.strokeStyle = "#"+color;
		ctx.moveTo(0,100*factor);
		for (var i=0;i&lt;256;i++) {
		    var y=out[i];
		    y=y/256;
		    y=(1-y)*100*factor;
		    ctx.lineTo(i/256.0*100*factor,y);
		}
		ctx.stroke();
		if (dots) {
		    for (var i=0;i&lt;path.length;i++) {
			var x=path[i][0];
			var y=path[i][1];

			ctx.beginPath();
			ctx.fillStyle = "#"+color;
			ctx.arc(x*factor,(100-y)*factor,5,0,2*Math.PI,true);
			ctx.fill();
		    }
		}
	    }
	};


	$("#fx_starter").removeClass("uf_hidebydefault");

	var fx_filter_one=function(filter,name) {
	    var v=parseFloat($("input[name="+name+"]").val());
	    if (name=='fxi_denoise' &amp;&amp; v&gt;99.9)
		return "";
	    if (v) {
		canvas[filter](v);
		v=v.toFixed(2);
		name=name.replace(/^fxi_/,"");
		return " "+name+":"+v;
	    }
	    return "";

	};
	var fx_filter_rotate=function(name) {
	    var v=parseFloat($("input[name="+name+"]").val());
	    if (v) {
		var w;
		w=v/180.0*Math.PI;
		canvas.rotate(canvas.width/2,canvas.height/2,w);
		v=v.toFixed(2);
		name=name.replace(/^fxi_/,"");
		return " "+name+":"+v;
	    }
	    return "";
	}
	var fx_filter_two=function(filter,name1,name2,allowzero) {
	    var v1=parseFloat($("input[name="+name1+"]").val());
	    var v2=parseFloat($("input[name="+name2+"]").val());
	    if ( (allowzero &amp;&amp; (v1||v2)) || (v1 &amp;&amp; v2)) {
		canvas[filter](v1,v2);
	    }
	    str="";
	    if (!allowzero &amp;&amp; (v1==0 || v2==0))
		return str;
	    if (v1) {
		v1=v1.toFixed(2);
		name1=name1.replace(/^fxi_/,"");
		str=str+" "+name1+":"+v1;
	    }
	    if (v2) {
		v2=v2.toFixed(2);
		name2=name2.replace(/^fxi_/,"");
		str=str+" "+name2+":"+v2;
	    }
	    return str;
	};
	var fx_toggle=function(mode) {
	    var e=$("#theimage");
	    var css;
	    if (typeof mode=='undefined') {
		var h=e.css("visibility");
		if (h=='hidden')
		    css="visible";
		else
		    css="hidden";
	    } else if (mode) {
		css="hidden";
	    } else {
		css="visible";
	    }
	    e.css("visibility",css);
	    if (css=='hidden' &amp;&amp; $("#fxi_cmd").text()&gt;'') {
		$("#fx_toggle_beforeafter").text("Angezeigt wird: nderung");
		$("#fx_toggle_beforeafter").attr('title',"Anklicken fr Original");
		$("#fx_toggle_beforeafter").show();
	    } else {
		if ($("#fxi_cmd").text()&gt;'') {
		    $("#fx_toggle_beforeafter").text("Angezeigt wird: Original");
		    $("#fx_toggle_beforeafter").attr('title',"Anklicken fr nderungen - falls vorhanden.");
		    $("#fx_toggle_beforeafter").show();
		} else {
		    $("#fx_toggle_beforeafter").hide();
		}
	    }
	};
	$(".fx_toggle").click(function() { fx_toggle(); return false; });


	var fx_update_histogram=function(h)
	{
	    var which=$("#fx_hist_select").val();
	    var cv=$("#fx_hist")[0];
	    cv.width=cv.width;
	    var ctx=cv.getContext('2d');

	    if (which=='rgb') {
		for (var i=0;i&lt;256;i++) {
		    var r=h.r[i]*128;
		    var g=h.g[i]*128;
		    var b=h.b[i]*128;
		    for (var j=0;j&lt;128;j++) {
			if (j&gt;=r &amp;&amp; j&gt;=g &amp;&amp; j&gt;=b)
			    break;
			ctx.beginPath();
			var s="rgb(";
			if (j&lt;r)
			    s=s+255;
			else
			    s=s+"0";
			s=s+",";
			if (j&lt;g)
			    s=s+255;
			else
			    s=s+"0";
			s=s+",";
			if (j&lt;b)
			    s=s+255;
			else
			    s=s+"0";
			s=s+")";
			ctx.strokeStyle = s;
			ctx.moveTo(i,127-j);
			ctx.lineTo(i,127-j-1);
			ctx.stroke();
		    }
		}
	    } else {
		ctx.beginPath();
		ctx.strokeStyle = "#fff";
		if (which=='r')
		    ctx.strokeStyle = "#f00";
		else if (which=='g')
		    ctx.strokeStyle = "#0f0";
		else if (which=='b')
		    ctx.strokeStyle = "#00f";
		for (i=0;i&lt;256;i++) {
		    ctx.moveTo(i,128);
		    var y=128-h[which][i]*128;
		    ctx.lineTo(i,y);
		}
		ctx.stroke();
	    }
	};
	var fx_curve_translate=function(incurve) {
	    var cp=[];
	    var last=-1;
	    for (var i in incurve) {
		var d=incurve[i][0];
		var e=incurve[i][1];
		if (d &amp;&amp; cp.length==0) {
		    cp[0]=[0,0];
		}
		cp[cp.length]=[d/100,e/100];
		last=d;
	    }
	    if (cp.length==0)
		cp[0]=[0,0];
	    if (last!=100)
		cp[cp.length]=[1,1];
	    return cp;
	};
	var fx_canvas_draw=function(canvas,image,opts)
	{
	    var texture=canvas.texture(image);
	    canvas.draw(texture);

	    if (opts.rb_mod || opts.g_mod)
		canvas.whiteBalance(opts.rb_mod/100,opts.g_mod/100);
	    if (opts.curve_r &amp;&amp; opts.curve_r.length&gt;0
	     || opts.curve_g &amp;&amp; opts.curve_g.length&gt;0
	     || opts.curve_b &amp;&amp; opts.curve_b.length&gt;0) {
		var cpr=fx_curve_translate(opts.curve_r);
		var cpg=fx_curve_translate(opts.curve_g);
		var cpb=fx_curve_translate(opts.curve_b);
		canvas.curves(cpr,cpg,cpb);
	    }
	    if (opts.curve_v &amp;&amp; opts.curve_v.length&gt;0) {
		var cp=fx_curve_translate(opts.curve_v);
		canvas.curves(cp);
	    }
	    if (opts.hue || opts.saturation)
		canvas.hueSaturation(opts.hue/100,opts.saturation/100);
	    if (opts.vibrance)
		canvas.vibrance(opts.vibrance/100);
	    if (opts.denoise)
		canvas.denoise(opts.denoise/100);
	    if (opts.noise)
		canvas.noise(opts.noise/100);
	    if (opts.sepia)
		canvas.noise(opts.sepia/100);

	    if (opts.brightness || opts.contrast)
		canvas.brightnessContrast(opts.brightness/100,opts.contrast/100);

	    if (opts.rotate)
		canvas.rotate(canvas.width/2,canvas.height/2, opts.rotate/180.0*Math.PI);

	    if (opts.usm1_radius &amp;&amp; opts.usm1_strength)
		canvas.unsharpMask(opts.usm1_radius,opts.usm1_strength/100);
	    if (opts.usm2_radius &amp;&amp; opts.usm2_strength)
		canvas.unsharpMask(opts.usm2_radius,opts.usm2_strength/100);

	    canvas.update();
	};
	function fx_cmd_get(opts)
	{
	    var str="";
	    for (var i in opts) {
		var val=opts[i];
		if (i!='curve' &amp;&amp; typeof val =='string')
		    val=parseFloat(val);
		if (typeof val == 'number' &amp;&amp; (val==0 || isNaN(val)))
		    continue;
		if (i=='usm1_radius' &amp;&amp; opts['usm1_strength']==0)
		    continue;
		if (i=='usm1_strength' &amp;&amp; opts['usm1_radius']==0)
		    continue;
		if (i=='usm2_radius' &amp;&amp; opts['usm2_strength']==0)
		    continue;
		if (i=='usm2_strength' &amp;&amp; opts['usm2_radius']==0)
		    continue;

		if (i=='y2' &amp;&amp; val==canvas.height-1)
		    continue;
		if (i=='x2' &amp;&amp; val==canvas.width-1)
		    continue;
		if (i.substr(0,6)=='curve_' &amp;&amp; val.length==0)
		    continue;

		if (str!="")
		    str=str+" ";
		str=str+i+":";
		if (i.substr(0,6)=='curve_') {
		    var flag=0;
		    for (var j in val) {
			var d=val[j][0];
			var e=val[j][1];
			if (flag++)
			    str=str+";";
			str=str+d+"/"+e;
		    }
		    continue;
		}
		if (i=='x1' || i=='x2' || i=='y1' || i=='y2') {
		    if (i=='y2' &amp;&amp; val==canvas.height-1)
			continue;
		    if (i=='x2' &amp;&amp; val==canvas.width-1)
			continue;
		}
		str=str+parseFloat(val).toFixed(2);
	    }
	    return str;
	}
	function fx_cmd_draw(opts)
	{
	    var str=fx_cmd_get(opts);
	    $("#fxi_cmd").text(str);
	    if (str=='') {
		$("#fx_copy_cmd").attr('disabled','disabled');
		$("#fx_save_cmd").attr('disabled','disabled');
		$("#fx_reset").attr('disabled','disabled');
		$("#fx_toggle").hide();
	    } else {
		$("#fx_copy_cmd").removeAttr('disabled');
		$("#fx_save_cmd").removeAttr('disabled');
		$("#fx_reset").removeAttr('disabled');
		$("#fx_toggle").show();
	    }
	}
	var fx_update_valuedisplay=function() {
	    fx_crop_show();
	    for (var i in main_opts) {
		var e=$("input[name=fxi_"+i+"]");
		if (e.length) {
		    var v=main_opts[i];
		    v=parseFloat(v).toFixed(2);
		    $(".show",$(e).parent()).text(v);
		}
	    }
	};

	var fx_update=function(with_hist) {

	    fx_canvas_draw(canvas,image,main_opts);

	    /* show crop mask */
	    if (main_opts.x1 || main_opts.y1 || main_opts.x2!=canvas.width-1 || main_opts.y2!=canvas.height-1) {
		canvas.brightnessmask(main_opts.x1,main_opts.y1,main_opts.x2,main_opts.y2,0,-0.5);
	    }

	    canvas.update();

	    fx_curve_draw();
	    fx_update_valuedisplay();
	    fx_cmd_draw(main_opts);

	    var pxa=canvas.getPixelArray();
	    histworker.send_to_worker({
		pxa:pxa,
		x1:main_opts.x1,
		y1:main_opts.y1,
		x2:main_opts.x2,
		y2:main_opts.y2,
		width:canvas.width,
		height:canvas.height
	    });

	    return;
	};

	var fx_interval=0;
	var control=$("#fx_control");
	var fx_change_flag=0;
	var fx_last_update=0;
	var fx_mark_change=function() {
	    fx_change_flag=(new Date).getTime();
	};
	var fx_interval_handler=function() {
	    if (!fx_interval) {
		var ts1=(new Date).getTime();
		fx_update();
		var ts2=(new Date).getTime();
		var step=ts2-ts1+50;
		if (step&lt;100)
		    step=100;
		fx_interval=setInterval(fx_interval_handler,step);
	    }
	    if (!fx_change_flag)
		return;
	    var now=(new Date).getTime();
	    if (fx_last_update+100&lt;now) {
		fx_update();
		fx_eye_handler();
		fx_toggle(1);
		fx_change_flag=0;
		fx_last_update=now;
	    }
	}
	$("#fx_starter").click(function() {
	    var vis=$("#fx_control").is(":visible");
	    $("#fx_control").toggle();
	    fx_interval_handler();
	    if (!vis) {
		var o=$("#theimage").offset();
		$(canvas).show();
		$(window).scrollTop(o.top);
		$(window).scrollLeft(o.left);
	    }
	    $("#theimage").imgAreaSelect({remove:true,hide:true});
	    $("#img_imageblock_innerwrapper").removeClass("block-overlays");
	    return false;
	});
	$("#fx_reset").click(function() {
	    $("input[type=range]",control).val(0).change();
	    $("input[type=range][name=fxi_denoise]",control).val("100").change();
	    main_opts.curve_v=[];
	    main_opts.curve_r=[];
	    main_opts.curve_g=[];
	    main_opts.curve_b=[];
	    main_opts.x1=0;
	    main_opts.y1=0;
	    main_opts.x2=canvas.width-1;
	    main_opts.y2=canvas.height-1;
	    fx_toggle(0);
	    fx_mark_change();
	    $("#fx_toggle").hide();
	    return false;
	});

	$("button.zero",control).click(function() {
	    var pa=$(this).parent();
	    if ($(this).hasClass("crop")) {
		main_opts.x1=0;
		main_opts.x2=canvas.width-1;
		main_opts.y1=0;
		main_opts.y2=canvas.height-1;
		fx_mark_change();
	    } else {
		$("input[type=range]",pa).val(0);
		$("input[type=range]",pa).change();
	    }
	    return false;
	});
	$("input[type=range]",control).change(function() {
	    var name=$(this).attr('name');
	    name=name.replace(/^fxi_/,"");
	    var val=parseFloat($(this).val());

	    main_opts[name]=$(this).val();
	    main_opts=fx_fix_opts(main_opts,canvas);
	    $("#fx_toggle").show();
	    fx_mark_change();
	    return true;
	});

	fx_changed=1;

	$(".nf_img_fx_trigger").each(function() {
	    $(this).attr('title',$(this).attr('data-fx-title'));
	});
	// drag.

	$("#fx_control_dragger").mousedown(function(e) {
	    if (e.which==1) {
		var lastx=e.pageX;
		var lasty=e.pageY;
		$("body").mousemove(function(e) {
		    var c=$("#fx_control");
		    var x=e.pageX;
		    var y=e.pageY;
		    var l=parseInt(c.css("left"));
		    if (isNaN(l))
			l=0;
		    var t=parseInt(c.css("top"));
		    if (isNaN(t))
			t=0;
		    c.css("left",x-lastx+l);
		    c.css("top",y-lasty+t);
		    lastx=x;
		    lasty=y;
		});
		$("body").mouseup(function(e) {
		    $("body").unbind("mouseup mousemove");
		});
	    }

	});

	$("#fx_control_dragger").dblclick(function() {
	    $("#fx_control_inner").toggle();
	});

	$("#fx_curve").click(function(e) {
	    var ctx=this.getContext('2d')
	    var p=$(this).offset();
	    var x=e.pageX-p.left;
	    var y=e.pageY-p.top;
	    var factor=parseInt($("#fx_curve").attr('width'))/100;
	    var which=$("#toggleblock_curve select").val();

	    x=Math.floor(x/factor);
	    y=100*factor-y;
	    y=Math.floor(y/factor);

	    var path=main_opts["curve_"+which];;
	    var todo=1;
	    for (var i=0;i&lt;path.length;) {
		var d=path[i][0];
		var e=path[i][1];
		if (d&gt;=x-5 &amp;&amp; d&lt;=x+5) {
		    if (e&gt;=y-5 &amp;&amp; e&lt;=y+5) 
			todo=0;
		    path.splice(i,1);
		    continue;
		}
		i++;
	    }
	    if (todo) {
		for (var i=0;i&lt;path.length;i++) {
		    var d=path[i][0];
		    if (d&gt;x) {
			path.splice(i,0,[x,y]);
			todo=0;
			break;
		    }
		}
		if (todo)
		    path[path.length]=[x,y];
	    }
	    fx_mark_change();
	});
	$("#fx_curve_reset").click(function() {
	    var which=$("#toggleblock_curve select").val();
	    main_opts["curve_"+which]=[];
	    fx_mark_change();
	});
	$("#fx_curve").mousemove(function(e) {
	    var p=$(this).offset();
	    var x=e.pageX-p.left;
	    var y=e.pageY-p.top;
	    var factor=parseInt($("#fx_curve").attr('width'))/100;
	    y=100-(y/factor);
	    x=x/factor;
	    y=Math.floor(y);
	    x=Math.floor(x);
	    $("#fx_curve").attr('title',"x="+x+", y="+y);
	    $(this).attr("data-pos",x+", "+y);
	    return false;
	});
	var eyemode={
		x:0,
		y:0,
		active:0
	};
	var fx_eye_handler=function() {
	    if (!eyemode.active)
		return;
	    var x=eyemode.x;
	    var y=eyemode.y;

	    var str="Position: x="+x+", y="+y+"&lt;br&gt;";
	    var pxa=canvas.getPixelArray();
	    var len=pxa.length;

	    var sumfunc=function(o,pxa,x,y) {
		if (y&lt;0) return;
		if (x&lt;0) return;
		if (x&gt;=canvas.width) return;
		if (y&gt;=canvas.height) return;
		var i=canvas.width*y+x;
		i=i*4;
		o.r+=pxa[i+0];
		o.g+=pxa[i+1];
		o.b+=pxa[i+2];
		var v=pxa[i+0]*0.3+pxa[i+1]*0.59+pxa[i+2]*0.11;
		v=Math.floor(v);
		o.v+=v;
		o.n++;
	    };
	    var outfunc=function(text,o) {
		var str="&lt;tr&gt;";
		str=str+"&lt;td&gt;"+text+"&lt;/td&gt;";
		str=str+"&lt;td&gt;"+Math.floor(o.r/o.n)+"&lt;/td&gt;";
		str=str+"&lt;td&gt;"+Math.floor(o.g/o.n)+"&lt;/td&gt;";
		str=str+"&lt;td&gt;"+Math.floor(o.b/o.n)+"&lt;/td&gt;";
		str=str+"&lt;td&gt;"+Math.floor(o.v/o.n)+"&lt;/td&gt;";
		str=str+"&lt;tr&gt;";
		return str;
	    };
	    var o={
		r:0,
		g:0,
		b:0,
		v:0,
		n:0
	    };
	    var nulls=o;
	    sumfunc(o,pxa,x,y);
	    str=str+"&lt;table&gt;";
	    str=str+"&lt;tr&gt;&lt;th&gt;&lt;/th&gt;&lt;th&gt;R&lt;/th&gt;&lt;th&gt;G&lt;/th&gt;&lt;th&gt;B&lt;/th&gt;&lt;th&gt;V&lt;/th&gt;&lt;/tr&gt;";
	    str=str+outfunc("1 Pixel",o);
	    sumfunc(o,pxa,x-1,y);
	    sumfunc(o,pxa,x+1,y);
	    sumfunc(o,pxa,x,y-1);
	    sumfunc(o,pxa,x,y+1);
	    str=str+outfunc("5 Pixel",o);
	    sumfunc(o,pxa,x-1,y-1);
	    sumfunc(o,pxa,x-1,y+1);
	    sumfunc(o,pxa,x+1,y-1);
	    sumfunc(o,pxa,x+1,y+1);
	    str=str+outfunc("9 Pixel",o);
	    o=nulls;
	    for (var i=x-2;i&lt;=x+2;i++) {
		for (var j=y-2;j&lt;=y+2;j++) {
		    sumfunc(o,pxa,i,j);
		}
	    }
	    str=str+outfunc("25 Pixel",o);
	    delete(pxa);

	    str=str+"&lt;/table&gt;";
	    $("#fx_eye_info").html(str);
	    fx_update(); // for chromium, which
	};
	$("#fx_click_catcher").click(function(e) {
	    var vis=$("#fx_control").is(":visible");
	    if (!vis)
		return;
	    $("#fx_click_catcher").css("z-index",-1);
	    $("#fx_click_catcher").css("background-color","inherit");
	    eyemode.active=1;
	    var px=e.pageX;
	    var py=e.pageY;
	    var off=$("#theimage").offset();
	    // Firefox returns float positions? WTF?
	    eyemode.x=px-Math.round(off.left);
	    eyemode.y=py-Math.round(off.top);
	    $("#fx_eye_info").show();
	    fx_eye_handler(e);

	    return false; // don't bubble.
	});
	$("#fx_eye").click(function() {
	    eyemode.active=!eyemode.active;
	    if (eyemode.active) {
		uf_growl_info("Bitte klicken Sie den gewnschten Punkt im Bild nun an.");
		$("#fx_click_catcher").css("z-index",2000);
		$("#fx_click_catcher").css("background-color","rgba(128,128,128,0.25)");
	    } else {
		$("#fx_eye_info").hide();
	    }
	});

	// fontsize
	$("#fx_fontsize_small").click(function() {
	    $("#fx_control").css("font-size","0.6rem");
	});
	$("#fx_fontsize_medium").click(function() {
	    $("#fx_control").css("font-size","0.8rem");
	});
	$("#fx_fontsize_large").click(function() { 
	    $("#fx_control").css("font-size","1.0rem");
	});
	$("#fx_copy_cmd").click(function() {
	    var t=$("#fxi_cmd").text();
	    if (t=='')
		return false;
	    t="[fx]"+t+"[/fx]";
	    window.prompt("Kopieren mit Strg+C (Mac: Alt-C), Enter.\nDann in einen Kommentar unter dieses Bild einfgen.", t);
	    return false;
	});
	$("#fx_crop_mouse").click(function() {
	    var ias_end_cb=function(ele,area)
	    {
		/* fix imgareaselect mistake */
		var x1=area.x1;
		var x2=area.x2;
		var y1=area.y1;
		var y2=area.y2;
		var w=x2-x1+1;
		var h=y2-y1+1;
		while (h&gt;canvas.height) {
		    h--;
		    if (y1)
			y1--;
		}
		while (w&gt;canvas.width) {
		    w--;
		    if (x1)
			x1--;
		}
		var old_x1=main_opts.x1;
		var old_x2=main_opts.x2;
		var old_y1=main_opts.y1;
		var old_y2=main_opts.y2;
		if (x1!=old_x1 || x2!=old_x2 || y1!=old_y1 || y2!=old_y2) {
		    main_opts.x1=x1;
		    main_opts.x2=x1+w-1;
		    main_opts.y1=y1;
		    main_opts.y2=y1+h-1;
		    fx_mark_change();
		}
	    };
	    var ias_change_cb=function(ele,area)
	    {
		ias_end_cb(ele,area);
	    };
	    var x1=main_opts.x1;
	    var x2=main_opts.x2;
	    var y1=main_opts.y1;
	    var y2=main_opts.y2;
	    var format=$("#fx_crop_format").val();
	    $("#fx_starter").click();
	    $("#img_imageblock_innerwrapper").addClass("block-overlays");
	    $("#theimage").imgAreaSelect({
		    persistent:true,
		    aspectRatio:format,
		    onSelectEnd: ias_end_cb,
		    onSelectChange:ias_change_cb,
		    handles:true,show:true,
		    x1:x1,
		    y1:y1,
		    x2:x2,
		    y2:y2
		});
	});
	// start the histogram worker
	var histworker=new ufworker("histwork","#histworker",0);
	histworker.receive_from_worker=function(e) {
	    fx_update_histogram(e.data);
	};

	// controlblock usability
	$(".toggleblock h4",control).click(function() {
	    var pa=$(this).parent();
	    var id=pa.attr('id');
	    var s=pa.data('toggle-state-hidden');
	    if (s) {
		$("canvas, .onecontrol, .twocontrol",pa).show();
		pa.data('toggle-state-hidden',0);
		uf_localstorage_set("fx_hidden_"+id,0);
	    } else {
		$("canvas, .onecontrol, .twocontrol",pa).hide();
		pa.data('toggle-state-hidden',1);
		uf_localstorage_set("fx_hidden_"+id,1);
	    }
	});
	$(".toggleblock").each(function() {
	    var id=$(this).attr('id');
	    var hidden=parseInt(uf_localstorage_get("fx_hidden_"+id,0));
	    if (hidden) {
		$("canvas, .onecontrol, .twocontrol",this).hide();
		$(this).data('toggle-state-hidden',1);
	    }
	});
	var fx_update_info=function(ele) {
	    var pa=$(ele).parent();

	    var min=parseFloat($(ele).attr('min'));
	    var max=parseFloat($(ele).attr('max'));
	    var step=parseFloat($(ele).attr('step'));

	    min=min.toFixed(2);
	    min=min.replace(/\.0*$/,"");
	    max=max.toFixed(2);
	    max=max.replace(/\.0*$/,"");
	    if (min==-max) {
		str="+/-"+max;
	    } else {
		if (min&lt;0)
		    max="+"+max;
		str=min+" bis "+max;
	    }
	    $(".info",pa).attr('data-info',str);
	};
	$(".info",control).hover(function() {
	    var pa=$(this).parent().parent();
	    var inp=$("input",pa);
	    var min=parseFloat($(inp).attr('min'));
	    var max=parseFloat($(inp).attr('max'));
	    min=min.toFixed(2);
	    min=min.replace(/\.0*$/,"");
	    max=max.toFixed(2);
	    max=max.replace(/\.0*$/,"");
	    str="Wertebereich: ";
	    if (min==-max) {
		str=str+"+/-"+max;
	    } else {
		if (min&lt;0)
		    max="+"+max;
		str=str+min+" bis "+max;
	    }
	    var rcb=$(".rangecheckbox",pa);
	    var state=$(rcb).attr('data-range-state');
	    if (state=='small') {
		var fac=$(inp).attr('data-range-factor');
		min=fac*parseFloat($(inp).attr('min'));
		max=fac*parseFloat($(inp).attr('max'));
		min=min.toFixed(2);
		min=min.replace(/\.0*$/,"");
		max=max.toFixed(2);
		max=max.replace(/\.0*$/,"");
		str=str+="&lt;br&gt;Kann vergrert werden auf: ";
		if (min==-max) {
		    str=str+"+/-"+max;
		} else {
		    if (min&lt;0)
			max="+"+max;
		    str=str+min+" bis "+max;
		}
	    }
	    $(this).append("&lt;div class='infodisplay'&gt;"+str+"&lt;/div&gt;");
	},function() {
	    $(".infodisplay",this).remove();
	});
	// load/save settings
	$("#fx_save_cmd").click(function() {
	    var t=$("#fxi_cmd").text();
	    if (t&gt;'') {
		uf_localstorage_set("fx_settings",t);
		uf_growl_info("Gespeichert.");
		$("#fx_load_cmd").show();
	    }
	});
	var t=uf_localstorage_get("fx_settings",false);
	if (t==false) {
	    $("#fx_load_cmd").hide();
	}
	$("#fx_curve_select").change(function() {
	    var v=$(this).val();
	    var w=$("#fx_hist_select").val();
	    if (w!='v' &amp;&amp; w!=v &amp;&amp; w!='rgb') {
		$("#fx_hist_select").val(v);
	    }
	    fx_mark_change();
	});
	$("#fx_hist_select").change(fx_mark_change);
	$("#fx_load_cmd").click(function() {
	    var t=uf_localstorage_get("fx_settings",false);
	    if (t!=false) {
		main_opts=parse_option_string(canvas,t);
		fx_mark_change();
	    }
	});

	// outside the editor: the [fx]paras[/fx] loader.
	var parse_option_string=function(workcanvas,str) {
	    var cmd=str.split(" ");
	    var opts={};
	    for (var i=0;i&lt;cmd.length;i++) {
		var x=cmd[i].split(":");
		if (x.length==2 &amp;&amp; x[0].substr(0,6)=='curve_') {
		    var which=x[0].substr(6);
		    var y=x[1].split(";");
		    var cp=[];
		    for (var j=0;j&lt;y.length;j++) {
			var z=y[j].split("/");
			if (z.length==2) {
			    var a=parseInt(z[0]);
			    var b=parseInt(z[1]);
			    if (a&gt;=0 &amp;&amp; a&lt;=100 &amp;&amp; b&gt;=0 &amp;&amp; b&lt;=100) {
				cp[cp.length]=[a,b];
			    }
			}
		    }
		    opts["curve_"+which]=cp;
		} else if (x.length==2) {
		    var newval=parseFloat(x[1]);
		    var where=x[0];
		    opts[where]=newval;
		}
	    }
	    opts=fx_fix_opts(opts,workcanvas);
	    return opts;
	};
	$('.nf_fx').each(function() {
	    $(this).wrapInner("&lt;div class='nf_fx_displaybuttons' style='display:inline'&gt;");
	    var b="&lt;button class='nf_fx_show'&gt;Zeigen&lt;/button&gt;"
	         +"&lt;button class='nf_fx_edit'&gt;Bearbeiten&lt;/button&gt;";
	    var fileexists=$(this).data("fx-file-exists");
	    var maysave=$(this).data("fx-may-save-file");
	    if (maysave) {
		b+="&lt;button class='nf_fx_save' style='display:none'&gt;Speichern&lt;/button&gt;";
	    }
	    $("div.nf_fx_displaybuttons",this).append(b);
	});
	$('body').on("click",".nf_fx_save",function() {
	    var container=$(this).parent().parent(); //button -&gt; div -&gt; span.nf_fx
	    var showcanvas=$("canvas",container);
	    if (showcanvas.length==0)
		return;
	    showcanvas=showcanvas[0];
	    var oid=container.data("fx-object_id");
	    var hash=container.data("fx-file-hash");

	    var du=showcanvas.toDataURL("image/jpeg",.95);

	    uf_growl_info("Speichern beginnt.");
	    $(this).remove();

	    $.pai_call('nf_fx_save',{
		object_id:oid,
		imagedata:du,
		hash:hash
	    }, function(d) {
		var m=d.pai_message;
		uf_growl_info(m);
	    });

	});
	$('body').on("click",".nf_fx_edit",function() {
	    var str=$(this).parent().parent().attr('data-fx');
	    main_opts=parse_option_string(canvas,str);
	    var vis=$("#fx_control").is(":visible");
	    if (vis)
		$("#fx_control").toggle();
	    $("#fx_starter").click();
	    // the min/max in the input element might be too small for something done in wide range...
	    for (var i in main_opts) {
		var v=main_opts[i];
		var e=$("input[name=fxi_"+i+"]",control);
		var min=e.attr('min');
		var max=e.attr('max');
		if (v&gt;max || v&lt;min) {
		    var rcb=$("input[name=fx_widerange_"+i+"]",control);
		    rcb.attr('checked','checked').change();
		}
		e.val(v);
	    }
	    fx_mark_change();
	    fx_interval_handler();
	    window.location.hash="#theimage";
	});
	$('body').on("click",".nf_fx_show",function() {
	    var newcanvas=fx.canvas();
	    var container=$(this).parent().parent(); //button -&gt; div -&gt; span.nf_fx
	    var hash=container.data("fx-file-hash");
	    var str=container.attr('data-fx');
	    var opts=parse_option_string(canvas,str);
	    var cmd=fx_cmd_get(opts);
	    if (opts.x1||opts.y1 || opts.x2!=canvas.width-1||opts.y2!=canvas.height-1) {
		var w=opts.x2-opts.x1+1;
		var h=opts.y2-opts.y1+1;

		$(newcanvas).css("width",w+"px");
		$(newcanvas).css("height",h+"px");

		var tmp=$("&lt;canvas width='"+w+"' height='"+h+"'&gt;").css("width",w+"px").css("height",h+"px");
		var ctx=tmp[0].getContext('2d');
		//            imgobj sx      sy      sw,sh,  dx, dy, dw,dh);
		ctx.drawImage(image, opts.x1,opts.y1, w, h,   0,  0,  w, h);
		opts.x1=0;
		opts.y1=0;
		opts.x2=w-1;
		opts.y2=h-1;
		fx_canvas_draw(newcanvas,tmp[0],opts);
	    } else {
		$(newcanvas).css("width",canvas.width);
		$(newcanvas).css("height",canvas.height);
		fx_canvas_draw(newcanvas,image,opts);
	    }
	    container.prepend("&lt;h6&gt;Modifizierte Version&lt;/h6&gt;");
	    container.append(newcanvas);
	    $(newcanvas).attr('id','fx_show_'+hash);
	    $(newcanvas).css({
		margin: "1em 0"
		});
	    container.css({
		    display: 'block',
		    textAlign: 'center'
		});
	    $("div.nf_fx_displaybuttons",container).css({
		    display: 'block',
		    textAlign: 'center'
		});
	    $(this).remove();
	    $(".nf_fx_save",container).show();
	});
    });

    jQuery(document).ready(function() {
		    $(document).keydown(function(e) {
		if (e.target.nodeName!='BODY')
		    return;
		if ($("#ss_2012_bg").is(":visible")) 
		    return;
		switch (e.which) {
		    case 39: /* right */
		    var u=$("#img_imageblock").data("nextolderurl");;
		    if (u) window.location=u;
		    break;
		case 37: /* left */
		    var u=$("#img_imageblock").data("nextyoungerurl");;
		    if (u) window.location=u;
		    break;
		}
	    });
	
	var with_mouse_navi=1;
		    $("#theimage, #thevideo").swipe({
		click: function(e) {
//		    if (e.which==1 || e.which==0)
//			history.back();
		},
		swipeLeft: function() {
		    var u=$("#img_imageblock").data("nextolderurl");;
		    if (u) window.location=u;
		    return false;
		},
		swipeRight: function() {
		    var u=$("#img_imageblock").data("nextyoungerurl");;
		    if (u) window.location=u;
		    return false;
		}
	    });
	    if ('ontouchstart' in window) {
		// conflict.
		with_mouse_navi=0;
	    }
	
	if (with_mouse_navi) {
	    		$("#img_imageblock_scroll_left").show();
	    
	    		$("#img_imageblock_scroll_right").show();
	    
	    $("#img_imageblock_scroll_left").click(function() {
		var u=$("#img_imageblock").data("nextyoungerurl");;
		if (u) window.location=u;
		return false;
	    });
	    $("#img_imageblock_scroll_right").click(function() {
		var u=$("#img_imageblock").data("nextolderurl");;
		if (u) window.location=u;
		return false;
	    });
	}

	$("#theimage, #thevideo, .img_imageblock_scroll_block, #copyrighthack").hover(function() {
	    $("#copyrighthack").show();
	    var have=$("#theimage");
	    if (have.length)
		$("#img_imageblock_imgwrapper #copyrighthack").offset($("#theimage").offset());
	    else
		$("#vid_imageblock_imgwrapper #copyrighthack").offset($("#thevideo").offset());
	},function() {
	    $("#copyrighthack").hide();
	});
	if (!('HTMLMenuItemElement' in window) || !('HTMLCommandElement' in window)) {
	    var e=$("#img_imageblock_contextmenu menu *").detach();
	    $("#img_imageblock_contextmenu menu").remove();
	    $("#img_imageblock_contextmenu").append(e);
	    $("#img_imageblock_contextmenu").append(
		"&lt;menuitem class='stopcontextmenu_click' label='Kontextmen-Emulation abschalten'&gt;&lt;/menuitem&gt;"
	    );
	}
	$("#theimage, #thevideo").attr("contextmenu","img_imageblock_contextmenu");
	$.contextMenu("html5");
	$(".stopcontextmenu_click").click(function() {
	    $.contextMenu("destroy");
	});
	$("#img_imageblock_copyright").click(function() {
	    window.location=$(this).data("href");
	});
    });

	    $(".ols-area").swipe({
		    swipeLeft: function() {
			$(".ols-more-after",$(this)).click();
		    },
		    swipeRight: function() {
			$(".ols-more-before",$(this)).click();
		    }
	    });
	    $(".ols-more").click(function() {
		var idx=$(this).attr('data-index');
		var pids=$(this).attr('data-parent_id');
		var oid=$(this).attr('data-object_id');
		var x=$(this).parents("td");
		$.pai_call("object_linkage_scroll",{
		    object_id:oid,
		    index:idx,
		    parent_id:pids
		},function(d) {
		    if (d.pai_data&gt;'')
			$(x).html(d.pai_data);

		});
		return false;
	    });
	
    jQuery(".showtechnical").removeClass('uf_hidebydefault');
    jQuery(".showtechnical2").click(function() {
	var s3=$(".showtechnical3");
	if ($(s3).hasClass("uf_hidebydefault")) {
	    $(".showtechnical2").html("verstecken");
	    $(".showtechnical3").removeClass('uf_hidebydefault');
	} else {
	    $(".showtechnical2").html("zeigen");
	    $(".showtechnical3").addClass('uf_hidebydefault');
	}
    });
//]]&gt;
  </script>
 </body>
</html>