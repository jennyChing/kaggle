<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8"/>
  <meta content="IE=edge" http-equiv="X-UA-Compatible"/>
  <title>
   Quote Tweets with a Node.js Twitter Bot
  </title>
  <meta content="" name="description"/>
  <meta content="True" name="HandheldFriendly"/>
  <meta content="width=device-width, initial-scale=1.0" name="viewport"/>
  <link href="/favicon.ico" rel="shortcut icon"/>
  <link href="/assets/css/screen.css?v=e9d8532c58" rel="stylesheet" type="text/css"/>
  <link href="//fonts.googleapis.com/css?family=Merriweather:300,700,700italic,300italic|Open+Sans:700,400" rel="stylesheet" type="text/css"/>
  <link href="http://markrabey.com/2014/06/10/quote-tweets-with-a-node-js-twitter-bot/" rel="canonical"/>
  <meta content="Mark Rabey" property="og:site_name"/>
  <meta content="article" property="og:type"/>
  <meta content="Quote Tweets with a Node.js Twitter Bot" property="og:title"/>
  <meta content="A short time ago I wrote about how to build a Twitter bot with Node.js. Making use of the Twitter API, I have a bot that searches for Tweets with either #CFML or #ColdFusion, then retweets the most recent..." property="og:description"/>
  <meta content="http://markrabey.com/2014/06/10/quote-tweets-with-a-node-js-twitter-bot/" property="og:url"/>
  <meta content="2014-06-10T13:48:44.000Z" property="article:published_time"/>
  <meta content="2014-06-10T13:48:44.000Z" property="article:modified_time"/>
  <meta content="javascript" property="article:tag"/>
  <meta content="node.js" property="article:tag"/>
  <meta content="twitter" property="article:tag"/>
  <meta content="summary" name="twitter:card"/>
  <meta content="Quote Tweets with a Node.js Twitter Bot" name="twitter:title"/>
  <meta content="A short time ago I wrote about how to build a Twitter bot with Node.js. Making use of the Twitter API, I have a bot that searches for Tweets with either #CFML or #ColdFusion, then retweets the most recent..." name="twitter:description"/>
  <meta content="http://markrabey.com/2014/06/10/quote-tweets-with-a-node-js-twitter-bot/" name="twitter:url"/>
  <script type="application/ld+json">
   {
    "@context": "http://schema.org",
    "@type": "Article",
    "publisher": "Mark Rabey",
    "author": {
        "@type": "Person",
        "name": "Mark Rabey",
        "image": "//www.gravatar.com/avatar/0811053e1746213d396488e2f1b36bd8?s=250&amp;d=mm&amp;r=x",
        "url": "http://markrabey.com/author/mark",
        "sameAs": null,
        "description": null
    },
    "headline": "Quote Tweets with a Node.js Twitter Bot",
    "url": "http://markrabey.com/2014/06/10/quote-tweets-with-a-node-js-twitter-bot/",
    "datePublished": "2014-06-10T13:48:44.000Z",
    "dateModified": "2014-06-10T13:48:44.000Z",
    "keywords": "javascript, node.js, twitter",
    "description": "A short time ago I wrote about how to build a Twitter bot with Node.js. Making use of the Twitter API, I have a bot that searches for Tweets with either #CFML or #ColdFusion, then retweets the most recent..."
}
  </script>
  <meta content="Ghost 0.6" name="generator"/>
  <link href="http://markrabey.com/rss/" rel="alternate" title="Mark Rabey" type="application/rss+xml"/>
 </head>
 <body class="post-template tag-javascript tag-node-js tag-twitter nav-closed">
  <div class="nav">
   <h3 class="nav-title">
    Menu
   </h3>
   <a class="nav-close" href="#">
    <span class="hidden">
     Close
    </span>
   </a>
   <ul>
    <li class="nav-home" role="presentation">
     <a href="http://markrabey.com/">
      Home
     </a>
    </li>
    <li class="nav-about-me" role="presentation">
     <a href="http://markrabey.com/about-me/">
      About Me
     </a>
    </li>
   </ul>
   <a class="subscribe-button icon-feed" href="http://markrabey.com/rss/">
    Subscribe
   </a>
  </div>
  <span class="nav-cover">
  </span>
  <div class="site-wrapper">
   <header class="main-header post-head no-cover">
    <nav class="main-nav clearfix">
     <a class="blog-logo" href="http://markrabey.com">
      <img alt="Blog Logo" src="/content/images/2015/05/logo.png"/>
     </a>
     <a class="menu-button icon-menu" href="#">
      <span class="word">
       Menu
      </span>
     </a>
    </nav>
   </header>
   <main class="content" role="main">
    <article class="post tag-javascript tag-node-js tag-twitter">
     <header class="post-header">
      <h1 class="post-title">
       Quote Tweets with a Node.js Twitter Bot
      </h1>
      <section class="post-meta">
       <time class="post-date" datetime="2014-06-10">
        10 June 2014
       </time>
       on
       <a href="/tag/javascript/">
        javascript
       </a>
       ,
       <a href="/tag/node-js/">
        node.js
       </a>
       ,
       <a href="/tag/twitter/">
        twitter
       </a>
      </section>
     </header>
     <section class="post-content">
      <p>
       A short time ago I wrote about
       <a href="/blog/2014/05/09/build-a-twitter-bot-with-node-js/">
        how to build a Twitter bot with Node.js
       </a>
       . Making use of the Twitter API, I have a bot that searches for Tweets with either #CFML or #ColdFusion, then retweets the most recent one. Pretty simple, and maybe not even 100% practical, but it's all I was looking to do. A reader asked me if it was possible to Quote Tweet rather than Retweet.
      </p>
      <hr/>
      <h2 id="whatsthedifference">
       What's the difference?
      </h2>
      <p>
       Nothing really. They're basically just 2 different ways to accomplish the same thing: share someone else's Tweet with your followers. The technical difference is, when retweeting, the original Tweet is left unmodified, with the same ID number, and simply shared with your followers, while quote Tweets are
       <em>
        copying
       </em>
       the text of a Tweet into a
       <em>
        new
       </em>
       Tweet that your followers see as being from
       <em>
        you
       </em>
       . Quote Tweets are a nice way to add your own comment to a Tweet, but can have issues since you're still limited to 140 characters.
      </p>
      <hr/>
      <h2 id="howdowedoitwiththeapi">
       How do we do it with the API?
      </h2>
      <p>
       Strictly speaking, you can't. There is not a direct API method for quote Tweets. You can, however, just build your own body to update your own status. From the original
       <a href="/blog/2014/05/09/build-a-twitter-bot-with-node-js/">
        bot I wrote
       </a>
       , the code looked like this:
      </p>
      <p>
       {% highlight javascript %}
var Twit = require('twit');
      </p>
      <p>
       var T = new Twit({
       <br/>
       consumer
       <em>
        key: '...'
    , consumer
       </em>
       secret: '...'
    , access
       <em>
        token: '...'
    , access
       </em>
       token_secret: '...'
});
      </p>
      <p>
       function retweetRecent() {
       <br/>
       T.get('search/tweets', {q: "#coldfusion OR #cfml", result
       <em>
        type: "recent"}, function (err, data,response) {
        if (!err) {
            var retweetId = data.statuses[0].id
       </em>
       str;
            T.post('statuses/retweet/' + retweetId, { }, function (err, response) {
                if (response) {
                    console.log('Retweeted Tweet ID: ' + retweetId);
                }
                if (err) {
                    console.log('Retweet Error: ', err);
                }
            });
        } else {
            console.log('Search Error: ', err);
        }
    });
}
retweetRecent();
       <br/>
       setInterval(retweetRecent, 1800000);
       <br/>
       {% endhighlight %}
      </p>
      <p>
       I'm not going to go into details on what everything is doing, for that read the
       <a href="/blog/2014/05/09/build-a-twitter-bot-with-node-js/">
        original post
       </a>
       . We need to look at the code inside of
       <code>
        if(!err) {...}
       </code>
       .
      </p>
      <p>
       {% highlight javascript %}
var retweetId = data.statuses[0].id_str;
       <br/>
       T.post('statuses/retweet/' + retweetId, { }, function (err, response) {
       <br/>
       if (response) {
        console.log('Retweeted Tweet ID: ' + retweetId);
    }
    if (err) {
        console.log('Retweet Error: ', err);
    }
});
{% endhighlight %}
      </p>
      <p>
       I changed a few things. First I removed
       <code>
        var retweetId = data.statuses[0].id_str;
       </code>
       . I don't need this the same way, but I would like the entire Tweet object I'm working with in a variable, so I don't need to keep referencing
       <code>
        data.statuses[0]
       </code>
       . Then, using that Tweet object, I built what will be the body of my status update:
      </p>
      <p>
       {% highlight javascript %}
var tweet = data.statuses[0];
       <br/>
       var retweetBody = 'RT @' + tweet.user.screen_name + ' ' + tweet.text;
       <br/>
       {% endhighlight %}
      </p>
      <p>
       Then, I changed the call to
       <code>
        T.post()
       </code>
       to use
       <code>
        statuses/update
       </code>
       , and pass in
       <code>
        retweetBody
       </code>
       . The callback function is basically the same, except I changed the working of the messages. Now the entire code looks like this:
      </p>
      <p>
       {% highlight javascript %}
var Twit = require('twit');
      </p>
      <p>
       var T = new Twit({
       <br/>
       consumer
       <em>
        key: '...'
    , consumer
       </em>
       secret: '...'
    , access
       <em>
        token: '...'
    , access
       </em>
       token_secret: '...'
});
      </p>
      <p>
       function retweetRecent() {
       <br/>
       T.get('search/tweets', {q: "#coldfusion OR #cfml", result
       <em>
        type: "recent"}, function (err, data,response) {
        if (!err) {
            var tweet = data.statuses[0];
            var retweetBody = 'RT @' + tweet.user.screen
       </em>
       name + ' ' + tweet.text;
            T.post('statuses/update',{status:retweetBody}, function (err,response) {
                if (response) {
                    console.log('Quote Tweeted Tweet ID: ' + tweet.id_str);
                }
                if (err) {
                    console.log('Quote Tweet Error: ', err);
                }
            });
        } else {
            console.log('Search Error: ', err);
        }
    });
}
      </p>
      <p>
       retweetRecent();
       <br/>
       setInterval(retweetRecent, 1800000);
       <br/>
       {% endhighlight %}
      </p>
      <p>
       I actually created a second file for this, and have updated the
       <a href="https://github.com/MarkRabey/node-twitter-bot" target="_blank">
        repository
       </a>
       with both files. To run the bot using Retweets, I can run
       <code>
        node retweet-bot
       </code>
       , or use Quote Tweets with
       <code>
        node quote-bot
       </code>
       .
      </p>
      <blockquote align="center" class="twitter-tweet" lang="en">
       <p>
        RT
        <a href="https://twitter.com/RashmiRnSethy">
         @RashmiRnSethy
        </a>
        How Can
        <a href="https://twitter.com/search?q=%23Coldfusion&amp;src=hash">
         #Coldfusion
        </a>
        Builder 3 Give You A Better Experience With Coldfusion 11?
        <a href="http://t.co/O8MJv40nkw">
         http://t.co/O8MJv40nkw
        </a>
       </p>
        CFML Bot (@CFMLBot)
       <a href="https://twitter.com/CFMLBot/statuses/476352651383554048">
        June 10, 2014
       </a>
      </blockquote>
      <script async="" charset="utf-8" src="//platform.twitter.com/widgets.js">
      </script>
      <hr/>
      <h2 id="limited">
       LIMITED!
      </h2>
      <p>
       You are still limited to 140 characters! If resulting quote is longer than 140 characters, you will get an error. It's not a big deal, the next one might work. The bot doesn't stop running or anything like that, it just doesn't Tweet anything that time around. Alternatively, you could write it to do a regular Retweet instead if the character count is too long.
      </p>
     </section>
     <footer class="post-footer">
      <figure class="author-image">
       <a class="img" href="/author/mark/" style="background-image: url(//www.gravatar.com/avatar/0811053e1746213d396488e2f1b36bd8?s=250&amp;d=mm&amp;r=x)">
        <span class="hidden">
         Mark Rabey's Picture
        </span>
       </a>
      </figure>
      <section class="author">
       <h4>
        <a href="/author/mark/">
         Mark Rabey
        </a>
       </h4>
       <p>
        Read
        <a href="/author/mark/">
         more posts
        </a>
        by this author.
       </p>
       <div class="author-meta">
       </div>
      </section>
      <section class="share">
       <h4>
        Share this post
       </h4>
       <a class="icon-twitter" href="https://twitter.com/share?text=Quote%20Tweets%20with%20a%20Node.js%20Twitter%20Bot&amp;url=http://markrabey.com/2014/06/10/quote-tweets-with-a-node-js-twitter-bot/" onclick="window.open(this.href, 'twitter-share', 'width=550,height=235');return false;">
        <span class="hidden">
         Twitter
        </span>
       </a>
       <a class="icon-facebook" href="https://www.facebook.com/sharer/sharer.php?u=http://markrabey.com/2014/06/10/quote-tweets-with-a-node-js-twitter-bot/" onclick="window.open(this.href, 'facebook-share','width=580,height=296');return false;">
        <span class="hidden">
         Facebook
        </span>
       </a>
       <a class="icon-google-plus" href="https://plus.google.com/share?url=http://markrabey.com/2014/06/10/quote-tweets-with-a-node-js-twitter-bot/" onclick="window.open(this.href, 'google-plus-share', 'width=490,height=530');return false;">
        <span class="hidden">
         Google+
        </span>
       </a>
      </section>
      <section>
       <div id="disqus_thread">
       </div>
       <script type="text/javascript">
        var disqus_shortname = 'mrabey1983'; // required: replace example with your forum shortname
    var disqus_identifier = '';
 
    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
       </script>
       <noscript>
        Please enable JavaScript to view the
        <a href="http://disqus.com/?ref_noscript">
         comments powered by Disqus.
        </a>
       </noscript>
       <a class="dsq-brlink" href="http://disqus.com">
        comments powered by
        <span class="logo-disqus">
         Disqus
        </span>
       </a>
      </section>
     </footer>
    </article>
   </main>
   <aside class="read-next">
    <a class="read-next-story no-cover" href="/2014/06/12/keep-it-simple/">
     <section class="post">
      <h2>
       Keep it simple
      </h2>
      <p>
       I started out by want to create a simple CSS grid. Eventually I decided to turn that into a
      </p>
     </section>
    </a>
    <a class="read-next-story prev no-cover" href="/2014/05/29/should-designers-and-developers-work-for-free/">
     <section class="post">
      <h2>
       Should designers and developers work for free?
      </h2>
      <p>
       I'm a web developer, and my wife is a graphic designer. Over the years I have seen a very
      </p>
     </section>
    </a>
   </aside>
   <footer class="site-footer clearfix">
    <section class="copyright">
     <a href="http://markrabey.com">
      Mark Rabey
     </a>
      2015
    </section>
    <section class="poweredby">
     Proudly published with
     <a href="https://ghost.org">
      Ghost
     </a>
    </section>
   </footer>
  </div>
  <script src="/public/jquery.min.js?v=e9d8532c58">
  </script>
  <script>
   (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-45432533-2', 'auto');
  ga('send', 'pageview');
  </script>
  <script src="/assets/js/jquery.fitvids.js?v=e9d8532c58" type="text/javascript">
  </script>
  <script src="/assets/js/index.js?v=e9d8532c58" type="text/javascript">
  </script>
 </body>
</html>